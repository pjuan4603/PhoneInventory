{"ast":null,"code":"/* Tabulator v6.2.0 (c) Oliver Folkerd 2024 */\nclass CoreFeature {\n  constructor(table) {\n    this.table = table;\n  }\n\n  //////////////////////////////////////////\n  /////////////// DataLoad /////////////////\n  //////////////////////////////////////////\n\n  reloadData(data, silent, columnsChanged) {\n    return this.table.dataLoader.load(data, undefined, undefined, undefined, silent, columnsChanged);\n  }\n\n  //////////////////////////////////////////\n  ///////////// Localization ///////////////\n  //////////////////////////////////////////\n\n  langText() {\n    return this.table.modules.localize.getText(...arguments);\n  }\n  langBind() {\n    return this.table.modules.localize.bind(...arguments);\n  }\n  langLocale() {\n    return this.table.modules.localize.getLocale(...arguments);\n  }\n\n  //////////////////////////////////////////\n  ////////// Inter Table Comms /////////////\n  //////////////////////////////////////////\n\n  commsConnections() {\n    return this.table.modules.comms.getConnections(...arguments);\n  }\n  commsSend() {\n    return this.table.modules.comms.send(...arguments);\n  }\n\n  //////////////////////////////////////////\n  //////////////// Layout  /////////////////\n  //////////////////////////////////////////\n\n  layoutMode() {\n    return this.table.modules.layout.getMode();\n  }\n  layoutRefresh(force) {\n    return this.table.modules.layout.layout(force);\n  }\n\n  //////////////////////////////////////////\n  /////////////// Event Bus ////////////////\n  //////////////////////////////////////////\n\n  subscribe() {\n    return this.table.eventBus.subscribe(...arguments);\n  }\n  unsubscribe() {\n    return this.table.eventBus.unsubscribe(...arguments);\n  }\n  subscribed(key) {\n    return this.table.eventBus.subscribed(key);\n  }\n  subscriptionChange() {\n    return this.table.eventBus.subscriptionChange(...arguments);\n  }\n  dispatch() {\n    return this.table.eventBus.dispatch(...arguments);\n  }\n  chain() {\n    return this.table.eventBus.chain(...arguments);\n  }\n  confirm() {\n    return this.table.eventBus.confirm(...arguments);\n  }\n  dispatchExternal() {\n    return this.table.externalEvents.dispatch(...arguments);\n  }\n  subscribedExternal(key) {\n    return this.table.externalEvents.subscribed(key);\n  }\n  subscriptionChangeExternal() {\n    return this.table.externalEvents.subscriptionChange(...arguments);\n  }\n\n  //////////////////////////////////////////\n  //////////////// Options /////////////////\n  //////////////////////////////////////////\n\n  options(key) {\n    return this.table.options[key];\n  }\n  setOption(key, value) {\n    if (typeof value !== \"undefined\") {\n      this.table.options[key] = value;\n    }\n    return this.table.options[key];\n  }\n\n  //////////////////////////////////////////\n  /////////// Deprecation Checks ///////////\n  //////////////////////////////////////////\n\n  deprecationCheck(oldOption, newOption, convert) {\n    return this.table.deprecationAdvisor.check(oldOption, newOption, convert);\n  }\n  deprecationCheckMsg(oldOption, msg) {\n    return this.table.deprecationAdvisor.checkMsg(oldOption, msg);\n  }\n  deprecationMsg(msg) {\n    return this.table.deprecationAdvisor.msg(msg);\n  }\n  //////////////////////////////////////////\n  //////////////// Modules /////////////////\n  //////////////////////////////////////////\n\n  module(key) {\n    return this.table.module(key);\n  }\n}\nclass Helpers {\n  static elVisible(el) {\n    return !(el.offsetWidth <= 0 && el.offsetHeight <= 0);\n  }\n  static elOffset(el) {\n    var box = el.getBoundingClientRect();\n    return {\n      top: box.top + window.pageYOffset - document.documentElement.clientTop,\n      left: box.left + window.pageXOffset - document.documentElement.clientLeft\n    };\n  }\n  static retrieveNestedData(separator, field, data) {\n    var structure = separator ? field.split(separator) : [field],\n      length = structure.length,\n      output;\n    for (let i = 0; i < length; i++) {\n      data = data[structure[i]];\n      output = data;\n      if (!data) {\n        break;\n      }\n    }\n    return output;\n  }\n  static deepClone(obj, clone, list = []) {\n    var objectProto = {}.__proto__,\n      arrayProto = [].__proto__;\n    if (!clone) {\n      clone = Object.assign(Array.isArray(obj) ? [] : {}, obj);\n    }\n    for (var i in obj) {\n      let subject = obj[i],\n        match,\n        copy;\n      if (subject != null && typeof subject === \"object\" && (subject.__proto__ === objectProto || subject.__proto__ === arrayProto)) {\n        match = list.findIndex(item => {\n          return item.subject === subject;\n        });\n        if (match > -1) {\n          clone[i] = list[match].copy;\n        } else {\n          copy = Object.assign(Array.isArray(subject) ? [] : {}, subject);\n          list.unshift({\n            subject,\n            copy\n          });\n          clone[i] = this.deepClone(subject, copy, list);\n        }\n      }\n    }\n    return clone;\n  }\n}\nlet Popup$1 = class Popup extends CoreFeature {\n  constructor(table, element, parent) {\n    super(table);\n    this.element = element;\n    this.container = this._lookupContainer();\n    this.parent = parent;\n    this.reversedX = false;\n    this.childPopup = null;\n    this.blurable = false;\n    this.blurCallback = null;\n    this.blurEventsBound = false;\n    this.renderedCallback = null;\n    this.visible = false;\n    this.hideable = true;\n    this.element.classList.add(\"tabulator-popup-container\");\n    this.blurEvent = this.hide.bind(this, false);\n    this.escEvent = this._escapeCheck.bind(this);\n    this.destroyBinding = this.tableDestroyed.bind(this);\n    this.destroyed = false;\n  }\n  tableDestroyed() {\n    this.destroyed = true;\n    this.hide(true);\n  }\n  _lookupContainer() {\n    var container = this.table.options.popupContainer;\n    if (typeof container === \"string\") {\n      container = document.querySelector(container);\n      if (!container) {\n        console.warn(\"Menu Error - no container element found matching selector:\", this.table.options.popupContainer, \"(defaulting to document body)\");\n      }\n    } else if (container === true) {\n      container = this.table.element;\n    }\n    if (container && !this._checkContainerIsParent(container)) {\n      container = false;\n      console.warn(\"Menu Error - container element does not contain this table:\", this.table.options.popupContainer, \"(defaulting to document body)\");\n    }\n    if (!container) {\n      container = document.body;\n    }\n    return container;\n  }\n  _checkContainerIsParent(container, element = this.table.element) {\n    if (container === element) {\n      return true;\n    } else {\n      return element.parentNode ? this._checkContainerIsParent(container, element.parentNode) : false;\n    }\n  }\n  renderCallback(callback) {\n    this.renderedCallback = callback;\n  }\n  containerEventCoords(e) {\n    var touch = !(e instanceof MouseEvent);\n    var x = touch ? e.touches[0].pageX : e.pageX;\n    var y = touch ? e.touches[0].pageY : e.pageY;\n    if (this.container !== document.body) {\n      let parentOffset = Helpers.elOffset(this.container);\n      x -= parentOffset.left;\n      y -= parentOffset.top;\n    }\n    return {\n      x,\n      y\n    };\n  }\n  elementPositionCoords(element, position = \"right\") {\n    var offset = Helpers.elOffset(element),\n      containerOffset,\n      x,\n      y;\n    if (this.container !== document.body) {\n      containerOffset = Helpers.elOffset(this.container);\n      offset.left -= containerOffset.left;\n      offset.top -= containerOffset.top;\n    }\n    switch (position) {\n      case \"right\":\n        x = offset.left + element.offsetWidth;\n        y = offset.top - 1;\n        break;\n      case \"bottom\":\n        x = offset.left;\n        y = offset.top + element.offsetHeight;\n        break;\n      case \"left\":\n        x = offset.left;\n        y = offset.top - 1;\n        break;\n      case \"top\":\n        x = offset.left;\n        y = offset.top;\n        break;\n      case \"center\":\n        x = offset.left + element.offsetWidth / 2;\n        y = offset.top + element.offsetHeight / 2;\n        break;\n    }\n    return {\n      x,\n      y,\n      offset\n    };\n  }\n  show(origin, position) {\n    var x, y, parentEl, parentOffset, coords;\n    if (this.destroyed || this.table.destroyed) {\n      return this;\n    }\n    if (origin instanceof HTMLElement) {\n      parentEl = origin;\n      coords = this.elementPositionCoords(origin, position);\n      parentOffset = coords.offset;\n      x = coords.x;\n      y = coords.y;\n    } else if (typeof origin === \"number\") {\n      parentOffset = {\n        top: 0,\n        left: 0\n      };\n      x = origin;\n      y = position;\n    } else {\n      coords = this.containerEventCoords(origin);\n      x = coords.x;\n      y = coords.y;\n      this.reversedX = false;\n    }\n    this.element.style.top = y + \"px\";\n    this.element.style.left = x + \"px\";\n    this.container.appendChild(this.element);\n    if (typeof this.renderedCallback === \"function\") {\n      this.renderedCallback();\n    }\n    this._fitToScreen(x, y, parentEl, parentOffset, position);\n    this.visible = true;\n    this.subscribe(\"table-destroy\", this.destroyBinding);\n    this.element.addEventListener(\"mousedown\", e => {\n      e.stopPropagation();\n    });\n    return this;\n  }\n  _fitToScreen(x, y, parentEl, parentOffset, position) {\n    var scrollTop = this.container === document.body ? document.documentElement.scrollTop : this.container.scrollTop;\n\n    //move menu to start on right edge if it is too close to the edge of the screen\n    if (x + this.element.offsetWidth >= this.container.offsetWidth || this.reversedX) {\n      this.element.style.left = \"\";\n      if (parentEl) {\n        this.element.style.right = this.container.offsetWidth - parentOffset.left + \"px\";\n      } else {\n        this.element.style.right = this.container.offsetWidth - x + \"px\";\n      }\n      this.reversedX = true;\n    }\n\n    //move menu to start on bottom edge if it is too close to the edge of the screen\n    if (y + this.element.offsetHeight > Math.max(this.container.offsetHeight, scrollTop ? this.container.scrollHeight : 0)) {\n      if (parentEl) {\n        switch (position) {\n          case \"bottom\":\n            this.element.style.top = parseInt(this.element.style.top) - this.element.offsetHeight - parentEl.offsetHeight - 1 + \"px\";\n            break;\n          default:\n            this.element.style.top = parseInt(this.element.style.top) - this.element.offsetHeight + parentEl.offsetHeight + 1 + \"px\";\n        }\n      } else {\n        this.element.style.top = parseInt(this.element.style.top) - this.element.offsetHeight + \"px\";\n      }\n    }\n  }\n  isVisible() {\n    return this.visible;\n  }\n  hideOnBlur(callback) {\n    this.blurable = true;\n    if (this.visible) {\n      setTimeout(() => {\n        if (this.visible) {\n          this.table.rowManager.element.addEventListener(\"scroll\", this.blurEvent);\n          this.subscribe(\"cell-editing\", this.blurEvent);\n          document.body.addEventListener(\"click\", this.blurEvent);\n          document.body.addEventListener(\"contextmenu\", this.blurEvent);\n          document.body.addEventListener(\"mousedown\", this.blurEvent);\n          window.addEventListener(\"resize\", this.blurEvent);\n          document.body.addEventListener(\"keydown\", this.escEvent);\n          this.blurEventsBound = true;\n        }\n      }, 100);\n      this.blurCallback = callback;\n    }\n    return this;\n  }\n  _escapeCheck(e) {\n    if (e.keyCode == 27) {\n      this.hide();\n    }\n  }\n  blockHide() {\n    this.hideable = false;\n  }\n  restoreHide() {\n    this.hideable = true;\n  }\n  hide(silent = false) {\n    if (this.visible && this.hideable) {\n      if (this.blurable && this.blurEventsBound) {\n        document.body.removeEventListener(\"keydown\", this.escEvent);\n        document.body.removeEventListener(\"click\", this.blurEvent);\n        document.body.removeEventListener(\"contextmenu\", this.blurEvent);\n        document.body.removeEventListener(\"mousedown\", this.blurEvent);\n        window.removeEventListener(\"resize\", this.blurEvent);\n        this.table.rowManager.element.removeEventListener(\"scroll\", this.blurEvent);\n        this.unsubscribe(\"cell-editing\", this.blurEvent);\n        this.blurEventsBound = false;\n      }\n      if (this.childPopup) {\n        this.childPopup.hide();\n      }\n      if (this.parent) {\n        this.parent.childPopup = null;\n      }\n      if (this.element.parentNode) {\n        this.element.parentNode.removeChild(this.element);\n      }\n      this.visible = false;\n      if (this.blurCallback && !silent) {\n        this.blurCallback();\n      }\n      this.unsubscribe(\"table-destroy\", this.destroyBinding);\n    }\n    return this;\n  }\n  child(element) {\n    if (this.childPopup) {\n      this.childPopup.hide();\n    }\n    this.childPopup = new Popup(this.table, element, this);\n    return this.childPopup;\n  }\n};\nclass Module extends CoreFeature {\n  constructor(table, name) {\n    super(table);\n    this._handler = null;\n  }\n  initialize() {\n    // setup module when table is initialized, to be overridden in module\n  }\n\n  ///////////////////////////////////\n  ////// Options Registration ///////\n  ///////////////////////////////////\n\n  registerTableOption(key, value) {\n    this.table.optionsList.register(key, value);\n  }\n  registerColumnOption(key, value) {\n    this.table.columnManager.optionsList.register(key, value);\n  }\n\n  ///////////////////////////////////\n  /// Public Function Registration ///\n  ///////////////////////////////////\n\n  registerTableFunction(name, func) {\n    if (typeof this.table[name] === \"undefined\") {\n      this.table[name] = (...args) => {\n        this.table.initGuard(name);\n        return func(...args);\n      };\n    } else {\n      console.warn(\"Unable to bind table function, name already in use\", name);\n    }\n  }\n  registerComponentFunction(component, func, handler) {\n    return this.table.componentFunctionBinder.bind(component, func, handler);\n  }\n\n  ///////////////////////////////////\n  ////////// Data Pipeline //////////\n  ///////////////////////////////////\n\n  registerDataHandler(handler, priority) {\n    this.table.rowManager.registerDataPipelineHandler(handler, priority);\n    this._handler = handler;\n  }\n  registerDisplayHandler(handler, priority) {\n    this.table.rowManager.registerDisplayPipelineHandler(handler, priority);\n    this._handler = handler;\n  }\n  displayRows(adjust) {\n    var index = this.table.rowManager.displayRows.length - 1,\n      lookupIndex;\n    if (this._handler) {\n      lookupIndex = this.table.rowManager.displayPipeline.findIndex(item => {\n        return item.handler === this._handler;\n      });\n      if (lookupIndex > -1) {\n        index = lookupIndex;\n      }\n    }\n    if (adjust) {\n      index = index + adjust;\n    }\n    if (this._handler) {\n      if (index > -1) {\n        return this.table.rowManager.getDisplayRows(index);\n      } else {\n        return this.activeRows();\n      }\n    }\n  }\n  activeRows() {\n    return this.table.rowManager.activeRows;\n  }\n  refreshData(renderInPosition, handler) {\n    if (!handler) {\n      handler = this._handler;\n    }\n    if (handler) {\n      this.table.rowManager.refreshActiveData(handler, false, renderInPosition);\n    }\n  }\n\n  ///////////////////////////////////\n  //////// Footer Management ////////\n  ///////////////////////////////////\n\n  footerAppend(element) {\n    return this.table.footerManager.append(element);\n  }\n  footerPrepend(element) {\n    return this.table.footerManager.prepend(element);\n  }\n  footerRemove(element) {\n    return this.table.footerManager.remove(element);\n  }\n\n  ///////////////////////////////////\n  //////// Popups Management ////////\n  ///////////////////////////////////\n\n  popup(menuEl, menuContainer) {\n    return new Popup$1(this.table, menuEl, menuContainer);\n  }\n\n  ///////////////////////////////////\n  //////// Alert Management ////////\n  ///////////////////////////////////\n\n  alert(content, type) {\n    return this.table.alertManager.alert(content, type);\n  }\n  clearAlert() {\n    return this.table.alertManager.clear();\n  }\n}\nvar defaultAccessors = {\n  rownum: function (value, data, type, params, column, row) {\n    return row.getPosition();\n  }\n};\nclass Accessor extends Module {\n  static moduleName = \"accessor\";\n\n  //load defaults\n  static accessors = defaultAccessors;\n  constructor(table) {\n    super(table);\n    this.allowedTypes = [\"\", \"data\", \"download\", \"clipboard\", \"print\", \"htmlOutput\"]; //list of accessor types\n\n    this.registerColumnOption(\"accessor\");\n    this.registerColumnOption(\"accessorParams\");\n    this.registerColumnOption(\"accessorData\");\n    this.registerColumnOption(\"accessorDataParams\");\n    this.registerColumnOption(\"accessorDownload\");\n    this.registerColumnOption(\"accessorDownloadParams\");\n    this.registerColumnOption(\"accessorClipboard\");\n    this.registerColumnOption(\"accessorClipboardParams\");\n    this.registerColumnOption(\"accessorPrint\");\n    this.registerColumnOption(\"accessorPrintParams\");\n    this.registerColumnOption(\"accessorHtmlOutput\");\n    this.registerColumnOption(\"accessorHtmlOutputParams\");\n  }\n  initialize() {\n    this.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n    this.subscribe(\"row-data-retrieve\", this.transformRow.bind(this));\n  }\n\n  //initialize column accessor\n  initializeColumn(column) {\n    var match = false,\n      config = {};\n    this.allowedTypes.forEach(type => {\n      var key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n        accessor;\n      if (column.definition[key]) {\n        accessor = this.lookupAccessor(column.definition[key]);\n        if (accessor) {\n          match = true;\n          config[key] = {\n            accessor: accessor,\n            params: column.definition[key + \"Params\"] || {}\n          };\n        }\n      }\n    });\n    if (match) {\n      column.modules.accessor = config;\n    }\n  }\n  lookupAccessor(value) {\n    var accessor = false;\n\n    //set column accessor\n    switch (typeof value) {\n      case \"string\":\n        if (Accessor.accessors[value]) {\n          accessor = Accessor.accessors[value];\n        } else {\n          console.warn(\"Accessor Error - No such accessor found, ignoring: \", value);\n        }\n        break;\n      case \"function\":\n        accessor = value;\n        break;\n    }\n    return accessor;\n  }\n\n  //apply accessor to row\n  transformRow(row, type) {\n    var key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n      rowComponent = row.getComponent();\n\n    //clone data object with deep copy to isolate internal data from returned result\n    var data = Helpers.deepClone(row.data || {});\n    this.table.columnManager.traverse(function (column) {\n      var value, accessor, params, colComponent;\n      if (column.modules.accessor) {\n        accessor = column.modules.accessor[key] || column.modules.accessor.accessor || false;\n        if (accessor) {\n          value = column.getFieldValue(data);\n          if (value != \"undefined\") {\n            colComponent = column.getComponent();\n            params = typeof accessor.params === \"function\" ? accessor.params(value, data, type, colComponent, rowComponent) : accessor.params;\n            column.setFieldValue(data, accessor.accessor(value, data, type, params, colComponent, rowComponent));\n          }\n        }\n      }\n    });\n    return data;\n  }\n}\nvar defaultConfig = {\n  method: \"GET\"\n};\nfunction generateParamsList$1(data, prefix) {\n  var output = [];\n  prefix = prefix || \"\";\n  if (Array.isArray(data)) {\n    data.forEach((item, i) => {\n      output = output.concat(generateParamsList$1(item, prefix ? prefix + \"[\" + i + \"]\" : i));\n    });\n  } else if (typeof data === \"object\") {\n    for (var key in data) {\n      output = output.concat(generateParamsList$1(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\n    }\n  } else {\n    output.push({\n      key: prefix,\n      value: data\n    });\n  }\n  return output;\n}\nfunction serializeParams(params) {\n  var output = generateParamsList$1(params),\n    encoded = [];\n  output.forEach(function (item) {\n    encoded.push(encodeURIComponent(item.key) + \"=\" + encodeURIComponent(item.value));\n  });\n  return encoded.join(\"&\");\n}\nfunction urlBuilder(url, config, params) {\n  if (url) {\n    if (params && Object.keys(params).length) {\n      if (!config.method || config.method.toLowerCase() == \"get\") {\n        config.method = \"get\";\n        url += (url.includes(\"?\") ? \"&\" : \"?\") + serializeParams(params);\n      }\n    }\n  }\n  return url;\n}\nfunction defaultLoaderPromise(url, config, params) {\n  var contentType;\n  return new Promise((resolve, reject) => {\n    //set url\n    url = this.urlGenerator.call(this.table, url, config, params);\n\n    //set body content if not GET request\n    if (config.method.toUpperCase() != \"GET\") {\n      contentType = typeof this.table.options.ajaxContentType === \"object\" ? this.table.options.ajaxContentType : this.contentTypeFormatters[this.table.options.ajaxContentType];\n      if (contentType) {\n        for (var key in contentType.headers) {\n          if (!config.headers) {\n            config.headers = {};\n          }\n          if (typeof config.headers[key] === \"undefined\") {\n            config.headers[key] = contentType.headers[key];\n          }\n        }\n        config.body = contentType.body.call(this, url, config, params);\n      } else {\n        console.warn(\"Ajax Error - Invalid ajaxContentType value:\", this.table.options.ajaxContentType);\n      }\n    }\n    if (url) {\n      //configure headers\n      if (typeof config.headers === \"undefined\") {\n        config.headers = {};\n      }\n      if (typeof config.headers.Accept === \"undefined\") {\n        config.headers.Accept = \"application/json\";\n      }\n      if (typeof config.headers[\"X-Requested-With\"] === \"undefined\") {\n        config.headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\n      }\n      if (typeof config.mode === \"undefined\") {\n        config.mode = \"cors\";\n      }\n      if (config.mode == \"cors\") {\n        if (typeof config.headers[\"Origin\"] === \"undefined\") {\n          config.headers[\"Origin\"] = window.location.origin;\n        }\n        if (typeof config.credentials === \"undefined\") {\n          config.credentials = 'same-origin';\n        }\n      } else {\n        if (typeof config.credentials === \"undefined\") {\n          config.credentials = 'include';\n        }\n      }\n\n      //send request\n      fetch(url, config).then(response => {\n        if (response.ok) {\n          response.json().then(data => {\n            resolve(data);\n          }).catch(error => {\n            reject(error);\n            console.warn(\"Ajax Load Error - Invalid JSON returned\", error);\n          });\n        } else {\n          console.error(\"Ajax Load Error - Connection Error: \" + response.status, response.statusText);\n          reject(response);\n        }\n      }).catch(error => {\n        console.error(\"Ajax Load Error - Connection Error: \", error);\n        reject(error);\n      });\n    } else {\n      console.warn(\"Ajax Load Error - No URL Set\");\n      resolve([]);\n    }\n  });\n}\nfunction generateParamsList(data, prefix) {\n  var output = [];\n  prefix = prefix || \"\";\n  if (Array.isArray(data)) {\n    data.forEach((item, i) => {\n      output = output.concat(generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\n    });\n  } else if (typeof data === \"object\") {\n    for (var key in data) {\n      output = output.concat(generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\n    }\n  } else {\n    output.push({\n      key: prefix,\n      value: data\n    });\n  }\n  return output;\n}\nvar defaultContentTypeFormatters = {\n  \"json\": {\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: function (url, config, params) {\n      return JSON.stringify(params);\n    }\n  },\n  \"form\": {\n    headers: {},\n    body: function (url, config, params) {\n      var output = generateParamsList(params),\n        form = new FormData();\n      output.forEach(function (item) {\n        form.append(item.key, item.value);\n      });\n      return form;\n    }\n  }\n};\nclass Ajax extends Module {\n  static moduleName = \"ajax\";\n\n  //load defaults\n  static defaultConfig = defaultConfig;\n  static defaultURLGenerator = urlBuilder;\n  static defaultLoaderPromise = defaultLoaderPromise;\n  static contentTypeFormatters = defaultContentTypeFormatters;\n  constructor(table) {\n    super(table);\n    this.config = {}; //hold config object for ajax request\n    this.url = \"\"; //request URL\n    this.urlGenerator = false;\n    this.params = false; //request parameters\n\n    this.loaderPromise = false;\n    this.registerTableOption(\"ajaxURL\", false); //url for ajax loading\n    this.registerTableOption(\"ajaxURLGenerator\", false);\n    this.registerTableOption(\"ajaxParams\", {}); //params for ajax loading\n    this.registerTableOption(\"ajaxConfig\", \"get\"); //ajax request type\n    this.registerTableOption(\"ajaxContentType\", \"form\"); //ajax request type\n    this.registerTableOption(\"ajaxRequestFunc\", false); //promise function\n\n    this.registerTableOption(\"ajaxRequesting\", function () {});\n    this.registerTableOption(\"ajaxResponse\", false);\n    this.contentTypeFormatters = Ajax.contentTypeFormatters;\n  }\n\n  //initialize setup options\n  initialize() {\n    this.loaderPromise = this.table.options.ajaxRequestFunc || Ajax.defaultLoaderPromise;\n    this.urlGenerator = this.table.options.ajaxURLGenerator || Ajax.defaultURLGenerator;\n    if (this.table.options.ajaxURL) {\n      this.setUrl(this.table.options.ajaxURL);\n    }\n    this.setDefaultConfig(this.table.options.ajaxConfig);\n    this.registerTableFunction(\"getAjaxUrl\", this.getUrl.bind(this));\n    this.subscribe(\"data-loading\", this.requestDataCheck.bind(this));\n    this.subscribe(\"data-params\", this.requestParams.bind(this));\n    this.subscribe(\"data-load\", this.requestData.bind(this));\n  }\n  requestParams(data, config, silent, params) {\n    var ajaxParams = this.table.options.ajaxParams;\n    if (ajaxParams) {\n      if (typeof ajaxParams === \"function\") {\n        ajaxParams = ajaxParams.call(this.table);\n      }\n      params = Object.assign(Object.assign({}, ajaxParams), params);\n    }\n    return params;\n  }\n  requestDataCheck(data, params, config, silent) {\n    return !!(!data && this.url || typeof data === \"string\");\n  }\n  requestData(url, params, config, silent, previousData) {\n    var ajaxConfig;\n    if (!previousData && this.requestDataCheck(url)) {\n      if (url) {\n        this.setUrl(url);\n      }\n      ajaxConfig = this.generateConfig(config);\n      return this.sendRequest(this.url, params, ajaxConfig);\n    } else {\n      return previousData;\n    }\n  }\n  setDefaultConfig(config = {}) {\n    this.config = Object.assign({}, Ajax.defaultConfig);\n    if (typeof config == \"string\") {\n      this.config.method = config;\n    } else {\n      Object.assign(this.config, config);\n    }\n  }\n\n  //load config object\n  generateConfig(config = {}) {\n    var ajaxConfig = Object.assign({}, this.config);\n    if (typeof config == \"string\") {\n      ajaxConfig.method = config;\n    } else {\n      Object.assign(ajaxConfig, config);\n    }\n    return ajaxConfig;\n  }\n\n  //set request url\n  setUrl(url) {\n    this.url = url;\n  }\n\n  //get request url\n  getUrl() {\n    return this.url;\n  }\n\n  //send ajax request\n  sendRequest(url, params, config) {\n    if (this.table.options.ajaxRequesting.call(this.table, url, params) !== false) {\n      return this.loaderPromise(url, config, params).then(data => {\n        if (this.table.options.ajaxResponse) {\n          data = this.table.options.ajaxResponse.call(this.table, url, params, data);\n        }\n        return data;\n      });\n    } else {\n      return Promise.reject();\n    }\n  }\n}\nvar defaultPasteActions = {\n  replace: function (data) {\n    return this.table.setData(data);\n  },\n  update: function (data) {\n    return this.table.updateOrAddData(data);\n  },\n  insert: function (data) {\n    return this.table.addData(data);\n  }\n};\nvar defaultPasteParsers = {\n  table: function (clipboard) {\n    var data = [],\n      headerFindSuccess = true,\n      columns = this.table.columnManager.columns,\n      columnMap = [],\n      rows = [];\n\n    //get data from clipboard into array of columns and rows.\n    clipboard = clipboard.split(\"\\n\");\n    clipboard.forEach(function (row) {\n      data.push(row.split(\"\\t\"));\n    });\n    if (data.length && !(data.length === 1 && data[0].length < 2)) {\n      //check if headers are present by title\n      data[0].forEach(function (value) {\n        var column = columns.find(function (column) {\n          return value && column.definition.title && value.trim() && column.definition.title.trim() === value.trim();\n        });\n        if (column) {\n          columnMap.push(column);\n        } else {\n          headerFindSuccess = false;\n        }\n      });\n\n      //check if column headers are present by field\n      if (!headerFindSuccess) {\n        headerFindSuccess = true;\n        columnMap = [];\n        data[0].forEach(function (value) {\n          var column = columns.find(function (column) {\n            return value && column.field && value.trim() && column.field.trim() === value.trim();\n          });\n          if (column) {\n            columnMap.push(column);\n          } else {\n            headerFindSuccess = false;\n          }\n        });\n        if (!headerFindSuccess) {\n          columnMap = this.table.columnManager.columnsByIndex;\n        }\n      }\n\n      //remove header row if found\n      if (headerFindSuccess) {\n        data.shift();\n      }\n      data.forEach(function (item) {\n        var row = {};\n        item.forEach(function (value, i) {\n          if (columnMap[i]) {\n            row[columnMap[i].field] = value;\n          }\n        });\n        rows.push(row);\n      });\n      return rows;\n    } else {\n      return false;\n    }\n  }\n};\nvar bindings$2 = {\n  copyToClipboard: [\"ctrl + 67\", \"meta + 67\"]\n};\nvar actions$2 = {\n  copyToClipboard: function (e) {\n    if (!this.table.modules.edit.currentCell) {\n      if (this.table.modExists(\"clipboard\", true)) {\n        this.table.modules.clipboard.copy(false, true);\n      }\n    }\n  }\n};\nvar extensions$4 = {\n  keybindings: {\n    bindings: bindings$2,\n    actions: actions$2\n  }\n};\nclass Clipboard extends Module {\n  static moduleName = \"clipboard\";\n  static moduleExtensions = extensions$4;\n\n  //load defaults\n  static pasteActions = defaultPasteActions;\n  static pasteParsers = defaultPasteParsers;\n  constructor(table) {\n    super(table);\n    this.mode = true;\n    this.pasteParser = function () {};\n    this.pasteAction = function () {};\n    this.customSelection = false;\n    this.rowRange = false;\n    this.blocked = true; //block copy actions not originating from this command\n\n    this.registerTableOption(\"clipboard\", false); //enable clipboard\n    this.registerTableOption(\"clipboardCopyStyled\", true); //formatted table data\n    this.registerTableOption(\"clipboardCopyConfig\", false); //clipboard config\n    this.registerTableOption(\"clipboardCopyFormatter\", false); //DEPRECATED - REMOVE in 5.0\n    this.registerTableOption(\"clipboardCopyRowRange\", \"active\"); //restrict clipboard to visible rows only\n    this.registerTableOption(\"clipboardPasteParser\", \"table\"); //convert pasted clipboard data to rows\n    this.registerTableOption(\"clipboardPasteAction\", \"insert\"); //how to insert pasted data into the table\n\n    this.registerColumnOption(\"clipboard\");\n    this.registerColumnOption(\"titleClipboard\");\n  }\n  initialize() {\n    this.mode = this.table.options.clipboard;\n    this.rowRange = this.table.options.clipboardCopyRowRange;\n    if (this.mode === true || this.mode === \"copy\") {\n      this.table.element.addEventListener(\"copy\", e => {\n        var plain, html, list;\n        if (!this.blocked) {\n          e.preventDefault();\n          if (this.customSelection) {\n            plain = this.customSelection;\n            if (this.table.options.clipboardCopyFormatter) {\n              plain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\n            }\n          } else {\n            list = this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig, this.table.options.clipboardCopyStyled, this.rowRange, \"clipboard\");\n            html = this.table.modules.export.generateHTMLTable(list);\n            plain = html ? this.generatePlainContent(list) : \"\";\n            if (this.table.options.clipboardCopyFormatter) {\n              plain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\n              html = this.table.options.clipboardCopyFormatter(\"html\", html);\n            }\n          }\n          if (window.clipboardData && window.clipboardData.setData) {\n            window.clipboardData.setData('Text', plain);\n          } else if (e.clipboardData && e.clipboardData.setData) {\n            e.clipboardData.setData('text/plain', plain);\n            if (html) {\n              e.clipboardData.setData('text/html', html);\n            }\n          } else if (e.originalEvent && e.originalEvent.clipboardData.setData) {\n            e.originalEvent.clipboardData.setData('text/plain', plain);\n            if (html) {\n              e.originalEvent.clipboardData.setData('text/html', html);\n            }\n          }\n          this.dispatchExternal(\"clipboardCopied\", plain, html);\n          this.reset();\n        }\n      });\n    }\n    if (this.mode === true || this.mode === \"paste\") {\n      this.table.element.addEventListener(\"paste\", e => {\n        this.paste(e);\n      });\n    }\n    this.setPasteParser(this.table.options.clipboardPasteParser);\n    this.setPasteAction(this.table.options.clipboardPasteAction);\n    this.registerTableFunction(\"copyToClipboard\", this.copy.bind(this));\n  }\n  reset() {\n    this.blocked = true;\n    this.customSelection = false;\n  }\n  generatePlainContent(list) {\n    var output = [];\n    list.forEach(row => {\n      var rowData = [];\n      row.columns.forEach(col => {\n        var value = \"\";\n        if (col) {\n          if (row.type === \"group\") {\n            col.value = col.component.getKey();\n          }\n          if (col.value === null) {\n            value = \"\";\n          } else {\n            switch (typeof col.value) {\n              case \"object\":\n                value = JSON.stringify(col.value);\n                break;\n              case \"undefined\":\n                value = \"\";\n                break;\n              default:\n                value = col.value;\n            }\n          }\n        }\n        rowData.push(value);\n      });\n      output.push(rowData.join(\"\\t\"));\n    });\n    return output.join(\"\\n\");\n  }\n  copy(range, internal) {\n    var sel, textRange;\n    this.blocked = false;\n    this.customSelection = false;\n    if (this.mode === true || this.mode === \"copy\") {\n      this.rowRange = range || this.table.options.clipboardCopyRowRange;\n      if (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\n        range = document.createRange();\n        range.selectNodeContents(this.table.element);\n        sel = window.getSelection();\n        if (sel.toString() && internal) {\n          this.customSelection = sel.toString();\n        }\n        sel.removeAllRanges();\n        sel.addRange(range);\n      } else if (typeof document.selection != \"undefined\" && typeof document.body.createTextRange != \"undefined\") {\n        textRange = document.body.createTextRange();\n        textRange.moveToElementText(this.table.element);\n        textRange.select();\n      }\n      document.execCommand('copy');\n      if (sel) {\n        sel.removeAllRanges();\n      }\n    }\n  }\n\n  //PASTE EVENT HANDLING\n  setPasteAction(action) {\n    switch (typeof action) {\n      case \"string\":\n        this.pasteAction = Clipboard.pasteActions[action];\n        if (!this.pasteAction) {\n          console.warn(\"Clipboard Error - No such paste action found:\", action);\n        }\n        break;\n      case \"function\":\n        this.pasteAction = action;\n        break;\n    }\n  }\n  setPasteParser(parser) {\n    switch (typeof parser) {\n      case \"string\":\n        this.pasteParser = Clipboard.pasteParsers[parser];\n        if (!this.pasteParser) {\n          console.warn(\"Clipboard Error - No such paste parser found:\", parser);\n        }\n        break;\n      case \"function\":\n        this.pasteParser = parser;\n        break;\n    }\n  }\n  paste(e) {\n    var data, rowData, rows;\n    if (this.checkPasteOrigin(e)) {\n      data = this.getPasteData(e);\n      rowData = this.pasteParser.call(this, data);\n      if (rowData) {\n        e.preventDefault();\n        if (this.table.modExists(\"mutator\")) {\n          rowData = this.mutateData(rowData);\n        }\n        rows = this.pasteAction.call(this, rowData);\n        this.dispatchExternal(\"clipboardPasted\", data, rowData, rows);\n      } else {\n        this.dispatchExternal(\"clipboardPasteError\", data);\n      }\n    }\n  }\n  mutateData(data) {\n    var output = [];\n    if (Array.isArray(data)) {\n      data.forEach(row => {\n        output.push(this.table.modules.mutator.transformRow(row, \"clipboard\"));\n      });\n    } else {\n      output = data;\n    }\n    return output;\n  }\n  checkPasteOrigin(e) {\n    var valid = true;\n    var blocked = this.confirm(\"clipboard-paste\", [e]);\n    if (blocked || ![\"DIV\", \"SPAN\"].includes(e.target.tagName)) {\n      valid = false;\n    }\n    return valid;\n  }\n  getPasteData(e) {\n    var data;\n    if (window.clipboardData && window.clipboardData.getData) {\n      data = window.clipboardData.getData('Text');\n    } else if (e.clipboardData && e.clipboardData.getData) {\n      data = e.clipboardData.getData('text/plain');\n    } else if (e.originalEvent && e.originalEvent.clipboardData.getData) {\n      data = e.originalEvent.clipboardData.getData('text/plain');\n    }\n    return data;\n  }\n}\nclass CalcComponent {\n  constructor(row) {\n    this._row = row;\n    return new Proxy(this, {\n      get: function (target, name, receiver) {\n        if (typeof target[name] !== \"undefined\") {\n          return target[name];\n        } else {\n          return target._row.table.componentFunctionBinder.handle(\"row\", target._row, name);\n        }\n      }\n    });\n  }\n  getData(transform) {\n    return this._row.getData(transform);\n  }\n  getElement() {\n    return this._row.getElement();\n  }\n  getTable() {\n    return this._row.table;\n  }\n  getCells() {\n    var cells = [];\n    this._row.getCells().forEach(function (cell) {\n      cells.push(cell.getComponent());\n    });\n    return cells;\n  }\n  getCell(column) {\n    var cell = this._row.getCell(column);\n    return cell ? cell.getComponent() : false;\n  }\n  _getSelf() {\n    return this._row;\n  }\n}\n\n//public cell object\nclass CellComponent {\n  constructor(cell) {\n    this._cell = cell;\n    return new Proxy(this, {\n      get: function (target, name, receiver) {\n        if (typeof target[name] !== \"undefined\") {\n          return target[name];\n        } else {\n          return target._cell.table.componentFunctionBinder.handle(\"cell\", target._cell, name);\n        }\n      }\n    });\n  }\n  getValue() {\n    return this._cell.getValue();\n  }\n  getOldValue() {\n    return this._cell.getOldValue();\n  }\n  getInitialValue() {\n    return this._cell.initialValue;\n  }\n  getElement() {\n    return this._cell.getElement();\n  }\n  getRow() {\n    return this._cell.row.getComponent();\n  }\n  getData(transform) {\n    return this._cell.row.getData(transform);\n  }\n  getType() {\n    return \"cell\";\n  }\n  getField() {\n    return this._cell.column.getField();\n  }\n  getColumn() {\n    return this._cell.column.getComponent();\n  }\n  setValue(value, mutate) {\n    if (typeof mutate == \"undefined\") {\n      mutate = true;\n    }\n    this._cell.setValue(value, mutate);\n  }\n  restoreOldValue() {\n    this._cell.setValueActual(this._cell.getOldValue());\n  }\n  restoreInitialValue() {\n    this._cell.setValueActual(this._cell.initialValue);\n  }\n  checkHeight() {\n    this._cell.checkHeight();\n  }\n  getTable() {\n    return this._cell.table;\n  }\n  _getSelf() {\n    return this._cell;\n  }\n}\nclass Cell extends CoreFeature {\n  constructor(column, row) {\n    super(column.table);\n    this.table = column.table;\n    this.column = column;\n    this.row = row;\n    this.element = null;\n    this.value = null;\n    this.initialValue;\n    this.oldValue = null;\n    this.modules = {};\n    this.height = null;\n    this.width = null;\n    this.minWidth = null;\n    this.component = null;\n    this.loaded = false; //track if the cell has been added to the DOM yet\n\n    this.build();\n  }\n\n  //////////////// Setup Functions /////////////////\n  //generate element\n  build() {\n    this.generateElement();\n    this.setWidth();\n    this._configureCell();\n    this.setValueActual(this.column.getFieldValue(this.row.data));\n    this.initialValue = this.value;\n  }\n  generateElement() {\n    this.element = document.createElement('div');\n    this.element.className = \"tabulator-cell\";\n    this.element.setAttribute(\"role\", \"gridcell\");\n    if (this.column.isRowHeader) {\n      this.element.classList.add(\"tabulator-row-header\");\n    }\n  }\n  _configureCell() {\n    var element = this.element,\n      field = this.column.getField(),\n      vertAligns = {\n        top: \"flex-start\",\n        bottom: \"flex-end\",\n        middle: \"center\"\n      },\n      hozAligns = {\n        left: \"flex-start\",\n        right: \"flex-end\",\n        center: \"center\"\n      };\n\n    //set text alignment\n    element.style.textAlign = this.column.hozAlign;\n    if (this.column.vertAlign) {\n      element.style.display = \"inline-flex\";\n      element.style.alignItems = vertAligns[this.column.vertAlign] || \"\";\n      if (this.column.hozAlign) {\n        element.style.justifyContent = hozAligns[this.column.hozAlign] || \"\";\n      }\n    }\n    if (field) {\n      element.setAttribute(\"tabulator-field\", field);\n    }\n\n    //add class to cell if needed\n    if (this.column.definition.cssClass) {\n      var classNames = this.column.definition.cssClass.split(\" \");\n      classNames.forEach(className => {\n        element.classList.add(className);\n      });\n    }\n    this.dispatch(\"cell-init\", this);\n\n    //hide cell if not visible\n    if (!this.column.visible) {\n      this.hide();\n    }\n  }\n\n  //generate cell contents\n  _generateContents() {\n    var val;\n    val = this.chain(\"cell-format\", this, null, () => {\n      return this.element.innerHTML = this.value;\n    });\n    switch (typeof val) {\n      case \"object\":\n        if (val instanceof Node) {\n          //clear previous cell contents\n          while (this.element.firstChild) this.element.removeChild(this.element.firstChild);\n          this.element.appendChild(val);\n        } else {\n          this.element.innerHTML = \"\";\n          if (val != null) {\n            console.warn(\"Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", val);\n          }\n        }\n        break;\n      case \"undefined\":\n        this.element.innerHTML = \"\";\n        break;\n      default:\n        this.element.innerHTML = val;\n    }\n  }\n  cellRendered() {\n    this.dispatch(\"cell-rendered\", this);\n  }\n\n  //////////////////// Getters ////////////////////\n  getElement(containerOnly) {\n    if (!this.loaded) {\n      this.loaded = true;\n      if (!containerOnly) {\n        this.layoutElement();\n      }\n    }\n    return this.element;\n  }\n  getValue() {\n    return this.value;\n  }\n  getOldValue() {\n    return this.oldValue;\n  }\n\n  //////////////////// Actions ////////////////////\n  setValue(value, mutate, force) {\n    var changed = this.setValueProcessData(value, mutate, force);\n    if (changed) {\n      this.dispatch(\"cell-value-updated\", this);\n      this.cellRendered();\n      if (this.column.definition.cellEdited) {\n        this.column.definition.cellEdited.call(this.table, this.getComponent());\n      }\n      this.dispatchExternal(\"cellEdited\", this.getComponent());\n      if (this.subscribedExternal(\"dataChanged\")) {\n        this.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n      }\n    }\n  }\n  setValueProcessData(value, mutate, force) {\n    var changed = false;\n    if (this.value !== value || force) {\n      changed = true;\n      if (mutate) {\n        value = this.chain(\"cell-value-changing\", [this, value], null, value);\n      }\n    }\n    this.setValueActual(value);\n    if (changed) {\n      this.dispatch(\"cell-value-changed\", this);\n    }\n    return changed;\n  }\n  setValueActual(value) {\n    this.oldValue = this.value;\n    this.value = value;\n    this.dispatch(\"cell-value-save-before\", this);\n    this.column.setFieldValue(this.row.data, value);\n    this.dispatch(\"cell-value-save-after\", this);\n    if (this.loaded) {\n      this.layoutElement();\n    }\n  }\n  layoutElement() {\n    this._generateContents();\n    this.dispatch(\"cell-layout\", this);\n  }\n  setWidth() {\n    this.width = this.column.width;\n    this.element.style.width = this.column.widthStyled;\n  }\n  clearWidth() {\n    this.width = \"\";\n    this.element.style.width = \"\";\n  }\n  getWidth() {\n    return this.width || this.element.offsetWidth;\n  }\n  setMinWidth() {\n    this.minWidth = this.column.minWidth;\n    this.element.style.minWidth = this.column.minWidthStyled;\n  }\n  setMaxWidth() {\n    this.maxWidth = this.column.maxWidth;\n    this.element.style.maxWidth = this.column.maxWidthStyled;\n  }\n  checkHeight() {\n    // var height = this.element.css(\"height\");\n    this.row.reinitializeHeight();\n  }\n  clearHeight() {\n    this.element.style.height = \"\";\n    this.height = null;\n    this.dispatch(\"cell-height\", this, \"\");\n  }\n  setHeight() {\n    this.height = this.row.height;\n    this.element.style.height = this.row.heightStyled;\n    this.dispatch(\"cell-height\", this, this.row.heightStyled);\n  }\n  getHeight() {\n    return this.height || this.element.offsetHeight;\n  }\n  show() {\n    this.element.style.display = this.column.vertAlign ? \"inline-flex\" : \"\";\n  }\n  hide() {\n    this.element.style.display = \"none\";\n  }\n  delete() {\n    this.dispatch(\"cell-delete\", this);\n    if (!this.table.rowManager.redrawBlock && this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n    }\n    this.element = false;\n    this.column.deleteCell(this);\n    this.row.deleteCell(this);\n    this.calcs = {};\n  }\n  getIndex() {\n    return this.row.getCellIndex(this);\n  }\n\n  //////////////// Object Generation /////////////////\n  getComponent() {\n    if (!this.component) {\n      this.component = new CellComponent(this);\n    }\n    return this.component;\n  }\n}\n\n//public column object\nclass ColumnComponent {\n  constructor(column) {\n    this._column = column;\n    this.type = \"ColumnComponent\";\n    return new Proxy(this, {\n      get: function (target, name, receiver) {\n        if (typeof target[name] !== \"undefined\") {\n          return target[name];\n        } else {\n          return target._column.table.componentFunctionBinder.handle(\"column\", target._column, name);\n        }\n      }\n    });\n  }\n  getElement() {\n    return this._column.getElement();\n  }\n  getDefinition() {\n    return this._column.getDefinition();\n  }\n  getField() {\n    return this._column.getField();\n  }\n  getTitleDownload() {\n    return this._column.getTitleDownload();\n  }\n  getCells() {\n    var cells = [];\n    this._column.cells.forEach(function (cell) {\n      cells.push(cell.getComponent());\n    });\n    return cells;\n  }\n  isVisible() {\n    return this._column.visible;\n  }\n  show() {\n    if (this._column.isGroup) {\n      this._column.columns.forEach(function (column) {\n        column.show();\n      });\n    } else {\n      this._column.show();\n    }\n  }\n  hide() {\n    if (this._column.isGroup) {\n      this._column.columns.forEach(function (column) {\n        column.hide();\n      });\n    } else {\n      this._column.hide();\n    }\n  }\n  toggle() {\n    if (this._column.visible) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n  delete() {\n    return this._column.delete();\n  }\n  getSubColumns() {\n    var output = [];\n    if (this._column.columns.length) {\n      this._column.columns.forEach(function (column) {\n        output.push(column.getComponent());\n      });\n    }\n    return output;\n  }\n  getParentColumn() {\n    return this._column.getParentComponent();\n  }\n  _getSelf() {\n    return this._column;\n  }\n  scrollTo(position, ifVisible) {\n    return this._column.table.columnManager.scrollToColumn(this._column, position, ifVisible);\n  }\n  getTable() {\n    return this._column.table;\n  }\n  move(to, after) {\n    var toColumn = this._column.table.columnManager.findColumn(to);\n    if (toColumn) {\n      this._column.table.columnManager.moveColumn(this._column, toColumn, after);\n    } else {\n      console.warn(\"Move Error - No matching column found:\", toColumn);\n    }\n  }\n  getNextColumn() {\n    var nextCol = this._column.nextColumn();\n    return nextCol ? nextCol.getComponent() : false;\n  }\n  getPrevColumn() {\n    var prevCol = this._column.prevColumn();\n    return prevCol ? prevCol.getComponent() : false;\n  }\n  updateDefinition(updates) {\n    return this._column.updateDefinition(updates);\n  }\n  getWidth() {\n    return this._column.getWidth();\n  }\n  setWidth(width) {\n    var result;\n    if (width === true) {\n      result = this._column.reinitializeWidth(true);\n    } else {\n      result = this._column.setWidth(width);\n    }\n    this._column.table.columnManager.rerenderColumns(true);\n    return result;\n  }\n}\nvar defaultColumnOptions = {\n  \"title\": undefined,\n  \"field\": undefined,\n  \"columns\": undefined,\n  \"visible\": undefined,\n  \"hozAlign\": undefined,\n  \"vertAlign\": undefined,\n  \"width\": undefined,\n  \"minWidth\": 40,\n  \"maxWidth\": undefined,\n  \"maxInitialWidth\": undefined,\n  \"cssClass\": undefined,\n  \"variableHeight\": undefined,\n  \"headerVertical\": undefined,\n  \"headerHozAlign\": undefined,\n  \"headerWordWrap\": false,\n  \"editableTitle\": undefined\n};\nclass Column extends CoreFeature {\n  static defaultOptionList = defaultColumnOptions;\n  constructor(def, parent, rowHeader) {\n    super(parent.table);\n    this.definition = def; //column definition\n    this.parent = parent; //hold parent object\n    this.type = \"column\"; //type of element\n    this.columns = []; //child columns\n    this.cells = []; //cells bound to this column\n    this.isGroup = false;\n    this.isRowHeader = rowHeader;\n    this.element = this.createElement(); //column header element\n    this.contentElement = false;\n    this.titleHolderElement = false;\n    this.titleElement = false;\n    this.groupElement = this.createGroupElement(); //column group holder element\n    this.hozAlign = \"\"; //horizontal text alignment\n    this.vertAlign = \"\"; //vert text alignment\n\n    //multi dimensional filed handling\n    this.field = \"\";\n    this.fieldStructure = \"\";\n    this.getFieldValue = \"\";\n    this.setFieldValue = \"\";\n    this.titleDownload = null;\n    this.titleFormatterRendered = false;\n    this.mapDefinitions();\n    this.setField(this.definition.field);\n    this.modules = {}; //hold module variables;\n\n    this.width = null; //column width\n    this.widthStyled = \"\"; //column width pre-styled to improve render efficiency\n    this.maxWidth = null; //column maximum width\n    this.maxWidthStyled = \"\"; //column maximum pre-styled to improve render efficiency\n    this.maxInitialWidth = null;\n    this.minWidth = null; //column minimum width\n    this.minWidthStyled = \"\"; //column minimum pre-styled to improve render efficiency\n    this.widthFixed = false; //user has specified a width for this column\n\n    this.visible = true; //default visible state\n\n    this.component = null;\n\n    //initialize column\n    if (this.definition.columns) {\n      this.isGroup = true;\n      this.definition.columns.forEach((def, i) => {\n        var newCol = new Column(def, this);\n        this.attachColumn(newCol);\n      });\n      this.checkColumnVisibility();\n    } else {\n      parent.registerColumnField(this);\n    }\n    this._initialize();\n  }\n  createElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-col\");\n    el.setAttribute(\"role\", \"columnheader\");\n    el.setAttribute(\"aria-sort\", \"none\");\n    if (this.isRowHeader) {\n      el.classList.add(\"tabulator-row-header\");\n    }\n    switch (this.table.options.columnHeaderVertAlign) {\n      case \"middle\":\n        el.style.justifyContent = \"center\";\n        break;\n      case \"bottom\":\n        el.style.justifyContent = \"flex-end\";\n        break;\n    }\n    return el;\n  }\n  createGroupElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-col-group-cols\");\n    return el;\n  }\n  mapDefinitions() {\n    var defaults = this.table.options.columnDefaults;\n\n    //map columnDefaults onto column definitions\n    if (defaults) {\n      for (let key in defaults) {\n        if (typeof this.definition[key] === \"undefined\") {\n          this.definition[key] = defaults[key];\n        }\n      }\n    }\n    this.definition = this.table.columnManager.optionsList.generate(Column.defaultOptionList, this.definition);\n  }\n  checkDefinition() {\n    Object.keys(this.definition).forEach(key => {\n      if (Column.defaultOptionList.indexOf(key) === -1) {\n        console.warn(\"Invalid column definition option in '\" + (this.field || this.definition.title) + \"' column:\", key);\n      }\n    });\n  }\n  setField(field) {\n    this.field = field;\n    this.fieldStructure = field ? this.table.options.nestedFieldSeparator ? field.split(this.table.options.nestedFieldSeparator) : [field] : [];\n    this.getFieldValue = this.fieldStructure.length > 1 ? this._getNestedData : this._getFlatData;\n    this.setFieldValue = this.fieldStructure.length > 1 ? this._setNestedData : this._setFlatData;\n  }\n\n  //register column position with column manager\n  registerColumnPosition(column) {\n    this.parent.registerColumnPosition(column);\n  }\n\n  //register column position with column manager\n  registerColumnField(column) {\n    this.parent.registerColumnField(column);\n  }\n\n  //trigger position registration\n  reRegisterPosition() {\n    if (this.isGroup) {\n      this.columns.forEach(function (column) {\n        column.reRegisterPosition();\n      });\n    } else {\n      this.registerColumnPosition(this);\n    }\n  }\n\n  //build header element\n  _initialize() {\n    var def = this.definition;\n    while (this.element.firstChild) this.element.removeChild(this.element.firstChild);\n    if (def.headerVertical) {\n      this.element.classList.add(\"tabulator-col-vertical\");\n      if (def.headerVertical === \"flip\") {\n        this.element.classList.add(\"tabulator-col-vertical-flip\");\n      }\n    }\n    this.contentElement = this._buildColumnHeaderContent();\n    this.element.appendChild(this.contentElement);\n    if (this.isGroup) {\n      this._buildGroupHeader();\n    } else {\n      this._buildColumnHeader();\n    }\n    this.dispatch(\"column-init\", this);\n  }\n\n  //build header element for header\n  _buildColumnHeader() {\n    var def = this.definition;\n    this.dispatch(\"column-layout\", this);\n\n    //set column visibility\n    if (typeof def.visible != \"undefined\") {\n      if (def.visible) {\n        this.show(true);\n      } else {\n        this.hide(true);\n      }\n    }\n\n    //assign additional css classes to column header\n    if (def.cssClass) {\n      var classNames = def.cssClass.split(\" \");\n      classNames.forEach(className => {\n        this.element.classList.add(className);\n      });\n    }\n    if (def.field) {\n      this.element.setAttribute(\"tabulator-field\", def.field);\n    }\n\n    //set min width if present\n    this.setMinWidth(parseInt(def.minWidth));\n    if (def.maxInitialWidth) {\n      this.maxInitialWidth = parseInt(def.maxInitialWidth);\n    }\n    if (def.maxWidth) {\n      this.setMaxWidth(parseInt(def.maxWidth));\n    }\n    this.reinitializeWidth();\n\n    //set horizontal text alignment\n    this.hozAlign = this.definition.hozAlign;\n    this.vertAlign = this.definition.vertAlign;\n    this.titleElement.style.textAlign = this.definition.headerHozAlign;\n  }\n  _buildColumnHeaderContent() {\n    var contentElement = document.createElement(\"div\");\n    contentElement.classList.add(\"tabulator-col-content\");\n    this.titleHolderElement = document.createElement(\"div\");\n    this.titleHolderElement.classList.add(\"tabulator-col-title-holder\");\n    contentElement.appendChild(this.titleHolderElement);\n    this.titleElement = this._buildColumnHeaderTitle();\n    this.titleHolderElement.appendChild(this.titleElement);\n    return contentElement;\n  }\n\n  //build title element of column\n  _buildColumnHeaderTitle() {\n    var def = this.definition;\n    var titleHolderElement = document.createElement(\"div\");\n    titleHolderElement.classList.add(\"tabulator-col-title\");\n    if (def.headerWordWrap) {\n      titleHolderElement.classList.add(\"tabulator-col-title-wrap\");\n    }\n    if (def.editableTitle) {\n      var titleElement = document.createElement(\"input\");\n      titleElement.classList.add(\"tabulator-title-editor\");\n      titleElement.addEventListener(\"click\", e => {\n        e.stopPropagation();\n        titleElement.focus();\n      });\n      titleElement.addEventListener(\"mousedown\", e => {\n        e.stopPropagation();\n      });\n      titleElement.addEventListener(\"change\", () => {\n        def.title = titleElement.value;\n        this.dispatchExternal(\"columnTitleChanged\", this.getComponent());\n      });\n      titleHolderElement.appendChild(titleElement);\n      if (def.field) {\n        this.langBind(\"columns|\" + def.field, text => {\n          titleElement.value = text || def.title || \"&nbsp;\";\n        });\n      } else {\n        titleElement.value = def.title || \"&nbsp;\";\n      }\n    } else {\n      if (def.field) {\n        this.langBind(\"columns|\" + def.field, text => {\n          this._formatColumnHeaderTitle(titleHolderElement, text || def.title || \"&nbsp;\");\n        });\n      } else {\n        this._formatColumnHeaderTitle(titleHolderElement, def.title || \"&nbsp;\");\n      }\n    }\n    return titleHolderElement;\n  }\n  _formatColumnHeaderTitle(el, title) {\n    var contents = this.chain(\"column-format\", [this, title, el], null, () => {\n      return title;\n    });\n    switch (typeof contents) {\n      case \"object\":\n        if (contents instanceof Node) {\n          el.appendChild(contents);\n        } else {\n          el.innerHTML = \"\";\n          console.warn(\"Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", contents);\n        }\n        break;\n      case \"undefined\":\n        el.innerHTML = \"\";\n        break;\n      default:\n        el.innerHTML = contents;\n    }\n  }\n\n  //build header element for column group\n  _buildGroupHeader() {\n    this.element.classList.add(\"tabulator-col-group\");\n    this.element.setAttribute(\"role\", \"columngroup\");\n    this.element.setAttribute(\"aria-title\", this.definition.title);\n\n    //asign additional css classes to column header\n    if (this.definition.cssClass) {\n      var classNames = this.definition.cssClass.split(\" \");\n      classNames.forEach(className => {\n        this.element.classList.add(className);\n      });\n    }\n    this.titleElement.style.textAlign = this.definition.headerHozAlign;\n    this.element.appendChild(this.groupElement);\n  }\n\n  //flat field lookup\n  _getFlatData(data) {\n    return data[this.field];\n  }\n\n  //nested field lookup\n  _getNestedData(data) {\n    var dataObj = data,\n      structure = this.fieldStructure,\n      length = structure.length,\n      output;\n    for (let i = 0; i < length; i++) {\n      dataObj = dataObj[structure[i]];\n      output = dataObj;\n      if (!dataObj) {\n        break;\n      }\n    }\n    return output;\n  }\n\n  //flat field set\n  _setFlatData(data, value) {\n    if (this.field) {\n      data[this.field] = value;\n    }\n  }\n\n  //nested field set\n  _setNestedData(data, value) {\n    var dataObj = data,\n      structure = this.fieldStructure,\n      length = structure.length;\n    for (let i = 0; i < length; i++) {\n      if (i == length - 1) {\n        dataObj[structure[i]] = value;\n      } else {\n        if (!dataObj[structure[i]]) {\n          if (typeof value !== \"undefined\") {\n            dataObj[structure[i]] = {};\n          } else {\n            break;\n          }\n        }\n        dataObj = dataObj[structure[i]];\n      }\n    }\n  }\n\n  //attach column to this group\n  attachColumn(column) {\n    if (this.groupElement) {\n      this.columns.push(column);\n      this.groupElement.appendChild(column.getElement());\n      column.columnRendered();\n    } else {\n      console.warn(\"Column Warning - Column being attached to another column instead of column group\");\n    }\n  }\n\n  //vertically align header in column\n  verticalAlign(alignment, height) {\n    //calculate height of column header and group holder element\n    var parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : height || this.parent.getHeadersElement().clientHeight;\n    // var parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : this.parent.getHeadersElement().clientHeight;\n\n    this.element.style.height = parentHeight + \"px\";\n    this.dispatch(\"column-height\", this, this.element.style.height);\n    if (this.isGroup) {\n      this.groupElement.style.minHeight = parentHeight - this.contentElement.offsetHeight + \"px\";\n    }\n\n    //vertically align cell contents\n    // if(!this.isGroup && alignment !== \"top\"){\n    // \tif(alignment === \"bottom\"){\n    // \t\tthis.element.style.paddingTop = (this.element.clientHeight - this.contentElement.offsetHeight) + \"px\";\n    // \t}else{\n    // \t\tthis.element.style.paddingTop = ((this.element.clientHeight - this.contentElement.offsetHeight) / 2) + \"px\";\n    // \t}\n    // }\n\n    this.columns.forEach(function (column) {\n      column.verticalAlign(alignment);\n    });\n  }\n\n  //clear vertical alignment\n  clearVerticalAlign() {\n    this.element.style.paddingTop = \"\";\n    this.element.style.height = \"\";\n    this.element.style.minHeight = \"\";\n    this.groupElement.style.minHeight = \"\";\n    this.columns.forEach(function (column) {\n      column.clearVerticalAlign();\n    });\n    this.dispatch(\"column-height\", this, \"\");\n  }\n\n  //// Retrieve Column Information ////\n  //return column header element\n  getElement() {\n    return this.element;\n  }\n\n  //return column group element\n  getGroupElement() {\n    return this.groupElement;\n  }\n\n  //return field name\n  getField() {\n    return this.field;\n  }\n  getTitleDownload() {\n    return this.titleDownload;\n  }\n\n  //return the first column in a group\n  getFirstColumn() {\n    if (!this.isGroup) {\n      return this;\n    } else {\n      if (this.columns.length) {\n        return this.columns[0].getFirstColumn();\n      } else {\n        return false;\n      }\n    }\n  }\n\n  //return the last column in a group\n  getLastColumn() {\n    if (!this.isGroup) {\n      return this;\n    } else {\n      if (this.columns.length) {\n        return this.columns[this.columns.length - 1].getLastColumn();\n      } else {\n        return false;\n      }\n    }\n  }\n\n  //return all columns in a group\n  getColumns(traverse) {\n    var columns = [];\n    if (traverse) {\n      this.columns.forEach(column => {\n        columns.push(column);\n        columns = columns.concat(column.getColumns(true));\n      });\n    } else {\n      columns = this.columns;\n    }\n    return columns;\n  }\n\n  //return all columns in a group\n  getCells() {\n    return this.cells;\n  }\n\n  //retrieve the top column in a group of columns\n  getTopColumn() {\n    if (this.parent.isGroup) {\n      return this.parent.getTopColumn();\n    } else {\n      return this;\n    }\n  }\n\n  //return column definition object\n  getDefinition(updateBranches) {\n    var colDefs = [];\n    if (this.isGroup && updateBranches) {\n      this.columns.forEach(function (column) {\n        colDefs.push(column.getDefinition(true));\n      });\n      this.definition.columns = colDefs;\n    }\n    return this.definition;\n  }\n\n  //////////////////// Actions ////////////////////\n  checkColumnVisibility() {\n    var visible = false;\n    this.columns.forEach(function (column) {\n      if (column.visible) {\n        visible = true;\n      }\n    });\n    if (visible) {\n      this.show();\n      this.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), false);\n    } else {\n      this.hide();\n    }\n  }\n\n  //show column\n  show(silent, responsiveToggle) {\n    if (!this.visible) {\n      this.visible = true;\n      this.element.style.display = \"\";\n      if (this.parent.isGroup) {\n        this.parent.checkColumnVisibility();\n      }\n      this.cells.forEach(function (cell) {\n        cell.show();\n      });\n      if (!this.isGroup && this.width === null) {\n        this.reinitializeWidth();\n      }\n      this.table.columnManager.verticalAlignHeaders();\n      this.dispatch(\"column-show\", this, responsiveToggle);\n      if (!silent) {\n        this.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), true);\n      }\n      if (this.parent.isGroup) {\n        this.parent.matchChildWidths();\n      }\n      if (!this.silent) {\n        this.table.columnManager.rerenderColumns();\n      }\n    }\n  }\n\n  //hide column\n  hide(silent, responsiveToggle) {\n    if (this.visible) {\n      this.visible = false;\n      this.element.style.display = \"none\";\n      this.table.columnManager.verticalAlignHeaders();\n      if (this.parent.isGroup) {\n        this.parent.checkColumnVisibility();\n      }\n      this.cells.forEach(function (cell) {\n        cell.hide();\n      });\n      this.dispatch(\"column-hide\", this, responsiveToggle);\n      if (!silent) {\n        this.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), false);\n      }\n      if (this.parent.isGroup) {\n        this.parent.matchChildWidths();\n      }\n      if (!this.silent) {\n        this.table.columnManager.rerenderColumns();\n      }\n    }\n  }\n  matchChildWidths() {\n    var childWidth = 0;\n    if (this.contentElement && this.columns.length) {\n      this.columns.forEach(function (column) {\n        if (column.visible) {\n          childWidth += column.getWidth();\n        }\n      });\n      this.contentElement.style.maxWidth = childWidth - 1 + \"px\";\n      if (this.parent.isGroup) {\n        this.parent.matchChildWidths();\n      }\n    }\n  }\n  removeChild(child) {\n    var index = this.columns.indexOf(child);\n    if (index > -1) {\n      this.columns.splice(index, 1);\n    }\n    if (!this.columns.length) {\n      this.delete();\n    }\n  }\n  setWidth(width) {\n    this.widthFixed = true;\n    this.setWidthActual(width);\n  }\n  setWidthActual(width) {\n    if (isNaN(width)) {\n      width = Math.floor(this.table.element.clientWidth / 100 * parseInt(width));\n    }\n    width = Math.max(this.minWidth, width);\n    if (this.maxWidth) {\n      width = Math.min(this.maxWidth, width);\n    }\n    this.width = width;\n    this.widthStyled = width ? width + \"px\" : \"\";\n    this.element.style.width = this.widthStyled;\n    if (!this.isGroup) {\n      this.cells.forEach(function (cell) {\n        cell.setWidth();\n      });\n    }\n    if (this.parent.isGroup) {\n      this.parent.matchChildWidths();\n    }\n    this.dispatch(\"column-width\", this);\n    if (this.subscribedExternal(\"columnWidth\")) {\n      this.dispatchExternal(\"columnWidth\", this.getComponent());\n    }\n  }\n  checkCellHeights() {\n    var rows = [];\n    this.cells.forEach(function (cell) {\n      if (cell.row.heightInitialized) {\n        if (cell.row.getElement().offsetParent !== null) {\n          rows.push(cell.row);\n          cell.row.clearCellHeight();\n        } else {\n          cell.row.heightInitialized = false;\n        }\n      }\n    });\n    rows.forEach(function (row) {\n      row.calcHeight();\n    });\n    rows.forEach(function (row) {\n      row.setCellHeight();\n    });\n  }\n  getWidth() {\n    var width = 0;\n    if (this.isGroup) {\n      this.columns.forEach(function (column) {\n        if (column.visible) {\n          width += column.getWidth();\n        }\n      });\n    } else {\n      width = this.width;\n    }\n    return width;\n  }\n  getLeftOffset() {\n    var offset = this.element.offsetLeft;\n    if (this.parent.isGroup) {\n      offset += this.parent.getLeftOffset();\n    }\n    return offset;\n  }\n  getHeight() {\n    return Math.ceil(this.element.getBoundingClientRect().height);\n  }\n  setMinWidth(minWidth) {\n    if (this.maxWidth && minWidth > this.maxWidth) {\n      minWidth = this.maxWidth;\n      console.warn(\"the minWidth (\" + minWidth + \"px) for column '\" + this.field + \"' cannot be bigger that its maxWidth (\" + this.maxWidthStyled + \")\");\n    }\n    this.minWidth = minWidth;\n    this.minWidthStyled = minWidth ? minWidth + \"px\" : \"\";\n    this.element.style.minWidth = this.minWidthStyled;\n    this.cells.forEach(function (cell) {\n      cell.setMinWidth();\n    });\n  }\n  setMaxWidth(maxWidth) {\n    if (this.minWidth && maxWidth < this.minWidth) {\n      maxWidth = this.minWidth;\n      console.warn(\"the maxWidth (\" + maxWidth + \"px) for column '\" + this.field + \"' cannot be smaller that its minWidth (\" + this.minWidthStyled + \")\");\n    }\n    this.maxWidth = maxWidth;\n    this.maxWidthStyled = maxWidth ? maxWidth + \"px\" : \"\";\n    this.element.style.maxWidth = this.maxWidthStyled;\n    this.cells.forEach(function (cell) {\n      cell.setMaxWidth();\n    });\n  }\n  delete() {\n    return new Promise((resolve, reject) => {\n      if (this.isGroup) {\n        this.columns.forEach(function (column) {\n          column.delete();\n        });\n      }\n      this.dispatch(\"column-delete\", this);\n      var cellCount = this.cells.length;\n      for (let i = 0; i < cellCount; i++) {\n        this.cells[0].delete();\n      }\n      if (this.element.parentNode) {\n        this.element.parentNode.removeChild(this.element);\n      }\n      this.element = false;\n      this.contentElement = false;\n      this.titleElement = false;\n      this.groupElement = false;\n      if (this.parent.isGroup) {\n        this.parent.removeChild(this);\n      }\n      this.table.columnManager.deregisterColumn(this);\n      this.table.columnManager.rerenderColumns(true);\n      this.dispatch(\"column-deleted\", this);\n      resolve();\n    });\n  }\n  columnRendered() {\n    if (this.titleFormatterRendered) {\n      this.titleFormatterRendered();\n    }\n    this.dispatch(\"column-rendered\", this);\n  }\n\n  //////////////// Cell Management /////////////////\n  //generate cell for this column\n  generateCell(row) {\n    var cell = new Cell(this, row);\n    this.cells.push(cell);\n    return cell;\n  }\n  nextColumn() {\n    var index = this.table.columnManager.findColumnIndex(this);\n    return index > -1 ? this._nextVisibleColumn(index + 1) : false;\n  }\n  _nextVisibleColumn(index) {\n    var column = this.table.columnManager.getColumnByIndex(index);\n    return !column || column.visible ? column : this._nextVisibleColumn(index + 1);\n  }\n  prevColumn() {\n    var index = this.table.columnManager.findColumnIndex(this);\n    return index > -1 ? this._prevVisibleColumn(index - 1) : false;\n  }\n  _prevVisibleColumn(index) {\n    var column = this.table.columnManager.getColumnByIndex(index);\n    return !column || column.visible ? column : this._prevVisibleColumn(index - 1);\n  }\n  reinitializeWidth(force) {\n    this.widthFixed = false;\n\n    //set width if present\n    if (typeof this.definition.width !== \"undefined\" && !force) {\n      // maxInitialWidth ignored here as width specified\n      this.setWidth(this.definition.width);\n    }\n    this.dispatch(\"column-width-fit-before\", this);\n    this.fitToData(force);\n    this.dispatch(\"column-width-fit-after\", this);\n  }\n\n  //set column width to maximum cell width for non group columns\n  fitToData(force) {\n    if (this.isGroup) {\n      return;\n    }\n    if (!this.widthFixed) {\n      this.element.style.width = \"\";\n      this.cells.forEach(cell => {\n        cell.clearWidth();\n      });\n    }\n    var maxWidth = this.element.offsetWidth;\n    if (!this.width || !this.widthFixed) {\n      this.cells.forEach(cell => {\n        var width = cell.getWidth();\n        if (width > maxWidth) {\n          maxWidth = width;\n        }\n      });\n      if (maxWidth) {\n        var setTo = maxWidth + 1;\n        if (this.maxInitialWidth && !force) {\n          setTo = Math.min(setTo, this.maxInitialWidth);\n        }\n        this.setWidthActual(setTo);\n      }\n    }\n  }\n  updateDefinition(updates) {\n    var definition;\n    if (!this.isGroup) {\n      if (!this.parent.isGroup) {\n        definition = Object.assign({}, this.getDefinition());\n        definition = Object.assign(definition, updates);\n        return this.table.columnManager.addColumn(definition, false, this).then(column => {\n          if (definition.field == this.field) {\n            this.field = false; //clear field name to prevent deletion of duplicate column from arrays\n          }\n          return this.delete().then(() => {\n            return column.getComponent();\n          });\n        });\n      } else {\n        console.error(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\n        return Promise.reject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\n      }\n    } else {\n      console.error(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\n      return Promise.reject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\n    }\n  }\n  deleteCell(cell) {\n    var index = this.cells.indexOf(cell);\n    if (index > -1) {\n      this.cells.splice(index, 1);\n    }\n  }\n\n  //////////////// Object Generation /////////////////\n  getComponent() {\n    if (!this.component) {\n      this.component = new ColumnComponent(this);\n    }\n    return this.component;\n  }\n  getPosition() {\n    return this.table.columnManager.getVisibleColumnsByIndex().indexOf(this) + 1;\n  }\n  getParentComponent() {\n    return this.parent instanceof Column ? this.parent.getComponent() : false;\n  }\n}\n\n//public row object\nclass RowComponent {\n  constructor(row) {\n    this._row = row;\n    return new Proxy(this, {\n      get: function (target, name, receiver) {\n        if (typeof target[name] !== \"undefined\") {\n          return target[name];\n        } else {\n          return target._row.table.componentFunctionBinder.handle(\"row\", target._row, name);\n        }\n      }\n    });\n  }\n  getData(transform) {\n    return this._row.getData(transform);\n  }\n  getElement() {\n    return this._row.getElement();\n  }\n  getCells() {\n    var cells = [];\n    this._row.getCells().forEach(function (cell) {\n      cells.push(cell.getComponent());\n    });\n    return cells;\n  }\n  getCell(column) {\n    var cell = this._row.getCell(column);\n    return cell ? cell.getComponent() : false;\n  }\n  getIndex() {\n    return this._row.getData(\"data\")[this._row.table.options.index];\n  }\n  getPosition() {\n    return this._row.getPosition();\n  }\n  watchPosition(callback) {\n    return this._row.watchPosition(callback);\n  }\n  delete() {\n    return this._row.delete();\n  }\n  scrollTo(position, ifVisible) {\n    return this._row.table.rowManager.scrollToRow(this._row, position, ifVisible);\n  }\n  move(to, after) {\n    this._row.moveToRow(to, after);\n  }\n  update(data) {\n    return this._row.updateData(data);\n  }\n  normalizeHeight() {\n    this._row.normalizeHeight(true);\n  }\n  _getSelf() {\n    return this._row;\n  }\n  reformat() {\n    return this._row.reinitialize();\n  }\n  getTable() {\n    return this._row.table;\n  }\n  getNextRow() {\n    var row = this._row.nextRow();\n    return row ? row.getComponent() : row;\n  }\n  getPrevRow() {\n    var row = this._row.prevRow();\n    return row ? row.getComponent() : row;\n  }\n}\nclass Row extends CoreFeature {\n  constructor(data, parent, type = \"row\") {\n    super(parent.table);\n    this.parent = parent;\n    this.data = {};\n    this.type = type; //type of element\n    this.element = false;\n    this.modules = {}; //hold module variables;\n    this.cells = [];\n    this.height = 0; //hold element height\n    this.heightStyled = \"\"; //hold element height pre-styled to improve render efficiency\n    this.manualHeight = false; //user has manually set row height\n    this.outerHeight = 0; //hold elements outer height\n    this.initialized = false; //element has been rendered\n    this.heightInitialized = false; //element has resized cells to fit\n    this.position = 0; //store position of element in row list\n    this.positionWatchers = [];\n    this.component = null;\n    this.created = false;\n    this.setData(data);\n  }\n  create() {\n    if (!this.created) {\n      this.created = true;\n      this.generateElement();\n    }\n  }\n  createElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-row\");\n    el.setAttribute(\"role\", \"row\");\n    this.element = el;\n  }\n  getElement() {\n    this.create();\n    return this.element;\n  }\n  detachElement() {\n    if (this.element && this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n    }\n  }\n  generateElement() {\n    this.createElement();\n    this.dispatch(\"row-init\", this);\n  }\n  generateCells() {\n    this.cells = this.table.columnManager.generateCells(this);\n  }\n\n  //functions to setup on first render\n  initialize(force, inFragment) {\n    this.create();\n    if (!this.initialized || force) {\n      this.deleteCells();\n      while (this.element.firstChild) this.element.removeChild(this.element.firstChild);\n      this.dispatch(\"row-layout-before\", this);\n      this.generateCells();\n      this.initialized = true;\n      this.table.columnManager.renderer.renderRowCells(this, inFragment);\n      if (force) {\n        this.normalizeHeight();\n      }\n      this.dispatch(\"row-layout\", this);\n      if (this.table.options.rowFormatter) {\n        this.table.options.rowFormatter(this.getComponent());\n      }\n      this.dispatch(\"row-layout-after\", this);\n    } else {\n      this.table.columnManager.renderer.rerenderRowCells(this, inFragment);\n    }\n  }\n  rendered() {\n    this.cells.forEach(cell => {\n      cell.cellRendered();\n    });\n  }\n  reinitializeHeight() {\n    this.heightInitialized = false;\n    if (this.element && this.element.offsetParent !== null) {\n      this.normalizeHeight(true);\n    }\n  }\n  deinitialize() {\n    this.initialized = false;\n  }\n  deinitializeHeight() {\n    this.heightInitialized = false;\n  }\n  reinitialize(children) {\n    this.initialized = false;\n    this.heightInitialized = false;\n    if (!this.manualHeight) {\n      this.height = 0;\n      this.heightStyled = \"\";\n    }\n    if (this.element && this.element.offsetParent !== null) {\n      this.initialize(true);\n    }\n    this.dispatch(\"row-relayout\", this);\n  }\n\n  //get heights when doing bulk row style calcs in virtual DOM\n  calcHeight(force) {\n    var maxHeight = 0,\n      minHeight = 0;\n    if (this.table.options.rowHeight) {\n      this.height = this.table.options.rowHeight;\n    } else {\n      minHeight = this.calcMinHeight();\n      maxHeight = this.calcMaxHeight();\n      if (force) {\n        this.height = Math.max(maxHeight, minHeight);\n      } else {\n        this.height = this.manualHeight ? this.height : Math.max(maxHeight, minHeight);\n      }\n    }\n    this.heightStyled = this.height ? this.height + \"px\" : \"\";\n    this.outerHeight = this.element.offsetHeight;\n  }\n  calcMinHeight() {\n    return this.table.options.resizableRows ? this.element.clientHeight : 0;\n  }\n  calcMaxHeight() {\n    var maxHeight = 0;\n    this.cells.forEach(function (cell) {\n      var height = cell.getHeight();\n      if (height > maxHeight) {\n        maxHeight = height;\n      }\n    });\n    return maxHeight;\n  }\n\n  //set of cells\n  setCellHeight() {\n    this.cells.forEach(function (cell) {\n      cell.setHeight();\n    });\n    this.heightInitialized = true;\n  }\n  clearCellHeight() {\n    this.cells.forEach(function (cell) {\n      cell.clearHeight();\n    });\n  }\n\n  //normalize the height of elements in the row\n  normalizeHeight(force) {\n    if (force && !this.table.options.rowHeight) {\n      this.clearCellHeight();\n    }\n    this.calcHeight(force);\n    this.setCellHeight();\n  }\n\n  //set height of rows\n  setHeight(height, force) {\n    if (this.height != height || force) {\n      this.manualHeight = true;\n      this.height = height;\n      this.heightStyled = height ? height + \"px\" : \"\";\n      this.setCellHeight();\n\n      // this.outerHeight = this.element.outerHeight();\n      this.outerHeight = this.element.offsetHeight;\n      if (this.subscribedExternal(\"rowHeight\")) {\n        this.dispatchExternal(\"rowHeight\", this.getComponent());\n      }\n    }\n  }\n\n  //return rows outer height\n  getHeight() {\n    return this.outerHeight;\n  }\n\n  //return rows outer Width\n  getWidth() {\n    return this.element.offsetWidth;\n  }\n\n  //////////////// Cell Management /////////////////\n  deleteCell(cell) {\n    var index = this.cells.indexOf(cell);\n    if (index > -1) {\n      this.cells.splice(index, 1);\n    }\n  }\n\n  //////////////// Data Management /////////////////\n  setData(data) {\n    this.data = this.chain(\"row-data-init-before\", [this, data], undefined, data);\n    this.dispatch(\"row-data-init-after\", this);\n  }\n\n  //update the rows data\n  updateData(updatedData) {\n    var visible = this.element && Helpers.elVisible(this.element),\n      tempData = {},\n      newRowData;\n    return new Promise((resolve, reject) => {\n      if (typeof updatedData === \"string\") {\n        updatedData = JSON.parse(updatedData);\n      }\n      this.dispatch(\"row-data-save-before\", this);\n      if (this.subscribed(\"row-data-changing\")) {\n        tempData = Object.assign(tempData, this.data);\n        tempData = Object.assign(tempData, updatedData);\n      }\n      newRowData = this.chain(\"row-data-changing\", [this, tempData, updatedData], null, updatedData);\n\n      //set data\n      for (let attrname in newRowData) {\n        this.data[attrname] = newRowData[attrname];\n      }\n      this.dispatch(\"row-data-save-after\", this);\n\n      //update affected cells only\n      for (let attrname in updatedData) {\n        let columns = this.table.columnManager.getColumnsByFieldRoot(attrname);\n        columns.forEach(column => {\n          let cell = this.getCell(column.getField());\n          if (cell) {\n            let value = column.getFieldValue(newRowData);\n            if (cell.getValue() !== value) {\n              cell.setValueProcessData(value);\n              if (visible) {\n                cell.cellRendered();\n              }\n            }\n          }\n        });\n      }\n\n      //Partial reinitialization if visible\n      if (visible) {\n        this.normalizeHeight(true);\n        if (this.table.options.rowFormatter) {\n          this.table.options.rowFormatter(this.getComponent());\n        }\n      } else {\n        this.initialized = false;\n        this.height = 0;\n        this.heightStyled = \"\";\n      }\n      this.dispatch(\"row-data-changed\", this, visible, updatedData);\n\n      //this.reinitialize();\n\n      this.dispatchExternal(\"rowUpdated\", this.getComponent());\n      if (this.subscribedExternal(\"dataChanged\")) {\n        this.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n      }\n      resolve();\n    });\n  }\n  getData(transform) {\n    if (transform) {\n      return this.chain(\"row-data-retrieve\", [this, transform], null, this.data);\n    }\n    return this.data;\n  }\n  getCell(column) {\n    var match = false;\n    column = this.table.columnManager.findColumn(column);\n    if (!this.initialized && this.cells.length === 0) {\n      this.generateCells();\n    }\n    match = this.cells.find(function (cell) {\n      return cell.column === column;\n    });\n    return match;\n  }\n  getCellIndex(findCell) {\n    return this.cells.findIndex(function (cell) {\n      return cell === findCell;\n    });\n  }\n  findCell(subject) {\n    return this.cells.find(cell => {\n      return cell.element === subject;\n    });\n  }\n  getCells() {\n    if (!this.initialized && this.cells.length === 0) {\n      this.generateCells();\n    }\n    return this.cells;\n  }\n  nextRow() {\n    var row = this.table.rowManager.nextDisplayRow(this, true);\n    return row || false;\n  }\n  prevRow() {\n    var row = this.table.rowManager.prevDisplayRow(this, true);\n    return row || false;\n  }\n  moveToRow(to, before) {\n    var toRow = this.table.rowManager.findRow(to);\n    if (toRow) {\n      this.table.rowManager.moveRowActual(this, toRow, !before);\n      this.table.rowManager.refreshActiveData(\"display\", false, true);\n    } else {\n      console.warn(\"Move Error - No matching row found:\", to);\n    }\n  }\n\n  ///////////////////// Actions  /////////////////////\n  delete() {\n    this.dispatch(\"row-delete\", this);\n    this.deleteActual();\n    return Promise.resolve();\n  }\n  deleteActual(blockRedraw) {\n    this.detachModules();\n    this.table.rowManager.deleteRow(this, blockRedraw);\n    this.deleteCells();\n    this.initialized = false;\n    this.heightInitialized = false;\n    this.element = false;\n    this.dispatch(\"row-deleted\", this);\n  }\n  detachModules() {\n    this.dispatch(\"row-deleting\", this);\n  }\n  deleteCells() {\n    var cellCount = this.cells.length;\n    for (let i = 0; i < cellCount; i++) {\n      this.cells[0].delete();\n    }\n  }\n  wipe() {\n    this.detachModules();\n    this.deleteCells();\n    if (this.element) {\n      while (this.element.firstChild) this.element.removeChild(this.element.firstChild);\n      if (this.element.parentNode) {\n        this.element.parentNode.removeChild(this.element);\n      }\n    }\n    this.element = false;\n    this.modules = {};\n  }\n  isDisplayed() {\n    return this.table.rowManager.getDisplayRows().includes(this);\n  }\n  getPosition() {\n    return this.isDisplayed() ? this.position : false;\n  }\n  setPosition(position) {\n    if (position != this.position) {\n      this.position = position;\n      this.positionWatchers.forEach(callback => {\n        callback(this.position);\n      });\n    }\n  }\n  watchPosition(callback) {\n    this.positionWatchers.push(callback);\n    callback(this.position);\n  }\n  getGroup() {\n    return this.modules.group || false;\n  }\n\n  //////////////// Object Generation /////////////////\n  getComponent() {\n    if (!this.component) {\n      this.component = new RowComponent(this);\n    }\n    return this.component;\n  }\n}\nvar defaultCalculations = {\n  \"avg\": function (values, data, calcParams) {\n    var output = 0,\n      precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : 2;\n    if (values.length) {\n      output = values.reduce(function (sum, value) {\n        return Number(sum) + Number(value);\n      });\n      output = output / values.length;\n      output = precision !== false ? output.toFixed(precision) : output;\n    }\n    return parseFloat(output).toString();\n  },\n  \"max\": function (values, data, calcParams) {\n    var output = null,\n      precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n    values.forEach(function (value) {\n      value = Number(value);\n      if (value > output || output === null) {\n        output = value;\n      }\n    });\n    return output !== null ? precision !== false ? output.toFixed(precision) : output : \"\";\n  },\n  \"min\": function (values, data, calcParams) {\n    var output = null,\n      precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n    values.forEach(function (value) {\n      value = Number(value);\n      if (value < output || output === null) {\n        output = value;\n      }\n    });\n    return output !== null ? precision !== false ? output.toFixed(precision) : output : \"\";\n  },\n  \"sum\": function (values, data, calcParams) {\n    var output = 0,\n      precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n    if (values.length) {\n      values.forEach(function (value) {\n        value = Number(value);\n        output += !isNaN(value) ? Number(value) : 0;\n      });\n    }\n    return precision !== false ? output.toFixed(precision) : output;\n  },\n  \"concat\": function (values, data, calcParams) {\n    var output = 0;\n    if (values.length) {\n      output = values.reduce(function (sum, value) {\n        return String(sum) + String(value);\n      });\n    }\n    return output;\n  },\n  \"count\": function (values, data, calcParams) {\n    var output = 0;\n    if (values.length) {\n      values.forEach(function (value) {\n        if (value) {\n          output++;\n        }\n      });\n    }\n    return output;\n  },\n  \"unique\": function (values, data, calcParams) {\n    var unique = values.filter((value, index) => {\n      return (values || value === 0) && values.indexOf(value) === index;\n    });\n    return unique.length;\n  }\n};\nclass ColumnCalcs extends Module {\n  static moduleName = \"columnCalcs\";\n\n  //load defaults\n  static calculations = defaultCalculations;\n  constructor(table) {\n    super(table);\n    this.topCalcs = [];\n    this.botCalcs = [];\n    this.genColumn = false;\n    this.topElement = this.createElement();\n    this.botElement = this.createElement();\n    this.topRow = false;\n    this.botRow = false;\n    this.topInitialized = false;\n    this.botInitialized = false;\n    this.blocked = false;\n    this.recalcAfterBlock = false;\n    this.registerTableOption(\"columnCalcs\", true);\n    this.registerColumnOption(\"topCalc\");\n    this.registerColumnOption(\"topCalcParams\");\n    this.registerColumnOption(\"topCalcFormatter\");\n    this.registerColumnOption(\"topCalcFormatterParams\");\n    this.registerColumnOption(\"bottomCalc\");\n    this.registerColumnOption(\"bottomCalcParams\");\n    this.registerColumnOption(\"bottomCalcFormatter\");\n    this.registerColumnOption(\"bottomCalcFormatterParams\");\n  }\n  createElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-calcs-holder\");\n    return el;\n  }\n  initialize() {\n    this.genColumn = new Column({\n      field: \"value\"\n    }, this);\n    this.subscribe(\"cell-value-changed\", this.cellValueChanged.bind(this));\n    this.subscribe(\"column-init\", this.initializeColumnCheck.bind(this));\n    this.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n    this.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\n    this.subscribe(\"row-added\", this.rowsUpdated.bind(this));\n    this.subscribe(\"column-moved\", this.recalcActiveRows.bind(this));\n    this.subscribe(\"column-add\", this.recalcActiveRows.bind(this));\n    this.subscribe(\"data-refreshed\", this.recalcActiveRowsRefresh.bind(this));\n    this.subscribe(\"table-redraw\", this.tableRedraw.bind(this));\n    this.subscribe(\"rows-visible\", this.visibleRows.bind(this));\n    this.subscribe(\"scrollbar-vertical\", this.adjustForScrollbar.bind(this));\n    this.subscribe(\"redraw-blocked\", this.blockRedraw.bind(this));\n    this.subscribe(\"redraw-restored\", this.restoreRedraw.bind(this));\n    this.subscribe(\"table-redrawing\", this.resizeHolderWidth.bind(this));\n    this.subscribe(\"column-resized\", this.resizeHolderWidth.bind(this));\n    this.subscribe(\"column-show\", this.resizeHolderWidth.bind(this));\n    this.subscribe(\"column-hide\", this.resizeHolderWidth.bind(this));\n    this.registerTableFunction(\"getCalcResults\", this.getResults.bind(this));\n    this.registerTableFunction(\"recalc\", this.userRecalc.bind(this));\n    this.resizeHolderWidth();\n  }\n  resizeHolderWidth() {\n    this.topElement.style.minWidth = this.table.columnManager.headersElement.offsetWidth + \"px\";\n  }\n  tableRedraw(force) {\n    this.recalc(this.table.rowManager.activeRows);\n    if (force) {\n      this.redraw();\n    }\n  }\n  blockRedraw() {\n    this.blocked = true;\n    this.recalcAfterBlock = false;\n  }\n  restoreRedraw() {\n    this.blocked = false;\n    if (this.recalcAfterBlock) {\n      this.recalcAfterBlock = false;\n      this.recalcActiveRowsRefresh();\n    }\n  }\n\n  ///////////////////////////////////\n  ///////// Table Functions /////////\n  ///////////////////////////////////\n  userRecalc() {\n    this.recalc(this.table.rowManager.activeRows);\n  }\n\n  ///////////////////////////////////\n  ///////// Internal Logic //////////\n  ///////////////////////////////////\n\n  blockCheck() {\n    if (this.blocked) {\n      this.recalcAfterBlock = true;\n    }\n    return this.blocked;\n  }\n  visibleRows(viewable, rows) {\n    if (this.topRow) {\n      rows.unshift(this.topRow);\n    }\n    if (this.botRow) {\n      rows.push(this.botRow);\n    }\n    return rows;\n  }\n  rowsUpdated(row) {\n    if (this.table.options.groupBy) {\n      this.recalcRowGroup(row);\n    } else {\n      this.recalcActiveRows();\n    }\n  }\n  recalcActiveRowsRefresh() {\n    if (this.table.options.groupBy && this.table.options.dataTreeStartExpanded && this.table.options.dataTree) {\n      this.recalcAll();\n    } else {\n      this.recalcActiveRows();\n    }\n  }\n  recalcActiveRows() {\n    this.recalc(this.table.rowManager.activeRows);\n  }\n  cellValueChanged(cell) {\n    if (cell.column.definition.topCalc || cell.column.definition.bottomCalc) {\n      if (this.table.options.groupBy) {\n        if (this.table.options.columnCalcs == \"table\" || this.table.options.columnCalcs == \"both\") {\n          this.recalcActiveRows();\n        }\n        if (this.table.options.columnCalcs != \"table\") {\n          this.recalcRowGroup(cell.row);\n        }\n      } else {\n        this.recalcActiveRows();\n      }\n    }\n  }\n  initializeColumnCheck(column) {\n    if (column.definition.topCalc || column.definition.bottomCalc) {\n      this.initializeColumn(column);\n    }\n  }\n\n  //initialize column calcs\n  initializeColumn(column) {\n    var def = column.definition;\n    var config = {\n      topCalcParams: def.topCalcParams || {},\n      botCalcParams: def.bottomCalcParams || {}\n    };\n    if (def.topCalc) {\n      switch (typeof def.topCalc) {\n        case \"string\":\n          if (ColumnCalcs.calculations[def.topCalc]) {\n            config.topCalc = ColumnCalcs.calculations[def.topCalc];\n          } else {\n            console.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.topCalc);\n          }\n          break;\n        case \"function\":\n          config.topCalc = def.topCalc;\n          break;\n      }\n      if (config.topCalc) {\n        column.modules.columnCalcs = config;\n        this.topCalcs.push(column);\n        if (this.table.options.columnCalcs != \"group\") {\n          this.initializeTopRow();\n        }\n      }\n    }\n    if (def.bottomCalc) {\n      switch (typeof def.bottomCalc) {\n        case \"string\":\n          if (ColumnCalcs.calculations[def.bottomCalc]) {\n            config.botCalc = ColumnCalcs.calculations[def.bottomCalc];\n          } else {\n            console.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.bottomCalc);\n          }\n          break;\n        case \"function\":\n          config.botCalc = def.bottomCalc;\n          break;\n      }\n      if (config.botCalc) {\n        column.modules.columnCalcs = config;\n        this.botCalcs.push(column);\n        if (this.table.options.columnCalcs != \"group\") {\n          this.initializeBottomRow();\n        }\n      }\n    }\n  }\n\n  //dummy functions to handle being mock column manager\n  registerColumnField() {}\n  removeCalcs() {\n    var changed = false;\n    if (this.topInitialized) {\n      this.topInitialized = false;\n      this.topElement.parentNode.removeChild(this.topElement);\n      changed = true;\n    }\n    if (this.botInitialized) {\n      this.botInitialized = false;\n      this.footerRemove(this.botElement);\n      changed = true;\n    }\n    if (changed) {\n      this.table.rowManager.adjustTableSize();\n    }\n  }\n  reinitializeCalcs() {\n    if (this.topCalcs.length) {\n      this.initializeTopRow();\n    }\n    if (this.botCalcs.length) {\n      this.initializeBottomRow();\n    }\n  }\n  initializeTopRow() {\n    var fragment = document.createDocumentFragment();\n    if (!this.topInitialized) {\n      fragment.appendChild(document.createElement(\"br\"));\n      fragment.appendChild(this.topElement);\n      this.table.columnManager.getContentsElement().insertBefore(fragment, this.table.columnManager.headersElement.nextSibling);\n      this.topInitialized = true;\n    }\n  }\n  initializeBottomRow() {\n    if (!this.botInitialized) {\n      this.footerPrepend(this.botElement);\n      this.botInitialized = true;\n    }\n  }\n  scrollHorizontal(left) {\n    if (this.botInitialized && this.botRow) {\n      this.botElement.scrollLeft = left;\n    }\n  }\n  recalc(rows) {\n    var data, row;\n    if (!this.blockCheck()) {\n      if (this.topInitialized || this.botInitialized) {\n        data = this.rowsToData(rows);\n        if (this.topInitialized) {\n          if (this.topRow) {\n            this.topRow.deleteCells();\n          }\n          row = this.generateRow(\"top\", data);\n          this.topRow = row;\n          while (this.topElement.firstChild) this.topElement.removeChild(this.topElement.firstChild);\n          this.topElement.appendChild(row.getElement());\n          row.initialize(true);\n        }\n        if (this.botInitialized) {\n          if (this.botRow) {\n            this.botRow.deleteCells();\n          }\n          row = this.generateRow(\"bottom\", data);\n          this.botRow = row;\n          while (this.botElement.firstChild) this.botElement.removeChild(this.botElement.firstChild);\n          this.botElement.appendChild(row.getElement());\n          row.initialize(true);\n        }\n        this.table.rowManager.adjustTableSize();\n\n        //set resizable handles\n        if (this.table.modExists(\"frozenColumns\")) {\n          this.table.modules.frozenColumns.layout();\n        }\n      }\n    }\n  }\n  recalcRowGroup(row) {\n    this.recalcGroup(this.table.modules.groupRows.getRowGroup(row));\n  }\n  recalcAll() {\n    if (this.topCalcs.length || this.botCalcs.length) {\n      if (this.table.options.columnCalcs !== \"group\") {\n        this.recalcActiveRows();\n      }\n      if (this.table.options.groupBy && this.table.options.columnCalcs !== \"table\") {\n        var groups = this.table.modules.groupRows.getChildGroups();\n        groups.forEach(group => {\n          this.recalcGroup(group);\n        });\n      }\n    }\n  }\n  recalcGroup(group) {\n    var data, rowData;\n    if (!this.blockCheck()) {\n      if (group) {\n        if (group.calcs) {\n          if (group.calcs.bottom) {\n            data = this.rowsToData(group.rows);\n            rowData = this.generateRowData(\"bottom\", data);\n            group.calcs.bottom.updateData(rowData);\n            group.calcs.bottom.reinitialize();\n          }\n          if (group.calcs.top) {\n            data = this.rowsToData(group.rows);\n            rowData = this.generateRowData(\"top\", data);\n            group.calcs.top.updateData(rowData);\n            group.calcs.top.reinitialize();\n          }\n        }\n      }\n    }\n  }\n\n  //generate top stats row\n  generateTopRow(rows) {\n    return this.generateRow(\"top\", this.rowsToData(rows));\n  }\n  //generate bottom stats row\n  generateBottomRow(rows) {\n    return this.generateRow(\"bottom\", this.rowsToData(rows));\n  }\n  rowsToData(rows) {\n    var data = [],\n      hasDataTreeColumnCalcs = this.table.options.dataTree && this.table.options.dataTreeChildColumnCalcs,\n      dataTree = this.table.modules.dataTree;\n    rows.forEach(row => {\n      data.push(row.getData());\n      if (hasDataTreeColumnCalcs && row.modules.dataTree?.open) {\n        this.rowsToData(dataTree.getFilteredTreeChildren(row)).forEach(dataRow => {\n          data.push(row);\n        });\n      }\n    });\n    return data;\n  }\n\n  //generate stats row\n  generateRow(pos, data) {\n    var rowData = this.generateRowData(pos, data),\n      row;\n    if (this.table.modExists(\"mutator\")) {\n      this.table.modules.mutator.disable();\n    }\n    row = new Row(rowData, this, \"calc\");\n    if (this.table.modExists(\"mutator\")) {\n      this.table.modules.mutator.enable();\n    }\n    row.getElement().classList.add(\"tabulator-calcs\", \"tabulator-calcs-\" + pos);\n    row.component = false;\n    row.getComponent = () => {\n      if (!row.component) {\n        row.component = new CalcComponent(row);\n      }\n      return row.component;\n    };\n    row.generateCells = () => {\n      var cells = [];\n      this.table.columnManager.columnsByIndex.forEach(column => {\n        //set field name of mock column\n        this.genColumn.setField(column.getField());\n        this.genColumn.hozAlign = column.hozAlign;\n        if (column.definition[pos + \"CalcFormatter\"] && this.table.modExists(\"format\")) {\n          this.genColumn.modules.format = {\n            formatter: this.table.modules.format.getFormatter(column.definition[pos + \"CalcFormatter\"]),\n            params: column.definition[pos + \"CalcFormatterParams\"] || {}\n          };\n        } else {\n          this.genColumn.modules.format = {\n            formatter: this.table.modules.format.getFormatter(\"plaintext\"),\n            params: {}\n          };\n        }\n\n        //ensure css class definition is replicated to calculation cell\n        this.genColumn.definition.cssClass = column.definition.cssClass;\n\n        //generate cell and assign to correct column\n        var cell = new Cell(this.genColumn, row);\n        cell.getElement();\n        cell.column = column;\n        cell.setWidth();\n        column.cells.push(cell);\n        cells.push(cell);\n        if (!column.visible) {\n          cell.hide();\n        }\n      });\n      row.cells = cells;\n    };\n    return row;\n  }\n\n  //generate stats row\n  generateRowData(pos, data) {\n    var rowData = {},\n      calcs = pos == \"top\" ? this.topCalcs : this.botCalcs,\n      type = pos == \"top\" ? \"topCalc\" : \"botCalc\",\n      params,\n      paramKey;\n    calcs.forEach(function (column) {\n      var values = [];\n      if (column.modules.columnCalcs && column.modules.columnCalcs[type]) {\n        data.forEach(function (item) {\n          values.push(column.getFieldValue(item));\n        });\n        paramKey = type + \"Params\";\n        params = typeof column.modules.columnCalcs[paramKey] === \"function\" ? column.modules.columnCalcs[paramKey](values, data) : column.modules.columnCalcs[paramKey];\n        column.setFieldValue(rowData, column.modules.columnCalcs[type](values, data, params));\n      }\n    });\n    return rowData;\n  }\n  hasTopCalcs() {\n    return !!this.topCalcs.length;\n  }\n  hasBottomCalcs() {\n    return !!this.botCalcs.length;\n  }\n\n  //handle table redraw\n  redraw() {\n    if (this.topRow) {\n      this.topRow.normalizeHeight(true);\n    }\n    if (this.botRow) {\n      this.botRow.normalizeHeight(true);\n    }\n  }\n\n  //return the calculated\n  getResults() {\n    var results = {},\n      groups;\n    if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n      groups = this.table.modules.groupRows.getGroups(true);\n      groups.forEach(group => {\n        results[group.getKey()] = this.getGroupResults(group);\n      });\n    } else {\n      results = {\n        top: this.topRow ? this.topRow.getData() : {},\n        bottom: this.botRow ? this.botRow.getData() : {}\n      };\n    }\n    return results;\n  }\n\n  //get results from a group\n  getGroupResults(group) {\n    var groupObj = group._getSelf(),\n      subGroups = group.getSubGroups(),\n      subGroupResults = {},\n      results = {};\n    subGroups.forEach(subgroup => {\n      subGroupResults[subgroup.getKey()] = this.getGroupResults(subgroup);\n    });\n    results = {\n      top: groupObj.calcs.top ? groupObj.calcs.top.getData() : {},\n      bottom: groupObj.calcs.bottom ? groupObj.calcs.bottom.getData() : {},\n      groups: subGroupResults\n    };\n    return results;\n  }\n  adjustForScrollbar(width) {\n    if (this.botRow) {\n      if (this.table.rtl) {\n        this.botElement.style.paddingLeft = width + \"px\";\n      } else {\n        this.botElement.style.paddingRight = width + \"px\";\n      }\n    }\n  }\n}\nclass DataTree extends Module {\n  static moduleName = \"dataTree\";\n  constructor(table) {\n    super(table);\n    this.indent = 10;\n    this.field = \"\";\n    this.collapseEl = null;\n    this.expandEl = null;\n    this.branchEl = null;\n    this.elementField = false;\n    this.startOpen = function () {};\n    this.registerTableOption(\"dataTree\", false); //enable data tree\n    this.registerTableOption(\"dataTreeFilter\", true); //filter child rows\n    this.registerTableOption(\"dataTreeSort\", true); //sort child rows\n    this.registerTableOption(\"dataTreeElementColumn\", false);\n    this.registerTableOption(\"dataTreeBranchElement\", true); //show data tree branch element\n    this.registerTableOption(\"dataTreeChildIndent\", 9); //data tree child indent in px\n    this.registerTableOption(\"dataTreeChildField\", \"_children\"); //data tre column field to look for child rows\n    this.registerTableOption(\"dataTreeCollapseElement\", false); //data tree row collapse element\n    this.registerTableOption(\"dataTreeExpandElement\", false); //data tree row expand element\n    this.registerTableOption(\"dataTreeStartExpanded\", false);\n    this.registerTableOption(\"dataTreeChildColumnCalcs\", false); //include visible data tree rows in column calculations\n    this.registerTableOption(\"dataTreeSelectPropagate\", false); //selecting a parent row selects its children\n\n    //register component functions\n    this.registerComponentFunction(\"row\", \"treeCollapse\", this.collapseRow.bind(this));\n    this.registerComponentFunction(\"row\", \"treeExpand\", this.expandRow.bind(this));\n    this.registerComponentFunction(\"row\", \"treeToggle\", this.toggleRow.bind(this));\n    this.registerComponentFunction(\"row\", \"getTreeParent\", this.getTreeParent.bind(this));\n    this.registerComponentFunction(\"row\", \"getTreeChildren\", this.getRowChildren.bind(this));\n    this.registerComponentFunction(\"row\", \"addTreeChild\", this.addTreeChildRow.bind(this));\n    this.registerComponentFunction(\"row\", \"isTreeExpanded\", this.isRowExpanded.bind(this));\n  }\n  initialize() {\n    if (this.table.options.dataTree) {\n      var dummyEl = null,\n        options = this.table.options;\n      this.field = options.dataTreeChildField;\n      this.indent = options.dataTreeChildIndent;\n      if (this.options(\"movableRows\")) {\n        console.warn(\"The movableRows option is not available with dataTree enabled, moving of child rows could result in unpredictable behavior\");\n      }\n      if (options.dataTreeBranchElement) {\n        if (options.dataTreeBranchElement === true) {\n          this.branchEl = document.createElement(\"div\");\n          this.branchEl.classList.add(\"tabulator-data-tree-branch\");\n        } else {\n          if (typeof options.dataTreeBranchElement === \"string\") {\n            dummyEl = document.createElement(\"div\");\n            dummyEl.innerHTML = options.dataTreeBranchElement;\n            this.branchEl = dummyEl.firstChild;\n          } else {\n            this.branchEl = options.dataTreeBranchElement;\n          }\n        }\n      } else {\n        this.branchEl = document.createElement(\"div\");\n        this.branchEl.classList.add(\"tabulator-data-tree-branch-empty\");\n      }\n      if (options.dataTreeCollapseElement) {\n        if (typeof options.dataTreeCollapseElement === \"string\") {\n          dummyEl = document.createElement(\"div\");\n          dummyEl.innerHTML = options.dataTreeCollapseElement;\n          this.collapseEl = dummyEl.firstChild;\n        } else {\n          this.collapseEl = options.dataTreeCollapseElement;\n        }\n      } else {\n        this.collapseEl = document.createElement(\"div\");\n        this.collapseEl.classList.add(\"tabulator-data-tree-control\");\n        this.collapseEl.tabIndex = 0;\n        this.collapseEl.innerHTML = \"<div class='tabulator-data-tree-control-collapse'></div>\";\n      }\n      if (options.dataTreeExpandElement) {\n        if (typeof options.dataTreeExpandElement === \"string\") {\n          dummyEl = document.createElement(\"div\");\n          dummyEl.innerHTML = options.dataTreeExpandElement;\n          this.expandEl = dummyEl.firstChild;\n        } else {\n          this.expandEl = options.dataTreeExpandElement;\n        }\n      } else {\n        this.expandEl = document.createElement(\"div\");\n        this.expandEl.classList.add(\"tabulator-data-tree-control\");\n        this.expandEl.tabIndex = 0;\n        this.expandEl.innerHTML = \"<div class='tabulator-data-tree-control-expand'></div>\";\n      }\n      switch (typeof options.dataTreeStartExpanded) {\n        case \"boolean\":\n          this.startOpen = function (row, index) {\n            return options.dataTreeStartExpanded;\n          };\n          break;\n        case \"function\":\n          this.startOpen = options.dataTreeStartExpanded;\n          break;\n        default:\n          this.startOpen = function (row, index) {\n            return options.dataTreeStartExpanded[index];\n          };\n          break;\n      }\n      this.subscribe(\"row-init\", this.initializeRow.bind(this));\n      this.subscribe(\"row-layout-after\", this.layoutRow.bind(this));\n      this.subscribe(\"row-deleted\", this.rowDelete.bind(this), 0);\n      this.subscribe(\"row-data-changed\", this.rowDataChanged.bind(this), 10);\n      this.subscribe(\"cell-value-updated\", this.cellValueChanged.bind(this));\n      this.subscribe(\"edit-cancelled\", this.cellValueChanged.bind(this));\n      this.subscribe(\"column-moving-rows\", this.columnMoving.bind(this));\n      this.subscribe(\"table-built\", this.initializeElementField.bind(this));\n      this.subscribe(\"table-redrawing\", this.tableRedrawing.bind(this));\n      this.registerDisplayHandler(this.getRows.bind(this), 30);\n    }\n  }\n  tableRedrawing(force) {\n    var rows;\n    if (force) {\n      rows = this.table.rowManager.getRows();\n      rows.forEach(row => {\n        this.reinitializeRowChildren(row);\n      });\n    }\n  }\n  initializeElementField() {\n    var firstCol = this.table.columnManager.getFirstVisibleColumn();\n    this.elementField = this.table.options.dataTreeElementColumn || (firstCol ? firstCol.field : false);\n  }\n  getRowChildren(row) {\n    return this.getTreeChildren(row, true);\n  }\n  columnMoving() {\n    var rows = [];\n    this.table.rowManager.rows.forEach(row => {\n      rows = rows.concat(this.getTreeChildren(row, false, true));\n    });\n    return rows;\n  }\n  rowDataChanged(row, visible, updatedData) {\n    if (this.redrawNeeded(updatedData)) {\n      this.initializeRow(row);\n      if (visible) {\n        this.layoutRow(row);\n        this.refreshData(true);\n      }\n    }\n  }\n  cellValueChanged(cell) {\n    var field = cell.column.getField();\n    if (field === this.elementField) {\n      this.layoutRow(cell.row);\n    }\n  }\n  initializeRow(row) {\n    var childArray = row.getData()[this.field];\n    var isArray = Array.isArray(childArray);\n    var children = isArray || !isArray && typeof childArray === \"object\" && childArray !== null;\n    if (!children && row.modules.dataTree && row.modules.dataTree.branchEl) {\n      row.modules.dataTree.branchEl.parentNode.removeChild(row.modules.dataTree.branchEl);\n    }\n    if (!children && row.modules.dataTree && row.modules.dataTree.controlEl) {\n      row.modules.dataTree.controlEl.parentNode.removeChild(row.modules.dataTree.controlEl);\n    }\n    row.modules.dataTree = {\n      index: row.modules.dataTree ? row.modules.dataTree.index : 0,\n      open: children ? row.modules.dataTree ? row.modules.dataTree.open : this.startOpen(row.getComponent(), 0) : false,\n      controlEl: row.modules.dataTree && children ? row.modules.dataTree.controlEl : false,\n      branchEl: row.modules.dataTree && children ? row.modules.dataTree.branchEl : false,\n      parent: row.modules.dataTree ? row.modules.dataTree.parent : false,\n      children: children\n    };\n  }\n  reinitializeRowChildren(row) {\n    var children = this.getTreeChildren(row, false, true);\n    children.forEach(function (child) {\n      child.reinitialize(true);\n    });\n  }\n  layoutRow(row) {\n    var cell = this.elementField ? row.getCell(this.elementField) : row.getCells()[0],\n      el = cell.getElement(),\n      config = row.modules.dataTree;\n    if (config.branchEl) {\n      if (config.branchEl.parentNode) {\n        config.branchEl.parentNode.removeChild(config.branchEl);\n      }\n      config.branchEl = false;\n    }\n    if (config.controlEl) {\n      if (config.controlEl.parentNode) {\n        config.controlEl.parentNode.removeChild(config.controlEl);\n      }\n      config.controlEl = false;\n    }\n    this.generateControlElement(row, el);\n    row.getElement().classList.add(\"tabulator-tree-level-\" + config.index);\n    if (config.index) {\n      if (this.branchEl) {\n        config.branchEl = this.branchEl.cloneNode(true);\n        el.insertBefore(config.branchEl, el.firstChild);\n        if (this.table.rtl) {\n          config.branchEl.style.marginRight = (config.branchEl.offsetWidth + config.branchEl.style.marginLeft) * (config.index - 1) + config.index * this.indent + \"px\";\n        } else {\n          config.branchEl.style.marginLeft = (config.branchEl.offsetWidth + config.branchEl.style.marginRight) * (config.index - 1) + config.index * this.indent + \"px\";\n        }\n      } else {\n        if (this.table.rtl) {\n          el.style.paddingRight = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-right')) + config.index * this.indent + \"px\";\n        } else {\n          el.style.paddingLeft = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-left')) + config.index * this.indent + \"px\";\n        }\n      }\n    }\n  }\n  generateControlElement(row, el) {\n    var config = row.modules.dataTree,\n      oldControl = config.controlEl;\n    el = el || row.getCells()[0].getElement();\n    if (config.children !== false) {\n      if (config.open) {\n        config.controlEl = this.collapseEl.cloneNode(true);\n        config.controlEl.addEventListener(\"click\", e => {\n          e.stopPropagation();\n          this.collapseRow(row);\n        });\n      } else {\n        config.controlEl = this.expandEl.cloneNode(true);\n        config.controlEl.addEventListener(\"click\", e => {\n          e.stopPropagation();\n          this.expandRow(row);\n        });\n      }\n      config.controlEl.addEventListener(\"mousedown\", e => {\n        e.stopPropagation();\n      });\n      if (oldControl && oldControl.parentNode === el) {\n        oldControl.parentNode.replaceChild(config.controlEl, oldControl);\n      } else {\n        el.insertBefore(config.controlEl, el.firstChild);\n      }\n    }\n  }\n  getRows(rows) {\n    var output = [];\n    rows.forEach((row, i) => {\n      var config, children;\n      output.push(row);\n      if (row instanceof Row) {\n        row.create();\n        config = row.modules.dataTree;\n        if (!config.index && config.children !== false) {\n          children = this.getChildren(row, false, true);\n          children.forEach(child => {\n            child.create();\n            output.push(child);\n          });\n        }\n      }\n    });\n    return output;\n  }\n  getChildren(row, allChildren, sortOnly) {\n    var config = row.modules.dataTree,\n      children = [],\n      output = [];\n    if (config.children !== false && (config.open || allChildren)) {\n      if (!Array.isArray(config.children)) {\n        config.children = this.generateChildren(row);\n      }\n      if (this.table.modExists(\"filter\") && this.table.options.dataTreeFilter) {\n        children = this.table.modules.filter.filter(config.children);\n      } else {\n        children = config.children;\n      }\n      if (this.table.modExists(\"sort\") && this.table.options.dataTreeSort) {\n        this.table.modules.sort.sort(children, sortOnly);\n      }\n      children.forEach(child => {\n        output.push(child);\n        var subChildren = this.getChildren(child, false, true);\n        subChildren.forEach(sub => {\n          output.push(sub);\n        });\n      });\n    }\n    return output;\n  }\n  generateChildren(row) {\n    var children = [];\n    var childArray = row.getData()[this.field];\n    if (!Array.isArray(childArray)) {\n      childArray = [childArray];\n    }\n    childArray.forEach(childData => {\n      var childRow = new Row(childData || {}, this.table.rowManager);\n      childRow.create();\n      childRow.modules.dataTree.index = row.modules.dataTree.index + 1;\n      childRow.modules.dataTree.parent = row;\n      if (childRow.modules.dataTree.children) {\n        childRow.modules.dataTree.open = this.startOpen(childRow.getComponent(), childRow.modules.dataTree.index);\n      }\n      children.push(childRow);\n    });\n    return children;\n  }\n  expandRow(row, silent) {\n    var config = row.modules.dataTree;\n    if (config.children !== false) {\n      config.open = true;\n      row.reinitialize();\n      this.refreshData(true);\n      this.dispatchExternal(\"dataTreeRowExpanded\", row.getComponent(), row.modules.dataTree.index);\n    }\n  }\n  collapseRow(row) {\n    var config = row.modules.dataTree;\n    if (config.children !== false) {\n      config.open = false;\n      row.reinitialize();\n      this.refreshData(true);\n      this.dispatchExternal(\"dataTreeRowCollapsed\", row.getComponent(), row.modules.dataTree.index);\n    }\n  }\n  toggleRow(row) {\n    var config = row.modules.dataTree;\n    if (config.children !== false) {\n      if (config.open) {\n        this.collapseRow(row);\n      } else {\n        this.expandRow(row);\n      }\n    }\n  }\n  isRowExpanded(row) {\n    return row.modules.dataTree.open;\n  }\n  getTreeParent(row) {\n    return row.modules.dataTree.parent ? row.modules.dataTree.parent.getComponent() : false;\n  }\n  getTreeParentRoot(row) {\n    return row.modules.dataTree && row.modules.dataTree.parent ? this.getTreeParentRoot(row.modules.dataTree.parent) : row;\n  }\n  getFilteredTreeChildren(row) {\n    var config = row.modules.dataTree,\n      output = [],\n      children;\n    if (config.children) {\n      if (!Array.isArray(config.children)) {\n        config.children = this.generateChildren(row);\n      }\n      if (this.table.modExists(\"filter\") && this.table.options.dataTreeFilter) {\n        children = this.table.modules.filter.filter(config.children);\n      } else {\n        children = config.children;\n      }\n      children.forEach(childRow => {\n        if (childRow instanceof Row) {\n          output.push(childRow);\n        }\n      });\n    }\n    return output;\n  }\n  rowDelete(row) {\n    var parent = row.modules.dataTree.parent,\n      childIndex;\n    if (parent) {\n      childIndex = this.findChildIndex(row, parent);\n      if (childIndex !== false) {\n        parent.data[this.field].splice(childIndex, 1);\n      }\n      if (!parent.data[this.field].length) {\n        delete parent.data[this.field];\n      }\n      this.initializeRow(parent);\n      this.layoutRow(parent);\n    }\n    this.refreshData(true);\n  }\n  addTreeChildRow(row, data, top, index) {\n    var childIndex = false;\n    if (typeof data === \"string\") {\n      data = JSON.parse(data);\n    }\n    if (!Array.isArray(row.data[this.field])) {\n      row.data[this.field] = [];\n      row.modules.dataTree.open = this.startOpen(row.getComponent(), row.modules.dataTree.index);\n    }\n    if (typeof index !== \"undefined\") {\n      childIndex = this.findChildIndex(index, row);\n      if (childIndex !== false) {\n        row.data[this.field].splice(top ? childIndex : childIndex + 1, 0, data);\n      }\n    }\n    if (childIndex === false) {\n      if (top) {\n        row.data[this.field].unshift(data);\n      } else {\n        row.data[this.field].push(data);\n      }\n    }\n    this.initializeRow(row);\n    this.layoutRow(row);\n    this.refreshData(true);\n  }\n  findChildIndex(subject, parent) {\n    var match = false;\n    if (typeof subject == \"object\") {\n      if (subject instanceof Row) {\n        //subject is row element\n        match = subject.data;\n      } else if (subject instanceof RowComponent) {\n        //subject is public row component\n        match = subject._getSelf().data;\n      } else if (typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement) {\n        if (parent.modules.dataTree) {\n          match = parent.modules.dataTree.children.find(childRow => {\n            return childRow instanceof Row ? childRow.element === subject : false;\n          });\n          if (match) {\n            match = match.data;\n          }\n        }\n      } else if (subject === null) {\n        match = false;\n      }\n    } else if (typeof subject == \"undefined\") {\n      match = false;\n    } else {\n      //subject should be treated as the index of the row\n      match = parent.data[this.field].find(row => {\n        return row.data[this.table.options.index] == subject;\n      });\n    }\n    if (match) {\n      if (Array.isArray(parent.data[this.field])) {\n        match = parent.data[this.field].indexOf(match);\n      }\n      if (match == -1) {\n        match = false;\n      }\n    }\n\n    //catch all for any other type of input\n\n    return match;\n  }\n  getTreeChildren(row, component, recurse) {\n    var config = row.modules.dataTree,\n      output = [];\n    if (config && config.children) {\n      if (!Array.isArray(config.children)) {\n        config.children = this.generateChildren(row);\n      }\n      config.children.forEach(childRow => {\n        if (childRow instanceof Row) {\n          output.push(component ? childRow.getComponent() : childRow);\n          if (recurse) {\n            this.getTreeChildren(childRow, component, recurse).forEach(child => {\n              output.push(child);\n            });\n          }\n        }\n      });\n    }\n    return output;\n  }\n  getChildField() {\n    return this.field;\n  }\n  redrawNeeded(data) {\n    return (this.field ? typeof data[this.field] !== \"undefined\" : false) || (this.elementField ? typeof data[this.elementField] !== \"undefined\" : false);\n  }\n}\nfunction csv$1(list, options = {}, setFileContents) {\n  var delimiter = options.delimiter ? options.delimiter : \",\",\n    fileContents = [],\n    headers = [];\n  list.forEach(row => {\n    var item = [];\n    switch (row.type) {\n      case \"group\":\n        console.warn(\"Download Warning - CSV downloader cannot process row groups\");\n        break;\n      case \"calc\":\n        console.warn(\"Download Warning - CSV downloader cannot process column calculations\");\n        break;\n      case \"header\":\n        row.columns.forEach((col, i) => {\n          if (col && col.depth === 1) {\n            headers[i] = typeof col.value == \"undefined\" || col.value === null ? \"\" : '\"' + String(col.value).split('\"').join('\"\"') + '\"';\n          }\n        });\n        break;\n      case \"row\":\n        row.columns.forEach(col => {\n          if (col) {\n            switch (typeof col.value) {\n              case \"object\":\n                col.value = col.value !== null ? JSON.stringify(col.value) : \"\";\n                break;\n              case \"undefined\":\n                col.value = \"\";\n                break;\n            }\n            item.push('\"' + String(col.value).split('\"').join('\"\"') + '\"');\n          }\n        });\n        fileContents.push(item.join(delimiter));\n        break;\n    }\n  });\n  if (headers.length) {\n    fileContents.unshift(headers.join(delimiter));\n  }\n  fileContents = fileContents.join(\"\\n\");\n  if (options.bom) {\n    fileContents = \"\\ufeff\" + fileContents;\n  }\n  setFileContents(fileContents, \"text/csv\");\n}\nfunction json$1(list, options, setFileContents) {\n  var fileContents = [];\n  list.forEach(row => {\n    var item = {};\n    switch (row.type) {\n      case \"header\":\n        break;\n      case \"group\":\n        console.warn(\"Download Warning - JSON downloader cannot process row groups\");\n        break;\n      case \"calc\":\n        console.warn(\"Download Warning - JSON downloader cannot process column calculations\");\n        break;\n      case \"row\":\n        row.columns.forEach(col => {\n          if (col) {\n            item[col.component.getTitleDownload() || col.component.getField()] = col.value;\n          }\n        });\n        fileContents.push(item);\n        break;\n    }\n  });\n  fileContents = JSON.stringify(fileContents, null, '\\t');\n  setFileContents(fileContents, \"application/json\");\n}\nfunction pdf(list, options = {}, setFileContents) {\n  var header = [],\n    body = [],\n    autoTableParams = {},\n    rowGroupStyles = options.rowGroupStyles || {\n      fontStyle: \"bold\",\n      fontSize: 12,\n      cellPadding: 6,\n      fillColor: 220\n    },\n    rowCalcStyles = options.rowCalcStyles || {\n      fontStyle: \"bold\",\n      fontSize: 10,\n      cellPadding: 4,\n      fillColor: 232\n    },\n    jsPDFParams = options.jsPDF || {},\n    title = options.title ? options.title : \"\";\n  if (!jsPDFParams.orientation) {\n    jsPDFParams.orientation = options.orientation || \"landscape\";\n  }\n  if (!jsPDFParams.unit) {\n    jsPDFParams.unit = \"pt\";\n  }\n\n  //parse row list\n  list.forEach(row => {\n    switch (row.type) {\n      case \"header\":\n        header.push(parseRow(row));\n        break;\n      case \"group\":\n        body.push(parseRow(row, rowGroupStyles));\n        break;\n      case \"calc\":\n        body.push(parseRow(row, rowCalcStyles));\n        break;\n      case \"row\":\n        body.push(parseRow(row));\n        break;\n    }\n  });\n  function parseRow(row, styles) {\n    var rowData = [];\n    row.columns.forEach(col => {\n      var cell;\n      if (col) {\n        switch (typeof col.value) {\n          case \"object\":\n            col.value = col.value !== null ? JSON.stringify(col.value) : \"\";\n            break;\n          case \"undefined\":\n            col.value = \"\";\n            break;\n        }\n        cell = {\n          content: col.value,\n          colSpan: col.width,\n          rowSpan: col.height\n        };\n        if (styles) {\n          cell.styles = styles;\n        }\n        rowData.push(cell);\n      }\n    });\n    return rowData;\n  }\n\n  //configure PDF\n  var doc = new jspdf.jsPDF(jsPDFParams); //set document to landscape, better for most tables\n\n  if (options.autoTable) {\n    if (typeof options.autoTable === \"function\") {\n      autoTableParams = options.autoTable(doc) || {};\n    } else {\n      autoTableParams = options.autoTable;\n    }\n  }\n  if (title) {\n    autoTableParams.didDrawPage = function (data) {\n      doc.text(title, 40, 30);\n    };\n  }\n  autoTableParams.head = header;\n  autoTableParams.body = body;\n  doc.autoTable(autoTableParams);\n  if (options.documentProcessing) {\n    options.documentProcessing(doc);\n  }\n  setFileContents(doc.output(\"arraybuffer\"), \"application/pdf\");\n}\nfunction xlsx$1(list, options, setFileContents) {\n  var self = this,\n    sheetName = options.sheetName || \"Sheet1\",\n    workbook = XLSX.utils.book_new(),\n    tableFeatures = new CoreFeature(this),\n    compression = 'compress' in options ? options.compress : true,\n    writeOptions = options.writeOptions || {\n      bookType: 'xlsx',\n      bookSST: true,\n      compression\n    },\n    output;\n  writeOptions.type = 'binary';\n  workbook.SheetNames = [];\n  workbook.Sheets = {};\n  function generateSheet() {\n    var rows = [],\n      merges = [],\n      worksheet = {},\n      range = {\n        s: {\n          c: 0,\n          r: 0\n        },\n        e: {\n          c: list[0] ? list[0].columns.reduce((a, b) => a + (b && b.width ? b.width : 1), 0) : 0,\n          r: list.length\n        }\n      };\n\n    //parse row list\n    list.forEach((row, i) => {\n      var rowData = [];\n      row.columns.forEach(function (col, j) {\n        if (col) {\n          rowData.push(!(col.value instanceof Date) && typeof col.value === \"object\" ? JSON.stringify(col.value) : col.value);\n          if (col.width > 1 || col.height > -1) {\n            if (col.height > 1 || col.width > 1) {\n              merges.push({\n                s: {\n                  r: i,\n                  c: j\n                },\n                e: {\n                  r: i + col.height - 1,\n                  c: j + col.width - 1\n                }\n              });\n            }\n          }\n        } else {\n          rowData.push(\"\");\n        }\n      });\n      rows.push(rowData);\n    });\n\n    //convert rows to worksheet\n    XLSX.utils.sheet_add_aoa(worksheet, rows);\n    worksheet['!ref'] = XLSX.utils.encode_range(range);\n    if (merges.length) {\n      worksheet[\"!merges\"] = merges;\n    }\n    return worksheet;\n  }\n  if (options.sheetOnly) {\n    setFileContents(generateSheet());\n    return;\n  }\n  if (options.sheets) {\n    for (var sheet in options.sheets) {\n      if (options.sheets[sheet] === true) {\n        workbook.SheetNames.push(sheet);\n        workbook.Sheets[sheet] = generateSheet();\n      } else {\n        workbook.SheetNames.push(sheet);\n        tableFeatures.commsSend(options.sheets[sheet], \"download\", \"intercept\", {\n          type: \"xlsx\",\n          options: {\n            sheetOnly: true\n          },\n          active: self.active,\n          intercept: function (data) {\n            workbook.Sheets[sheet] = data;\n          }\n        });\n      }\n    }\n  } else {\n    workbook.SheetNames.push(sheetName);\n    workbook.Sheets[sheetName] = generateSheet();\n  }\n  if (options.documentProcessing) {\n    workbook = options.documentProcessing(workbook);\n  }\n\n  //convert workbook to binary array\n  function s2ab(s) {\n    var buf = new ArrayBuffer(s.length);\n    var view = new Uint8Array(buf);\n    for (var i = 0; i != s.length; ++i) view[i] = s.charCodeAt(i) & 0xFF;\n    return buf;\n  }\n  output = XLSX.write(workbook, writeOptions);\n  setFileContents(s2ab(output), \"application/octet-stream\");\n}\nfunction html$1(list, options, setFileContents) {\n  if (this.modExists(\"export\", true)) {\n    setFileContents(this.modules.export.generateHTMLTable(list), \"text/html\");\n  }\n}\nfunction jsonLines(list, options, setFileContents) {\n  const fileContents = [];\n  list.forEach(row => {\n    const item = {};\n    switch (row.type) {\n      case \"header\":\n        break;\n      case \"group\":\n        console.warn(\"Download Warning - JSON downloader cannot process row groups\");\n        break;\n      case \"calc\":\n        console.warn(\"Download Warning - JSON downloader cannot process column calculations\");\n        break;\n      case \"row\":\n        row.columns.forEach(col => {\n          if (col) {\n            item[col.component.getTitleDownload() || col.component.getField()] = col.value;\n          }\n        });\n        fileContents.push(JSON.stringify(item));\n        break;\n    }\n  });\n  setFileContents(fileContents.join(\"\\n\"), \"application/x-ndjson\");\n}\nvar defaultDownloaders = {\n  csv: csv$1,\n  json: json$1,\n  jsonLines: jsonLines,\n  pdf: pdf,\n  xlsx: xlsx$1,\n  html: html$1\n};\nclass Download extends Module {\n  static moduleName = \"download\";\n\n  //load defaults\n  static downloaders = defaultDownloaders;\n  constructor(table) {\n    super(table);\n    this.registerTableOption(\"downloadEncoder\", function (data, mimeType) {\n      return new Blob([data], {\n        type: mimeType\n      });\n    }); //function to manipulate download data\n    // this.registerTableOption(\"downloadReady\", undefined); //warn of function deprecation\n    this.registerTableOption(\"downloadConfig\", {}); //download config\n    this.registerTableOption(\"downloadRowRange\", \"active\"); //restrict download to active rows only\n\n    this.registerColumnOption(\"download\");\n    this.registerColumnOption(\"titleDownload\");\n  }\n  initialize() {\n    this.deprecatedOptionsCheck();\n    this.registerTableFunction(\"download\", this.download.bind(this));\n    this.registerTableFunction(\"downloadToTab\", this.downloadToTab.bind(this));\n  }\n  deprecatedOptionsCheck() {\n    // this.deprecationCheck(\"downloadReady\", \"downloadEncoder\");\n  }\n\n  ///////////////////////////////////\n  ///////// Table Functions /////////\n  ///////////////////////////////////\n\n  downloadToTab(type, filename, options, active) {\n    this.download(type, filename, options, active, true);\n  }\n\n  ///////////////////////////////////\n  ///////// Internal Logic //////////\n  ///////////////////////////////////\n\n  //trigger file download\n  download(type, filename, options, range, interceptCallback) {\n    var downloadFunc = false;\n    function buildLink(data, mime) {\n      if (interceptCallback) {\n        if (interceptCallback === true) {\n          this.triggerDownload(data, mime, type, filename, true);\n        } else {\n          interceptCallback(data);\n        }\n      } else {\n        this.triggerDownload(data, mime, type, filename);\n      }\n    }\n    if (typeof type == \"function\") {\n      downloadFunc = type;\n    } else {\n      if (Download.downloaders[type]) {\n        downloadFunc = Download.downloaders[type];\n      } else {\n        console.warn(\"Download Error - No such download type found: \", type);\n      }\n    }\n    if (downloadFunc) {\n      var list = this.generateExportList(range);\n      downloadFunc.call(this.table, list, options || {}, buildLink.bind(this));\n    }\n  }\n  generateExportList(range) {\n    var list = this.table.modules.export.generateExportList(this.table.options.downloadConfig, false, range || this.table.options.downloadRowRange, \"download\");\n\n    //assign group header formatter\n    var groupHeader = this.table.options.groupHeaderDownload;\n    if (groupHeader && !Array.isArray(groupHeader)) {\n      groupHeader = [groupHeader];\n    }\n    list.forEach(row => {\n      var group;\n      if (row.type === \"group\") {\n        group = row.columns[0];\n        if (groupHeader && groupHeader[row.indent]) {\n          group.value = groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n        }\n      }\n    });\n    return list;\n  }\n  triggerDownload(data, mime, type, filename, newTab) {\n    var element = document.createElement('a'),\n      blob = this.table.options.downloadEncoder(data, mime);\n    if (blob) {\n      if (newTab) {\n        window.open(window.URL.createObjectURL(blob));\n      } else {\n        filename = filename || \"Tabulator.\" + (typeof type === \"function\" ? \"txt\" : type);\n        if (navigator.msSaveOrOpenBlob) {\n          navigator.msSaveOrOpenBlob(blob, filename);\n        } else {\n          element.setAttribute('href', window.URL.createObjectURL(blob));\n\n          //set file title\n          element.setAttribute('download', filename);\n\n          //trigger download\n          element.style.display = 'none';\n          document.body.appendChild(element);\n          element.click();\n\n          //remove temporary link element\n          document.body.removeChild(element);\n        }\n      }\n      this.dispatchExternal(\"downloadComplete\");\n    }\n  }\n  commsReceived(table, action, data) {\n    switch (action) {\n      case \"intercept\":\n        this.download(data.type, \"\", data.options, data.active, data.intercept);\n        break;\n    }\n  }\n}\nfunction maskInput(el, options) {\n  var mask = options.mask,\n    maskLetter = typeof options.maskLetterChar !== \"undefined\" ? options.maskLetterChar : \"A\",\n    maskNumber = typeof options.maskNumberChar !== \"undefined\" ? options.maskNumberChar : \"9\",\n    maskWildcard = typeof options.maskWildcardChar !== \"undefined\" ? options.maskWildcardChar : \"*\";\n  function fillSymbols(index) {\n    var symbol = mask[index];\n    if (typeof symbol !== \"undefined\" && symbol !== maskWildcard && symbol !== maskLetter && symbol !== maskNumber) {\n      el.value = el.value + \"\" + symbol;\n      fillSymbols(index + 1);\n    }\n  }\n  el.addEventListener(\"keydown\", e => {\n    var index = el.value.length,\n      char = e.key;\n    if (e.keyCode > 46 && !e.ctrlKey && !e.metaKey) {\n      if (index >= mask.length) {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n      } else {\n        switch (mask[index]) {\n          case maskLetter:\n            if (char.toUpperCase() == char.toLowerCase()) {\n              e.preventDefault();\n              e.stopPropagation();\n              return false;\n            }\n            break;\n          case maskNumber:\n            if (isNaN(char)) {\n              e.preventDefault();\n              e.stopPropagation();\n              return false;\n            }\n            break;\n          case maskWildcard:\n            break;\n          default:\n            if (char !== mask[index]) {\n              e.preventDefault();\n              e.stopPropagation();\n              return false;\n            }\n        }\n      }\n    }\n    return;\n  });\n  el.addEventListener(\"keyup\", e => {\n    if (e.keyCode > 46) {\n      if (options.maskAutoFill) {\n        fillSymbols(el.value.length);\n      }\n    }\n  });\n  if (!el.placeholder) {\n    el.placeholder = mask;\n  }\n  if (options.maskAutoFill) {\n    fillSymbols(el.value.length);\n  }\n}\n\n//input element\nfunction input(cell, onRendered, success, cancel, editorParams) {\n  //create and style input\n  var cellValue = cell.getValue(),\n    input = document.createElement(\"input\");\n  input.setAttribute(\"type\", editorParams.search ? \"search\" : \"text\");\n  input.style.padding = \"4px\";\n  input.style.width = \"100%\";\n  input.style.boxSizing = \"border-box\";\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\") {\n    for (let key in editorParams.elementAttributes) {\n      if (key.charAt(0) == \"+\") {\n        key = key.slice(1);\n        input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n      } else {\n        input.setAttribute(key, editorParams.elementAttributes[key]);\n      }\n    }\n  }\n  input.value = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n  onRendered(function () {\n    if (cell.getType() === \"cell\") {\n      input.focus({\n        preventScroll: true\n      });\n      input.style.height = \"100%\";\n      if (editorParams.selectContents) {\n        input.select();\n      }\n    }\n  });\n  function onChange(e) {\n    if ((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\" || input.value !== cellValue) {\n      if (success(input.value)) {\n        cellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n      }\n    } else {\n      cancel();\n    }\n  }\n\n  //submit new value on blur or change\n  input.addEventListener(\"change\", onChange);\n  input.addEventListener(\"blur\", onChange);\n\n  //submit new value on enter\n  input.addEventListener(\"keydown\", function (e) {\n    switch (e.keyCode) {\n      // case 9:\n      case 13:\n        onChange();\n        break;\n      case 27:\n        cancel();\n        break;\n      case 35:\n      case 36:\n        e.stopPropagation();\n        break;\n    }\n  });\n  if (editorParams.mask) {\n    maskInput(input, editorParams);\n  }\n  return input;\n}\n\n//resizable text area element\nfunction textarea$1(cell, onRendered, success, cancel, editorParams) {\n  var cellValue = cell.getValue(),\n    vertNav = editorParams.verticalNavigation || \"hybrid\",\n    value = String(cellValue !== null && typeof cellValue !== \"undefined\" ? cellValue : \"\"),\n    input = document.createElement(\"textarea\"),\n    scrollHeight = 0;\n\n  //create and style input\n  input.style.display = \"block\";\n  input.style.padding = \"2px\";\n  input.style.height = \"100%\";\n  input.style.width = \"100%\";\n  input.style.boxSizing = \"border-box\";\n  input.style.whiteSpace = \"pre-wrap\";\n  input.style.resize = \"none\";\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\") {\n    for (let key in editorParams.elementAttributes) {\n      if (key.charAt(0) == \"+\") {\n        key = key.slice(1);\n        input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n      } else {\n        input.setAttribute(key, editorParams.elementAttributes[key]);\n      }\n    }\n  }\n  input.value = value;\n  onRendered(function () {\n    if (cell.getType() === \"cell\") {\n      input.focus({\n        preventScroll: true\n      });\n      input.style.height = \"100%\";\n      input.scrollHeight;\n      input.style.height = input.scrollHeight + \"px\";\n      cell.getRow().normalizeHeight();\n      if (editorParams.selectContents) {\n        input.select();\n      }\n    }\n  });\n  function onChange(e) {\n    if ((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\" || input.value !== cellValue) {\n      if (success(input.value)) {\n        cellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n      }\n      setTimeout(function () {\n        cell.getRow().normalizeHeight();\n      }, 300);\n    } else {\n      cancel();\n    }\n  }\n\n  //submit new value on blur or change\n  input.addEventListener(\"change\", onChange);\n  input.addEventListener(\"blur\", onChange);\n  input.addEventListener(\"keyup\", function () {\n    input.style.height = \"\";\n    var heightNow = input.scrollHeight;\n    input.style.height = heightNow + \"px\";\n    if (heightNow != scrollHeight) {\n      scrollHeight = heightNow;\n      cell.getRow().normalizeHeight();\n    }\n  });\n  input.addEventListener(\"keydown\", function (e) {\n    switch (e.keyCode) {\n      case 13:\n        if (e.shiftKey && editorParams.shiftEnterSubmit) {\n          onChange();\n        }\n        break;\n      case 27:\n        cancel();\n        break;\n      case 38:\n        //up arrow\n        if (vertNav == \"editor\" || vertNav == \"hybrid\" && input.selectionStart) {\n          e.stopImmediatePropagation();\n          e.stopPropagation();\n        }\n        break;\n      case 40:\n        //down arrow\n        if (vertNav == \"editor\" || vertNav == \"hybrid\" && input.selectionStart !== input.value.length) {\n          e.stopImmediatePropagation();\n          e.stopPropagation();\n        }\n        break;\n      case 35:\n      case 36:\n        e.stopPropagation();\n        break;\n    }\n  });\n  if (editorParams.mask) {\n    maskInput(input, editorParams);\n  }\n  return input;\n}\n\n//input element with type of number\nfunction number$1(cell, onRendered, success, cancel, editorParams) {\n  var cellValue = cell.getValue(),\n    vertNav = editorParams.verticalNavigation || \"editor\",\n    input = document.createElement(\"input\");\n  input.setAttribute(\"type\", \"number\");\n  if (typeof editorParams.max != \"undefined\") {\n    input.setAttribute(\"max\", editorParams.max);\n  }\n  if (typeof editorParams.min != \"undefined\") {\n    input.setAttribute(\"min\", editorParams.min);\n  }\n  if (typeof editorParams.step != \"undefined\") {\n    input.setAttribute(\"step\", editorParams.step);\n  }\n\n  //create and style input\n  input.style.padding = \"4px\";\n  input.style.width = \"100%\";\n  input.style.boxSizing = \"border-box\";\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\") {\n    for (let key in editorParams.elementAttributes) {\n      if (key.charAt(0) == \"+\") {\n        key = key.slice(1);\n        input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n      } else {\n        input.setAttribute(key, editorParams.elementAttributes[key]);\n      }\n    }\n  }\n  input.value = cellValue;\n  var blurFunc = function (e) {\n    onChange();\n  };\n  onRendered(function () {\n    if (cell.getType() === \"cell\") {\n      //submit new value on blur\n      input.removeEventListener(\"blur\", blurFunc);\n      input.focus({\n        preventScroll: true\n      });\n      input.style.height = \"100%\";\n\n      //submit new value on blur\n      input.addEventListener(\"blur\", blurFunc);\n      if (editorParams.selectContents) {\n        input.select();\n      }\n    }\n  });\n  function onChange() {\n    var value = input.value;\n    if (!isNaN(value) && value !== \"\") {\n      value = Number(value);\n    }\n    if (value !== cellValue) {\n      if (success(value)) {\n        cellValue = value; //persist value if successfully validated incase editor is used as header filter\n      }\n    } else {\n      cancel();\n    }\n  }\n\n  //submit new value on enter\n  input.addEventListener(\"keydown\", function (e) {\n    switch (e.keyCode) {\n      case 13:\n        // case 9:\n        onChange();\n        break;\n      case 27:\n        cancel();\n        break;\n      case 38: //up arrow\n      case 40:\n        //down arrow\n        if (vertNav == \"editor\") {\n          e.stopImmediatePropagation();\n          e.stopPropagation();\n        }\n        break;\n      case 35:\n      case 36:\n        e.stopPropagation();\n        break;\n    }\n  });\n  if (editorParams.mask) {\n    maskInput(input, editorParams);\n  }\n  return input;\n}\n\n//input element with type of number\nfunction range(cell, onRendered, success, cancel, editorParams) {\n  var cellValue = cell.getValue(),\n    input = document.createElement(\"input\");\n  input.setAttribute(\"type\", \"range\");\n  if (typeof editorParams.max != \"undefined\") {\n    input.setAttribute(\"max\", editorParams.max);\n  }\n  if (typeof editorParams.min != \"undefined\") {\n    input.setAttribute(\"min\", editorParams.min);\n  }\n  if (typeof editorParams.step != \"undefined\") {\n    input.setAttribute(\"step\", editorParams.step);\n  }\n\n  //create and style input\n  input.style.padding = \"4px\";\n  input.style.width = \"100%\";\n  input.style.boxSizing = \"border-box\";\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\") {\n    for (let key in editorParams.elementAttributes) {\n      if (key.charAt(0) == \"+\") {\n        key = key.slice(1);\n        input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n      } else {\n        input.setAttribute(key, editorParams.elementAttributes[key]);\n      }\n    }\n  }\n  input.value = cellValue;\n  onRendered(function () {\n    if (cell.getType() === \"cell\") {\n      input.focus({\n        preventScroll: true\n      });\n      input.style.height = \"100%\";\n    }\n  });\n  function onChange() {\n    var value = input.value;\n    if (!isNaN(value) && value !== \"\") {\n      value = Number(value);\n    }\n    if (value != cellValue) {\n      if (success(value)) {\n        cellValue = value; //persist value if successfully validated incase editor is used as header filter\n      }\n    } else {\n      cancel();\n    }\n  }\n\n  //submit new value on blur\n  input.addEventListener(\"blur\", function (e) {\n    onChange();\n  });\n\n  //submit new value on enter\n  input.addEventListener(\"keydown\", function (e) {\n    switch (e.keyCode) {\n      case 13:\n        // case 9:\n        onChange();\n        break;\n      case 27:\n        cancel();\n        break;\n    }\n  });\n  return input;\n}\n\n//input element\nfunction date$1(cell, onRendered, success, cancel, editorParams) {\n  var inputFormat = editorParams.format,\n    vertNav = editorParams.verticalNavigation || \"editor\",\n    DT = inputFormat ? window.DateTime || luxon.DateTime : null;\n\n  //create and style input\n  var cellValue = cell.getValue(),\n    input = document.createElement(\"input\");\n  function convertDate(value) {\n    var newDatetime;\n    if (DT.isDateTime(value)) {\n      newDatetime = value;\n    } else if (inputFormat === \"iso\") {\n      newDatetime = DT.fromISO(String(value));\n    } else {\n      newDatetime = DT.fromFormat(String(value), inputFormat);\n    }\n    return newDatetime.toFormat(\"yyyy-MM-dd\");\n  }\n  input.type = \"date\";\n  input.style.padding = \"4px\";\n  input.style.width = \"100%\";\n  input.style.boxSizing = \"border-box\";\n  if (editorParams.max) {\n    input.setAttribute(\"max\", inputFormat ? convertDate(editorParams.max) : editorParams.max);\n  }\n  if (editorParams.min) {\n    input.setAttribute(\"min\", inputFormat ? convertDate(editorParams.min) : editorParams.min);\n  }\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\") {\n    for (let key in editorParams.elementAttributes) {\n      if (key.charAt(0) == \"+\") {\n        key = key.slice(1);\n        input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n      } else {\n        input.setAttribute(key, editorParams.elementAttributes[key]);\n      }\n    }\n  }\n  cellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n  if (inputFormat) {\n    if (DT) {\n      cellValue = convertDate(cellValue);\n    } else {\n      console.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\");\n    }\n  }\n  input.value = cellValue;\n  onRendered(function () {\n    if (cell.getType() === \"cell\") {\n      input.focus({\n        preventScroll: true\n      });\n      input.style.height = \"100%\";\n      if (editorParams.selectContents) {\n        input.select();\n      }\n    }\n  });\n  function onChange() {\n    var value = input.value,\n      luxDate;\n    if ((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\" || value !== cellValue) {\n      if (value && inputFormat) {\n        luxDate = DT.fromFormat(String(value), \"yyyy-MM-dd\");\n        switch (inputFormat) {\n          case true:\n            value = luxDate;\n            break;\n          case \"iso\":\n            value = luxDate.toISO();\n            break;\n          default:\n            value = luxDate.toFormat(inputFormat);\n        }\n      }\n      if (success(value)) {\n        cellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n      }\n    } else {\n      cancel();\n    }\n  }\n\n  //submit new value on blur\n  input.addEventListener(\"blur\", function (e) {\n    if (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\n      onChange(); // only on a \"true\" blur; not when focusing browser's date/time picker\n    }\n  });\n\n  //submit new value on enter\n  input.addEventListener(\"keydown\", function (e) {\n    switch (e.keyCode) {\n      // case 9:\n      case 13:\n        onChange();\n        break;\n      case 27:\n        cancel();\n        break;\n      case 35:\n      case 36:\n        e.stopPropagation();\n        break;\n      case 38: //up arrow\n      case 40:\n        //down arrow\n        if (vertNav == \"editor\") {\n          e.stopImmediatePropagation();\n          e.stopPropagation();\n        }\n        break;\n    }\n  });\n  return input;\n}\n\n//input element\nfunction time$1(cell, onRendered, success, cancel, editorParams) {\n  var inputFormat = editorParams.format,\n    vertNav = editorParams.verticalNavigation || \"editor\",\n    DT = inputFormat ? window.DateTime || luxon.DateTime : null,\n    newDatetime;\n\n  //create and style input\n  var cellValue = cell.getValue(),\n    input = document.createElement(\"input\");\n  input.type = \"time\";\n  input.style.padding = \"4px\";\n  input.style.width = \"100%\";\n  input.style.boxSizing = \"border-box\";\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\") {\n    for (let key in editorParams.elementAttributes) {\n      if (key.charAt(0) == \"+\") {\n        key = key.slice(1);\n        input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n      } else {\n        input.setAttribute(key, editorParams.elementAttributes[key]);\n      }\n    }\n  }\n  cellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n  if (inputFormat) {\n    if (DT) {\n      if (DT.isDateTime(cellValue)) {\n        newDatetime = cellValue;\n      } else if (inputFormat === \"iso\") {\n        newDatetime = DT.fromISO(String(cellValue));\n      } else {\n        newDatetime = DT.fromFormat(String(cellValue), inputFormat);\n      }\n      cellValue = newDatetime.toFormat(\"HH:mm\");\n    } else {\n      console.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\");\n    }\n  }\n  input.value = cellValue;\n  onRendered(function () {\n    if (cell.getType() == \"cell\") {\n      input.focus({\n        preventScroll: true\n      });\n      input.style.height = \"100%\";\n      if (editorParams.selectContents) {\n        input.select();\n      }\n    }\n  });\n  function onChange() {\n    var value = input.value,\n      luxTime;\n    if ((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\" || value !== cellValue) {\n      if (value && inputFormat) {\n        luxTime = DT.fromFormat(String(value), \"hh:mm\");\n        switch (inputFormat) {\n          case true:\n            value = luxTime;\n            break;\n          case \"iso\":\n            value = luxTime.toISO();\n            break;\n          default:\n            value = luxTime.toFormat(inputFormat);\n        }\n      }\n      if (success(value)) {\n        cellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n      }\n    } else {\n      cancel();\n    }\n  }\n\n  //submit new value on blur\n  input.addEventListener(\"blur\", function (e) {\n    if (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\n      onChange(); // only on a \"true\" blur; not when focusing browser's date/time picker\n    }\n  });\n\n  //submit new value on enter\n  input.addEventListener(\"keydown\", function (e) {\n    switch (e.keyCode) {\n      // case 9:\n      case 13:\n        onChange();\n        break;\n      case 27:\n        cancel();\n        break;\n      case 35:\n      case 36:\n        e.stopPropagation();\n        break;\n      case 38: //up arrow\n      case 40:\n        //down arrow\n        if (vertNav == \"editor\") {\n          e.stopImmediatePropagation();\n          e.stopPropagation();\n        }\n        break;\n    }\n  });\n  return input;\n}\n\n//input element\nfunction datetime$2(cell, onRendered, success, cancel, editorParams) {\n  var inputFormat = editorParams.format,\n    vertNav = editorParams.verticalNavigation || \"editor\",\n    DT = inputFormat ? window.DateTime || luxon.DateTime : null,\n    newDatetime;\n\n  //create and style input\n  var cellValue = cell.getValue(),\n    input = document.createElement(\"input\");\n  input.type = \"datetime-local\";\n  input.style.padding = \"4px\";\n  input.style.width = \"100%\";\n  input.style.boxSizing = \"border-box\";\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\") {\n    for (let key in editorParams.elementAttributes) {\n      if (key.charAt(0) == \"+\") {\n        key = key.slice(1);\n        input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n      } else {\n        input.setAttribute(key, editorParams.elementAttributes[key]);\n      }\n    }\n  }\n  cellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n  if (inputFormat) {\n    if (DT) {\n      if (DT.isDateTime(cellValue)) {\n        newDatetime = cellValue;\n      } else if (inputFormat === \"iso\") {\n        newDatetime = DT.fromISO(String(cellValue));\n      } else {\n        newDatetime = DT.fromFormat(String(cellValue), inputFormat);\n      }\n      cellValue = newDatetime.toFormat(\"yyyy-MM-dd\") + \"T\" + newDatetime.toFormat(\"HH:mm\");\n    } else {\n      console.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\");\n    }\n  }\n  input.value = cellValue;\n  onRendered(function () {\n    if (cell.getType() === \"cell\") {\n      input.focus({\n        preventScroll: true\n      });\n      input.style.height = \"100%\";\n      if (editorParams.selectContents) {\n        input.select();\n      }\n    }\n  });\n  function onChange() {\n    var value = input.value,\n      luxDateTime;\n    if ((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\" || value !== cellValue) {\n      if (value && inputFormat) {\n        luxDateTime = DT.fromISO(String(value));\n        switch (inputFormat) {\n          case true:\n            value = luxDateTime;\n            break;\n          case \"iso\":\n            value = luxDateTime.toISO();\n            break;\n          default:\n            value = luxDateTime.toFormat(inputFormat);\n        }\n      }\n      if (success(value)) {\n        cellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n      }\n    } else {\n      cancel();\n    }\n  }\n\n  //submit new value on blur\n  input.addEventListener(\"blur\", function (e) {\n    if (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\n      onChange(); // only on a \"true\" blur; not when focusing browser's date/time picker\n    }\n  });\n\n  //submit new value on enter\n  input.addEventListener(\"keydown\", function (e) {\n    switch (e.keyCode) {\n      // case 9:\n      case 13:\n        onChange();\n        break;\n      case 27:\n        cancel();\n        break;\n      case 35:\n      case 36:\n        e.stopPropagation();\n        break;\n      case 38: //up arrow\n      case 40:\n        //down arrow\n        if (vertNav == \"editor\") {\n          e.stopImmediatePropagation();\n          e.stopPropagation();\n        }\n        break;\n    }\n  });\n  return input;\n}\nlet Edit$1 = class Edit {\n  constructor(editor, cell, onRendered, success, cancel, editorParams) {\n    this.edit = editor;\n    this.table = editor.table;\n    this.cell = cell;\n    this.params = this._initializeParams(editorParams);\n    this.data = [];\n    this.displayItems = [];\n    this.currentItems = [];\n    this.focusedItem = null;\n    this.input = this._createInputElement();\n    this.listEl = this._createListElement();\n    this.initialValues = null;\n    this.isFilter = cell.getType() === \"header\";\n    this.filterTimeout = null;\n    this.filtered = false;\n    this.typing = false;\n    this.values = [];\n    this.popup = null;\n    this.listIteration = 0;\n    this.lastAction = \"\";\n    this.filterTerm = \"\";\n    this.blurable = true;\n    this.actions = {\n      success: success,\n      cancel: cancel\n    };\n    this._deprecatedOptionsCheck();\n    this._initializeValue();\n    onRendered(this._onRendered.bind(this));\n  }\n  _deprecatedOptionsCheck() {\n    // if(this.params.listItemFormatter){\n    // \tthis.cell.getTable().deprecationAdvisor.msg(\"The listItemFormatter editor param has been deprecated, please see the latest editor documentation for updated options\");\n    // }\n\n    // if(this.params.sortValuesList){\n    // \tthis.cell.getTable().deprecationAdvisor.msg(\"The sortValuesList editor param has been deprecated, please see the latest editor documentation for updated options\");\n    // }\n\n    // if(this.params.searchFunc){\n    // \tthis.cell.getTable().deprecationAdvisor.msg(\"The searchFunc editor param has been deprecated, please see the latest editor documentation for updated options\");\n    // }\n\n    // if(this.params.searchingPlaceholder){\n    // \tthis.cell.getTable().deprecationAdvisor.msg(\"The searchingPlaceholder editor param has been deprecated, please see the latest editor documentation for updated options\");\n    // }\n  }\n  _initializeValue() {\n    var initialValue = this.cell.getValue();\n    if (typeof initialValue === \"undefined\" && typeof this.params.defaultValue !== \"undefined\") {\n      initialValue = this.params.defaultValue;\n    }\n    this.initialValues = this.params.multiselect ? initialValue : [initialValue];\n    if (this.isFilter) {\n      this.input.value = this.initialValues ? this.initialValues.join(\",\") : \"\";\n      this.headerFilterInitialListGen();\n    }\n  }\n  _onRendered() {\n    var cellEl = this.cell.getElement();\n    function clickStop(e) {\n      e.stopPropagation();\n    }\n    if (!this.isFilter) {\n      this.input.style.height = \"100%\";\n      this.input.focus({\n        preventScroll: true\n      });\n    }\n    cellEl.addEventListener(\"click\", clickStop);\n    setTimeout(() => {\n      cellEl.removeEventListener(\"click\", clickStop);\n    }, 1000);\n    this.input.addEventListener(\"mousedown\", this._preventPopupBlur.bind(this));\n  }\n  _createListElement() {\n    var listEl = document.createElement(\"div\");\n    listEl.classList.add(\"tabulator-edit-list\");\n    listEl.addEventListener(\"mousedown\", this._preventBlur.bind(this));\n    listEl.addEventListener(\"keydown\", this._inputKeyDown.bind(this));\n    return listEl;\n  }\n  _setListWidth() {\n    var element = this.isFilter ? this.input : this.cell.getElement();\n    this.listEl.style.minWidth = element.offsetWidth + \"px\";\n    if (this.params.maxWidth) {\n      if (this.params.maxWidth === true) {\n        this.listEl.style.maxWidth = element.offsetWidth + \"px\";\n      } else if (typeof this.params.maxWidth === \"number\") {\n        this.listEl.style.maxWidth = this.params.maxWidth + \"px\";\n      } else {\n        this.listEl.style.maxWidth = this.params.maxWidth;\n      }\n    }\n  }\n  _createInputElement() {\n    var attribs = this.params.elementAttributes;\n    var input = document.createElement(\"input\");\n    input.setAttribute(\"type\", this.params.clearable ? \"search\" : \"text\");\n    input.style.padding = \"4px\";\n    input.style.width = \"100%\";\n    input.style.boxSizing = \"border-box\";\n    if (!this.params.autocomplete) {\n      input.style.cursor = \"default\";\n      input.style.caretColor = \"transparent\";\n      // input.readOnly = (this.edit.currentCell != false);\n    }\n    if (attribs && typeof attribs == \"object\") {\n      for (let key in attribs) {\n        if (key.charAt(0) == \"+\") {\n          key = key.slice(1);\n          input.setAttribute(key, input.getAttribute(key) + attribs[\"+\" + key]);\n        } else {\n          input.setAttribute(key, attribs[key]);\n        }\n      }\n    }\n    if (this.params.mask) {\n      maskInput(input, this.params);\n    }\n    this._bindInputEvents(input);\n    return input;\n  }\n  _initializeParams(params) {\n    var valueKeys = [\"values\", \"valuesURL\", \"valuesLookup\"],\n      valueCheck;\n    params = Object.assign({}, params);\n    params.verticalNavigation = params.verticalNavigation || \"editor\";\n    params.placeholderLoading = typeof params.placeholderLoading === \"undefined\" ? \"Searching ...\" : params.placeholderLoading;\n    params.placeholderEmpty = typeof params.placeholderEmpty === \"undefined\" ? \"No Results Found\" : params.placeholderEmpty;\n    params.filterDelay = typeof params.filterDelay === \"undefined\" ? 300 : params.filterDelay;\n    params.emptyValue = Object.keys(params).includes(\"emptyValue\") ? params.emptyValue : \"\";\n    valueCheck = Object.keys(params).filter(key => valueKeys.includes(key)).length;\n    if (!valueCheck) {\n      console.warn(\"list editor config error - either the values, valuesURL, or valuesLookup option must be set\");\n    } else if (valueCheck > 1) {\n      console.warn(\"list editor config error - only one of the values, valuesURL, or valuesLookup options can be set on the same editor\");\n    }\n    if (params.autocomplete) {\n      if (params.multiselect) {\n        params.multiselect = false;\n        console.warn(\"list editor config error - multiselect option is not available when autocomplete is enabled\");\n      }\n    } else {\n      if (params.freetext) {\n        params.freetext = false;\n        console.warn(\"list editor config error - freetext option is only available when autocomplete is enabled\");\n      }\n      if (params.filterFunc) {\n        params.filterFunc = false;\n        console.warn(\"list editor config error - filterFunc option is only available when autocomplete is enabled\");\n      }\n      if (params.filterRemote) {\n        params.filterRemote = false;\n        console.warn(\"list editor config error - filterRemote option is only available when autocomplete is enabled\");\n      }\n      if (params.mask) {\n        params.mask = false;\n        console.warn(\"list editor config error - mask option is only available when autocomplete is enabled\");\n      }\n      if (params.allowEmpty) {\n        params.allowEmpty = false;\n        console.warn(\"list editor config error - allowEmpty option is only available when autocomplete is enabled\");\n      }\n      if (params.listOnEmpty) {\n        params.listOnEmpty = false;\n        console.warn(\"list editor config error - listOnEmpty option is only available when autocomplete is enabled\");\n      }\n    }\n    if (params.filterRemote && !(typeof params.valuesLookup === \"function\" || params.valuesURL)) {\n      params.filterRemote = false;\n      console.warn(\"list editor config error - filterRemote option should only be used when values list is populated from a remote source\");\n    }\n    return params;\n  }\n  //////////////////////////////////////\n  ////////// Event Handling ////////////\n  //////////////////////////////////////\n\n  _bindInputEvents(input) {\n    input.addEventListener(\"focus\", this._inputFocus.bind(this));\n    input.addEventListener(\"click\", this._inputClick.bind(this));\n    input.addEventListener(\"blur\", this._inputBlur.bind(this));\n    input.addEventListener(\"keydown\", this._inputKeyDown.bind(this));\n    input.addEventListener(\"search\", this._inputSearch.bind(this));\n    if (this.params.autocomplete) {\n      input.addEventListener(\"keyup\", this._inputKeyUp.bind(this));\n    }\n  }\n  _inputFocus(e) {\n    this.rebuildOptionsList();\n  }\n  _filter() {\n    if (this.params.filterRemote) {\n      clearTimeout(this.filterTimeout);\n      this.filterTimeout = setTimeout(() => {\n        this.rebuildOptionsList();\n      }, this.params.filterDelay);\n    } else {\n      this._filterList();\n    }\n  }\n  _inputClick(e) {\n    e.stopPropagation();\n  }\n  _inputBlur(e) {\n    if (this.blurable) {\n      if (this.popup) {\n        this.popup.hide();\n      } else {\n        this._resolveValue(true);\n      }\n    }\n  }\n  _inputSearch() {\n    this._clearChoices();\n  }\n  _inputKeyDown(e) {\n    switch (e.keyCode) {\n      case 38:\n        //up arrow\n        this._keyUp(e);\n        break;\n      case 40:\n        //down arrow\n        this._keyDown(e);\n        break;\n      case 37: //left arrow\n      case 39:\n        //right arrow\n        this._keySide(e);\n        break;\n      case 13:\n        //enter\n        this._keyEnter();\n        break;\n      case 27:\n        //escape\n        this._keyEsc();\n        break;\n      case 36: //home\n      case 35:\n        //end\n        this._keyHomeEnd(e);\n        break;\n      case 9:\n        //tab\n        this._keyTab(e);\n        break;\n      default:\n        this._keySelectLetter(e);\n    }\n  }\n  _inputKeyUp(e) {\n    switch (e.keyCode) {\n      case 38: //up arrow\n      case 37: //left arrow\n      case 39: //up arrow\n      case 40: //right arrow\n      case 13: //enter\n      case 27:\n        //escape\n        break;\n      default:\n        this._keyAutoCompLetter(e);\n    }\n  }\n  _preventPopupBlur() {\n    if (this.popup) {\n      this.popup.blockHide();\n    }\n    setTimeout(() => {\n      if (this.popup) {\n        this.popup.restoreHide();\n      }\n    }, 10);\n  }\n  _preventBlur() {\n    this.blurable = false;\n    setTimeout(() => {\n      this.blurable = true;\n    }, 10);\n  }\n\n  //////////////////////////////////////\n  //////// Keyboard Navigation /////////\n  //////////////////////////////////////\n\n  _keyTab(e) {\n    if (this.params.autocomplete && this.lastAction === \"typing\") {\n      this._resolveValue(true);\n    } else {\n      if (this.focusedItem) {\n        this._chooseItem(this.focusedItem, true);\n      }\n    }\n  }\n  _keyUp(e) {\n    var index = this.displayItems.indexOf(this.focusedItem);\n    if (this.params.verticalNavigation == \"editor\" || this.params.verticalNavigation == \"hybrid\" && index) {\n      e.stopImmediatePropagation();\n      e.stopPropagation();\n      e.preventDefault();\n      if (index > 0) {\n        this._focusItem(this.displayItems[index - 1]);\n      }\n    }\n  }\n  _keyDown(e) {\n    var index = this.displayItems.indexOf(this.focusedItem);\n    if (this.params.verticalNavigation == \"editor\" || this.params.verticalNavigation == \"hybrid\" && index < this.displayItems.length - 1) {\n      e.stopImmediatePropagation();\n      e.stopPropagation();\n      e.preventDefault();\n      if (index < this.displayItems.length - 1) {\n        if (index == -1) {\n          this._focusItem(this.displayItems[0]);\n        } else {\n          this._focusItem(this.displayItems[index + 1]);\n        }\n      }\n    }\n  }\n  _keySide(e) {\n    if (!this.params.autocomplete) {\n      e.stopImmediatePropagation();\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  }\n  _keyEnter(e) {\n    if (this.params.autocomplete && this.lastAction === \"typing\") {\n      this._resolveValue(true);\n    } else {\n      if (this.focusedItem) {\n        this._chooseItem(this.focusedItem);\n      }\n    }\n  }\n  _keyEsc(e) {\n    this._cancel();\n  }\n  _keyHomeEnd(e) {\n    if (this.params.autocomplete) {\n      //prevent table navigation while using input element\n      e.stopImmediatePropagation();\n    }\n  }\n  _keySelectLetter(e) {\n    if (!this.params.autocomplete) {\n      // if(this.edit.currentCell === false){\n      e.preventDefault();\n      // }\n\n      if (e.keyCode >= 38 && e.keyCode <= 90) {\n        this._scrollToValue(e.keyCode);\n      }\n    }\n  }\n  _keyAutoCompLetter(e) {\n    this._filter();\n    this.lastAction = \"typing\";\n    this.typing = true;\n  }\n  _scrollToValue(char) {\n    clearTimeout(this.filterTimeout);\n    var character = String.fromCharCode(char).toLowerCase();\n    this.filterTerm += character.toLowerCase();\n    var match = this.displayItems.find(item => {\n      return typeof item.label !== \"undefined\" && item.label.toLowerCase().startsWith(this.filterTerm);\n    });\n    if (match) {\n      this._focusItem(match);\n    }\n    this.filterTimeout = setTimeout(() => {\n      this.filterTerm = \"\";\n    }, 800);\n  }\n  _focusItem(item) {\n    this.lastAction = \"focus\";\n    if (this.focusedItem && this.focusedItem.element) {\n      this.focusedItem.element.classList.remove(\"focused\");\n    }\n    this.focusedItem = item;\n    if (item && item.element) {\n      item.element.classList.add(\"focused\");\n      item.element.scrollIntoView({\n        behavior: 'smooth',\n        block: 'nearest',\n        inline: 'start'\n      });\n    }\n  }\n\n  //////////////////////////////////////\n  /////// Data List Generation /////////\n  //////////////////////////////////////\n  headerFilterInitialListGen() {\n    this._generateOptions(true);\n  }\n  rebuildOptionsList() {\n    this._generateOptions().then(this._sortOptions.bind(this)).then(this._buildList.bind(this)).then(this._showList.bind(this)).catch(e => {\n      if (!Number.isInteger(e)) {\n        console.error(\"List generation error\", e);\n      }\n    });\n  }\n  _filterList() {\n    this._buildList(this._filterOptions());\n    this._showList();\n  }\n  _generateOptions(silent) {\n    var values = [];\n    var iteration = ++this.listIteration;\n    this.filtered = false;\n    if (this.params.values) {\n      values = this.params.values;\n    } else if (this.params.valuesURL) {\n      values = this._ajaxRequest(this.params.valuesURL, this.input.value);\n    } else {\n      if (typeof this.params.valuesLookup === \"function\") {\n        values = this.params.valuesLookup(this.cell, this.input.value);\n      } else if (this.params.valuesLookup) {\n        values = this._uniqueColumnValues(this.params.valuesLookupField);\n      }\n    }\n    if (values instanceof Promise) {\n      if (!silent) {\n        this._addPlaceholder(this.params.placeholderLoading);\n      }\n      return values.then().then(responseValues => {\n        if (this.listIteration === iteration) {\n          return this._parseList(responseValues);\n        } else {\n          return Promise.reject(iteration);\n        }\n      });\n    } else {\n      return Promise.resolve(this._parseList(values));\n    }\n  }\n  _addPlaceholder(contents) {\n    var placeholder = document.createElement(\"div\");\n    if (typeof contents === \"function\") {\n      contents = contents(this.cell.getComponent(), this.listEl);\n    }\n    if (contents) {\n      this._clearList();\n      if (contents instanceof HTMLElement) {\n        placeholder = contents;\n      } else {\n        placeholder.classList.add(\"tabulator-edit-list-placeholder\");\n        placeholder.innerHTML = contents;\n      }\n      this.listEl.appendChild(placeholder);\n      this._showList();\n    }\n  }\n  _ajaxRequest(url, term) {\n    var params = this.params.filterRemote ? {\n      term: term\n    } : {};\n    url = urlBuilder(url, {}, params);\n    return fetch(url).then(response => {\n      if (response.ok) {\n        return response.json().catch(error => {\n          console.warn(\"List Ajax Load Error - Invalid JSON returned\", error);\n          return Promise.reject(error);\n        });\n      } else {\n        console.error(\"List Ajax Load Error - Connection Error: \" + response.status, response.statusText);\n        return Promise.reject(response);\n      }\n    }).catch(error => {\n      console.error(\"List Ajax Load Error - Connection Error: \", error);\n      return Promise.reject(error);\n    });\n  }\n  _uniqueColumnValues(field) {\n    var output = {},\n      data = this.table.getData(this.params.valuesLookup),\n      column;\n    if (field) {\n      column = this.table.columnManager.getColumnByField(field);\n    } else {\n      column = this.cell.getColumn()._getSelf();\n    }\n    if (column) {\n      data.forEach(row => {\n        var val = column.getFieldValue(row);\n        if (val !== null && typeof val !== \"undefined\" && val !== \"\") {\n          output[val] = true;\n        }\n      });\n    } else {\n      console.warn(\"unable to find matching column to create select lookup list:\", field);\n      output = [];\n    }\n    return Object.keys(output);\n  }\n  _parseList(inputValues) {\n    var data = [];\n    if (!Array.isArray(inputValues)) {\n      inputValues = Object.entries(inputValues).map(([key, value]) => {\n        return {\n          label: value,\n          value: key\n        };\n      });\n    }\n    inputValues.forEach(value => {\n      if (typeof value !== \"object\") {\n        value = {\n          label: value,\n          value: value\n        };\n      }\n      this._parseListItem(value, data, 0);\n    });\n    if (!this.currentItems.length && this.params.freetext) {\n      this.input.value = this.initialValues;\n      this.typing = true;\n      this.lastAction = \"typing\";\n    }\n    this.data = data;\n    return data;\n  }\n  _parseListItem(option, data, level) {\n    var item = {};\n    if (option.options) {\n      item = this._parseListGroup(option, level + 1);\n    } else {\n      item = {\n        label: option.label,\n        value: option.value,\n        itemParams: option.itemParams,\n        elementAttributes: option.elementAttributes,\n        element: false,\n        selected: false,\n        visible: true,\n        level: level,\n        original: option\n      };\n      if (this.initialValues && this.initialValues.indexOf(option.value) > -1) {\n        this._chooseItem(item, true);\n      }\n    }\n    data.push(item);\n  }\n  _parseListGroup(option, level) {\n    var item = {\n      label: option.label,\n      group: true,\n      itemParams: option.itemParams,\n      elementAttributes: option.elementAttributes,\n      element: false,\n      visible: true,\n      level: level,\n      options: [],\n      original: option\n    };\n    option.options.forEach(child => {\n      this._parseListItem(child, item.options, level);\n    });\n    return item;\n  }\n  _sortOptions(options) {\n    var sorter;\n    if (this.params.sort) {\n      sorter = typeof this.params.sort === \"function\" ? this.params.sort : this._defaultSortFunction.bind(this);\n      this._sortGroup(sorter, options);\n    }\n    return options;\n  }\n  _sortGroup(sorter, options) {\n    options.sort((a, b) => {\n      return sorter(a.label, b.label, a.value, b.value, a.original, b.original);\n    });\n    options.forEach(option => {\n      if (option.group) {\n        this._sortGroup(sorter, option.options);\n      }\n    });\n  }\n  _defaultSortFunction(as, bs) {\n    var a,\n      b,\n      a1,\n      b1,\n      i = 0,\n      L,\n      rx = /(\\d+)|(\\D+)/g,\n      rd = /\\d/;\n    var emptyAlign = 0;\n    if (this.params.sort === \"desc\") {\n      [as, bs] = [bs, as];\n    }\n\n    //handle empty values\n    if (!as && as !== 0) {\n      emptyAlign = !bs && bs !== 0 ? 0 : -1;\n    } else if (!bs && bs !== 0) {\n      emptyAlign = 1;\n    } else {\n      if (isFinite(as) && isFinite(bs)) return as - bs;\n      a = String(as).toLowerCase();\n      b = String(bs).toLowerCase();\n      if (a === b) return 0;\n      if (!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\n      a = a.match(rx);\n      b = b.match(rx);\n      L = a.length > b.length ? b.length : a.length;\n      while (i < L) {\n        a1 = a[i];\n        b1 = b[i++];\n        if (a1 !== b1) {\n          if (isFinite(a1) && isFinite(b1)) {\n            if (a1.charAt(0) === \"0\") a1 = \".\" + a1;\n            if (b1.charAt(0) === \"0\") b1 = \".\" + b1;\n            return a1 - b1;\n          } else return a1 > b1 ? 1 : -1;\n        }\n      }\n      return a.length > b.length;\n    }\n    return emptyAlign;\n  }\n  _filterOptions() {\n    var filterFunc = this.params.filterFunc || this._defaultFilterFunc,\n      term = this.input.value;\n    if (term) {\n      this.filtered = true;\n      this.data.forEach(item => {\n        this._filterItem(filterFunc, term, item);\n      });\n    } else {\n      this.filtered = false;\n    }\n    return this.data;\n  }\n  _filterItem(func, term, item) {\n    var matches = false;\n    if (!item.group) {\n      item.visible = func(term, item.label, item.value, item.original);\n    } else {\n      item.options.forEach(option => {\n        if (this._filterItem(func, term, option)) {\n          matches = true;\n        }\n      });\n      item.visible = matches;\n    }\n    return item.visible;\n  }\n  _defaultFilterFunc(term, label, value, item) {\n    term = String(term).toLowerCase();\n    if (label !== null && typeof label !== \"undefined\") {\n      if (String(label).toLowerCase().indexOf(term) > -1 || String(value).toLowerCase().indexOf(term) > -1) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  //////////////////////////////////////\n  /////////// Display List /////////////\n  //////////////////////////////////////\n\n  _clearList() {\n    while (this.listEl.firstChild) this.listEl.removeChild(this.listEl.firstChild);\n    this.displayItems = [];\n  }\n  _buildList(data) {\n    this._clearList();\n    data.forEach(option => {\n      this._buildItem(option);\n    });\n    if (!this.displayItems.length) {\n      this._addPlaceholder(this.params.placeholderEmpty);\n    }\n  }\n  _buildItem(item) {\n    var el = item.element,\n      contents;\n    if (!this.filtered || item.visible) {\n      if (!el) {\n        el = document.createElement(\"div\");\n        el.tabIndex = 0;\n        contents = this.params.itemFormatter ? this.params.itemFormatter(item.label, item.value, item.original, el) : item.label;\n        if (contents instanceof HTMLElement) {\n          el.appendChild(contents);\n        } else {\n          el.innerHTML = contents;\n        }\n        if (item.group) {\n          el.classList.add(\"tabulator-edit-list-group\");\n        } else {\n          el.classList.add(\"tabulator-edit-list-item\");\n        }\n        el.classList.add(\"tabulator-edit-list-group-level-\" + item.level);\n        if (item.elementAttributes && typeof item.elementAttributes == \"object\") {\n          for (let key in item.elementAttributes) {\n            if (key.charAt(0) == \"+\") {\n              key = key.slice(1);\n              el.setAttribute(key, this.input.getAttribute(key) + item.elementAttributes[\"+\" + key]);\n            } else {\n              el.setAttribute(key, item.elementAttributes[key]);\n            }\n          }\n        }\n        if (item.group) {\n          el.addEventListener(\"click\", this._groupClick.bind(this, item));\n        } else {\n          el.addEventListener(\"click\", this._itemClick.bind(this, item));\n        }\n        el.addEventListener(\"mousedown\", this._preventBlur.bind(this));\n        item.element = el;\n      }\n      this._styleItem(item);\n      this.listEl.appendChild(el);\n      if (item.group) {\n        item.options.forEach(option => {\n          this._buildItem(option);\n        });\n      } else {\n        this.displayItems.push(item);\n      }\n    }\n  }\n  _showList() {\n    var startVis = this.popup && this.popup.isVisible();\n    if (this.input.parentNode) {\n      if (this.params.autocomplete && this.input.value === \"\" && !this.params.listOnEmpty) {\n        if (this.popup) {\n          this.popup.hide(true);\n        }\n        return;\n      }\n      this._setListWidth();\n      if (!this.popup) {\n        this.popup = this.edit.popup(this.listEl);\n      }\n      this.popup.show(this.cell.getElement(), \"bottom\");\n      if (!startVis) {\n        setTimeout(() => {\n          this.popup.hideOnBlur(this._resolveValue.bind(this, true));\n        }, 10);\n      }\n    }\n  }\n  _styleItem(item) {\n    if (item && item.element) {\n      if (item.selected) {\n        item.element.classList.add(\"active\");\n      } else {\n        item.element.classList.remove(\"active\");\n      }\n    }\n  }\n\n  //////////////////////////////////////\n  ///////// User Interaction ///////////\n  //////////////////////////////////////\n\n  _itemClick(item, e) {\n    e.stopPropagation();\n    this._chooseItem(item);\n  }\n  _groupClick(item, e) {\n    e.stopPropagation();\n  }\n\n  //////////////////////////////////////\n  ////// Current Item Management ///////\n  //////////////////////////////////////\n\n  _cancel() {\n    this.popup.hide(true);\n    this.actions.cancel();\n  }\n  _clearChoices() {\n    this.typing = true;\n    this.currentItems.forEach(item => {\n      item.selected = false;\n      this._styleItem(item);\n    });\n    this.currentItems = [];\n    this.focusedItem = null;\n  }\n  _chooseItem(item, silent) {\n    var index;\n    this.typing = false;\n    if (this.params.multiselect) {\n      index = this.currentItems.indexOf(item);\n      if (index > -1) {\n        this.currentItems.splice(index, 1);\n        item.selected = false;\n      } else {\n        this.currentItems.push(item);\n        item.selected = true;\n      }\n      this.input.value = this.currentItems.map(item => item.label).join(\",\");\n      this._styleItem(item);\n    } else {\n      this.currentItems = [item];\n      item.selected = true;\n      this.input.value = item.label;\n      this._styleItem(item);\n      if (!silent) {\n        this._resolveValue();\n      }\n    }\n    this._focusItem(item);\n  }\n  _resolveValue(blur) {\n    var output, initialValue;\n    if (this.popup) {\n      this.popup.hide(true);\n    }\n    if (this.params.multiselect) {\n      output = this.currentItems.map(item => item.value);\n    } else {\n      if (blur && this.params.autocomplete && this.typing) {\n        if (this.params.freetext || this.params.allowEmpty && this.input.value === \"\") {\n          output = this.input.value;\n        } else {\n          this.actions.cancel();\n          return;\n        }\n      } else {\n        if (this.currentItems[0]) {\n          output = this.currentItems[0].value;\n        } else {\n          initialValue = Array.isArray(this.initialValues) ? this.initialValues[0] : this.initialValues;\n          if (initialValue === null || typeof initialValue === \"undefined\" || initialValue === \"\") {\n            output = initialValue;\n          } else {\n            output = this.params.emptyValue;\n          }\n        }\n      }\n    }\n    if (output === \"\") {\n      output = this.params.emptyValue;\n    }\n    this.actions.success(output);\n    if (this.isFilter) {\n      this.initialValues = output && !Array.isArray(output) ? [output] : output;\n      this.currentItems = [];\n    }\n  }\n};\nfunction list(cell, onRendered, success, cancel, editorParams) {\n  var list = new Edit$1(this, cell, onRendered, success, cancel, editorParams);\n  return list.input;\n}\n\n//star rating\nfunction star$1(cell, onRendered, success, cancel, editorParams) {\n  var self = this,\n    element = cell.getElement(),\n    value = cell.getValue(),\n    maxStars = element.getElementsByTagName(\"svg\").length || 5,\n    size = element.getElementsByTagName(\"svg\")[0] ? element.getElementsByTagName(\"svg\")[0].getAttribute(\"width\") : 14,\n    stars = [],\n    starsHolder = document.createElement(\"div\"),\n    star = document.createElementNS('http://www.w3.org/2000/svg', \"svg\");\n\n  //change star type\n  function starChange(val) {\n    stars.forEach(function (star, i) {\n      if (i < val) {\n        if (self.table.browser == \"ie\") {\n          star.setAttribute(\"class\", \"tabulator-star-active\");\n        } else {\n          star.classList.replace(\"tabulator-star-inactive\", \"tabulator-star-active\");\n        }\n        star.innerHTML = '<polygon fill=\"#488CE9\" stroke=\"#014AAE\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n      } else {\n        if (self.table.browser == \"ie\") {\n          star.setAttribute(\"class\", \"tabulator-star-inactive\");\n        } else {\n          star.classList.replace(\"tabulator-star-active\", \"tabulator-star-inactive\");\n        }\n        star.innerHTML = '<polygon fill=\"#010155\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n      }\n    });\n  }\n\n  //build stars\n  function buildStar(i) {\n    var starHolder = document.createElement(\"span\");\n    var nextStar = star.cloneNode(true);\n    stars.push(nextStar);\n    starHolder.addEventListener(\"mouseenter\", function (e) {\n      e.stopPropagation();\n      e.stopImmediatePropagation();\n      starChange(i);\n    });\n    starHolder.addEventListener(\"mousemove\", function (e) {\n      e.stopPropagation();\n      e.stopImmediatePropagation();\n    });\n    starHolder.addEventListener(\"click\", function (e) {\n      e.stopPropagation();\n      e.stopImmediatePropagation();\n      success(i);\n      element.blur();\n    });\n    starHolder.appendChild(nextStar);\n    starsHolder.appendChild(starHolder);\n  }\n\n  //handle keyboard navigation value change\n  function changeValue(val) {\n    value = val;\n    starChange(val);\n  }\n\n  //style cell\n  element.style.whiteSpace = \"nowrap\";\n  element.style.overflow = \"hidden\";\n  element.style.textOverflow = \"ellipsis\";\n\n  //style holding element\n  starsHolder.style.verticalAlign = \"middle\";\n  starsHolder.style.display = \"inline-block\";\n  starsHolder.style.padding = \"4px\";\n\n  //style star\n  star.setAttribute(\"width\", size);\n  star.setAttribute(\"height\", size);\n  star.setAttribute(\"viewBox\", \"0 0 512 512\");\n  star.setAttribute(\"xml:space\", \"preserve\");\n  star.style.padding = \"0 1px\";\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\") {\n    for (let key in editorParams.elementAttributes) {\n      if (key.charAt(0) == \"+\") {\n        key = key.slice(1);\n        starsHolder.setAttribute(key, starsHolder.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n      } else {\n        starsHolder.setAttribute(key, editorParams.elementAttributes[key]);\n      }\n    }\n  }\n\n  //create correct number of stars\n  for (var i = 1; i <= maxStars; i++) {\n    buildStar(i);\n  }\n\n  //ensure value does not exceed number of stars\n  value = Math.min(parseInt(value), maxStars);\n\n  // set initial styling of stars\n  starChange(value);\n  starsHolder.addEventListener(\"mousemove\", function (e) {\n    starChange(0);\n  });\n  starsHolder.addEventListener(\"click\", function (e) {\n    success(0);\n  });\n  element.addEventListener(\"blur\", function (e) {\n    cancel();\n  });\n\n  //allow key based navigation\n  element.addEventListener(\"keydown\", function (e) {\n    switch (e.keyCode) {\n      case 39:\n        //right arrow\n        changeValue(value + 1);\n        break;\n      case 37:\n        //left arrow\n        changeValue(value - 1);\n        break;\n      case 13:\n        //enter\n        success(value);\n        break;\n      case 27:\n        //escape\n        cancel();\n        break;\n    }\n  });\n  return starsHolder;\n}\n\n//draggable progress bar\nfunction progress$1(cell, onRendered, success, cancel, editorParams) {\n  var element = cell.getElement(),\n    max = typeof editorParams.max === \"undefined\" ? element.getElementsByTagName(\"div\")[0] && element.getElementsByTagName(\"div\")[0].getAttribute(\"max\") || 100 : editorParams.max,\n    min = typeof editorParams.min === \"undefined\" ? element.getElementsByTagName(\"div\")[0] && element.getElementsByTagName(\"div\")[0].getAttribute(\"min\") || 0 : editorParams.min,\n    percent = (max - min) / 100,\n    value = cell.getValue() || 0,\n    handle = document.createElement(\"div\"),\n    bar = document.createElement(\"div\"),\n    mouseDrag,\n    mouseDragWidth;\n\n  //set new value\n  function updateValue() {\n    var style = window.getComputedStyle(element, null);\n    var calcVal = percent * Math.round(bar.offsetWidth / ((element.clientWidth - parseInt(style.getPropertyValue(\"padding-left\")) - parseInt(style.getPropertyValue(\"padding-right\"))) / 100)) + min;\n    success(calcVal);\n    element.setAttribute(\"aria-valuenow\", calcVal);\n    element.setAttribute(\"aria-label\", value);\n  }\n\n  //style handle\n  handle.style.position = \"absolute\";\n  handle.style.right = \"0\";\n  handle.style.top = \"0\";\n  handle.style.bottom = \"0\";\n  handle.style.width = \"5px\";\n  handle.classList.add(\"tabulator-progress-handle\");\n\n  //style bar\n  bar.style.display = \"inline-block\";\n  bar.style.position = \"relative\";\n  // bar.style.top = \"8px\";\n  // bar.style.bottom = \"8px\";\n  // bar.style.left = \"4px\";\n  // bar.style.marginRight = \"4px\";\n  bar.style.height = \"100%\";\n  bar.style.backgroundColor = \"#488CE9\";\n  bar.style.maxWidth = \"100%\";\n  bar.style.minWidth = \"0%\";\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\") {\n    for (let key in editorParams.elementAttributes) {\n      if (key.charAt(0) == \"+\") {\n        key = key.slice(1);\n        bar.setAttribute(key, bar.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n      } else {\n        bar.setAttribute(key, editorParams.elementAttributes[key]);\n      }\n    }\n  }\n\n  //style cell\n  element.style.padding = \"4px 4px\";\n\n  //make sure value is in range\n  value = Math.min(parseFloat(value), max);\n  value = Math.max(parseFloat(value), min);\n\n  //workout percentage\n  value = Math.round((value - min) / percent);\n  // bar.style.right = value + \"%\";\n  bar.style.width = value + \"%\";\n  element.setAttribute(\"aria-valuemin\", min);\n  element.setAttribute(\"aria-valuemax\", max);\n  bar.appendChild(handle);\n  handle.addEventListener(\"mousedown\", function (e) {\n    mouseDrag = e.screenX;\n    mouseDragWidth = bar.offsetWidth;\n  });\n  handle.addEventListener(\"mouseover\", function () {\n    handle.style.cursor = \"ew-resize\";\n  });\n  element.addEventListener(\"mousemove\", function (e) {\n    if (mouseDrag) {\n      bar.style.width = mouseDragWidth + e.screenX - mouseDrag + \"px\";\n    }\n  });\n  element.addEventListener(\"mouseup\", function (e) {\n    if (mouseDrag) {\n      e.stopPropagation();\n      e.stopImmediatePropagation();\n      mouseDrag = false;\n      mouseDragWidth = false;\n      updateValue();\n    }\n  });\n\n  //allow key based navigation\n  element.addEventListener(\"keydown\", function (e) {\n    switch (e.keyCode) {\n      case 39:\n        //right arrow\n        e.preventDefault();\n        bar.style.width = bar.clientWidth + element.clientWidth / 100 + \"px\";\n        break;\n      case 37:\n        //left arrow\n        e.preventDefault();\n        bar.style.width = bar.clientWidth - element.clientWidth / 100 + \"px\";\n        break;\n      case 9: //tab\n      case 13:\n        //enter\n        updateValue();\n        break;\n      case 27:\n        //escape\n        cancel();\n        break;\n    }\n  });\n  element.addEventListener(\"blur\", function () {\n    cancel();\n  });\n  return bar;\n}\n\n//checkbox\nfunction tickCross$1(cell, onRendered, success, cancel, editorParams) {\n  var value = cell.getValue(),\n    input = document.createElement(\"input\"),\n    tristate = editorParams.tristate,\n    indetermValue = typeof editorParams.indeterminateValue === \"undefined\" ? null : editorParams.indeterminateValue,\n    indetermState = false,\n    trueValueSet = Object.keys(editorParams).includes(\"trueValue\"),\n    falseValueSet = Object.keys(editorParams).includes(\"falseValue\");\n  input.setAttribute(\"type\", \"checkbox\");\n  input.style.marginTop = \"5px\";\n  input.style.boxSizing = \"border-box\";\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\") {\n    for (let key in editorParams.elementAttributes) {\n      if (key.charAt(0) == \"+\") {\n        key = key.slice(1);\n        input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n      } else {\n        input.setAttribute(key, editorParams.elementAttributes[key]);\n      }\n    }\n  }\n  input.value = value;\n  if (tristate && (typeof value === \"undefined\" || value === indetermValue || value === \"\")) {\n    indetermState = true;\n    input.indeterminate = true;\n  }\n  if (this.table.browser != \"firefox\" && this.table.browser != \"safari\") {\n    //prevent blur issue on mac firefox\n    onRendered(function () {\n      if (cell.getType() === \"cell\") {\n        input.focus({\n          preventScroll: true\n        });\n      }\n    });\n  }\n  input.checked = trueValueSet ? value === editorParams.trueValue : value === true || value === \"true\" || value === \"True\" || value === 1;\n  function setValue(blur) {\n    var checkedValue = input.checked;\n    if (trueValueSet && checkedValue) {\n      checkedValue = editorParams.trueValue;\n    } else if (falseValueSet && !checkedValue) {\n      checkedValue = editorParams.falseValue;\n    }\n    if (tristate) {\n      if (!blur) {\n        if (input.checked && !indetermState) {\n          input.checked = false;\n          input.indeterminate = true;\n          indetermState = true;\n          return indetermValue;\n        } else {\n          indetermState = false;\n          return checkedValue;\n        }\n      } else {\n        if (indetermState) {\n          return indetermValue;\n        } else {\n          return checkedValue;\n        }\n      }\n    } else {\n      return checkedValue;\n    }\n  }\n\n  //submit new value on blur\n  input.addEventListener(\"change\", function (e) {\n    success(setValue());\n  });\n  input.addEventListener(\"blur\", function (e) {\n    success(setValue(true));\n  });\n\n  //submit new value on enter\n  input.addEventListener(\"keydown\", function (e) {\n    if (e.keyCode == 13) {\n      success(setValue());\n    }\n    if (e.keyCode == 27) {\n      cancel();\n    }\n  });\n  return input;\n}\nvar defaultEditors = {\n  input: input,\n  textarea: textarea$1,\n  number: number$1,\n  range: range,\n  date: date$1,\n  time: time$1,\n  datetime: datetime$2,\n  list: list,\n  star: star$1,\n  progress: progress$1,\n  tickCross: tickCross$1\n};\nclass Edit extends Module {\n  static moduleName = \"edit\";\n\n  //load defaults\n  static editors = defaultEditors;\n  constructor(table) {\n    super(table);\n    this.currentCell = false; //hold currently editing cell\n    this.mouseClick = false; //hold mousedown state to prevent click binding being overridden by editor opening\n    this.recursionBlock = false; //prevent focus recursion\n    this.invalidEdit = false;\n    this.editedCells = [];\n    this.convertEmptyValues = false;\n    this.editors = Edit.editors;\n    this.registerTableOption(\"editTriggerEvent\", \"focus\");\n    this.registerTableOption(\"editorEmptyValue\");\n    this.registerTableOption(\"editorEmptyValueFunc\", this.emptyValueCheck.bind(this));\n    this.registerColumnOption(\"editable\");\n    this.registerColumnOption(\"editor\");\n    this.registerColumnOption(\"editorParams\");\n    this.registerColumnOption(\"editorEmptyValue\");\n    this.registerColumnOption(\"editorEmptyValueFunc\");\n    this.registerColumnOption(\"cellEditing\");\n    this.registerColumnOption(\"cellEdited\");\n    this.registerColumnOption(\"cellEditCancelled\");\n    this.registerTableFunction(\"getEditedCells\", this.getEditedCells.bind(this));\n    this.registerTableFunction(\"clearCellEdited\", this.clearCellEdited.bind(this));\n    this.registerTableFunction(\"navigatePrev\", this.navigatePrev.bind(this));\n    this.registerTableFunction(\"navigateNext\", this.navigateNext.bind(this));\n    this.registerTableFunction(\"navigateLeft\", this.navigateLeft.bind(this));\n    this.registerTableFunction(\"navigateRight\", this.navigateRight.bind(this));\n    this.registerTableFunction(\"navigateUp\", this.navigateUp.bind(this));\n    this.registerTableFunction(\"navigateDown\", this.navigateDown.bind(this));\n    this.registerComponentFunction(\"cell\", \"isEdited\", this.cellIsEdited.bind(this));\n    this.registerComponentFunction(\"cell\", \"clearEdited\", this.clearEdited.bind(this));\n    this.registerComponentFunction(\"cell\", \"edit\", this.editCell.bind(this));\n    this.registerComponentFunction(\"cell\", \"cancelEdit\", this.cellCancelEdit.bind(this));\n    this.registerComponentFunction(\"cell\", \"navigatePrev\", this.navigatePrev.bind(this));\n    this.registerComponentFunction(\"cell\", \"navigateNext\", this.navigateNext.bind(this));\n    this.registerComponentFunction(\"cell\", \"navigateLeft\", this.navigateLeft.bind(this));\n    this.registerComponentFunction(\"cell\", \"navigateRight\", this.navigateRight.bind(this));\n    this.registerComponentFunction(\"cell\", \"navigateUp\", this.navigateUp.bind(this));\n    this.registerComponentFunction(\"cell\", \"navigateDown\", this.navigateDown.bind(this));\n  }\n  initialize() {\n    this.subscribe(\"cell-init\", this.bindEditor.bind(this));\n    this.subscribe(\"cell-delete\", this.clearEdited.bind(this));\n    this.subscribe(\"cell-value-changed\", this.updateCellClass.bind(this));\n    this.subscribe(\"column-layout\", this.initializeColumnCheck.bind(this));\n    this.subscribe(\"column-delete\", this.columnDeleteCheck.bind(this));\n    this.subscribe(\"row-deleting\", this.rowDeleteCheck.bind(this));\n    this.subscribe(\"row-layout\", this.rowEditableCheck.bind(this));\n    this.subscribe(\"data-refreshing\", this.cancelEdit.bind(this));\n    this.subscribe(\"clipboard-paste\", this.pasteBlocker.bind(this));\n    this.subscribe(\"keybinding-nav-prev\", this.navigatePrev.bind(this, undefined));\n    this.subscribe(\"keybinding-nav-next\", this.keybindingNavigateNext.bind(this));\n\n    // this.subscribe(\"keybinding-nav-left\", this.navigateLeft.bind(this, undefined));\n    // this.subscribe(\"keybinding-nav-right\", this.navigateRight.bind(this, undefined));\n    this.subscribe(\"keybinding-nav-up\", this.navigateUp.bind(this, undefined));\n    this.subscribe(\"keybinding-nav-down\", this.navigateDown.bind(this, undefined));\n    if (Object.keys(this.table.options).includes(\"editorEmptyValue\")) {\n      this.convertEmptyValues = true;\n    }\n  }\n\n  ///////////////////////////////////\n  ///////// Paste Negation //////////\n  ///////////////////////////////////\n\n  pasteBlocker(e) {\n    if (this.currentCell) {\n      return true;\n    }\n  }\n\n  ///////////////////////////////////\n  ////// Keybinding Functions ///////\n  ///////////////////////////////////\n\n  keybindingNavigateNext(e) {\n    var cell = this.currentCell,\n      newRow = this.options(\"tabEndNewRow\");\n    if (cell) {\n      if (!this.navigateNext(cell, e)) {\n        if (newRow) {\n          cell.getElement().firstChild.blur();\n          if (!this.invalidEdit) {\n            if (newRow === true) {\n              newRow = this.table.addRow({});\n            } else {\n              if (typeof newRow == \"function\") {\n                newRow = this.table.addRow(newRow(cell.row.getComponent()));\n              } else {\n                newRow = this.table.addRow(Object.assign({}, newRow));\n              }\n            }\n            newRow.then(() => {\n              setTimeout(() => {\n                cell.getComponent().navigateNext();\n              });\n            });\n          }\n        }\n      }\n    }\n  }\n\n  ///////////////////////////////////\n  ///////// Cell Functions //////////\n  ///////////////////////////////////\n\n  cellIsEdited(cell) {\n    return !!cell.modules.edit && cell.modules.edit.edited;\n  }\n  cellCancelEdit(cell) {\n    if (cell === this.currentCell) {\n      this.table.modules.edit.cancelEdit();\n    } else {\n      console.warn(\"Cancel Editor Error - This cell is not currently being edited \");\n    }\n  }\n\n  ///////////////////////////////////\n  ///////// Table Functions /////////\n  ///////////////////////////////////\n  updateCellClass(cell) {\n    if (this.allowEdit(cell)) {\n      cell.getElement().classList.add(\"tabulator-editable\");\n    } else {\n      cell.getElement().classList.remove(\"tabulator-editable\");\n    }\n  }\n  clearCellEdited(cells) {\n    if (!cells) {\n      cells = this.table.modules.edit.getEditedCells();\n    }\n    if (!Array.isArray(cells)) {\n      cells = [cells];\n    }\n    cells.forEach(cell => {\n      this.table.modules.edit.clearEdited(cell._getSelf());\n    });\n  }\n  navigatePrev(cell = this.currentCell, e) {\n    var nextCell, prevRow;\n    if (cell) {\n      if (e) {\n        e.preventDefault();\n      }\n      nextCell = this.navigateLeft();\n      if (nextCell) {\n        return true;\n      } else {\n        prevRow = this.table.rowManager.prevDisplayRow(cell.row, true);\n        if (prevRow) {\n          nextCell = this.findPrevEditableCell(prevRow, prevRow.cells.length);\n          if (nextCell) {\n            nextCell.getComponent().edit();\n            return true;\n          }\n        }\n      }\n    }\n    return false;\n  }\n  navigateNext(cell = this.currentCell, e) {\n    var nextCell, nextRow;\n    if (cell) {\n      if (e) {\n        e.preventDefault();\n      }\n      nextCell = this.navigateRight();\n      if (nextCell) {\n        return true;\n      } else {\n        nextRow = this.table.rowManager.nextDisplayRow(cell.row, true);\n        if (nextRow) {\n          nextCell = this.findNextEditableCell(nextRow, -1);\n          if (nextCell) {\n            nextCell.getComponent().edit();\n            return true;\n          }\n        }\n      }\n    }\n    return false;\n  }\n  navigateLeft(cell = this.currentCell, e) {\n    var index, nextCell;\n    if (cell) {\n      if (e) {\n        e.preventDefault();\n      }\n      index = cell.getIndex();\n      nextCell = this.findPrevEditableCell(cell.row, index);\n      if (nextCell) {\n        nextCell.getComponent().edit();\n        return true;\n      }\n    }\n    return false;\n  }\n  navigateRight(cell = this.currentCell, e) {\n    var index, nextCell;\n    if (cell) {\n      if (e) {\n        e.preventDefault();\n      }\n      index = cell.getIndex();\n      nextCell = this.findNextEditableCell(cell.row, index);\n      if (nextCell) {\n        nextCell.getComponent().edit();\n        return true;\n      }\n    }\n    return false;\n  }\n  navigateUp(cell = this.currentCell, e) {\n    var index, nextRow;\n    if (cell) {\n      if (e) {\n        e.preventDefault();\n      }\n      index = cell.getIndex();\n      nextRow = this.table.rowManager.prevDisplayRow(cell.row, true);\n      if (nextRow) {\n        nextRow.cells[index].getComponent().edit();\n        return true;\n      }\n    }\n    return false;\n  }\n  navigateDown(cell = this.currentCell, e) {\n    var index, nextRow;\n    if (cell) {\n      if (e) {\n        e.preventDefault();\n      }\n      index = cell.getIndex();\n      nextRow = this.table.rowManager.nextDisplayRow(cell.row, true);\n      if (nextRow) {\n        nextRow.cells[index].getComponent().edit();\n        return true;\n      }\n    }\n    return false;\n  }\n  findNextEditableCell(row, index) {\n    var nextCell = false;\n    if (index < row.cells.length - 1) {\n      for (var i = index + 1; i < row.cells.length; i++) {\n        let cell = row.cells[i];\n        if (cell.column.modules.edit && Helpers.elVisible(cell.getElement())) {\n          let allowEdit = this.allowEdit(cell);\n          if (allowEdit) {\n            nextCell = cell;\n            break;\n          }\n        }\n      }\n    }\n    return nextCell;\n  }\n  findPrevEditableCell(row, index) {\n    var prevCell = false;\n    if (index > 0) {\n      for (var i = index - 1; i >= 0; i--) {\n        let cell = row.cells[i];\n        if (cell.column.modules.edit && Helpers.elVisible(cell.getElement())) {\n          let allowEdit = this.allowEdit(cell);\n          if (allowEdit) {\n            prevCell = cell;\n            break;\n          }\n        }\n      }\n    }\n    return prevCell;\n  }\n\n  ///////////////////////////////////\n  ///////// Internal Logic //////////\n  ///////////////////////////////////\n\n  initializeColumnCheck(column) {\n    if (typeof column.definition.editor !== \"undefined\") {\n      this.initializeColumn(column);\n    }\n  }\n  columnDeleteCheck(column) {\n    if (this.currentCell && this.currentCell.column === column) {\n      this.cancelEdit();\n    }\n  }\n  rowDeleteCheck(row) {\n    if (this.currentCell && this.currentCell.row === row) {\n      this.cancelEdit();\n    }\n  }\n  rowEditableCheck(row) {\n    row.getCells().forEach(cell => {\n      if (cell.column.modules.edit && typeof cell.column.modules.edit.check === \"function\") {\n        this.updateCellClass(cell);\n      }\n    });\n  }\n\n  //initialize column editor\n  initializeColumn(column) {\n    var convertEmpty = Object.keys(column.definition).includes(\"editorEmptyValue\");\n    var config = {\n      editor: false,\n      blocked: false,\n      check: column.definition.editable,\n      params: column.definition.editorParams || {},\n      convertEmptyValues: convertEmpty,\n      editorEmptyValue: column.definition.editorEmptyValue,\n      editorEmptyValueFunc: column.definition.editorEmptyValueFunc\n    };\n\n    //set column editor\n    switch (typeof column.definition.editor) {\n      case \"string\":\n        if (this.editors[column.definition.editor]) {\n          config.editor = this.editors[column.definition.editor];\n        } else {\n          console.warn(\"Editor Error - No such editor found: \", column.definition.editor);\n        }\n        break;\n      case \"function\":\n        config.editor = column.definition.editor;\n        break;\n      case \"boolean\":\n        if (column.definition.editor === true) {\n          if (typeof column.definition.formatter !== \"function\") {\n            if (this.editors[column.definition.formatter]) {\n              config.editor = this.editors[column.definition.formatter];\n            } else {\n              config.editor = this.editors[\"input\"];\n            }\n          } else {\n            console.warn(\"Editor Error - Cannot auto lookup editor for a custom formatter: \", column.definition.formatter);\n          }\n        }\n        break;\n    }\n    if (config.editor) {\n      column.modules.edit = config;\n    }\n  }\n  getCurrentCell() {\n    return this.currentCell ? this.currentCell.getComponent() : false;\n  }\n  clearEditor(cancel) {\n    var cell = this.currentCell,\n      cellEl;\n    this.invalidEdit = false;\n    if (cell) {\n      this.currentCell = false;\n      cellEl = cell.getElement();\n      this.dispatch(\"edit-editor-clear\", cell, cancel);\n      cellEl.classList.remove(\"tabulator-editing\");\n      while (cellEl.firstChild) cellEl.removeChild(cellEl.firstChild);\n      cell.row.getElement().classList.remove(\"tabulator-editing\");\n      cell.table.element.classList.remove(\"tabulator-editing\");\n    }\n  }\n  cancelEdit() {\n    if (this.currentCell) {\n      var cell = this.currentCell;\n      var component = this.currentCell.getComponent();\n      this.clearEditor(true);\n      cell.setValueActual(cell.getValue());\n      cell.cellRendered();\n      if (cell.column.definition.editor == \"textarea\" || cell.column.definition.variableHeight) {\n        cell.row.normalizeHeight(true);\n      }\n      if (cell.column.definition.cellEditCancelled) {\n        cell.column.definition.cellEditCancelled.call(this.table, component);\n      }\n      this.dispatch(\"edit-cancelled\", cell);\n      this.dispatchExternal(\"cellEditCancelled\", component);\n    }\n  }\n\n  //return a formatted value for a cell\n  bindEditor(cell) {\n    if (cell.column.modules.edit) {\n      var self = this,\n        element = cell.getElement(true);\n      this.updateCellClass(cell);\n      element.setAttribute(\"tabindex\", 0);\n      element.addEventListener(\"mousedown\", function (e) {\n        if (e.button === 2) {\n          e.preventDefault();\n        } else {\n          self.mouseClick = true;\n        }\n      });\n      if (this.options(\"editTriggerEvent\") === \"dblclick\") {\n        element.addEventListener(\"dblclick\", function (e) {\n          if (!element.classList.contains(\"tabulator-editing\")) {\n            element.focus({\n              preventScroll: true\n            });\n            self.edit(cell, e, false);\n          }\n        });\n      }\n      if (this.options(\"editTriggerEvent\") === \"focus\" || this.options(\"editTriggerEvent\") === \"click\") {\n        element.addEventListener(\"click\", function (e) {\n          if (!element.classList.contains(\"tabulator-editing\")) {\n            element.focus({\n              preventScroll: true\n            });\n            self.edit(cell, e, false);\n          }\n        });\n      }\n      if (this.options(\"editTriggerEvent\") === \"focus\") {\n        element.addEventListener(\"focus\", function (e) {\n          if (!self.recursionBlock) {\n            self.edit(cell, e, false);\n          }\n        });\n      }\n    }\n  }\n  focusCellNoEvent(cell, block) {\n    this.recursionBlock = true;\n    if (!(block && this.table.browser === \"ie\")) {\n      cell.getElement().focus({\n        preventScroll: true\n      });\n    }\n    this.recursionBlock = false;\n  }\n  editCell(cell, forceEdit) {\n    this.focusCellNoEvent(cell);\n    this.edit(cell, false, forceEdit);\n  }\n  focusScrollAdjust(cell) {\n    if (this.table.rowManager.getRenderMode() == \"virtual\") {\n      var topEdge = this.table.rowManager.element.scrollTop,\n        bottomEdge = this.table.rowManager.element.clientHeight + this.table.rowManager.element.scrollTop,\n        rowEl = cell.row.getElement();\n      if (rowEl.offsetTop < topEdge) {\n        this.table.rowManager.element.scrollTop -= topEdge - rowEl.offsetTop;\n      } else {\n        if (rowEl.offsetTop + rowEl.offsetHeight > bottomEdge) {\n          this.table.rowManager.element.scrollTop += rowEl.offsetTop + rowEl.offsetHeight - bottomEdge;\n        }\n      }\n      var leftEdge = this.table.rowManager.element.scrollLeft,\n        rightEdge = this.table.rowManager.element.clientWidth + this.table.rowManager.element.scrollLeft,\n        cellEl = cell.getElement();\n      if (this.table.modExists(\"frozenColumns\")) {\n        leftEdge += parseInt(this.table.modules.frozenColumns.leftMargin || 0);\n        rightEdge -= parseInt(this.table.modules.frozenColumns.rightMargin || 0);\n      }\n      if (this.table.options.renderHorizontal === \"virtual\") {\n        leftEdge -= parseInt(this.table.columnManager.renderer.vDomPadLeft);\n        rightEdge -= parseInt(this.table.columnManager.renderer.vDomPadLeft);\n      }\n      if (cellEl.offsetLeft < leftEdge) {\n        this.table.rowManager.element.scrollLeft -= leftEdge - cellEl.offsetLeft;\n      } else {\n        if (cellEl.offsetLeft + cellEl.offsetWidth > rightEdge) {\n          this.table.rowManager.element.scrollLeft += cellEl.offsetLeft + cellEl.offsetWidth - rightEdge;\n        }\n      }\n    }\n  }\n  allowEdit(cell) {\n    var check = cell.column.modules.edit ? true : false;\n    if (cell.column.modules.edit) {\n      switch (typeof cell.column.modules.edit.check) {\n        case \"function\":\n          if (cell.row.initialized) {\n            check = cell.column.modules.edit.check(cell.getComponent());\n          }\n          break;\n        case \"string\":\n          check = !!cell.row.data[cell.column.modules.edit.check];\n          break;\n        case \"boolean\":\n          check = cell.column.modules.edit.check;\n          break;\n      }\n    }\n    return check;\n  }\n  edit(cell, e, forceEdit) {\n    var self = this,\n      allowEdit = true,\n      rendered = function () {},\n      element = cell.getElement(),\n      editFinished = false,\n      cellEditor,\n      component,\n      params;\n\n    //prevent editing if another cell is refusing to leave focus (eg. validation fail)\n\n    if (this.currentCell) {\n      if (!this.invalidEdit && this.currentCell !== cell) {\n        this.cancelEdit();\n      }\n      return;\n    }\n\n    //handle successful value change\n    function success(value) {\n      if (self.currentCell === cell && !editFinished) {\n        var valid = self.chain(\"edit-success\", [cell, value], true, true);\n        if (valid === true || self.table.options.validationMode === \"highlight\") {\n          editFinished = true;\n          self.clearEditor();\n          if (!cell.modules.edit) {\n            cell.modules.edit = {};\n          }\n          cell.modules.edit.edited = true;\n          if (self.editedCells.indexOf(cell) == -1) {\n            self.editedCells.push(cell);\n          }\n          value = self.transformEmptyValues(value, cell);\n          cell.setValue(value, true);\n          return valid === true;\n        } else {\n          editFinished = true;\n          self.invalidEdit = true;\n          self.focusCellNoEvent(cell, true);\n          rendered();\n          setTimeout(() => {\n            editFinished = false;\n          }, 10);\n          return false;\n        }\n      }\n    }\n\n    //handle aborted edit\n    function cancel() {\n      // editFinished = true;\n\n      if (self.currentCell === cell && !editFinished) {\n        self.cancelEdit();\n      }\n    }\n    function onRendered(callback) {\n      rendered = callback;\n    }\n    if (!cell.column.modules.edit.blocked) {\n      if (e) {\n        e.stopPropagation();\n      }\n      allowEdit = this.allowEdit(cell);\n      if (allowEdit || forceEdit) {\n        self.cancelEdit();\n        self.currentCell = cell;\n        this.focusScrollAdjust(cell);\n        component = cell.getComponent();\n        if (this.mouseClick) {\n          this.mouseClick = false;\n          if (cell.column.definition.cellClick) {\n            cell.column.definition.cellClick.call(this.table, e, component);\n          }\n        }\n        if (cell.column.definition.cellEditing) {\n          cell.column.definition.cellEditing.call(this.table, component);\n        }\n        this.dispatch(\"cell-editing\", cell);\n        this.dispatchExternal(\"cellEditing\", component);\n        params = typeof cell.column.modules.edit.params === \"function\" ? cell.column.modules.edit.params(component) : cell.column.modules.edit.params;\n        cellEditor = cell.column.modules.edit.editor.call(self, component, onRendered, success, cancel, params);\n\n        //if editor returned, add to DOM, if false, abort edit\n        if (this.currentCell && cellEditor !== false) {\n          if (cellEditor instanceof Node) {\n            element.classList.add(\"tabulator-editing\");\n            cell.row.getElement().classList.add(\"tabulator-editing\");\n            cell.table.element.classList.add(\"tabulator-editing\");\n            while (element.firstChild) element.removeChild(element.firstChild);\n            element.appendChild(cellEditor);\n\n            //trigger onRendered Callback\n            rendered();\n\n            //prevent editing from triggering rowClick event\n            var children = element.children;\n            for (var i = 0; i < children.length; i++) {\n              children[i].addEventListener(\"click\", function (e) {\n                e.stopPropagation();\n              });\n            }\n          } else {\n            console.warn(\"Edit Error - Editor should return an instance of Node, the editor returned:\", cellEditor);\n            this.blur(element);\n            return false;\n          }\n        } else {\n          this.blur(element);\n          return false;\n        }\n        return true;\n      } else {\n        this.mouseClick = false;\n        this.blur(element);\n        return false;\n      }\n    } else {\n      this.mouseClick = false;\n      this.blur(element);\n      return false;\n    }\n  }\n  emptyValueCheck(value) {\n    return value === \"\" || value === null || typeof value === \"undefined\";\n  }\n  transformEmptyValues(value, cell) {\n    var mod = cell.column.modules.edit,\n      convert = mod.convertEmptyValues || this.convertEmptyValues,\n      checkFunc;\n    if (convert) {\n      checkFunc = mod.editorEmptyValueFunc || this.options(\"editorEmptyValueFunc\");\n      if (checkFunc && checkFunc(value)) {\n        value = mod.convertEmptyValues ? mod.editorEmptyValue : this.options(\"editorEmptyValue\");\n      }\n    }\n    return value;\n  }\n  blur(element) {\n    if (!this.confirm(\"edit-blur\", [element])) {\n      element.blur();\n    }\n  }\n  getEditedCells() {\n    var output = [];\n    this.editedCells.forEach(cell => {\n      output.push(cell.getComponent());\n    });\n    return output;\n  }\n  clearEdited(cell) {\n    var editIndex;\n    if (cell.modules.edit && cell.modules.edit.edited) {\n      cell.modules.edit.edited = false;\n      this.dispatch(\"edit-edited-clear\", cell);\n    }\n    editIndex = this.editedCells.indexOf(cell);\n    if (editIndex > -1) {\n      this.editedCells.splice(editIndex, 1);\n    }\n  }\n}\nclass ExportRow {\n  constructor(type, columns, component, indent) {\n    this.type = type;\n    this.columns = columns;\n    this.component = component || false;\n    this.indent = indent || 0;\n  }\n}\nclass ExportColumn {\n  constructor(value, component, width, height, depth) {\n    this.value = value;\n    this.component = component || false;\n    this.width = width;\n    this.height = height;\n    this.depth = depth;\n  }\n}\nvar columnLookups$1 = {};\nvar rowLookups$1 = {\n  visible: function () {\n    return this.rowManager.getVisibleRows(false, true);\n  },\n  all: function () {\n    return this.rowManager.rows;\n  },\n  selected: function () {\n    return this.modules.selectRow.selectedRows;\n  },\n  active: function () {\n    if (this.options.pagination) {\n      return this.rowManager.getDisplayRows(this.rowManager.displayRows.length - 2);\n    } else {\n      return this.rowManager.getDisplayRows();\n    }\n  }\n};\nclass Export extends Module {\n  static moduleName = \"export\";\n  static columnLookups = columnLookups$1;\n  static rowLookups = rowLookups$1;\n  constructor(table) {\n    super(table);\n    this.config = {};\n    this.cloneTableStyle = true;\n    this.colVisProp = \"\";\n    this.colVisPropAttach = \"\";\n    this.registerTableOption(\"htmlOutputConfig\", false); //html output config\n\n    this.registerColumnOption(\"htmlOutput\");\n    this.registerColumnOption(\"titleHtmlOutput\");\n  }\n  initialize() {\n    this.registerTableFunction(\"getHtml\", this.getHtml.bind(this));\n  }\n\n  ///////////////////////////////////\n  ///////// Internal Logic //////////\n  ///////////////////////////////////\n\n  generateExportList(config, style, range, colVisProp) {\n    var headers, body, columns, colLookup;\n    this.cloneTableStyle = style;\n    this.config = config || {};\n    this.colVisProp = colVisProp;\n    this.colVisPropAttach = this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1);\n    colLookup = Export.columnLookups[range];\n    if (colLookup) {\n      columns = colLookup.call(this.table);\n      columns = columns.filter(col => this.columnVisCheck(col));\n    }\n    headers = this.config.columnHeaders !== false ? this.headersToExportRows(this.generateColumnGroupHeaders(columns)) : [];\n    if (columns) {\n      columns = columns.map(col => col.getComponent());\n    }\n    body = this.bodyToExportRows(this.rowLookup(range), columns);\n    return headers.concat(body);\n  }\n  generateTable(config, style, range, colVisProp) {\n    var list = this.generateExportList(config, style, range, colVisProp);\n    return this.generateTableElement(list);\n  }\n  rowLookup(range) {\n    var rows = [],\n      rowLookup;\n    if (typeof range == \"function\") {\n      range.call(this.table).forEach(row => {\n        row = this.table.rowManager.findRow(row);\n        if (row) {\n          rows.push(row);\n        }\n      });\n    } else {\n      rowLookup = Export.rowLookups[range] || Export.rowLookups[\"active\"];\n      rows = rowLookup.call(this.table);\n    }\n    return Object.assign([], rows);\n  }\n  generateColumnGroupHeaders(columns) {\n    var output = [];\n    if (!columns) {\n      columns = this.config.columnGroups !== false ? this.table.columnManager.columns : this.table.columnManager.columnsByIndex;\n    }\n    columns.forEach(column => {\n      var colData = this.processColumnGroup(column);\n      if (colData) {\n        output.push(colData);\n      }\n    });\n    return output;\n  }\n  processColumnGroup(column) {\n    var subGroups = column.columns,\n      maxDepth = 0,\n      title = column.definition[\"title\" + this.colVisPropAttach] || column.definition.title;\n    var groupData = {\n      title: title,\n      column: column,\n      depth: 1\n    };\n    if (subGroups.length) {\n      groupData.subGroups = [];\n      groupData.width = 0;\n      subGroups.forEach(subGroup => {\n        var subGroupData = this.processColumnGroup(subGroup);\n        if (subGroupData) {\n          groupData.width += subGroupData.width;\n          groupData.subGroups.push(subGroupData);\n          if (subGroupData.depth > maxDepth) {\n            maxDepth = subGroupData.depth;\n          }\n        }\n      });\n      groupData.depth += maxDepth;\n      if (!groupData.width) {\n        return false;\n      }\n    } else {\n      if (this.columnVisCheck(column)) {\n        groupData.width = 1;\n      } else {\n        return false;\n      }\n    }\n    return groupData;\n  }\n  columnVisCheck(column) {\n    var visProp = column.definition[this.colVisProp];\n    if (this.config.rowHeaders === false && column.isRowHeader) {\n      return false;\n    }\n    if (typeof visProp === \"function\") {\n      visProp = visProp.call(this.table, column.getComponent());\n    }\n    if (visProp === false || visProp === true) {\n      return visProp;\n    }\n    return column.visible && column.field;\n  }\n  headersToExportRows(columns) {\n    var headers = [],\n      headerDepth = 0,\n      exportRows = [];\n    function parseColumnGroup(column, level) {\n      var depth = headerDepth - level;\n      if (typeof headers[level] === \"undefined\") {\n        headers[level] = [];\n      }\n      column.height = column.subGroups ? 1 : depth - column.depth + 1;\n      headers[level].push(column);\n      if (column.height > 1) {\n        for (let i = 1; i < column.height; i++) {\n          if (typeof headers[level + i] === \"undefined\") {\n            headers[level + i] = [];\n          }\n          headers[level + i].push(false);\n        }\n      }\n      if (column.width > 1) {\n        for (let i = 1; i < column.width; i++) {\n          headers[level].push(false);\n        }\n      }\n      if (column.subGroups) {\n        column.subGroups.forEach(function (subGroup) {\n          parseColumnGroup(subGroup, level + 1);\n        });\n      }\n    }\n\n    //calculate maximum header depth\n    columns.forEach(function (column) {\n      if (column.depth > headerDepth) {\n        headerDepth = column.depth;\n      }\n    });\n    columns.forEach(function (column) {\n      parseColumnGroup(column, 0);\n    });\n    headers.forEach(header => {\n      var columns = [];\n      header.forEach(col => {\n        if (col) {\n          let title = typeof col.title === \"undefined\" ? \"\" : col.title;\n          columns.push(new ExportColumn(title, col.column.getComponent(), col.width, col.height, col.depth));\n        } else {\n          columns.push(null);\n        }\n      });\n      exportRows.push(new ExportRow(\"header\", columns));\n    });\n    return exportRows;\n  }\n  bodyToExportRows(rows, columns = []) {\n    var exportRows = [];\n    if (columns.length === 0) {\n      this.table.columnManager.columnsByIndex.forEach(column => {\n        if (this.columnVisCheck(column)) {\n          columns.push(column.getComponent());\n        }\n      });\n    }\n    if (this.config.columnCalcs !== false && this.table.modExists(\"columnCalcs\")) {\n      if (this.table.modules.columnCalcs.topInitialized) {\n        rows.unshift(this.table.modules.columnCalcs.topRow);\n      }\n      if (this.table.modules.columnCalcs.botInitialized) {\n        rows.push(this.table.modules.columnCalcs.botRow);\n      }\n    }\n    rows = rows.filter(row => {\n      switch (row.type) {\n        case \"group\":\n          return this.config.rowGroups !== false;\n        case \"calc\":\n          return this.config.columnCalcs !== false;\n        case \"row\":\n          return !(this.table.options.dataTree && this.config.dataTree === false && row.modules.dataTree.parent);\n      }\n      return true;\n    });\n    rows.forEach((row, i) => {\n      var rowData = row.getData(this.colVisProp);\n      var exportCols = [];\n      var indent = 0;\n      switch (row.type) {\n        case \"group\":\n          indent = row.level;\n          exportCols.push(new ExportColumn(row.key, row.getComponent(), columns.length, 1));\n          break;\n        case \"calc\":\n        case \"row\":\n          columns.forEach(col => {\n            exportCols.push(new ExportColumn(col._column.getFieldValue(rowData), col, 1, 1));\n          });\n          if (this.table.options.dataTree && this.config.dataTree !== false) {\n            indent = row.modules.dataTree.index;\n          }\n          break;\n      }\n      exportRows.push(new ExportRow(row.type, exportCols, row.getComponent(), indent));\n    });\n    return exportRows;\n  }\n  generateTableElement(list) {\n    var table = document.createElement(\"table\"),\n      headerEl = document.createElement(\"thead\"),\n      bodyEl = document.createElement(\"tbody\"),\n      styles = this.lookupTableStyles(),\n      rowFormatter = this.table.options[\"rowFormatter\" + this.colVisPropAttach],\n      setup = {};\n    setup.rowFormatter = rowFormatter !== null ? rowFormatter : this.table.options.rowFormatter;\n    if (this.table.options.dataTree && this.config.dataTree !== false && this.table.modExists(\"columnCalcs\")) {\n      setup.treeElementField = this.table.modules.dataTree.elementField;\n    }\n\n    //assign group header formatter\n    setup.groupHeader = this.table.options[\"groupHeader\" + this.colVisPropAttach];\n    if (setup.groupHeader && !Array.isArray(setup.groupHeader)) {\n      setup.groupHeader = [setup.groupHeader];\n    }\n    table.classList.add(\"tabulator-print-table\");\n    this.mapElementStyles(this.table.columnManager.getHeadersElement(), headerEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n    if (list.length > 1000) {\n      console.warn(\"It may take a long time to render an HTML table with more than 1000 rows\");\n    }\n    list.forEach((row, i) => {\n      let rowEl;\n      switch (row.type) {\n        case \"header\":\n          headerEl.appendChild(this.generateHeaderElement(row, setup, styles));\n          break;\n        case \"group\":\n          bodyEl.appendChild(this.generateGroupElement(row, setup, styles));\n          break;\n        case \"calc\":\n          bodyEl.appendChild(this.generateCalcElement(row, setup, styles));\n          break;\n        case \"row\":\n          rowEl = this.generateRowElement(row, setup, styles);\n          this.mapElementStyles(i % 2 && styles.evenRow ? styles.evenRow : styles.oddRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n          bodyEl.appendChild(rowEl);\n          break;\n      }\n    });\n    if (headerEl.innerHTML) {\n      table.appendChild(headerEl);\n    }\n    table.appendChild(bodyEl);\n    this.mapElementStyles(this.table.element, table, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\"]);\n    return table;\n  }\n  lookupTableStyles() {\n    var styles = {};\n\n    //lookup row styles\n    if (this.cloneTableStyle && window.getComputedStyle) {\n      styles.oddRow = this.table.element.querySelector(\".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)\");\n      styles.evenRow = this.table.element.querySelector(\".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)\");\n      styles.calcRow = this.table.element.querySelector(\".tabulator-row.tabulator-calcs\");\n      styles.firstRow = this.table.element.querySelector(\".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)\");\n      styles.firstGroup = this.table.element.getElementsByClassName(\"tabulator-group\")[0];\n      if (styles.firstRow) {\n        styles.styleCells = styles.firstRow.getElementsByClassName(\"tabulator-cell\");\n        styles.styleRowHeader = styles.firstRow.getElementsByClassName(\"tabulator-row-header\")[0];\n        styles.firstCell = styles.styleCells[0];\n        styles.lastCell = styles.styleCells[styles.styleCells.length - 1];\n      }\n    }\n    return styles;\n  }\n  generateHeaderElement(row, setup, styles) {\n    var rowEl = document.createElement(\"tr\");\n    row.columns.forEach(column => {\n      if (column) {\n        var cellEl = document.createElement(\"th\");\n        var classNames = column.component._column.definition.cssClass ? column.component._column.definition.cssClass.split(\" \") : [];\n        cellEl.colSpan = column.width;\n        cellEl.rowSpan = column.height;\n        cellEl.innerHTML = column.value;\n        if (this.cloneTableStyle) {\n          cellEl.style.boxSizing = \"border-box\";\n        }\n        classNames.forEach(function (className) {\n          cellEl.classList.add(className);\n        });\n        this.mapElementStyles(column.component.getElement(), cellEl, [\"text-align\", \"border-left\", \"border-right\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n        this.mapElementStyles(column.component._column.contentElement, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n        if (column.component._column.visible) {\n          this.mapElementStyles(column.component.getElement(), cellEl, [\"width\"]);\n        } else {\n          if (column.component._column.definition.width) {\n            cellEl.style.width = column.component._column.definition.width + \"px\";\n          }\n        }\n        if (column.component._column.parent && column.component._column.parent.isGroup) {\n          this.mapElementStyles(column.component._column.parent.groupElement, cellEl, [\"border-top\"]);\n        } else {\n          this.mapElementStyles(column.component.getElement(), cellEl, [\"border-top\"]);\n        }\n        if (column.component._column.isGroup) {\n          this.mapElementStyles(column.component.getElement(), cellEl, [\"border-bottom\"]);\n        } else {\n          this.mapElementStyles(this.table.columnManager.getElement(), cellEl, [\"border-bottom\"]);\n        }\n        rowEl.appendChild(cellEl);\n      }\n    });\n    return rowEl;\n  }\n  generateGroupElement(row, setup, styles) {\n    var rowEl = document.createElement(\"tr\"),\n      cellEl = document.createElement(\"td\"),\n      group = row.columns[0];\n    rowEl.classList.add(\"tabulator-print-table-row\");\n    if (setup.groupHeader && setup.groupHeader[row.indent]) {\n      group.value = setup.groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n    } else {\n      if (setup.groupHeader !== false) {\n        group.value = row.component._group.generator(group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n      }\n    }\n    cellEl.colSpan = group.width;\n    cellEl.innerHTML = group.value;\n    rowEl.classList.add(\"tabulator-print-table-group\");\n    rowEl.classList.add(\"tabulator-group-level-\" + row.indent);\n    if (group.component.isVisible()) {\n      rowEl.classList.add(\"tabulator-group-visible\");\n    }\n    this.mapElementStyles(styles.firstGroup, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n    this.mapElementStyles(styles.firstGroup, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n    rowEl.appendChild(cellEl);\n    return rowEl;\n  }\n  generateCalcElement(row, setup, styles) {\n    var rowEl = this.generateRowElement(row, setup, styles);\n    rowEl.classList.add(\"tabulator-print-table-calcs\");\n    this.mapElementStyles(styles.calcRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n    return rowEl;\n  }\n  generateRowElement(row, setup, styles) {\n    var rowEl = document.createElement(\"tr\");\n    rowEl.classList.add(\"tabulator-print-table-row\");\n    row.columns.forEach((col, i) => {\n      if (col) {\n        var cellEl = document.createElement(\"td\"),\n          column = col.component._column,\n          table = this.table,\n          index = table.columnManager.findColumnIndex(column),\n          value = col.value,\n          cellStyle,\n          styleProps;\n        var cellWrapper = {\n          modules: {},\n          getValue: function () {\n            return value;\n          },\n          getField: function () {\n            return column.definition.field;\n          },\n          getElement: function () {\n            return cellEl;\n          },\n          getType: function () {\n            return \"cell\";\n          },\n          getColumn: function () {\n            return column.getComponent();\n          },\n          getData: function () {\n            return row.component.getData();\n          },\n          getRow: function () {\n            return row.component;\n          },\n          getTable: function () {\n            return table;\n          },\n          getComponent: function () {\n            return cellWrapper;\n          },\n          column: column\n        };\n        var classNames = column.definition.cssClass ? column.definition.cssClass.split(\" \") : [];\n        classNames.forEach(function (className) {\n          cellEl.classList.add(className);\n        });\n        if (this.table.modExists(\"format\") && this.config.formatCells !== false) {\n          value = this.table.modules.format.formatExportValue(cellWrapper, this.colVisProp);\n        } else {\n          switch (typeof value) {\n            case \"object\":\n              value = value !== null ? JSON.stringify(value) : \"\";\n              break;\n            case \"undefined\":\n              value = \"\";\n              break;\n          }\n        }\n        if (value instanceof Node) {\n          cellEl.appendChild(value);\n        } else {\n          cellEl.innerHTML = value;\n        }\n        styleProps = [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"text-align\"];\n        if (column.isRowHeader) {\n          cellStyle = styles.styleRowHeader;\n          styleProps.push(\"background-color\");\n        } else {\n          cellStyle = styles.styleCells && styles.styleCells[index] ? styles.styleCells[index] : styles.firstCell;\n        }\n        if (cellStyle) {\n          this.mapElementStyles(cellStyle, cellEl, styleProps);\n          if (column.definition.align) {\n            cellEl.style.textAlign = column.definition.align;\n          }\n        }\n        if (this.table.options.dataTree && this.config.dataTree !== false) {\n          if (setup.treeElementField && setup.treeElementField == column.field || !setup.treeElementField && i == 0) {\n            if (row.component._row.modules.dataTree.controlEl) {\n              cellEl.insertBefore(row.component._row.modules.dataTree.controlEl.cloneNode(true), cellEl.firstChild);\n            }\n            if (row.component._row.modules.dataTree.branchEl) {\n              cellEl.insertBefore(row.component._row.modules.dataTree.branchEl.cloneNode(true), cellEl.firstChild);\n            }\n          }\n        }\n        rowEl.appendChild(cellEl);\n        if (cellWrapper.modules.format && cellWrapper.modules.format.renderedCallback) {\n          cellWrapper.modules.format.renderedCallback();\n        }\n      }\n    });\n    if (setup.rowFormatter && row.type === \"row\" && this.config.formatCells !== false) {\n      let formatComponent = Object.assign(row.component);\n      formatComponent.getElement = function () {\n        return rowEl;\n      };\n      setup.rowFormatter(row.component);\n    }\n    return rowEl;\n  }\n  generateHTMLTable(list) {\n    var holder = document.createElement(\"div\");\n    holder.appendChild(this.generateTableElement(list));\n    return holder.innerHTML;\n  }\n  getHtml(visible, style, config, colVisProp) {\n    var list = this.generateExportList(config || this.table.options.htmlOutputConfig, style, visible, colVisProp || \"htmlOutput\");\n    return this.generateHTMLTable(list);\n  }\n  mapElementStyles(from, to, props) {\n    if (this.cloneTableStyle && from && to) {\n      var lookup = {\n        \"background-color\": \"backgroundColor\",\n        \"color\": \"fontColor\",\n        \"width\": \"width\",\n        \"font-weight\": \"fontWeight\",\n        \"font-family\": \"fontFamily\",\n        \"font-size\": \"fontSize\",\n        \"text-align\": \"textAlign\",\n        \"border-top\": \"borderTop\",\n        \"border-left\": \"borderLeft\",\n        \"border-right\": \"borderRight\",\n        \"border-bottom\": \"borderBottom\",\n        \"padding-top\": \"paddingTop\",\n        \"padding-left\": \"paddingLeft\",\n        \"padding-right\": \"paddingRight\",\n        \"padding-bottom\": \"paddingBottom\"\n      };\n      if (window.getComputedStyle) {\n        var fromStyle = window.getComputedStyle(from);\n        props.forEach(function (prop) {\n          if (!to.style[lookup[prop]]) {\n            to.style[lookup[prop]] = fromStyle.getPropertyValue(prop);\n          }\n        });\n      }\n    }\n  }\n}\nvar defaultFilters = {\n  //equal to\n  \"=\": function (filterVal, rowVal, rowData, filterParams) {\n    return rowVal == filterVal ? true : false;\n  },\n  //less than\n  \"<\": function (filterVal, rowVal, rowData, filterParams) {\n    return rowVal < filterVal ? true : false;\n  },\n  //less than or equal to\n  \"<=\": function (filterVal, rowVal, rowData, filterParams) {\n    return rowVal <= filterVal ? true : false;\n  },\n  //greater than\n  \">\": function (filterVal, rowVal, rowData, filterParams) {\n    return rowVal > filterVal ? true : false;\n  },\n  //greater than or equal to\n  \">=\": function (filterVal, rowVal, rowData, filterParams) {\n    return rowVal >= filterVal ? true : false;\n  },\n  //not equal to\n  \"!=\": function (filterVal, rowVal, rowData, filterParams) {\n    return rowVal != filterVal ? true : false;\n  },\n  \"regex\": function (filterVal, rowVal, rowData, filterParams) {\n    if (typeof filterVal == \"string\") {\n      filterVal = new RegExp(filterVal);\n    }\n    return filterVal.test(rowVal);\n  },\n  //contains the string\n  \"like\": function (filterVal, rowVal, rowData, filterParams) {\n    if (filterVal === null || typeof filterVal === \"undefined\") {\n      return rowVal === filterVal ? true : false;\n    } else {\n      if (typeof rowVal !== 'undefined' && rowVal !== null) {\n        return String(rowVal).toLowerCase().indexOf(filterVal.toLowerCase()) > -1;\n      } else {\n        return false;\n      }\n    }\n  },\n  //contains the keywords\n  \"keywords\": function (filterVal, rowVal, rowData, filterParams) {\n    var keywords = filterVal.toLowerCase().split(typeof filterParams.separator === \"undefined\" ? \" \" : filterParams.separator),\n      value = String(rowVal === null || typeof rowVal === \"undefined\" ? \"\" : rowVal).toLowerCase(),\n      matches = [];\n    keywords.forEach(keyword => {\n      if (value.includes(keyword)) {\n        matches.push(true);\n      }\n    });\n    return filterParams.matchAll ? matches.length === keywords.length : !!matches.length;\n  },\n  //starts with the string\n  \"starts\": function (filterVal, rowVal, rowData, filterParams) {\n    if (filterVal === null || typeof filterVal === \"undefined\") {\n      return rowVal === filterVal ? true : false;\n    } else {\n      if (typeof rowVal !== 'undefined' && rowVal !== null) {\n        return String(rowVal).toLowerCase().startsWith(filterVal.toLowerCase());\n      } else {\n        return false;\n      }\n    }\n  },\n  //ends with the string\n  \"ends\": function (filterVal, rowVal, rowData, filterParams) {\n    if (filterVal === null || typeof filterVal === \"undefined\") {\n      return rowVal === filterVal ? true : false;\n    } else {\n      if (typeof rowVal !== 'undefined' && rowVal !== null) {\n        return String(rowVal).toLowerCase().endsWith(filterVal.toLowerCase());\n      } else {\n        return false;\n      }\n    }\n  },\n  //in array\n  \"in\": function (filterVal, rowVal, rowData, filterParams) {\n    if (Array.isArray(filterVal)) {\n      return filterVal.length ? filterVal.indexOf(rowVal) > -1 : true;\n    } else {\n      console.warn(\"Filter Error - filter value is not an array:\", filterVal);\n      return false;\n    }\n  }\n};\nclass Filter extends Module {\n  static moduleName = \"filter\";\n\n  //load defaults\n  static filters = defaultFilters;\n  constructor(table) {\n    super(table);\n    this.filterList = []; //hold filter list\n    this.headerFilters = {}; //hold column filters\n    this.headerFilterColumns = []; //hold columns that use header filters\n\n    this.prevHeaderFilterChangeCheck = \"\";\n    this.prevHeaderFilterChangeCheck = \"{}\";\n    this.changed = false; //has filtering changed since last render\n    this.tableInitialized = false;\n    this.registerTableOption(\"filterMode\", \"local\"); //local or remote filtering\n\n    this.registerTableOption(\"initialFilter\", false); //initial filtering criteria\n    this.registerTableOption(\"initialHeaderFilter\", false); //initial header filtering criteria\n    this.registerTableOption(\"headerFilterLiveFilterDelay\", 300); //delay before updating column after user types in header filter\n    this.registerTableOption(\"placeholderHeaderFilter\", false); //placeholder when header filter is empty\n\n    this.registerColumnOption(\"headerFilter\");\n    this.registerColumnOption(\"headerFilterPlaceholder\");\n    this.registerColumnOption(\"headerFilterParams\");\n    this.registerColumnOption(\"headerFilterEmptyCheck\");\n    this.registerColumnOption(\"headerFilterFunc\");\n    this.registerColumnOption(\"headerFilterFuncParams\");\n    this.registerColumnOption(\"headerFilterLiveFilter\");\n    this.registerTableFunction(\"searchRows\", this.searchRows.bind(this));\n    this.registerTableFunction(\"searchData\", this.searchData.bind(this));\n    this.registerTableFunction(\"setFilter\", this.userSetFilter.bind(this));\n    this.registerTableFunction(\"refreshFilter\", this.userRefreshFilter.bind(this));\n    this.registerTableFunction(\"addFilter\", this.userAddFilter.bind(this));\n    this.registerTableFunction(\"getFilters\", this.getFilters.bind(this));\n    this.registerTableFunction(\"setHeaderFilterFocus\", this.userSetHeaderFilterFocus.bind(this));\n    this.registerTableFunction(\"getHeaderFilterValue\", this.userGetHeaderFilterValue.bind(this));\n    this.registerTableFunction(\"setHeaderFilterValue\", this.userSetHeaderFilterValue.bind(this));\n    this.registerTableFunction(\"getHeaderFilters\", this.getHeaderFilters.bind(this));\n    this.registerTableFunction(\"removeFilter\", this.userRemoveFilter.bind(this));\n    this.registerTableFunction(\"clearFilter\", this.userClearFilter.bind(this));\n    this.registerTableFunction(\"clearHeaderFilter\", this.userClearHeaderFilter.bind(this));\n    this.registerComponentFunction(\"column\", \"headerFilterFocus\", this.setHeaderFilterFocus.bind(this));\n    this.registerComponentFunction(\"column\", \"reloadHeaderFilter\", this.reloadHeaderFilter.bind(this));\n    this.registerComponentFunction(\"column\", \"getHeaderFilterValue\", this.getHeaderFilterValue.bind(this));\n    this.registerComponentFunction(\"column\", \"setHeaderFilterValue\", this.setHeaderFilterValue.bind(this));\n  }\n  initialize() {\n    this.subscribe(\"column-init\", this.initializeColumnHeaderFilter.bind(this));\n    this.subscribe(\"column-width-fit-before\", this.hideHeaderFilterElements.bind(this));\n    this.subscribe(\"column-width-fit-after\", this.showHeaderFilterElements.bind(this));\n    this.subscribe(\"table-built\", this.tableBuilt.bind(this));\n    this.subscribe(\"placeholder\", this.generatePlaceholder.bind(this));\n    if (this.table.options.filterMode === \"remote\") {\n      this.subscribe(\"data-params\", this.remoteFilterParams.bind(this));\n    }\n    this.registerDataHandler(this.filter.bind(this), 10);\n  }\n  tableBuilt() {\n    if (this.table.options.initialFilter) {\n      this.setFilter(this.table.options.initialFilter);\n    }\n    if (this.table.options.initialHeaderFilter) {\n      this.table.options.initialHeaderFilter.forEach(item => {\n        var column = this.table.columnManager.findColumn(item.field);\n        if (column) {\n          this.setHeaderFilterValue(column, item.value);\n        } else {\n          console.warn(\"Column Filter Error - No matching column found:\", item.field);\n          return false;\n        }\n      });\n    }\n    this.tableInitialized = true;\n  }\n  remoteFilterParams(data, config, silent, params) {\n    params.filter = this.getFilters(true, true);\n    return params;\n  }\n  generatePlaceholder(text) {\n    if (this.table.options.placeholderHeaderFilter && Object.keys(this.headerFilters).length) {\n      return this.table.options.placeholderHeaderFilter;\n    }\n  }\n\n  ///////////////////////////////////\n  ///////// Table Functions /////////\n  ///////////////////////////////////\n\n  //set standard filters\n  userSetFilter(field, type, value, params) {\n    this.setFilter(field, type, value, params);\n    this.refreshFilter();\n  }\n\n  //set standard filters\n  userRefreshFilter() {\n    this.refreshFilter();\n  }\n\n  //add filter to array\n  userAddFilter(field, type, value, params) {\n    this.addFilter(field, type, value, params);\n    this.refreshFilter();\n  }\n  userSetHeaderFilterFocus(field) {\n    var column = this.table.columnManager.findColumn(field);\n    if (column) {\n      this.setHeaderFilterFocus(column);\n    } else {\n      console.warn(\"Column Filter Focus Error - No matching column found:\", field);\n      return false;\n    }\n  }\n  userGetHeaderFilterValue(field) {\n    var column = this.table.columnManager.findColumn(field);\n    if (column) {\n      return this.getHeaderFilterValue(column);\n    } else {\n      console.warn(\"Column Filter Error - No matching column found:\", field);\n    }\n  }\n  userSetHeaderFilterValue(field, value) {\n    var column = this.table.columnManager.findColumn(field);\n    if (column) {\n      this.setHeaderFilterValue(column, value);\n    } else {\n      console.warn(\"Column Filter Error - No matching column found:\", field);\n      return false;\n    }\n  }\n\n  //remove filter from array\n  userRemoveFilter(field, type, value) {\n    this.removeFilter(field, type, value);\n    this.refreshFilter();\n  }\n\n  //clear filters\n  userClearFilter(all) {\n    this.clearFilter(all);\n    this.refreshFilter();\n  }\n\n  //clear header filters\n  userClearHeaderFilter() {\n    this.clearHeaderFilter();\n    this.refreshFilter();\n  }\n\n  //search for specific row components\n  searchRows(field, type, value) {\n    return this.search(\"rows\", field, type, value);\n  }\n\n  //search for specific data\n  searchData(field, type, value) {\n    return this.search(\"data\", field, type, value);\n  }\n\n  ///////////////////////////////////\n  ///////// Internal Logic //////////\n  ///////////////////////////////////\n\n  initializeColumnHeaderFilter(column) {\n    var def = column.definition;\n    if (def.headerFilter) {\n      this.initializeColumn(column);\n    }\n  }\n\n  //initialize column header filter\n  initializeColumn(column, value) {\n    var self = this,\n      field = column.getField();\n\n    //handle successfully value change\n    function success(value) {\n      var filterType = column.modules.filter.tagType == \"input\" && column.modules.filter.attrType == \"text\" || column.modules.filter.tagType == \"textarea\" ? \"partial\" : \"match\",\n        type = \"\",\n        filterChangeCheck = \"\",\n        filterFunc;\n      if (typeof column.modules.filter.prevSuccess === \"undefined\" || column.modules.filter.prevSuccess !== value) {\n        column.modules.filter.prevSuccess = value;\n        if (!column.modules.filter.emptyFunc(value)) {\n          column.modules.filter.value = value;\n          switch (typeof column.definition.headerFilterFunc) {\n            case \"string\":\n              if (Filter.filters[column.definition.headerFilterFunc]) {\n                type = column.definition.headerFilterFunc;\n                filterFunc = function (data) {\n                  var params = column.definition.headerFilterFuncParams || {};\n                  var fieldVal = column.getFieldValue(data);\n                  params = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n                  return Filter.filters[column.definition.headerFilterFunc](value, fieldVal, data, params);\n                };\n              } else {\n                console.warn(\"Header Filter Error - Matching filter function not found: \", column.definition.headerFilterFunc);\n              }\n              break;\n            case \"function\":\n              filterFunc = function (data) {\n                var params = column.definition.headerFilterFuncParams || {};\n                var fieldVal = column.getFieldValue(data);\n                params = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n                return column.definition.headerFilterFunc(value, fieldVal, data, params);\n              };\n              type = filterFunc;\n              break;\n          }\n          if (!filterFunc) {\n            switch (filterType) {\n              case \"partial\":\n                filterFunc = function (data) {\n                  var colVal = column.getFieldValue(data);\n                  if (typeof colVal !== 'undefined' && colVal !== null) {\n                    return String(colVal).toLowerCase().indexOf(String(value).toLowerCase()) > -1;\n                  } else {\n                    return false;\n                  }\n                };\n                type = \"like\";\n                break;\n              default:\n                filterFunc = function (data) {\n                  return column.getFieldValue(data) == value;\n                };\n                type = \"=\";\n            }\n          }\n          self.headerFilters[field] = {\n            value: value,\n            func: filterFunc,\n            type: type\n          };\n        } else {\n          delete self.headerFilters[field];\n        }\n        column.modules.filter.value = value;\n        filterChangeCheck = JSON.stringify(self.headerFilters);\n        if (self.prevHeaderFilterChangeCheck !== filterChangeCheck) {\n          self.prevHeaderFilterChangeCheck = filterChangeCheck;\n          self.trackChanges();\n          self.refreshFilter();\n        }\n      }\n      return true;\n    }\n    column.modules.filter = {\n      success: success,\n      attrType: false,\n      tagType: false,\n      emptyFunc: false\n    };\n    this.generateHeaderFilterElement(column);\n  }\n  generateHeaderFilterElement(column, initialValue, reinitialize) {\n    var self = this,\n      success = column.modules.filter.success,\n      field = column.getField(),\n      filterElement,\n      editor,\n      editorElement,\n      cellWrapper,\n      typingTimer,\n      searchTrigger,\n      params,\n      onRenderedCallback;\n    column.modules.filter.value = initialValue;\n\n    //handle aborted edit\n    function cancel() {}\n    function onRendered(callback) {\n      onRenderedCallback = callback;\n    }\n    if (column.modules.filter.headerElement && column.modules.filter.headerElement.parentNode) {\n      column.contentElement.removeChild(column.modules.filter.headerElement.parentNode);\n    }\n    if (field) {\n      //set empty value function\n      column.modules.filter.emptyFunc = column.definition.headerFilterEmptyCheck || function (value) {\n        return !value && value !== 0;\n      };\n      filterElement = document.createElement(\"div\");\n      filterElement.classList.add(\"tabulator-header-filter\");\n\n      //set column editor\n      switch (typeof column.definition.headerFilter) {\n        case \"string\":\n          if (self.table.modules.edit.editors[column.definition.headerFilter]) {\n            editor = self.table.modules.edit.editors[column.definition.headerFilter];\n            if ((column.definition.headerFilter === \"tick\" || column.definition.headerFilter === \"tickCross\") && !column.definition.headerFilterEmptyCheck) {\n              column.modules.filter.emptyFunc = function (value) {\n                return value !== true && value !== false;\n              };\n            }\n          } else {\n            console.warn(\"Filter Error - Cannot build header filter, No such editor found: \", column.definition.editor);\n          }\n          break;\n        case \"function\":\n          editor = column.definition.headerFilter;\n          break;\n        case \"boolean\":\n          if (column.modules.edit && column.modules.edit.editor) {\n            editor = column.modules.edit.editor;\n          } else {\n            if (column.definition.formatter && self.table.modules.edit.editors[column.definition.formatter]) {\n              editor = self.table.modules.edit.editors[column.definition.formatter];\n              if ((column.definition.formatter === \"tick\" || column.definition.formatter === \"tickCross\") && !column.definition.headerFilterEmptyCheck) {\n                column.modules.filter.emptyFunc = function (value) {\n                  return value !== true && value !== false;\n                };\n              }\n            } else {\n              editor = self.table.modules.edit.editors[\"input\"];\n            }\n          }\n          break;\n      }\n      if (editor) {\n        cellWrapper = {\n          getValue: function () {\n            return typeof initialValue !== \"undefined\" ? initialValue : \"\";\n          },\n          getField: function () {\n            return column.definition.field;\n          },\n          getElement: function () {\n            return filterElement;\n          },\n          getColumn: function () {\n            return column.getComponent();\n          },\n          getTable: () => {\n            return this.table;\n          },\n          getType: () => {\n            return \"header\";\n          },\n          getRow: function () {\n            return {\n              normalizeHeight: function () {}\n            };\n          }\n        };\n        params = column.definition.headerFilterParams || {};\n        params = typeof params === \"function\" ? params.call(self.table, cellWrapper) : params;\n        editorElement = editor.call(this.table.modules.edit, cellWrapper, onRendered, success, cancel, params);\n        if (!editorElement) {\n          console.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor returned a value of false\");\n          return;\n        }\n        if (!(editorElement instanceof Node)) {\n          console.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor should return an instance of Node, the editor returned:\", editorElement);\n          return;\n        }\n\n        //set Placeholder Text\n        self.langBind(\"headerFilters|columns|\" + column.definition.field, function (value) {\n          editorElement.setAttribute(\"placeholder\", typeof value !== \"undefined\" && value ? value : column.definition.headerFilterPlaceholder || self.langText(\"headerFilters|default\"));\n        });\n\n        //focus on element on click\n        editorElement.addEventListener(\"click\", function (e) {\n          e.stopPropagation();\n          editorElement.focus();\n        });\n        editorElement.addEventListener(\"focus\", e => {\n          var left = this.table.columnManager.contentsElement.scrollLeft;\n          var headerPos = this.table.rowManager.element.scrollLeft;\n          if (left !== headerPos) {\n            this.table.rowManager.scrollHorizontal(left);\n            this.table.columnManager.scrollHorizontal(left);\n          }\n        });\n\n        //live update filters as user types\n        typingTimer = false;\n        searchTrigger = function (e) {\n          if (typingTimer) {\n            clearTimeout(typingTimer);\n          }\n          typingTimer = setTimeout(function () {\n            success(editorElement.value);\n          }, self.table.options.headerFilterLiveFilterDelay);\n        };\n        column.modules.filter.headerElement = editorElement;\n        column.modules.filter.attrType = editorElement.hasAttribute(\"type\") ? editorElement.getAttribute(\"type\").toLowerCase() : \"\";\n        column.modules.filter.tagType = editorElement.tagName.toLowerCase();\n        if (column.definition.headerFilterLiveFilter !== false) {\n          if (!(column.definition.headerFilter === 'autocomplete' || column.definition.headerFilter === 'tickCross' || (column.definition.editor === 'autocomplete' || column.definition.editor === 'tickCross') && column.definition.headerFilter === true)) {\n            editorElement.addEventListener(\"keyup\", searchTrigger);\n            editorElement.addEventListener(\"search\", searchTrigger);\n\n            //update number filtered columns on change\n            if (column.modules.filter.attrType == \"number\") {\n              editorElement.addEventListener(\"change\", function (e) {\n                success(editorElement.value);\n              });\n            }\n\n            //change text inputs to search inputs to allow for clearing of field\n            if (column.modules.filter.attrType == \"text\" && this.table.browser !== \"ie\") {\n              editorElement.setAttribute(\"type\", \"search\");\n              // editorElement.off(\"change blur\"); //prevent blur from triggering filter and preventing selection click\n            }\n          }\n\n          //prevent input and select elements from propagating click to column sorters etc\n          if (column.modules.filter.tagType == \"input\" || column.modules.filter.tagType == \"select\" || column.modules.filter.tagType == \"textarea\") {\n            editorElement.addEventListener(\"mousedown\", function (e) {\n              e.stopPropagation();\n            });\n          }\n        }\n        filterElement.appendChild(editorElement);\n        column.contentElement.appendChild(filterElement);\n        if (!reinitialize) {\n          self.headerFilterColumns.push(column);\n        }\n        if (onRenderedCallback) {\n          onRenderedCallback();\n        }\n      }\n    } else {\n      console.warn(\"Filter Error - Cannot add header filter, column has no field set:\", column.definition.title);\n    }\n  }\n\n  //hide all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n  hideHeaderFilterElements() {\n    this.headerFilterColumns.forEach(function (column) {\n      if (column.modules.filter && column.modules.filter.headerElement) {\n        column.modules.filter.headerElement.style.display = 'none';\n      }\n    });\n  }\n\n  //show all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n  showHeaderFilterElements() {\n    this.headerFilterColumns.forEach(function (column) {\n      if (column.modules.filter && column.modules.filter.headerElement) {\n        column.modules.filter.headerElement.style.display = '';\n      }\n    });\n  }\n\n  //programmatically set focus of header filter\n  setHeaderFilterFocus(column) {\n    if (column.modules.filter && column.modules.filter.headerElement) {\n      column.modules.filter.headerElement.focus();\n    } else {\n      console.warn(\"Column Filter Focus Error - No header filter set on column:\", column.getField());\n    }\n  }\n\n  //programmatically get value of header filter\n  getHeaderFilterValue(column) {\n    if (column.modules.filter && column.modules.filter.headerElement) {\n      return column.modules.filter.value;\n    } else {\n      console.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n    }\n  }\n\n  //programmatically set value of header filter\n  setHeaderFilterValue(column, value) {\n    if (column) {\n      if (column.modules.filter && column.modules.filter.headerElement) {\n        this.generateHeaderFilterElement(column, value, true);\n        column.modules.filter.success(value);\n      } else {\n        console.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n      }\n    }\n  }\n  reloadHeaderFilter(column) {\n    if (column) {\n      if (column.modules.filter && column.modules.filter.headerElement) {\n        this.generateHeaderFilterElement(column, column.modules.filter.value, true);\n      } else {\n        console.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n      }\n    }\n  }\n  refreshFilter() {\n    if (this.tableInitialized) {\n      if (this.table.options.filterMode === \"remote\") {\n        this.reloadData(null, false, false);\n      } else {\n        this.refreshData(true);\n      }\n    }\n\n    //TODO - Persist left position of row manager\n    // left = this.scrollLeft;\n    // this.scrollHorizontal(left);\n  }\n\n  //check if the filters has changed since last use\n  trackChanges() {\n    this.changed = true;\n    this.dispatch(\"filter-changed\");\n  }\n\n  //check if the filters has changed since last use\n  hasChanged() {\n    var changed = this.changed;\n    this.changed = false;\n    return changed;\n  }\n\n  //set standard filters\n  setFilter(field, type, value, params) {\n    this.filterList = [];\n    if (!Array.isArray(field)) {\n      field = [{\n        field: field,\n        type: type,\n        value: value,\n        params: params\n      }];\n    }\n    this.addFilter(field);\n  }\n\n  //add filter to array\n  addFilter(field, type, value, params) {\n    var changed = false;\n    if (!Array.isArray(field)) {\n      field = [{\n        field: field,\n        type: type,\n        value: value,\n        params: params\n      }];\n    }\n    field.forEach(filter => {\n      filter = this.findFilter(filter);\n      if (filter) {\n        this.filterList.push(filter);\n        changed = true;\n      }\n    });\n    if (changed) {\n      this.trackChanges();\n    }\n  }\n  findFilter(filter) {\n    var column;\n    if (Array.isArray(filter)) {\n      return this.findSubFilters(filter);\n    }\n    var filterFunc = false;\n    if (typeof filter.field == \"function\") {\n      filterFunc = function (data) {\n        return filter.field(data, filter.type || {}); // pass params to custom filter function\n      };\n    } else {\n      if (Filter.filters[filter.type]) {\n        column = this.table.columnManager.getColumnByField(filter.field);\n        if (column) {\n          filterFunc = function (data) {\n            return Filter.filters[filter.type](filter.value, column.getFieldValue(data), data, filter.params || {});\n          };\n        } else {\n          filterFunc = function (data) {\n            return Filter.filters[filter.type](filter.value, data[filter.field], data, filter.params || {});\n          };\n        }\n      } else {\n        console.warn(\"Filter Error - No such filter type found, ignoring: \", filter.type);\n      }\n    }\n    filter.func = filterFunc;\n    return filter.func ? filter : false;\n  }\n  findSubFilters(filters) {\n    var output = [];\n    filters.forEach(filter => {\n      filter = this.findFilter(filter);\n      if (filter) {\n        output.push(filter);\n      }\n    });\n    return output.length ? output : false;\n  }\n\n  //get all filters\n  getFilters(all, ajax) {\n    var output = [];\n    if (all) {\n      output = this.getHeaderFilters();\n    }\n    if (ajax) {\n      output.forEach(function (item) {\n        if (typeof item.type == \"function\") {\n          item.type = \"function\";\n        }\n      });\n    }\n    output = output.concat(this.filtersToArray(this.filterList, ajax));\n    return output;\n  }\n\n  //filter to Object\n  filtersToArray(filterList, ajax) {\n    var output = [];\n    filterList.forEach(filter => {\n      var item;\n      if (Array.isArray(filter)) {\n        output.push(this.filtersToArray(filter, ajax));\n      } else {\n        item = {\n          field: filter.field,\n          type: filter.type,\n          value: filter.value\n        };\n        if (ajax) {\n          if (typeof item.type == \"function\") {\n            item.type = \"function\";\n          }\n        }\n        output.push(item);\n      }\n    });\n    return output;\n  }\n\n  //get all filters\n  getHeaderFilters() {\n    var output = [];\n    for (var key in this.headerFilters) {\n      output.push({\n        field: key,\n        type: this.headerFilters[key].type,\n        value: this.headerFilters[key].value\n      });\n    }\n    return output;\n  }\n\n  //remove filter from array\n  removeFilter(field, type, value) {\n    if (!Array.isArray(field)) {\n      field = [{\n        field: field,\n        type: type,\n        value: value\n      }];\n    }\n    field.forEach(filter => {\n      var index = -1;\n      if (typeof filter.field == \"object\") {\n        index = this.filterList.findIndex(element => {\n          return filter === element;\n        });\n      } else {\n        index = this.filterList.findIndex(element => {\n          return filter.field === element.field && filter.type === element.type && filter.value === element.value;\n        });\n      }\n      if (index > -1) {\n        this.filterList.splice(index, 1);\n      } else {\n        console.warn(\"Filter Error - No matching filter type found, ignoring: \", filter.type);\n      }\n    });\n    this.trackChanges();\n  }\n\n  //clear filters\n  clearFilter(all) {\n    this.filterList = [];\n    if (all) {\n      this.clearHeaderFilter();\n    }\n    this.trackChanges();\n  }\n\n  //clear header filters\n  clearHeaderFilter() {\n    this.headerFilters = {};\n    this.prevHeaderFilterChangeCheck = \"{}\";\n    this.headerFilterColumns.forEach(column => {\n      if (typeof column.modules.filter.value !== \"undefined\") {\n        delete column.modules.filter.value;\n      }\n      column.modules.filter.prevSuccess = undefined;\n      this.reloadHeaderFilter(column);\n    });\n    this.trackChanges();\n  }\n\n  //search data and return matching rows\n  search(searchType, field, type, value) {\n    var activeRows = [],\n      filterList = [];\n    if (!Array.isArray(field)) {\n      field = [{\n        field: field,\n        type: type,\n        value: value\n      }];\n    }\n    field.forEach(filter => {\n      filter = this.findFilter(filter);\n      if (filter) {\n        filterList.push(filter);\n      }\n    });\n    this.table.rowManager.rows.forEach(row => {\n      var match = true;\n      filterList.forEach(filter => {\n        if (!this.filterRecurse(filter, row.getData())) {\n          match = false;\n        }\n      });\n      if (match) {\n        activeRows.push(searchType === \"data\" ? row.getData(\"data\") : row.getComponent());\n      }\n    });\n    return activeRows;\n  }\n\n  //filter row array\n  filter(rowList, filters) {\n    var activeRows = [],\n      activeRowComponents = [];\n    if (this.subscribedExternal(\"dataFiltering\")) {\n      this.dispatchExternal(\"dataFiltering\", this.getFilters(true));\n    }\n    if (this.table.options.filterMode !== \"remote\" && (this.filterList.length || Object.keys(this.headerFilters).length)) {\n      rowList.forEach(row => {\n        if (this.filterRow(row)) {\n          activeRows.push(row);\n        }\n      });\n    } else {\n      activeRows = rowList.slice(0);\n    }\n    if (this.subscribedExternal(\"dataFiltered\")) {\n      activeRows.forEach(row => {\n        activeRowComponents.push(row.getComponent());\n      });\n      this.dispatchExternal(\"dataFiltered\", this.getFilters(true), activeRowComponents);\n    }\n    return activeRows;\n  }\n\n  //filter individual row\n  filterRow(row, filters) {\n    var match = true,\n      data = row.getData();\n    this.filterList.forEach(filter => {\n      if (!this.filterRecurse(filter, data)) {\n        match = false;\n      }\n    });\n    for (var field in this.headerFilters) {\n      if (!this.headerFilters[field].func(data)) {\n        match = false;\n      }\n    }\n    return match;\n  }\n  filterRecurse(filter, data) {\n    var match = false;\n    if (Array.isArray(filter)) {\n      filter.forEach(subFilter => {\n        if (this.filterRecurse(subFilter, data)) {\n          match = true;\n        }\n      });\n    } else {\n      match = filter.func(data);\n    }\n    return match;\n  }\n}\nfunction plaintext(cell, formatterParams, onRendered) {\n  return this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n}\nfunction html(cell, formatterParams, onRendered) {\n  return cell.getValue();\n}\nfunction textarea(cell, formatterParams, onRendered) {\n  cell.getElement().style.whiteSpace = \"pre-wrap\";\n  return this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n}\nfunction money(cell, formatterParams, onRendered) {\n  var floatVal = parseFloat(cell.getValue()),\n    sign = \"\",\n    number,\n    integer,\n    decimal,\n    rgx,\n    value;\n  var decimalSym = formatterParams.decimal || \".\";\n  var thousandSym = formatterParams.thousand || \",\";\n  var negativeSign = formatterParams.negativeSign || \"-\";\n  var symbol = formatterParams.symbol || \"\";\n  var after = !!formatterParams.symbolAfter;\n  var precision = typeof formatterParams.precision !== \"undefined\" ? formatterParams.precision : 2;\n  if (isNaN(floatVal)) {\n    return this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n  }\n  if (floatVal < 0) {\n    floatVal = Math.abs(floatVal);\n    sign = negativeSign;\n  }\n  number = precision !== false ? floatVal.toFixed(precision) : floatVal;\n  number = String(number).split(\".\");\n  integer = number[0];\n  decimal = number.length > 1 ? decimalSym + number[1] : \"\";\n  if (formatterParams.thousand !== false) {\n    rgx = /(\\d+)(\\d{3})/;\n    while (rgx.test(integer)) {\n      integer = integer.replace(rgx, \"$1\" + thousandSym + \"$2\");\n    }\n  }\n  value = integer + decimal;\n  if (sign === true) {\n    value = \"(\" + value + \")\";\n    return after ? value + symbol : symbol + value;\n  } else {\n    return after ? sign + value + symbol : sign + symbol + value;\n  }\n}\nfunction link(cell, formatterParams, onRendered) {\n  var value = cell.getValue(),\n    urlPrefix = formatterParams.urlPrefix || \"\",\n    download = formatterParams.download,\n    label = value,\n    el = document.createElement(\"a\"),\n    data;\n  function labelTraverse(path, data) {\n    var item = path.shift(),\n      value = data[item];\n    if (path.length && typeof value === \"object\") {\n      return labelTraverse(path, value);\n    }\n    return value;\n  }\n  if (formatterParams.labelField) {\n    data = cell.getData();\n    label = labelTraverse(formatterParams.labelField.split(this.table.options.nestedFieldSeparator), data);\n  }\n  if (formatterParams.label) {\n    switch (typeof formatterParams.label) {\n      case \"string\":\n        label = formatterParams.label;\n        break;\n      case \"function\":\n        label = formatterParams.label(cell);\n        break;\n    }\n  }\n  if (label) {\n    if (formatterParams.urlField) {\n      data = cell.getData();\n      value = Helpers.retrieveNestedData(this.table.options.nestedFieldSeparator, formatterParams.urlField, data);\n    }\n    if (formatterParams.url) {\n      switch (typeof formatterParams.url) {\n        case \"string\":\n          value = formatterParams.url;\n          break;\n        case \"function\":\n          value = formatterParams.url(cell);\n          break;\n      }\n    }\n    el.setAttribute(\"href\", urlPrefix + value);\n    if (formatterParams.target) {\n      el.setAttribute(\"target\", formatterParams.target);\n    }\n    if (formatterParams.download) {\n      if (typeof download == \"function\") {\n        download = download(cell);\n      } else {\n        download = download === true ? \"\" : download;\n      }\n      el.setAttribute(\"download\", download);\n    }\n    el.innerHTML = this.emptyToSpace(this.sanitizeHTML(label));\n    return el;\n  } else {\n    return \"&nbsp;\";\n  }\n}\nfunction image(cell, formatterParams, onRendered) {\n  var el = document.createElement(\"img\"),\n    src = cell.getValue();\n  if (formatterParams.urlPrefix) {\n    src = formatterParams.urlPrefix + cell.getValue();\n  }\n  if (formatterParams.urlSuffix) {\n    src = src + formatterParams.urlSuffix;\n  }\n  el.setAttribute(\"src\", src);\n  switch (typeof formatterParams.height) {\n    case \"number\":\n      el.style.height = formatterParams.height + \"px\";\n      break;\n    case \"string\":\n      el.style.height = formatterParams.height;\n      break;\n  }\n  switch (typeof formatterParams.width) {\n    case \"number\":\n      el.style.width = formatterParams.width + \"px\";\n      break;\n    case \"string\":\n      el.style.width = formatterParams.width;\n      break;\n  }\n  el.addEventListener(\"load\", function () {\n    cell.getRow().normalizeHeight();\n  });\n  return el;\n}\nfunction tickCross(cell, formatterParams, onRendered) {\n  var value = cell.getValue(),\n    element = cell.getElement(),\n    empty = formatterParams.allowEmpty,\n    truthy = formatterParams.allowTruthy,\n    trueValueSet = Object.keys(formatterParams).includes(\"trueValue\"),\n    tick = typeof formatterParams.tickElement !== \"undefined\" ? formatterParams.tickElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>',\n    cross = typeof formatterParams.crossElement !== \"undefined\" ? formatterParams.crossElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\"  viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n  if (trueValueSet && value === formatterParams.trueValue || !trueValueSet && (truthy && value || value === true || value === \"true\" || value === \"True\" || value === 1 || value === \"1\")) {\n    element.setAttribute(\"aria-checked\", true);\n    return tick || \"\";\n  } else {\n    if (empty && (value === \"null\" || value === \"\" || value === null || typeof value === \"undefined\")) {\n      element.setAttribute(\"aria-checked\", \"mixed\");\n      return \"\";\n    } else {\n      element.setAttribute(\"aria-checked\", false);\n      return cross || \"\";\n    }\n  }\n}\nfunction datetime$1(cell, formatterParams, onRendered) {\n  var DT = window.DateTime || luxon.DateTime;\n  var inputFormat = formatterParams.inputFormat || \"yyyy-MM-dd HH:mm:ss\";\n  var outputFormat = formatterParams.outputFormat || \"dd/MM/yyyy HH:mm:ss\";\n  var invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n  var value = cell.getValue();\n  if (typeof DT != \"undefined\") {\n    var newDatetime;\n    if (DT.isDateTime(value)) {\n      newDatetime = value;\n    } else if (inputFormat === \"iso\") {\n      newDatetime = DT.fromISO(String(value));\n    } else {\n      newDatetime = DT.fromFormat(String(value), inputFormat);\n    }\n    if (newDatetime.isValid) {\n      if (formatterParams.timezone) {\n        newDatetime = newDatetime.setZone(formatterParams.timezone);\n      }\n      return newDatetime.toFormat(outputFormat);\n    } else {\n      if (invalid === true || !value) {\n        return value;\n      } else if (typeof invalid === \"function\") {\n        return invalid(value);\n      } else {\n        return invalid;\n      }\n    }\n  } else {\n    console.error(\"Format Error - 'datetime' formatter is dependant on luxon.js\");\n  }\n}\nfunction datetimediff(cell, formatterParams, onRendered) {\n  var DT = window.DateTime || luxon.DateTime;\n  var inputFormat = formatterParams.inputFormat || \"yyyy-MM-dd HH:mm:ss\";\n  var invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n  var suffix = typeof formatterParams.suffix !== \"undefined\" ? formatterParams.suffix : false;\n  var unit = typeof formatterParams.unit !== \"undefined\" ? formatterParams.unit : \"days\";\n  var humanize = typeof formatterParams.humanize !== \"undefined\" ? formatterParams.humanize : false;\n  var date = typeof formatterParams.date !== \"undefined\" ? formatterParams.date : DT.now();\n  var value = cell.getValue();\n  if (typeof DT != \"undefined\") {\n    var newDatetime;\n    if (DT.isDateTime(value)) {\n      newDatetime = value;\n    } else if (inputFormat === \"iso\") {\n      newDatetime = DT.fromISO(String(value));\n    } else {\n      newDatetime = DT.fromFormat(String(value), inputFormat);\n    }\n    if (newDatetime.isValid) {\n      if (humanize) {\n        return newDatetime.diff(date, unit).toHuman() + (suffix ? \" \" + suffix : \"\");\n      } else {\n        return parseInt(newDatetime.diff(date, unit)[unit]) + (suffix ? \" \" + suffix : \"\");\n      }\n    } else {\n      if (invalid === true) {\n        return value;\n      } else if (typeof invalid === \"function\") {\n        return invalid(value);\n      } else {\n        return invalid;\n      }\n    }\n  } else {\n    console.error(\"Format Error - 'datetimediff' formatter is dependant on luxon.js\");\n  }\n}\nfunction lookup(cell, formatterParams, onRendered) {\n  var value = cell.getValue();\n  if (typeof formatterParams[value] === \"undefined\") {\n    console.warn('Missing display value for ' + value);\n    return value;\n  }\n  return formatterParams[value];\n}\nfunction star(cell, formatterParams, onRendered) {\n  var value = cell.getValue(),\n    element = cell.getElement(),\n    maxStars = formatterParams && formatterParams.stars ? formatterParams.stars : 5,\n    stars = document.createElement(\"span\"),\n    star = document.createElementNS('http://www.w3.org/2000/svg', \"svg\"),\n    starActive = '<polygon fill=\"#FFEA00\" stroke=\"#C1AB60\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>',\n    starInactive = '<polygon fill=\"#D2D2D2\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\n  //style stars holder\n  stars.style.verticalAlign = \"middle\";\n\n  //style star\n  star.setAttribute(\"width\", \"14\");\n  star.setAttribute(\"height\", \"14\");\n  star.setAttribute(\"viewBox\", \"0 0 512 512\");\n  star.setAttribute(\"xml:space\", \"preserve\");\n  star.style.padding = \"0 1px\";\n  value = value && !isNaN(value) ? parseInt(value) : 0;\n  value = Math.max(0, Math.min(value, maxStars));\n  for (var i = 1; i <= maxStars; i++) {\n    var nextStar = star.cloneNode(true);\n    nextStar.innerHTML = i <= value ? starActive : starInactive;\n    stars.appendChild(nextStar);\n  }\n  element.style.whiteSpace = \"nowrap\";\n  element.style.overflow = \"hidden\";\n  element.style.textOverflow = \"ellipsis\";\n  element.setAttribute(\"aria-label\", value);\n  return stars;\n}\nfunction traffic(cell, formatterParams, onRendered) {\n  var value = this.sanitizeHTML(cell.getValue()) || 0,\n    el = document.createElement(\"span\"),\n    max = formatterParams && formatterParams.max ? formatterParams.max : 100,\n    min = formatterParams && formatterParams.min ? formatterParams.min : 0,\n    colors = formatterParams && typeof formatterParams.color !== \"undefined\" ? formatterParams.color : [\"red\", \"orange\", \"green\"],\n    color = \"#666666\",\n    percent,\n    percentValue;\n  if (isNaN(value) || typeof cell.getValue() === \"undefined\") {\n    return;\n  }\n  el.classList.add(\"tabulator-traffic-light\");\n\n  //make sure value is in range\n  percentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n  percentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\n\n  //workout percentage\n  percent = (max - min) / 100;\n  percentValue = Math.round((percentValue - min) / percent);\n\n  //set color\n  switch (typeof colors) {\n    case \"string\":\n      color = colors;\n      break;\n    case \"function\":\n      color = colors(value);\n      break;\n    case \"object\":\n      if (Array.isArray(colors)) {\n        var unit = 100 / colors.length;\n        var index = Math.floor(percentValue / unit);\n        index = Math.min(index, colors.length - 1);\n        index = Math.max(index, 0);\n        color = colors[index];\n        break;\n      }\n  }\n  el.style.backgroundColor = color;\n  return el;\n}\nfunction progress(cell, formatterParams = {}, onRendered) {\n  //progress bar\n  var value = this.sanitizeHTML(cell.getValue()) || 0,\n    element = cell.getElement(),\n    max = formatterParams.max ? formatterParams.max : 100,\n    min = formatterParams.min ? formatterParams.min : 0,\n    legendAlign = formatterParams.legendAlign ? formatterParams.legendAlign : \"center\",\n    percent,\n    percentValue,\n    color,\n    legend,\n    legendColor;\n\n  //make sure value is in range\n  percentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n  percentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\n\n  //workout percentage\n  percent = (max - min) / 100;\n  percentValue = Math.round((percentValue - min) / percent);\n\n  //set bar color\n  switch (typeof formatterParams.color) {\n    case \"string\":\n      color = formatterParams.color;\n      break;\n    case \"function\":\n      color = formatterParams.color(value);\n      break;\n    case \"object\":\n      if (Array.isArray(formatterParams.color)) {\n        let unit = 100 / formatterParams.color.length;\n        let index = Math.floor(percentValue / unit);\n        index = Math.min(index, formatterParams.color.length - 1);\n        index = Math.max(index, 0);\n        color = formatterParams.color[index];\n        break;\n      }\n    default:\n      color = \"#2DC214\";\n  }\n\n  //generate legend\n  switch (typeof formatterParams.legend) {\n    case \"string\":\n      legend = formatterParams.legend;\n      break;\n    case \"function\":\n      legend = formatterParams.legend(value);\n      break;\n    case \"boolean\":\n      legend = value;\n      break;\n    default:\n      legend = false;\n  }\n\n  //set legend color\n  switch (typeof formatterParams.legendColor) {\n    case \"string\":\n      legendColor = formatterParams.legendColor;\n      break;\n    case \"function\":\n      legendColor = formatterParams.legendColor(value);\n      break;\n    case \"object\":\n      if (Array.isArray(formatterParams.legendColor)) {\n        let unit = 100 / formatterParams.legendColor.length;\n        let index = Math.floor(percentValue / unit);\n        index = Math.min(index, formatterParams.legendColor.length - 1);\n        index = Math.max(index, 0);\n        legendColor = formatterParams.legendColor[index];\n      }\n      break;\n    default:\n      legendColor = \"#000\";\n  }\n  element.style.minWidth = \"30px\";\n  element.style.position = \"relative\";\n  element.setAttribute(\"aria-label\", percentValue);\n  var barEl = document.createElement(\"div\");\n  barEl.style.display = \"inline-block\";\n  barEl.style.width = percentValue + \"%\";\n  barEl.style.backgroundColor = color;\n  barEl.style.height = \"100%\";\n  barEl.setAttribute('data-max', max);\n  barEl.setAttribute('data-min', min);\n  var barContainer = document.createElement(\"div\");\n  barContainer.style.position = \"relative\";\n  barContainer.style.width = \"100%\";\n  barContainer.style.height = \"100%\";\n  if (legend) {\n    var legendEl = document.createElement(\"div\");\n    legendEl.style.position = \"absolute\";\n    legendEl.style.top = 0;\n    legendEl.style.left = 0;\n    legendEl.style.textAlign = legendAlign;\n    legendEl.style.width = \"100%\";\n    legendEl.style.color = legendColor;\n    legendEl.innerHTML = legend;\n  }\n  onRendered(function () {\n    //handle custom element needed if formatter is to be included in printed/downloaded output\n    if (!(cell instanceof CellComponent)) {\n      var holderEl = document.createElement(\"div\");\n      holderEl.style.position = \"absolute\";\n      holderEl.style.top = \"4px\";\n      holderEl.style.bottom = \"4px\";\n      holderEl.style.left = \"4px\";\n      holderEl.style.right = \"4px\";\n      element.appendChild(holderEl);\n      element = holderEl;\n    }\n    element.appendChild(barContainer);\n    barContainer.appendChild(barEl);\n    if (legend) {\n      barContainer.appendChild(legendEl);\n    }\n  });\n  return \"\";\n}\nfunction color(cell, formatterParams, onRendered) {\n  cell.getElement().style.backgroundColor = this.sanitizeHTML(cell.getValue());\n  return \"\";\n}\nfunction buttonTick(cell, formatterParams, onRendered) {\n  return '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>';\n}\nfunction buttonCross(cell, formatterParams, onRendered) {\n  return '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n}\nfunction toggle(cell, formatterParams, onRendered) {\n  var value = cell.getValue(),\n    size = formatterParams.size || 15,\n    sizePx = size + \"px\",\n    containEl,\n    switchEl,\n    onValue = formatterParams.hasOwnProperty(\"onValue\") ? formatterParams.onValue : true,\n    offValue = formatterParams.hasOwnProperty(\"offValue\") ? formatterParams.offValue : false,\n    state = formatterParams.onTruthy ? value : value === onValue;\n  containEl = document.createElement(\"div\");\n  containEl.classList.add(\"tabulator-toggle\");\n  if (state) {\n    containEl.classList.add(\"tabulator-toggle-on\");\n    containEl.style.flexDirection = \"row-reverse\";\n    if (formatterParams.onColor) {\n      containEl.style.background = formatterParams.onColor;\n    }\n  } else {\n    if (formatterParams.offColor) {\n      containEl.style.background = formatterParams.offColor;\n    }\n  }\n  containEl.style.width = 2.5 * size + \"px\";\n  containEl.style.borderRadius = sizePx;\n  if (formatterParams.clickable) {\n    containEl.addEventListener(\"click\", e => {\n      cell.setValue(state ? offValue : onValue);\n    });\n  }\n  switchEl = document.createElement(\"div\");\n  switchEl.classList.add(\"tabulator-toggle-switch\");\n  switchEl.style.height = sizePx;\n  switchEl.style.width = sizePx;\n  switchEl.style.borderRadius = sizePx;\n  containEl.appendChild(switchEl);\n  return containEl;\n}\nfunction rownum(cell, formatterParams, onRendered) {\n  var content = document.createElement(\"span\");\n  var row = cell.getRow();\n  var table = cell.getTable();\n  row.watchPosition(position => {\n    if (formatterParams.relativeToPage) {\n      position += table.modules.page.getPageSize() * (table.modules.page.getPage() - 1);\n    }\n    content.innerText = position;\n  });\n  return content;\n}\nfunction handle(cell, formatterParams, onRendered) {\n  cell.getElement().classList.add(\"tabulator-row-handle\");\n  return \"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>\";\n}\nvar defaultFormatters = {\n  plaintext: plaintext,\n  html: html,\n  textarea: textarea,\n  money: money,\n  link: link,\n  image: image,\n  tickCross: tickCross,\n  datetime: datetime$1,\n  datetimediff: datetimediff,\n  lookup: lookup,\n  star: star,\n  traffic: traffic,\n  progress: progress,\n  color: color,\n  buttonTick: buttonTick,\n  buttonCross: buttonCross,\n  toggle: toggle,\n  rownum: rownum,\n  handle: handle\n};\nclass Format extends Module {\n  static moduleName = \"format\";\n\n  //load defaults\n  static formatters = defaultFormatters;\n  constructor(table) {\n    super(table);\n    this.registerColumnOption(\"formatter\");\n    this.registerColumnOption(\"formatterParams\");\n    this.registerColumnOption(\"formatterPrint\");\n    this.registerColumnOption(\"formatterPrintParams\");\n    this.registerColumnOption(\"formatterClipboard\");\n    this.registerColumnOption(\"formatterClipboardParams\");\n    this.registerColumnOption(\"formatterHtmlOutput\");\n    this.registerColumnOption(\"formatterHtmlOutputParams\");\n    this.registerColumnOption(\"titleFormatter\");\n    this.registerColumnOption(\"titleFormatterParams\");\n  }\n  initialize() {\n    this.subscribe(\"cell-format\", this.formatValue.bind(this));\n    this.subscribe(\"cell-rendered\", this.cellRendered.bind(this));\n    this.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n    this.subscribe(\"column-format\", this.formatHeader.bind(this));\n  }\n\n  //initialize column formatter\n  initializeColumn(column) {\n    column.modules.format = this.lookupFormatter(column, \"\");\n    if (typeof column.definition.formatterPrint !== \"undefined\") {\n      column.modules.format.print = this.lookupFormatter(column, \"Print\");\n    }\n    if (typeof column.definition.formatterClipboard !== \"undefined\") {\n      column.modules.format.clipboard = this.lookupFormatter(column, \"Clipboard\");\n    }\n    if (typeof column.definition.formatterHtmlOutput !== \"undefined\") {\n      column.modules.format.htmlOutput = this.lookupFormatter(column, \"HtmlOutput\");\n    }\n  }\n  lookupFormatter(column, type) {\n    var config = {\n        params: column.definition[\"formatter\" + type + \"Params\"] || {}\n      },\n      formatter = column.definition[\"formatter\" + type];\n\n    //set column formatter\n    switch (typeof formatter) {\n      case \"string\":\n        if (Format.formatters[formatter]) {\n          config.formatter = Format.formatters[formatter];\n        } else {\n          console.warn(\"Formatter Error - No such formatter found: \", formatter);\n          config.formatter = Format.formatters.plaintext;\n        }\n        break;\n      case \"function\":\n        config.formatter = formatter;\n        break;\n      default:\n        config.formatter = Format.formatters.plaintext;\n        break;\n    }\n    return config;\n  }\n  cellRendered(cell) {\n    if (cell.modules.format && cell.modules.format.renderedCallback && !cell.modules.format.rendered) {\n      cell.modules.format.renderedCallback();\n      cell.modules.format.rendered = true;\n    }\n  }\n\n  //return a formatted value for a column header\n  formatHeader(column, title, el) {\n    var formatter, params, onRendered, mockCell;\n    if (column.definition.titleFormatter) {\n      formatter = this.getFormatter(column.definition.titleFormatter);\n      onRendered = callback => {\n        column.titleFormatterRendered = callback;\n      };\n      mockCell = {\n        getValue: function () {\n          return title;\n        },\n        getElement: function () {\n          return el;\n        },\n        getType: function () {\n          return \"header\";\n        },\n        getColumn: function () {\n          return column.getComponent();\n        },\n        getTable: () => {\n          return this.table;\n        }\n      };\n      params = column.definition.titleFormatterParams || {};\n      params = typeof params === \"function\" ? params() : params;\n      return formatter.call(this, mockCell, params, onRendered);\n    } else {\n      return title;\n    }\n  }\n\n  //return a formatted value for a cell\n  formatValue(cell) {\n    var component = cell.getComponent(),\n      params = typeof cell.column.modules.format.params === \"function\" ? cell.column.modules.format.params(component) : cell.column.modules.format.params;\n    function onRendered(callback) {\n      if (!cell.modules.format) {\n        cell.modules.format = {};\n      }\n      cell.modules.format.renderedCallback = callback;\n      cell.modules.format.rendered = false;\n    }\n    return cell.column.modules.format.formatter.call(this, component, params, onRendered);\n  }\n  formatExportValue(cell, type) {\n    var formatter = cell.column.modules.format[type],\n      params;\n    if (formatter) {\n      params = typeof formatter.params === \"function\" ? formatter.params(cell.getComponent()) : formatter.params;\n      function onRendered(callback) {\n        if (!cell.modules.format) {\n          cell.modules.format = {};\n        }\n        cell.modules.format.renderedCallback = callback;\n        cell.modules.format.rendered = false;\n      }\n      return formatter.formatter.call(this, cell.getComponent(), params, onRendered);\n    } else {\n      return this.formatValue(cell);\n    }\n  }\n  sanitizeHTML(value) {\n    if (value) {\n      var entityMap = {\n        '&': '&amp;',\n        '<': '&lt;',\n        '>': '&gt;',\n        '\"': '&quot;',\n        \"'\": '&#39;',\n        '/': '&#x2F;',\n        '`': '&#x60;',\n        '=': '&#x3D;'\n      };\n      return String(value).replace(/[&<>\"'`=/]/g, function (s) {\n        return entityMap[s];\n      });\n    } else {\n      return value;\n    }\n  }\n  emptyToSpace(value) {\n    return value === null || typeof value === \"undefined\" || value === \"\" ? \"&nbsp;\" : value;\n  }\n\n  //get formatter for cell\n  getFormatter(formatter) {\n    switch (typeof formatter) {\n      case \"string\":\n        if (Format.formatters[formatter]) {\n          formatter = Format.formatters[formatter];\n        } else {\n          console.warn(\"Formatter Error - No such formatter found: \", formatter);\n          formatter = Format.formatters.plaintext;\n        }\n        break;\n      case \"function\":\n        //Custom formatter Function, do nothing\n        break;\n      default:\n        formatter = Format.formatters.plaintext;\n        break;\n    }\n    return formatter;\n  }\n}\nclass FrozenColumns extends Module {\n  static moduleName = \"frozenColumns\";\n  constructor(table) {\n    super(table);\n    this.leftColumns = [];\n    this.rightColumns = [];\n    this.initializationMode = \"left\";\n    this.active = false;\n    this.blocked = true;\n    this.registerColumnOption(\"frozen\");\n  }\n\n  //reset initial state\n  reset() {\n    this.initializationMode = \"left\";\n    this.leftColumns = [];\n    this.rightColumns = [];\n    this.active = false;\n  }\n  initialize() {\n    this.subscribe(\"cell-layout\", this.layoutCell.bind(this));\n    this.subscribe(\"column-init\", this.initializeColumn.bind(this));\n    this.subscribe(\"column-width\", this.layout.bind(this));\n    this.subscribe(\"row-layout-after\", this.layoutRow.bind(this));\n    this.subscribe(\"table-layout\", this.layout.bind(this));\n    this.subscribe(\"columns-loading\", this.reset.bind(this));\n    this.subscribe(\"column-add\", this.reinitializeColumns.bind(this));\n    this.subscribe(\"column-deleted\", this.reinitializeColumns.bind(this));\n    this.subscribe(\"column-hide\", this.reinitializeColumns.bind(this));\n    this.subscribe(\"column-show\", this.reinitializeColumns.bind(this));\n    this.subscribe(\"columns-loaded\", this.reinitializeColumns.bind(this));\n    this.subscribe(\"table-redraw\", this.layout.bind(this));\n    this.subscribe(\"layout-refreshing\", this.blockLayout.bind(this));\n    this.subscribe(\"layout-refreshed\", this.unblockLayout.bind(this));\n    this.subscribe(\"scrollbar-vertical\", this.adjustForScrollbar.bind(this));\n  }\n  blockLayout() {\n    this.blocked = true;\n  }\n  unblockLayout() {\n    this.blocked = false;\n  }\n  layoutCell(cell) {\n    this.layoutElement(cell.element, cell.column);\n  }\n  reinitializeColumns() {\n    this.reset();\n    this.table.columnManager.columnsByIndex.forEach(column => {\n      this.initializeColumn(column);\n    });\n    this.layout();\n  }\n\n  //initialize specific column\n  initializeColumn(column) {\n    var config = {\n      margin: 0,\n      edge: false\n    };\n    if (!column.isGroup) {\n      if (this.frozenCheck(column)) {\n        config.position = this.initializationMode;\n        if (this.initializationMode == \"left\") {\n          this.leftColumns.push(column);\n        } else {\n          this.rightColumns.unshift(column);\n        }\n        this.active = true;\n        column.modules.frozen = config;\n      } else {\n        this.initializationMode = \"right\";\n      }\n    }\n  }\n  frozenCheck(column) {\n    if (column.parent.isGroup && column.definition.frozen) {\n      console.warn(\"Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups\");\n    }\n    if (column.parent.isGroup) {\n      return this.frozenCheck(column.parent);\n    } else {\n      return column.definition.frozen;\n    }\n  }\n\n  //layout calculation rows\n  layoutCalcRows() {\n    if (this.table.modExists(\"columnCalcs\")) {\n      if (this.table.modules.columnCalcs.topInitialized && this.table.modules.columnCalcs.topRow) {\n        this.layoutRow(this.table.modules.columnCalcs.topRow);\n      }\n      if (this.table.modules.columnCalcs.botInitialized && this.table.modules.columnCalcs.botRow) {\n        this.layoutRow(this.table.modules.columnCalcs.botRow);\n      }\n      if (this.table.modExists(\"groupRows\")) {\n        this.layoutGroupCalcs(this.table.modules.groupRows.getGroups());\n      }\n    }\n  }\n  layoutGroupCalcs(groups) {\n    groups.forEach(group => {\n      if (group.calcs.top) {\n        this.layoutRow(group.calcs.top);\n      }\n      if (group.calcs.bottom) {\n        this.layoutRow(group.calcs.bottom);\n      }\n      if (group.groupList && group.groupList.length) {\n        this.layoutGroupCalcs(group.groupList);\n      }\n    });\n  }\n\n  //calculate column positions and layout headers\n  layoutColumnPosition(allCells) {\n    var leftParents = [];\n    var leftMargin = 0;\n    var rightMargin = 0;\n    this.leftColumns.forEach((column, i) => {\n      column.modules.frozen.marginValue = leftMargin;\n      column.modules.frozen.margin = column.modules.frozen.marginValue + \"px\";\n      if (column.visible) {\n        leftMargin += column.getWidth();\n      }\n      if (i == this.leftColumns.length - 1) {\n        column.modules.frozen.edge = true;\n      } else {\n        column.modules.frozen.edge = false;\n      }\n      if (column.parent.isGroup) {\n        var parentEl = this.getColGroupParentElement(column);\n        if (!leftParents.includes(parentEl)) {\n          this.layoutElement(parentEl, column);\n          leftParents.push(parentEl);\n        }\n        parentEl.classList.toggle(\"tabulator-frozen-left\", column.modules.frozen.edge && column.modules.frozen.position === \"left\");\n        parentEl.classList.toggle(\"tabulator-frozen-right\", column.modules.frozen.edge && column.modules.frozen.position === \"right\");\n      } else {\n        this.layoutElement(column.getElement(), column);\n      }\n      if (allCells) {\n        column.cells.forEach(cell => {\n          this.layoutElement(cell.getElement(true), column);\n        });\n      }\n    });\n    this.rightColumns.forEach((column, i) => {\n      column.modules.frozen.marginValue = rightMargin;\n      column.modules.frozen.margin = column.modules.frozen.marginValue + \"px\";\n      if (column.visible) {\n        rightMargin += column.getWidth();\n      }\n      if (i == this.rightColumns.length - 1) {\n        column.modules.frozen.edge = true;\n      } else {\n        column.modules.frozen.edge = false;\n      }\n      if (column.parent.isGroup) {\n        this.layoutElement(this.getColGroupParentElement(column), column);\n      } else {\n        this.layoutElement(column.getElement(), column);\n      }\n      if (allCells) {\n        column.cells.forEach(cell => {\n          this.layoutElement(cell.getElement(true), column);\n        });\n      }\n    });\n  }\n  getColGroupParentElement(column) {\n    return column.parent.isGroup ? this.getColGroupParentElement(column.parent) : column.getElement();\n  }\n\n  //layout columns appropriately\n  layout() {\n    if (this.active && !this.blocked) {\n      //calculate left columns\n      this.layoutColumnPosition();\n      this.reinitializeRows();\n      this.layoutCalcRows();\n    }\n  }\n  reinitializeRows() {\n    var visibleRows = this.table.rowManager.getVisibleRows(true);\n    var otherRows = this.table.rowManager.getRows().filter(row => !visibleRows.includes(row));\n    otherRows.forEach(row => {\n      row.deinitialize();\n    });\n    visibleRows.forEach(row => {\n      if (row.type === \"row\") {\n        this.layoutRow(row);\n      }\n    });\n  }\n  layoutRow(row) {\n    if (this.table.options.layout === \"fitDataFill\" && this.rightColumns.length) {\n      this.table.rowManager.getTableElement().style.minWidth = \"calc(100% - \" + this.rightMargin + \")\";\n    }\n    this.leftColumns.forEach(column => {\n      var cell = row.getCell(column);\n      if (cell) {\n        this.layoutElement(cell.getElement(true), column);\n      }\n    });\n    this.rightColumns.forEach(column => {\n      var cell = row.getCell(column);\n      if (cell) {\n        this.layoutElement(cell.getElement(true), column);\n      }\n    });\n  }\n  layoutElement(element, column) {\n    var position;\n    if (column.modules.frozen && element) {\n      element.style.position = \"sticky\";\n      if (this.table.rtl) {\n        position = column.modules.frozen.position === \"left\" ? \"right\" : \"left\";\n      } else {\n        position = column.modules.frozen.position;\n      }\n      element.style[position] = column.modules.frozen.margin;\n      element.classList.add(\"tabulator-frozen\");\n      element.classList.toggle(\"tabulator-frozen-left\", column.modules.frozen.edge && column.modules.frozen.position === \"left\");\n      element.classList.toggle(\"tabulator-frozen-right\", column.modules.frozen.edge && column.modules.frozen.position === \"right\");\n    }\n  }\n  adjustForScrollbar(width) {\n    if (this.rightColumns.length) {\n      this.table.columnManager.getContentsElement().style.width = \"calc(100% - \" + width + \"px)\";\n    }\n  }\n  getFrozenColumns() {\n    return this.leftColumns.concat(this.rightColumns);\n  }\n  _calcSpace(columns, index) {\n    var width = 0;\n    for (let i = 0; i < index; i++) {\n      if (columns[i].visible) {\n        width += columns[i].getWidth();\n      }\n    }\n    return width;\n  }\n}\nclass FrozenRows extends Module {\n  static moduleName = \"frozenRows\";\n  constructor(table) {\n    super(table);\n    this.topElement = document.createElement(\"div\");\n    this.rows = [];\n\n    //register component functions\n    this.registerComponentFunction(\"row\", \"freeze\", this.freezeRow.bind(this));\n    this.registerComponentFunction(\"row\", \"unfreeze\", this.unfreezeRow.bind(this));\n    this.registerComponentFunction(\"row\", \"isFrozen\", this.isRowFrozen.bind(this));\n\n    //register table options\n    this.registerTableOption(\"frozenRowsField\", \"id\"); //field to choose frozen rows by\n    this.registerTableOption(\"frozenRows\", false); //holder for frozen row identifiers\n  }\n  initialize() {\n    var fragment = document.createDocumentFragment();\n    this.rows = [];\n    this.topElement.classList.add(\"tabulator-frozen-rows-holder\");\n    fragment.appendChild(document.createElement(\"br\"));\n    fragment.appendChild(this.topElement);\n\n    // this.table.columnManager.element.append(this.topElement);\n    this.table.columnManager.getContentsElement().insertBefore(fragment, this.table.columnManager.headersElement.nextSibling);\n    this.subscribe(\"row-deleting\", this.detachRow.bind(this));\n    this.subscribe(\"rows-visible\", this.visibleRows.bind(this));\n    this.registerDisplayHandler(this.getRows.bind(this), 10);\n    if (this.table.options.frozenRows) {\n      this.subscribe(\"data-processed\", this.initializeRows.bind(this));\n      this.subscribe(\"row-added\", this.initializeRow.bind(this));\n      this.subscribe(\"table-redrawing\", this.resizeHolderWidth.bind(this));\n      this.subscribe(\"column-resized\", this.resizeHolderWidth.bind(this));\n      this.subscribe(\"column-show\", this.resizeHolderWidth.bind(this));\n      this.subscribe(\"column-hide\", this.resizeHolderWidth.bind(this));\n    }\n    this.resizeHolderWidth();\n  }\n  resizeHolderWidth() {\n    this.topElement.style.minWidth = this.table.columnManager.headersElement.offsetWidth + \"px\";\n  }\n  initializeRows() {\n    this.table.rowManager.getRows().forEach(row => {\n      this.initializeRow(row);\n    });\n  }\n  initializeRow(row) {\n    var frozenRows = this.table.options.frozenRows,\n      rowType = typeof frozenRows;\n    if (rowType === \"number\") {\n      if (row.getPosition() && row.getPosition() + this.rows.length <= frozenRows) {\n        this.freezeRow(row);\n      }\n    } else if (rowType === \"function\") {\n      if (frozenRows.call(this.table, row.getComponent())) {\n        this.freezeRow(row);\n      }\n    } else if (Array.isArray(frozenRows)) {\n      if (frozenRows.includes(row.data[this.options(\"frozenRowsField\")])) {\n        this.freezeRow(row);\n      }\n    }\n  }\n  isRowFrozen(row) {\n    var index = this.rows.indexOf(row);\n    return index > -1;\n  }\n  isFrozen() {\n    return !!this.rows.length;\n  }\n  visibleRows(viewable, rows) {\n    this.rows.forEach(row => {\n      rows.push(row);\n    });\n    return rows;\n  }\n\n  //filter frozen rows out of display data\n  getRows(rows) {\n    var output = rows.slice(0);\n    this.rows.forEach(function (row) {\n      var index = output.indexOf(row);\n      if (index > -1) {\n        output.splice(index, 1);\n      }\n    });\n    return output;\n  }\n  freezeRow(row) {\n    if (!row.modules.frozen) {\n      row.modules.frozen = true;\n      this.topElement.appendChild(row.getElement());\n      row.initialize();\n      row.normalizeHeight();\n      this.rows.push(row);\n      this.refreshData(false, \"display\");\n      this.table.rowManager.adjustTableSize();\n      this.styleRows();\n    } else {\n      console.warn(\"Freeze Error - Row is already frozen\");\n    }\n  }\n  unfreezeRow(row) {\n    if (row.modules.frozen) {\n      row.modules.frozen = false;\n      this.detachRow(row);\n      this.table.rowManager.adjustTableSize();\n      this.refreshData(false, \"display\");\n      if (this.rows.length) {\n        this.styleRows();\n      }\n    } else {\n      console.warn(\"Freeze Error - Row is already unfrozen\");\n    }\n  }\n  detachRow(row) {\n    var index = this.rows.indexOf(row);\n    if (index > -1) {\n      var rowEl = row.getElement();\n      if (rowEl.parentNode) {\n        rowEl.parentNode.removeChild(rowEl);\n      }\n      this.rows.splice(index, 1);\n    }\n  }\n  styleRows(row) {\n    this.rows.forEach((row, i) => {\n      this.table.rowManager.styleRow(row, i);\n    });\n  }\n}\n\n//public group object\nclass GroupComponent {\n  constructor(group) {\n    this._group = group;\n    this.type = \"GroupComponent\";\n    return new Proxy(this, {\n      get: function (target, name, receiver) {\n        if (typeof target[name] !== \"undefined\") {\n          return target[name];\n        } else {\n          return target._group.groupManager.table.componentFunctionBinder.handle(\"group\", target._group, name);\n        }\n      }\n    });\n  }\n  getKey() {\n    return this._group.key;\n  }\n  getField() {\n    return this._group.field;\n  }\n  getElement() {\n    return this._group.element;\n  }\n  getRows() {\n    return this._group.getRows(true);\n  }\n  getSubGroups() {\n    return this._group.getSubGroups(true);\n  }\n  getParentGroup() {\n    return this._group.parent ? this._group.parent.getComponent() : false;\n  }\n  isVisible() {\n    return this._group.visible;\n  }\n  show() {\n    this._group.show();\n  }\n  hide() {\n    this._group.hide();\n  }\n  toggle() {\n    this._group.toggleVisibility();\n  }\n  scrollTo(position, ifVisible) {\n    return this._group.groupManager.table.rowManager.scrollToRow(this._group, position, ifVisible);\n  }\n  _getSelf() {\n    return this._group;\n  }\n  getTable() {\n    return this._group.groupManager.table;\n  }\n}\n\n//Group functions\nclass Group {\n  constructor(groupManager, parent, level, key, field, generator, oldGroup) {\n    this.groupManager = groupManager;\n    this.parent = parent;\n    this.key = key;\n    this.level = level;\n    this.field = field;\n    this.hasSubGroups = level < groupManager.groupIDLookups.length - 1;\n    this.addRow = this.hasSubGroups ? this._addRowToGroup : this._addRow;\n    this.type = \"group\"; //type of element\n    this.old = oldGroup;\n    this.rows = [];\n    this.groups = [];\n    this.groupList = [];\n    this.generator = generator;\n    this.element = false;\n    this.elementContents = false;\n    this.height = 0;\n    this.outerHeight = 0;\n    this.initialized = false;\n    this.calcs = {};\n    this.initialized = false;\n    this.modules = {};\n    this.arrowElement = false;\n    this.visible = oldGroup ? oldGroup.visible : typeof groupManager.startOpen[level] !== \"undefined\" ? groupManager.startOpen[level] : groupManager.startOpen[0];\n    this.component = null;\n    this.createElements();\n    this.addBindings();\n    this.createValueGroups();\n  }\n  wipe(elementsOnly) {\n    if (!elementsOnly) {\n      if (this.groupList.length) {\n        this.groupList.forEach(function (group) {\n          group.wipe();\n        });\n      } else {\n        this.rows.forEach(row => {\n          if (row.modules) {\n            delete row.modules.group;\n          }\n        });\n      }\n    }\n    this.element = false;\n    this.arrowElement = false;\n    this.elementContents = false;\n  }\n  createElements() {\n    var arrow = document.createElement(\"div\");\n    arrow.classList.add(\"tabulator-arrow\");\n    this.element = document.createElement(\"div\");\n    this.element.classList.add(\"tabulator-row\");\n    this.element.classList.add(\"tabulator-group\");\n    this.element.classList.add(\"tabulator-group-level-\" + this.level);\n    this.element.setAttribute(\"role\", \"rowgroup\");\n    this.arrowElement = document.createElement(\"div\");\n    this.arrowElement.classList.add(\"tabulator-group-toggle\");\n    this.arrowElement.appendChild(arrow);\n\n    //setup movable rows\n    if (this.groupManager.table.options.movableRows !== false && this.groupManager.table.modExists(\"moveRow\")) {\n      this.groupManager.table.modules.moveRow.initializeGroupHeader(this);\n    }\n  }\n  createValueGroups() {\n    var level = this.level + 1;\n    if (this.groupManager.allowedValues && this.groupManager.allowedValues[level]) {\n      this.groupManager.allowedValues[level].forEach(value => {\n        this._createGroup(value, level);\n      });\n    }\n  }\n  addBindings() {\n    var toggleElement;\n    if (this.groupManager.table.options.groupToggleElement) {\n      toggleElement = this.groupManager.table.options.groupToggleElement == \"arrow\" ? this.arrowElement : this.element;\n      toggleElement.addEventListener(\"click\", e => {\n        if (this.groupManager.table.options.groupToggleElement === \"arrow\") {\n          e.stopPropagation();\n          e.stopImmediatePropagation();\n        }\n\n        //allow click event to propagate before toggling visibility\n        setTimeout(() => {\n          this.toggleVisibility();\n        });\n      });\n    }\n  }\n  _createGroup(groupID, level) {\n    var groupKey = level + \"_\" + groupID;\n    var group = new Group(this.groupManager, this, level, groupID, this.groupManager.groupIDLookups[level].field, this.groupManager.headerGenerator[level] || this.groupManager.headerGenerator[0], this.old ? this.old.groups[groupKey] : false);\n    this.groups[groupKey] = group;\n    this.groupList.push(group);\n  }\n  _addRowToGroup(row) {\n    var level = this.level + 1;\n    if (this.hasSubGroups) {\n      var groupID = this.groupManager.groupIDLookups[level].func(row.getData()),\n        groupKey = level + \"_\" + groupID;\n      if (this.groupManager.allowedValues && this.groupManager.allowedValues[level]) {\n        if (this.groups[groupKey]) {\n          this.groups[groupKey].addRow(row);\n        }\n      } else {\n        if (!this.groups[groupKey]) {\n          this._createGroup(groupID, level);\n        }\n        this.groups[groupKey].addRow(row);\n      }\n    }\n  }\n  _addRow(row) {\n    this.rows.push(row);\n    row.modules.group = this;\n  }\n  insertRow(row, to, after) {\n    var data = this.conformRowData({});\n    row.updateData(data);\n    var toIndex = this.rows.indexOf(to);\n    if (toIndex > -1) {\n      if (after) {\n        this.rows.splice(toIndex + 1, 0, row);\n      } else {\n        this.rows.splice(toIndex, 0, row);\n      }\n    } else {\n      if (after) {\n        this.rows.push(row);\n      } else {\n        this.rows.unshift(row);\n      }\n    }\n    row.modules.group = this;\n\n    // this.generateGroupHeaderContents();\n\n    if (this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\") {\n      this.groupManager.table.modules.columnCalcs.recalcGroup(this);\n    }\n    this.groupManager.updateGroupRows(true);\n  }\n  scrollHeader(left) {\n    if (this.arrowElement) {\n      this.arrowElement.style.marginLeft = left;\n      this.groupList.forEach(function (child) {\n        child.scrollHeader(left);\n      });\n    }\n  }\n  getRowIndex(row) {}\n\n  //update row data to match grouping constraints\n  conformRowData(data) {\n    if (this.field) {\n      data[this.field] = this.key;\n    } else {\n      console.warn(\"Data Conforming Error - Cannot conform row data to match new group as groupBy is a function\");\n    }\n    if (this.parent) {\n      data = this.parent.conformRowData(data);\n    }\n    return data;\n  }\n  removeRow(row) {\n    var index = this.rows.indexOf(row);\n    var el = row.getElement();\n    if (index > -1) {\n      this.rows.splice(index, 1);\n    }\n    if (!this.groupManager.table.options.groupValues && !this.rows.length) {\n      if (this.parent) {\n        this.parent.removeGroup(this);\n      } else {\n        this.groupManager.removeGroup(this);\n      }\n      this.groupManager.updateGroupRows(true);\n    } else {\n      if (el.parentNode) {\n        el.parentNode.removeChild(el);\n      }\n      if (!this.groupManager.blockRedraw) {\n        this.generateGroupHeaderContents();\n        if (this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\") {\n          this.groupManager.table.modules.columnCalcs.recalcGroup(this);\n        }\n      }\n    }\n  }\n  removeGroup(group) {\n    var groupKey = group.level + \"_\" + group.key,\n      index;\n    if (this.groups[groupKey]) {\n      delete this.groups[groupKey];\n      index = this.groupList.indexOf(group);\n      if (index > -1) {\n        this.groupList.splice(index, 1);\n      }\n      if (!this.groupList.length) {\n        if (this.parent) {\n          this.parent.removeGroup(this);\n        } else {\n          this.groupManager.removeGroup(this);\n        }\n      }\n    }\n  }\n  getHeadersAndRows() {\n    var output = [];\n    output.push(this);\n    this._visSet();\n    if (this.calcs.top) {\n      this.calcs.top.detachElement();\n      this.calcs.top.deleteCells();\n    }\n    if (this.calcs.bottom) {\n      this.calcs.bottom.detachElement();\n      this.calcs.bottom.deleteCells();\n    }\n    if (this.visible) {\n      if (this.groupList.length) {\n        this.groupList.forEach(function (group) {\n          output = output.concat(group.getHeadersAndRows());\n        });\n      } else {\n        if (this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasTopCalcs()) {\n          this.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n          output.push(this.calcs.top);\n        }\n        output = output.concat(this.rows);\n        if (this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()) {\n          this.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n          output.push(this.calcs.bottom);\n        }\n      }\n    } else {\n      if (!this.groupList.length && this.groupManager.table.options.columnCalcs != \"table\") {\n        if (this.groupManager.table.modExists(\"columnCalcs\")) {\n          if (this.groupManager.table.modules.columnCalcs.hasTopCalcs()) {\n            if (this.groupManager.table.options.groupClosedShowCalcs) {\n              this.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n              output.push(this.calcs.top);\n            }\n          }\n          if (this.groupManager.table.modules.columnCalcs.hasBottomCalcs()) {\n            if (this.groupManager.table.options.groupClosedShowCalcs) {\n              this.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n              output.push(this.calcs.bottom);\n            }\n          }\n        }\n      }\n    }\n    return output;\n  }\n  getData(visible, transform) {\n    var output = [];\n    this._visSet();\n    if (!visible || visible && this.visible) {\n      this.rows.forEach(row => {\n        output.push(row.getData(transform || \"data\"));\n      });\n    }\n    return output;\n  }\n  getRowCount() {\n    var count = 0;\n    if (this.groupList.length) {\n      this.groupList.forEach(group => {\n        count += group.getRowCount();\n      });\n    } else {\n      count = this.rows.length;\n    }\n    return count;\n  }\n  toggleVisibility() {\n    if (this.visible) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n  hide() {\n    this.visible = false;\n    if (this.groupManager.table.rowManager.getRenderMode() == \"basic\" && !this.groupManager.table.options.pagination) {\n      this.element.classList.remove(\"tabulator-group-visible\");\n      if (this.groupList.length) {\n        this.groupList.forEach(group => {\n          var rows = group.getHeadersAndRows();\n          rows.forEach(row => {\n            row.detachElement();\n          });\n        });\n      } else {\n        this.rows.forEach(row => {\n          var rowEl = row.getElement();\n          rowEl.parentNode.removeChild(rowEl);\n        });\n      }\n      this.groupManager.updateGroupRows(true);\n    } else {\n      this.groupManager.updateGroupRows(true);\n    }\n    this.groupManager.table.externalEvents.dispatch(\"groupVisibilityChanged\", this.getComponent(), false);\n  }\n  show() {\n    this.visible = true;\n    if (this.groupManager.table.rowManager.getRenderMode() == \"basic\" && !this.groupManager.table.options.pagination) {\n      this.element.classList.add(\"tabulator-group-visible\");\n      var prev = this.generateElement();\n      if (this.groupList.length) {\n        this.groupList.forEach(group => {\n          var rows = group.getHeadersAndRows();\n          rows.forEach(row => {\n            var rowEl = row.getElement();\n            prev.parentNode.insertBefore(rowEl, prev.nextSibling);\n            row.initialize();\n            prev = rowEl;\n          });\n        });\n      } else {\n        this.rows.forEach(row => {\n          var rowEl = row.getElement();\n          prev.parentNode.insertBefore(rowEl, prev.nextSibling);\n          row.initialize();\n          prev = rowEl;\n        });\n      }\n      this.groupManager.updateGroupRows(true);\n    } else {\n      this.groupManager.updateGroupRows(true);\n    }\n    this.groupManager.table.externalEvents.dispatch(\"groupVisibilityChanged\", this.getComponent(), true);\n  }\n  _visSet() {\n    var data = [];\n    if (typeof this.visible == \"function\") {\n      this.rows.forEach(function (row) {\n        data.push(row.getData());\n      });\n      this.visible = this.visible(this.key, this.getRowCount(), data, this.getComponent());\n    }\n  }\n  getRowGroup(row) {\n    var match = false;\n    if (this.groupList.length) {\n      this.groupList.forEach(function (group) {\n        var result = group.getRowGroup(row);\n        if (result) {\n          match = result;\n        }\n      });\n    } else {\n      if (this.rows.find(function (item) {\n        return item === row;\n      })) {\n        match = this;\n      }\n    }\n    return match;\n  }\n  getSubGroups(component) {\n    var output = [];\n    this.groupList.forEach(function (child) {\n      output.push(component ? child.getComponent() : child);\n    });\n    return output;\n  }\n  getRows(component, includeChildren) {\n    var output = [];\n    if (includeChildren && this.groupList.length) {\n      this.groupList.forEach(group => {\n        output = output.concat(group.getRows(component, includeChildren));\n      });\n    } else {\n      this.rows.forEach(function (row) {\n        output.push(component ? row.getComponent() : row);\n      });\n    }\n    return output;\n  }\n  generateGroupHeaderContents() {\n    var data = [];\n    var rows = this.getRows(false, true);\n    rows.forEach(function (row) {\n      data.push(row.getData());\n    });\n    this.elementContents = this.generator(this.key, this.getRowCount(), data, this.getComponent());\n    while (this.element.firstChild) this.element.removeChild(this.element.firstChild);\n    if (typeof this.elementContents === \"string\") {\n      this.element.innerHTML = this.elementContents;\n    } else {\n      this.element.appendChild(this.elementContents);\n    }\n    this.element.insertBefore(this.arrowElement, this.element.firstChild);\n  }\n  getPath(path = []) {\n    path.unshift(this.key);\n    if (this.parent) {\n      this.parent.getPath(path);\n    }\n    return path;\n  }\n\n  ////////////// Standard Row Functions //////////////\n\n  getElement() {\n    return this.elementContents ? this.element : this.generateElement();\n  }\n  generateElement() {\n    this.addBindings = false;\n    this._visSet();\n    if (this.visible) {\n      this.element.classList.add(\"tabulator-group-visible\");\n    } else {\n      this.element.classList.remove(\"tabulator-group-visible\");\n    }\n    for (var i = 0; i < this.element.childNodes.length; ++i) {\n      this.element.childNodes[i].parentNode.removeChild(this.element.childNodes[i]);\n    }\n    this.generateGroupHeaderContents();\n\n    // this.addBindings();\n\n    return this.element;\n  }\n  detachElement() {\n    if (this.element && this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n    }\n  }\n\n  //normalize the height of elements in the row\n  normalizeHeight() {\n    this.setHeight(this.element.clientHeight);\n  }\n  initialize(force) {\n    if (!this.initialized || force) {\n      this.normalizeHeight();\n      this.initialized = true;\n    }\n  }\n  reinitialize() {\n    this.initialized = false;\n    this.height = 0;\n    if (Helpers.elVisible(this.element)) {\n      this.initialize(true);\n    }\n  }\n  setHeight(height) {\n    if (this.height != height) {\n      this.height = height;\n      this.outerHeight = this.element.offsetHeight;\n    }\n  }\n\n  //return rows outer height\n  getHeight() {\n    return this.outerHeight;\n  }\n  getGroup() {\n    return this;\n  }\n  reinitializeHeight() {}\n  calcHeight() {}\n  setCellHeight() {}\n  clearCellHeight() {}\n  deinitializeHeight() {}\n  rendered() {}\n\n  //////////////// Object Generation /////////////////\n  getComponent() {\n    if (!this.component) {\n      this.component = new GroupComponent(this);\n    }\n    return this.component;\n  }\n}\nclass GroupRows extends Module {\n  static moduleName = \"groupRows\";\n  constructor(table) {\n    super(table);\n    this.groupIDLookups = false; //enable table grouping and set field to group by\n    this.startOpen = [function () {\n      return false;\n    }]; //starting state of group\n    this.headerGenerator = [function () {\n      return \"\";\n    }];\n    this.groupList = []; //ordered list of groups\n    this.allowedValues = false;\n    this.groups = {}; //hold row groups\n\n    this.displayHandler = this.getRows.bind(this);\n    this.blockRedraw = false;\n\n    //register table options\n    this.registerTableOption(\"groupBy\", false); //enable table grouping and set field to group by\n    this.registerTableOption(\"groupStartOpen\", true); //starting state of group\n    this.registerTableOption(\"groupValues\", false);\n    this.registerTableOption(\"groupUpdateOnCellEdit\", false);\n    this.registerTableOption(\"groupHeader\", false); //header generation function\n    this.registerTableOption(\"groupHeaderPrint\", null);\n    this.registerTableOption(\"groupHeaderClipboard\", null);\n    this.registerTableOption(\"groupHeaderHtmlOutput\", null);\n    this.registerTableOption(\"groupHeaderDownload\", null);\n    this.registerTableOption(\"groupToggleElement\", \"arrow\");\n    this.registerTableOption(\"groupClosedShowCalcs\", false);\n\n    //register table functions\n    this.registerTableFunction(\"setGroupBy\", this.setGroupBy.bind(this));\n    this.registerTableFunction(\"setGroupValues\", this.setGroupValues.bind(this));\n    this.registerTableFunction(\"setGroupStartOpen\", this.setGroupStartOpen.bind(this));\n    this.registerTableFunction(\"setGroupHeader\", this.setGroupHeader.bind(this));\n    this.registerTableFunction(\"getGroups\", this.userGetGroups.bind(this));\n    this.registerTableFunction(\"getGroupedData\", this.userGetGroupedData.bind(this));\n\n    //register component functions\n    this.registerComponentFunction(\"row\", \"getGroup\", this.rowGetGroup.bind(this));\n  }\n\n  //initialize group configuration\n  initialize() {\n    this.subscribe(\"table-destroy\", this._blockRedrawing.bind(this));\n    this.subscribe(\"rows-wipe\", this._blockRedrawing.bind(this));\n    this.subscribe(\"rows-wiped\", this._restore_redrawing.bind(this));\n    if (this.table.options.groupBy) {\n      if (this.table.options.groupUpdateOnCellEdit) {\n        this.subscribe(\"cell-value-updated\", this.cellUpdated.bind(this));\n        this.subscribe(\"row-data-changed\", this.reassignRowToGroup.bind(this), 0);\n      }\n      this.subscribe(\"table-built\", this.configureGroupSetup.bind(this));\n      this.subscribe(\"row-deleting\", this.rowDeleting.bind(this));\n      this.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n      this.subscribe(\"scroll-horizontal\", this.scrollHeaders.bind(this));\n      this.subscribe(\"rows-wipe\", this.wipe.bind(this));\n      this.subscribe(\"rows-added\", this.rowsUpdated.bind(this));\n      this.subscribe(\"row-moving\", this.rowMoving.bind(this));\n      this.subscribe(\"row-adding-index\", this.rowAddingIndex.bind(this));\n      this.subscribe(\"rows-sample\", this.rowSample.bind(this));\n      this.subscribe(\"render-virtual-fill\", this.virtualRenderFill.bind(this));\n      this.registerDisplayHandler(this.displayHandler, 20);\n      this.initialized = true;\n    }\n  }\n  _blockRedrawing() {\n    this.blockRedraw = true;\n  }\n  _restore_redrawing() {\n    this.blockRedraw = false;\n  }\n  configureGroupSetup() {\n    if (this.table.options.groupBy) {\n      var groupBy = this.table.options.groupBy,\n        startOpen = this.table.options.groupStartOpen,\n        groupHeader = this.table.options.groupHeader;\n      this.allowedValues = this.table.options.groupValues;\n      if (Array.isArray(groupBy) && Array.isArray(groupHeader) && groupBy.length > groupHeader.length) {\n        console.warn(\"Error creating group headers, groupHeader array is shorter than groupBy array\");\n      }\n      this.headerGenerator = [function () {\n        return \"\";\n      }];\n      this.startOpen = [function () {\n        return false;\n      }]; //starting state of group\n\n      this.langBind(\"groups|item\", (langValue, lang) => {\n        this.headerGenerator[0] = (value, count, data) => {\n          //header layout function\n          return (typeof value === \"undefined\" ? \"\" : value) + \"<span>(\" + count + \" \" + (count === 1 ? langValue : lang.groups.items) + \")</span>\";\n        };\n      });\n      this.groupIDLookups = [];\n      if (groupBy) {\n        if (this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"table\" && this.table.options.columnCalcs != \"both\") {\n          this.table.modules.columnCalcs.removeCalcs();\n        }\n      } else {\n        if (this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"group\") {\n          var cols = this.table.columnManager.getRealColumns();\n          cols.forEach(col => {\n            if (col.definition.topCalc) {\n              this.table.modules.columnCalcs.initializeTopRow();\n            }\n            if (col.definition.bottomCalc) {\n              this.table.modules.columnCalcs.initializeBottomRow();\n            }\n          });\n        }\n      }\n      if (!Array.isArray(groupBy)) {\n        groupBy = [groupBy];\n      }\n      groupBy.forEach((group, i) => {\n        var lookupFunc, column;\n        if (typeof group == \"function\") {\n          lookupFunc = group;\n        } else {\n          column = this.table.columnManager.getColumnByField(group);\n          if (column) {\n            lookupFunc = function (data) {\n              return column.getFieldValue(data);\n            };\n          } else {\n            lookupFunc = function (data) {\n              return data[group];\n            };\n          }\n        }\n        this.groupIDLookups.push({\n          field: typeof group === \"function\" ? false : group,\n          func: lookupFunc,\n          values: this.allowedValues ? this.allowedValues[i] : false\n        });\n      });\n      if (startOpen) {\n        if (!Array.isArray(startOpen)) {\n          startOpen = [startOpen];\n        }\n        startOpen.forEach(level => {});\n        this.startOpen = startOpen;\n      }\n      if (groupHeader) {\n        this.headerGenerator = Array.isArray(groupHeader) ? groupHeader : [groupHeader];\n      }\n    } else {\n      this.groupList = [];\n      this.groups = {};\n    }\n  }\n  rowSample(rows, prevValue) {\n    if (this.table.options.groupBy) {\n      var group = this.getGroups(false)[0];\n      prevValue.push(group.getRows(false)[0]);\n    }\n    return prevValue;\n  }\n  virtualRenderFill() {\n    var el = this.table.rowManager.tableElement;\n    var rows = this.table.rowManager.getVisibleRows();\n    if (this.table.options.groupBy) {\n      rows = rows.filter(row => {\n        return row.type !== \"group\";\n      });\n      el.style.minWidth = !rows.length ? this.table.columnManager.getWidth() + \"px\" : \"\";\n    } else {\n      return rows;\n    }\n  }\n  rowAddingIndex(row, index, top) {\n    if (this.table.options.groupBy) {\n      this.assignRowToGroup(row);\n      var groupRows = row.modules.group.rows;\n      if (groupRows.length > 1) {\n        if (!index || index && groupRows.indexOf(index) == -1) {\n          if (top) {\n            if (groupRows[0] !== row) {\n              index = groupRows[0];\n              this.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n            }\n          } else {\n            if (groupRows[groupRows.length - 1] !== row) {\n              index = groupRows[groupRows.length - 1];\n              this.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n            }\n          }\n        } else {\n          this.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n        }\n      }\n      return index;\n    }\n  }\n  trackChanges() {\n    this.dispatch(\"group-changed\");\n  }\n\n  ///////////////////////////////////\n  ///////// Table Functions /////////\n  ///////////////////////////////////\n\n  setGroupBy(groups) {\n    this.table.options.groupBy = groups;\n    if (!this.initialized) {\n      this.initialize();\n    }\n    this.configureGroupSetup();\n    if (!groups && this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs === true) {\n      this.table.modules.columnCalcs.reinitializeCalcs();\n    }\n    this.refreshData();\n    this.trackChanges();\n  }\n  setGroupValues(groupValues) {\n    this.table.options.groupValues = groupValues;\n    this.configureGroupSetup();\n    this.refreshData();\n    this.trackChanges();\n  }\n  setGroupStartOpen(values) {\n    this.table.options.groupStartOpen = values;\n    this.configureGroupSetup();\n    if (this.table.options.groupBy) {\n      this.refreshData();\n      this.trackChanges();\n    } else {\n      console.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n    }\n  }\n  setGroupHeader(values) {\n    this.table.options.groupHeader = values;\n    this.configureGroupSetup();\n    if (this.table.options.groupBy) {\n      this.refreshData();\n      this.trackChanges();\n    } else {\n      console.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n    }\n  }\n  userGetGroups(values) {\n    return this.getGroups(true);\n  }\n\n  // get grouped table data in the same format as getData()\n  userGetGroupedData() {\n    return this.table.options.groupBy ? this.getGroupedData() : this.getData();\n  }\n\n  ///////////////////////////////////////\n  ///////// Component Functions /////////\n  ///////////////////////////////////////\n\n  rowGetGroup(row) {\n    return row.modules.group ? row.modules.group.getComponent() : false;\n  }\n\n  ///////////////////////////////////\n  ///////// Internal Logic //////////\n  ///////////////////////////////////\n\n  rowMoving(from, to, after) {\n    if (this.table.options.groupBy) {\n      if (!after && to instanceof Group) {\n        to = this.table.rowManager.prevDisplayRow(from) || to;\n      }\n      var toGroup = to instanceof Group ? to : to.modules.group;\n      var fromGroup = from instanceof Group ? from : from.modules.group;\n      if (toGroup === fromGroup) {\n        this.table.rowManager.moveRowInArray(toGroup.rows, from, to, after);\n      } else {\n        if (fromGroup) {\n          fromGroup.removeRow(from);\n        }\n        toGroup.insertRow(from, to, after);\n      }\n    }\n  }\n  rowDeleting(row) {\n    //remove from group\n    if (this.table.options.groupBy && row.modules.group) {\n      row.modules.group.removeRow(row);\n    }\n  }\n  rowsUpdated(row) {\n    if (this.table.options.groupBy) {\n      this.updateGroupRows(true);\n    }\n  }\n  cellUpdated(cell) {\n    if (this.table.options.groupBy) {\n      this.reassignRowToGroup(cell.row);\n    }\n  }\n\n  //return appropriate rows with group headers\n  getRows(rows) {\n    if (this.table.options.groupBy && this.groupIDLookups.length) {\n      this.dispatchExternal(\"dataGrouping\");\n      this.generateGroups(rows);\n      if (this.subscribedExternal(\"dataGrouped\")) {\n        this.dispatchExternal(\"dataGrouped\", this.getGroups(true));\n      }\n      return this.updateGroupRows();\n    } else {\n      return rows.slice(0);\n    }\n  }\n  getGroups(component) {\n    var groupComponents = [];\n    this.groupList.forEach(function (group) {\n      groupComponents.push(component ? group.getComponent() : group);\n    });\n    return groupComponents;\n  }\n  getChildGroups(group) {\n    var groupComponents = [];\n    if (!group) {\n      group = this;\n    }\n    group.groupList.forEach(child => {\n      if (child.groupList.length) {\n        groupComponents = groupComponents.concat(this.getChildGroups(child));\n      } else {\n        groupComponents.push(child);\n      }\n    });\n    return groupComponents;\n  }\n  wipe() {\n    if (this.table.options.groupBy) {\n      this.groupList.forEach(function (group) {\n        group.wipe();\n      });\n      this.groupList = [];\n      this.groups = {};\n    }\n  }\n  pullGroupListData(groupList) {\n    var groupListData = [];\n    groupList.forEach(group => {\n      var groupHeader = {};\n      groupHeader.level = 0;\n      groupHeader.rowCount = 0;\n      groupHeader.headerContent = \"\";\n      var childData = [];\n      if (group.hasSubGroups) {\n        childData = this.pullGroupListData(group.groupList);\n        groupHeader.level = group.level;\n        groupHeader.rowCount = childData.length - group.groupList.length; // data length minus number of sub-headers\n        groupHeader.headerContent = group.generator(group.key, groupHeader.rowCount, group.rows, group);\n        groupListData.push(groupHeader);\n        groupListData = groupListData.concat(childData);\n      } else {\n        groupHeader.level = group.level;\n        groupHeader.headerContent = group.generator(group.key, group.rows.length, group.rows, group);\n        groupHeader.rowCount = group.getRows().length;\n        groupListData.push(groupHeader);\n        group.getRows().forEach(row => {\n          groupListData.push(row.getData(\"data\"));\n        });\n      }\n    });\n    return groupListData;\n  }\n  getGroupedData() {\n    return this.pullGroupListData(this.groupList);\n  }\n  getRowGroup(row) {\n    var match = false;\n    if (this.options(\"dataTree\")) {\n      row = this.table.modules.dataTree.getTreeParentRoot(row);\n    }\n    this.groupList.forEach(group => {\n      var result = group.getRowGroup(row);\n      if (result) {\n        match = result;\n      }\n    });\n    return match;\n  }\n  countGroups() {\n    return this.groupList.length;\n  }\n  generateGroups(rows) {\n    var oldGroups = this.groups;\n    this.groups = {};\n    this.groupList = [];\n    if (this.allowedValues && this.allowedValues[0]) {\n      this.allowedValues[0].forEach(value => {\n        this.createGroup(value, 0, oldGroups);\n      });\n      rows.forEach(row => {\n        this.assignRowToExistingGroup(row, oldGroups);\n      });\n    } else {\n      rows.forEach(row => {\n        this.assignRowToGroup(row, oldGroups);\n      });\n    }\n    Object.values(oldGroups).forEach(group => {\n      group.wipe(true);\n    });\n  }\n  createGroup(groupID, level, oldGroups) {\n    var groupKey = level + \"_\" + groupID,\n      group;\n    oldGroups = oldGroups || [];\n    group = new Group(this, false, level, groupID, this.groupIDLookups[0].field, this.headerGenerator[0], oldGroups[groupKey]);\n    this.groups[groupKey] = group;\n    this.groupList.push(group);\n  }\n  assignRowToExistingGroup(row, oldGroups) {\n    var groupID = this.groupIDLookups[0].func(row.getData()),\n      groupKey = \"0_\" + groupID;\n    if (this.groups[groupKey]) {\n      this.groups[groupKey].addRow(row);\n    }\n  }\n  assignRowToGroup(row, oldGroups) {\n    var groupID = this.groupIDLookups[0].func(row.getData()),\n      newGroupNeeded = !this.groups[\"0_\" + groupID];\n    if (newGroupNeeded) {\n      this.createGroup(groupID, 0, oldGroups);\n    }\n    this.groups[\"0_\" + groupID].addRow(row);\n    return !newGroupNeeded;\n  }\n  reassignRowToGroup(row) {\n    if (row.type === \"row\") {\n      var oldRowGroup = row.modules.group,\n        oldGroupPath = oldRowGroup.getPath(),\n        newGroupPath = this.getExpectedPath(row),\n        samePath;\n\n      // figure out if new group path is the same as old group path\n      samePath = oldGroupPath.length == newGroupPath.length && oldGroupPath.every((element, index) => {\n        return element === newGroupPath[index];\n      });\n\n      // refresh if they new path and old path aren't the same (aka the row's groupings have changed)\n      if (!samePath) {\n        oldRowGroup.removeRow(row);\n        this.assignRowToGroup(row, this.groups);\n        this.refreshData(true);\n      }\n    }\n  }\n  getExpectedPath(row) {\n    var groupPath = [],\n      rowData = row.getData();\n    this.groupIDLookups.forEach(groupId => {\n      groupPath.push(groupId.func(rowData));\n    });\n    return groupPath;\n  }\n  updateGroupRows(force) {\n    var output = [];\n    if (!this.blockRedraw) {\n      this.groupList.forEach(group => {\n        output = output.concat(group.getHeadersAndRows());\n      });\n      if (force) {\n        this.refreshData(true);\n      }\n    }\n    return output;\n  }\n  scrollHeaders(left) {\n    if (this.table.options.groupBy) {\n      if (this.table.options.renderHorizontal === \"virtual\") {\n        left -= this.table.columnManager.renderer.vDomPadLeft;\n      }\n      left = left + \"px\";\n      this.groupList.forEach(group => {\n        group.scrollHeader(left);\n      });\n    }\n  }\n  removeGroup(group) {\n    var groupKey = group.level + \"_\" + group.key,\n      index;\n    if (this.groups[groupKey]) {\n      delete this.groups[groupKey];\n      index = this.groupList.indexOf(group);\n      if (index > -1) {\n        this.groupList.splice(index, 1);\n      }\n    }\n  }\n  checkBasicModeGroupHeaderWidth() {\n    var element = this.table.rowManager.tableElement,\n      onlyGroupHeaders = true;\n    this.table.rowManager.getDisplayRows().forEach((row, index) => {\n      this.table.rowManager.styleRow(row, index);\n      element.appendChild(row.getElement());\n      row.initialize(true);\n      if (row.type !== \"group\") {\n        onlyGroupHeaders = false;\n      }\n    });\n    if (onlyGroupHeaders) {\n      element.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n    } else {\n      element.style.minWidth = \"\";\n    }\n  }\n}\nvar defaultUndoers = {\n  cellEdit: function (action) {\n    action.component.setValueProcessData(action.data.oldValue);\n    action.component.cellRendered();\n  },\n  rowAdd: function (action) {\n    action.component.deleteActual();\n    this.table.rowManager.checkPlaceholder();\n  },\n  rowDelete: function (action) {\n    var newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n    if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n      this.table.modules.groupRows.updateGroupRows(true);\n    }\n    this._rebindRow(action.component, newRow);\n    this.table.rowManager.checkPlaceholder();\n  },\n  rowMove: function (action) {\n    var after = action.data.posFrom - action.data.posTo > 0;\n    this.table.rowManager.moveRowActual(action.component, this.table.rowManager.getRowFromPosition(action.data.posFrom), after);\n    this.table.rowManager.regenerateRowPositions();\n    this.table.rowManager.reRenderInPosition();\n  }\n};\nvar defaultRedoers = {\n  cellEdit: function (action) {\n    action.component.setValueProcessData(action.data.newValue);\n    action.component.cellRendered();\n  },\n  rowAdd: function (action) {\n    var newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n    if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n      this.table.modules.groupRows.updateGroupRows(true);\n    }\n    this._rebindRow(action.component, newRow);\n    this.table.rowManager.checkPlaceholder();\n  },\n  rowDelete: function (action) {\n    action.component.deleteActual();\n    this.table.rowManager.checkPlaceholder();\n  },\n  rowMove: function (action) {\n    this.table.rowManager.moveRowActual(action.component, this.table.rowManager.getRowFromPosition(action.data.posTo), action.data.after);\n    this.table.rowManager.regenerateRowPositions();\n    this.table.rowManager.reRenderInPosition();\n  }\n};\nvar bindings$1 = {\n  undo: [\"ctrl + 90\", \"meta + 90\"],\n  redo: [\"ctrl + 89\", \"meta + 89\"]\n};\nvar actions$1 = {\n  undo: function (e) {\n    var cell = false;\n    if (this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")) {\n      cell = this.table.modules.edit.currentCell;\n      if (!cell) {\n        e.preventDefault();\n        this.table.modules.history.undo();\n      }\n    }\n  },\n  redo: function (e) {\n    var cell = false;\n    if (this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")) {\n      cell = this.table.modules.edit.currentCell;\n      if (!cell) {\n        e.preventDefault();\n        this.table.modules.history.redo();\n      }\n    }\n  }\n};\nvar extensions$3 = {\n  keybindings: {\n    bindings: bindings$1,\n    actions: actions$1\n  }\n};\nclass History extends Module {\n  static moduleName = \"history\";\n  static moduleExtensions = extensions$3;\n\n  //load defaults\n  static undoers = defaultUndoers;\n  static redoers = defaultRedoers;\n  constructor(table) {\n    super(table);\n    this.history = [];\n    this.index = -1;\n    this.registerTableOption(\"history\", false); //enable edit history\n  }\n  initialize() {\n    if (this.table.options.history) {\n      this.subscribe(\"cell-value-updated\", this.cellUpdated.bind(this));\n      this.subscribe(\"cell-delete\", this.clearComponentHistory.bind(this));\n      this.subscribe(\"row-delete\", this.rowDeleted.bind(this));\n      this.subscribe(\"rows-wipe\", this.clear.bind(this));\n      this.subscribe(\"row-added\", this.rowAdded.bind(this));\n      this.subscribe(\"row-move\", this.rowMoved.bind(this));\n    }\n    this.registerTableFunction(\"undo\", this.undo.bind(this));\n    this.registerTableFunction(\"redo\", this.redo.bind(this));\n    this.registerTableFunction(\"getHistoryUndoSize\", this.getHistoryUndoSize.bind(this));\n    this.registerTableFunction(\"getHistoryRedoSize\", this.getHistoryRedoSize.bind(this));\n    this.registerTableFunction(\"clearHistory\", this.clear.bind(this));\n  }\n  rowMoved(from, to, after) {\n    this.action(\"rowMove\", from, {\n      posFrom: from.getPosition(),\n      posTo: to.getPosition(),\n      to: to,\n      after: after\n    });\n  }\n  rowAdded(row, data, pos, index) {\n    this.action(\"rowAdd\", row, {\n      data: data,\n      pos: pos,\n      index: index\n    });\n  }\n  rowDeleted(row) {\n    var index, rows;\n    if (this.table.options.groupBy) {\n      rows = row.getComponent().getGroup()._getSelf().rows;\n      index = rows.indexOf(row);\n      if (index) {\n        index = rows[index - 1];\n      }\n    } else {\n      index = row.table.rowManager.getRowIndex(row);\n      if (index) {\n        index = row.table.rowManager.rows[index - 1];\n      }\n    }\n    this.action(\"rowDelete\", row, {\n      data: row.getData(),\n      pos: !index,\n      index: index\n    });\n  }\n  cellUpdated(cell) {\n    this.action(\"cellEdit\", cell, {\n      oldValue: cell.oldValue,\n      newValue: cell.value\n    });\n  }\n  clear() {\n    this.history = [];\n    this.index = -1;\n  }\n  action(type, component, data) {\n    this.history = this.history.slice(0, this.index + 1);\n    this.history.push({\n      type: type,\n      component: component,\n      data: data\n    });\n    this.index++;\n  }\n  getHistoryUndoSize() {\n    return this.index + 1;\n  }\n  getHistoryRedoSize() {\n    return this.history.length - (this.index + 1);\n  }\n  clearComponentHistory(component) {\n    var index = this.history.findIndex(function (item) {\n      return item.component === component;\n    });\n    if (index > -1) {\n      this.history.splice(index, 1);\n      if (index <= this.index) {\n        this.index--;\n      }\n      this.clearComponentHistory(component);\n    }\n  }\n  undo() {\n    if (this.index > -1) {\n      let action = this.history[this.index];\n      History.undoers[action.type].call(this, action);\n      this.index--;\n      this.dispatchExternal(\"historyUndo\", action.type, action.component.getComponent(), action.data);\n      return true;\n    } else {\n      console.warn(this.options(\"history\") ? \"History Undo Error - No more history to undo\" : \"History module not enabled\");\n      return false;\n    }\n  }\n  redo() {\n    if (this.history.length - 1 > this.index) {\n      this.index++;\n      let action = this.history[this.index];\n      History.redoers[action.type].call(this, action);\n      this.dispatchExternal(\"historyRedo\", action.type, action.component.getComponent(), action.data);\n      return true;\n    } else {\n      console.warn(this.options(\"history\") ? \"History Redo Error - No more history to redo\" : \"History module not enabled\");\n      return false;\n    }\n  }\n\n  //rebind rows to new element after deletion\n  _rebindRow(oldRow, newRow) {\n    this.history.forEach(function (action) {\n      if (action.component instanceof Row) {\n        if (action.component === oldRow) {\n          action.component = newRow;\n        }\n      } else if (action.component instanceof Cell) {\n        if (action.component.row === oldRow) {\n          var field = action.component.column.getField();\n          if (field) {\n            action.component = newRow.getCell(field);\n          }\n        }\n      }\n    });\n  }\n}\nclass HtmlTableImport extends Module {\n  static moduleName = \"htmlTableImport\";\n  constructor(table) {\n    super(table);\n    this.fieldIndex = [];\n    this.hasIndex = false;\n  }\n  initialize() {\n    this.tableElementCheck();\n  }\n  tableElementCheck() {\n    if (this.table.originalElement && this.table.originalElement.tagName === \"TABLE\") {\n      if (this.table.originalElement.childNodes.length) {\n        this.parseTable();\n      } else {\n        console.warn(\"Unable to parse data from empty table tag, Tabulator should be initialized on a div tag unless importing data from a table element.\");\n      }\n    }\n  }\n  parseTable() {\n    var element = this.table.originalElement,\n      options = this.table.options,\n      headers = element.getElementsByTagName(\"th\"),\n      rows = element.getElementsByTagName(\"tbody\")[0],\n      data = [];\n    this.hasIndex = false;\n    this.dispatchExternal(\"htmlImporting\");\n    rows = rows ? rows.getElementsByTagName(\"tr\") : [];\n\n    //check for Tabulator inline options\n    this._extractOptions(element, options);\n    if (headers.length) {\n      this._extractHeaders(headers, rows);\n    } else {\n      this._generateBlankHeaders(headers, rows);\n    }\n\n    //iterate through table rows and build data set\n    for (var index = 0; index < rows.length; index++) {\n      var row = rows[index],\n        cells = row.getElementsByTagName(\"td\"),\n        item = {};\n\n      //create index if the don't exist in table\n      if (!this.hasIndex) {\n        item[options.index] = index;\n      }\n      for (var i = 0; i < cells.length; i++) {\n        var cell = cells[i];\n        if (typeof this.fieldIndex[i] !== \"undefined\") {\n          item[this.fieldIndex[i]] = cell.innerHTML;\n        }\n      }\n\n      //add row data to item\n      data.push(item);\n    }\n    options.data = data;\n    this.dispatchExternal(\"htmlImported\");\n  }\n\n  //extract tabulator attribute options\n  _extractOptions(element, options, defaultOptions) {\n    var attributes = element.attributes;\n    var optionsArr = defaultOptions ? Object.keys(defaultOptions) : Object.keys(options);\n    var optionsList = {};\n    optionsArr.forEach(item => {\n      optionsList[item.toLowerCase()] = item;\n    });\n    for (var index in attributes) {\n      var attrib = attributes[index];\n      var name;\n      if (attrib && typeof attrib == \"object\" && attrib.name && attrib.name.indexOf(\"tabulator-\") === 0) {\n        name = attrib.name.replace(\"tabulator-\", \"\");\n        if (typeof optionsList[name] !== \"undefined\") {\n          options[optionsList[name]] = this._attribValue(attrib.value);\n        }\n      }\n    }\n  }\n\n  //get value of attribute\n  _attribValue(value) {\n    if (value === \"true\") {\n      return true;\n    }\n    if (value === \"false\") {\n      return false;\n    }\n    return value;\n  }\n\n  //find column if it has already been defined\n  _findCol(title) {\n    var match = this.table.options.columns.find(column => {\n      return column.title === title;\n    });\n    return match || false;\n  }\n\n  //extract column from headers\n  _extractHeaders(headers, rows) {\n    for (var index = 0; index < headers.length; index++) {\n      var header = headers[index],\n        exists = false,\n        col = this._findCol(header.textContent),\n        width;\n      if (col) {\n        exists = true;\n      } else {\n        col = {\n          title: header.textContent.trim()\n        };\n      }\n      if (!col.field) {\n        col.field = header.textContent.trim().toLowerCase().replaceAll(\" \", \"_\");\n      }\n      width = header.getAttribute(\"width\");\n      if (width && !col.width) {\n        col.width = width;\n      }\n\n      //check for Tabulator inline options\n      this._extractOptions(header, col, this.table.columnManager.optionsList.registeredDefaults);\n      this.fieldIndex[index] = col.field;\n      if (col.field == this.table.options.index) {\n        this.hasIndex = true;\n      }\n      if (!exists) {\n        this.table.options.columns.push(col);\n      }\n    }\n  }\n\n  //generate blank headers\n  _generateBlankHeaders(headers, rows) {\n    for (var index = 0; index < headers.length; index++) {\n      var header = headers[index],\n        col = {\n          title: \"\",\n          field: \"col\" + index\n        };\n      this.fieldIndex[index] = col.field;\n      var width = header.getAttribute(\"width\");\n      if (width) {\n        col.width = width;\n      }\n      this.table.options.columns.push(col);\n    }\n  }\n}\nfunction csv(input) {\n  var data = [],\n    row = 0,\n    col = 0,\n    inQuote = false;\n\n  //Iterate over each character\n  for (let index = 0; index < input.length; index++) {\n    let char = input[index],\n      nextChar = input[index + 1];\n\n    //Initialize empty row\n    if (!data[row]) {\n      data[row] = [];\n    }\n\n    //Initialize empty column\n    if (!data[row][col]) {\n      data[row][col] = \"\";\n    }\n\n    //Handle quotation mark inside string\n    if (char == '\"' && inQuote && nextChar == '\"') {\n      data[row][col] += char;\n      index++;\n      continue;\n    }\n\n    //Begin / End Quote\n    if (char == '\"') {\n      inQuote = !inQuote;\n      continue;\n    }\n\n    //Next column (if not in quote)\n    if (char == ',' && !inQuote) {\n      col++;\n      continue;\n    }\n\n    //New row if new line and not in quote (CRLF) \n    if (char == '\\r' && nextChar == '\\n' && !inQuote) {\n      col = 0;\n      row++;\n      index++;\n      continue;\n    }\n\n    //New row if new line and not in quote (CR or LF) \n    if ((char == '\\r' || char == '\\n') && !inQuote) {\n      col = 0;\n      row++;\n      continue;\n    }\n\n    //Normal Character, append to column\n    data[row][col] += char;\n  }\n  return data;\n}\nfunction json(input) {\n  try {\n    return JSON.parse(input);\n  } catch (e) {\n    console.warn(\"JSON Import Error - File contents is invalid JSON\", e);\n    return Promise.reject();\n  }\n}\nfunction array$1(input) {\n  return input;\n}\nfunction xlsx(input, floop) {\n  var workbook2 = XLSX.read(input);\n  var sheet = workbook2.Sheets[workbook2.SheetNames[0]];\n  return XLSX.utils.sheet_to_json(sheet, {});\n}\nvar defaultImporters = {\n  csv: csv,\n  json: json,\n  array: array$1,\n  xlsx: xlsx\n};\nclass Import extends Module {\n  static moduleName = \"import\";\n\n  //load defaults\n  static importers = defaultImporters;\n  constructor(table) {\n    super(table);\n    this.registerTableOption(\"importFormat\");\n    this.registerTableOption(\"importReader\", \"text\");\n  }\n  initialize() {\n    this.registerTableFunction(\"import\", this.importFromFile.bind(this));\n    if (this.table.options.importFormat) {\n      this.subscribe(\"data-loading\", this.loadDataCheck.bind(this), 10);\n      this.subscribe(\"data-load\", this.loadData.bind(this), 10);\n    }\n  }\n  loadDataCheck(data) {\n    return this.table.options.importFormat && (typeof data === \"string\" || Array.isArray(data) && data.length && Array.isArray(data));\n  }\n  loadData(data, params, config, silent, previousData) {\n    return this.importData(this.lookupImporter(), data).then(this.structureData.bind(this)).catch(err => {\n      console.error(\"Import Error:\", err || \"Unable to import data\");\n      return Promise.reject(err);\n    });\n  }\n  lookupImporter(importFormat) {\n    var importer;\n    if (!importFormat) {\n      importFormat = this.table.options.importFormat;\n    }\n    if (typeof importFormat === \"string\") {\n      importer = Import.importers[importFormat];\n    } else {\n      importer = importFormat;\n    }\n    if (!importer) {\n      console.error(\"Import Error - Importer not found:\", importFormat);\n    }\n    return importer;\n  }\n  importFromFile(importFormat, extension, importReader) {\n    var importer = this.lookupImporter(importFormat);\n    if (importer) {\n      return this.pickFile(extension, importReader).then(this.importData.bind(this, importer)).then(this.structureData.bind(this)).then(this.setData.bind(this)).catch(err => {\n        this.dispatch(\"import-error\", err);\n        this.dispatchExternal(\"importError\", err);\n        console.error(\"Import Error:\", err || \"Unable to import file\");\n        return Promise.reject(err);\n      });\n    }\n  }\n  pickFile(extensions, importReader) {\n    return new Promise((resolve, reject) => {\n      var input = document.createElement(\"input\");\n      input.type = \"file\";\n      input.accept = extensions;\n      input.addEventListener(\"change\", e => {\n        var file = input.files[0],\n          reader = new FileReader();\n        this.dispatch(\"import-importing\", input.files);\n        this.dispatchExternal(\"importImporting\", input.files);\n        switch (importReader || this.table.options.importReader) {\n          case \"buffer\":\n            reader.readAsArrayBuffer(file);\n            break;\n          case \"binary\":\n            reader.readAsBinaryString(file);\n            break;\n          case \"url\":\n            reader.readAsDataURL(file);\n            break;\n          case \"text\":\n          default:\n            reader.readAsText(file);\n        }\n        reader.onload = e => {\n          resolve(reader.result);\n        };\n        reader.onerror = e => {\n          console.warn(\"File Load Error - Unable to read file\");\n          reject();\n        };\n      });\n      this.dispatch(\"import-choose\");\n      this.dispatchExternal(\"importChoose\");\n      input.click();\n    });\n  }\n  importData(importer, fileContents) {\n    var data = importer.call(this.table, fileContents);\n    if (data instanceof Promise) {\n      return data;\n    } else {\n      return data ? Promise.resolve(data) : Promise.reject();\n    }\n  }\n  structureData(parsedData) {\n    var data = [];\n    if (Array.isArray(parsedData) && parsedData.length && Array.isArray(parsedData[0])) {\n      if (this.table.options.autoColumns) {\n        data = this.structureArrayToObject(parsedData);\n      } else {\n        data = this.structureArrayToColumns(parsedData);\n      }\n      return data;\n    } else {\n      return parsedData;\n    }\n  }\n  structureArrayToObject(parsedData) {\n    var columns = parsedData.shift();\n    var data = parsedData.map(values => {\n      var row = {};\n      columns.forEach((key, i) => {\n        row[key] = values[i];\n      });\n      return row;\n    });\n    return data;\n  }\n  structureArrayToColumns(parsedData) {\n    var data = [],\n      columns = this.table.getColumns();\n\n    //remove first row if it is the column names\n    if (columns[0] && parsedData[0][0]) {\n      if (columns[0].getDefinition().title === parsedData[0][0]) {\n        parsedData.shift();\n      }\n    }\n\n    //convert row arrays to objects\n    parsedData.forEach(rowData => {\n      var row = {};\n      rowData.forEach((value, index) => {\n        var column = columns[index];\n        if (column) {\n          row[column.getField()] = value;\n        }\n      });\n      data.push(row);\n    });\n    return data;\n  }\n  setData(data) {\n    this.dispatch(\"import-imported\", data);\n    this.dispatchExternal(\"importImported\", data);\n    return this.table.setData(data);\n  }\n}\nclass Interaction extends Module {\n  static moduleName = \"interaction\";\n  constructor(table) {\n    super(table);\n    this.eventMap = {\n      //row events\n      rowClick: \"row-click\",\n      rowDblClick: \"row-dblclick\",\n      rowContext: \"row-contextmenu\",\n      rowMouseEnter: \"row-mouseenter\",\n      rowMouseLeave: \"row-mouseleave\",\n      rowMouseOver: \"row-mouseover\",\n      rowMouseOut: \"row-mouseout\",\n      rowMouseMove: \"row-mousemove\",\n      rowMouseDown: \"row-mousedown\",\n      rowMouseUp: \"row-mouseup\",\n      rowTap: \"row\",\n      rowDblTap: \"row\",\n      rowTapHold: \"row\",\n      //cell events\n      cellClick: \"cell-click\",\n      cellDblClick: \"cell-dblclick\",\n      cellContext: \"cell-contextmenu\",\n      cellMouseEnter: \"cell-mouseenter\",\n      cellMouseLeave: \"cell-mouseleave\",\n      cellMouseOver: \"cell-mouseover\",\n      cellMouseOut: \"cell-mouseout\",\n      cellMouseMove: \"cell-mousemove\",\n      cellMouseDown: \"cell-mousedown\",\n      cellMouseUp: \"cell-mouseup\",\n      cellTap: \"cell\",\n      cellDblTap: \"cell\",\n      cellTapHold: \"cell\",\n      //column header events\n      headerClick: \"column-click\",\n      headerDblClick: \"column-dblclick\",\n      headerContext: \"column-contextmenu\",\n      headerMouseEnter: \"column-mouseenter\",\n      headerMouseLeave: \"column-mouseleave\",\n      headerMouseOver: \"column-mouseover\",\n      headerMouseOut: \"column-mouseout\",\n      headerMouseMove: \"column-mousemove\",\n      headerMouseDown: \"column-mousedown\",\n      headerMouseUp: \"column-mouseup\",\n      headerTap: \"column\",\n      headerDblTap: \"column\",\n      headerTapHold: \"column\",\n      //group header\n      groupClick: \"group-click\",\n      groupDblClick: \"group-dblclick\",\n      groupContext: \"group-contextmenu\",\n      groupMouseEnter: \"group-mouseenter\",\n      groupMouseLeave: \"group-mouseleave\",\n      groupMouseOver: \"group-mouseover\",\n      groupMouseOut: \"group-mouseout\",\n      groupMouseMove: \"group-mousemove\",\n      groupMouseDown: \"group-mousedown\",\n      groupMouseUp: \"group-mouseup\",\n      groupTap: \"group\",\n      groupDblTap: \"group\",\n      groupTapHold: \"group\"\n    };\n    this.subscribers = {};\n    this.touchSubscribers = {};\n    this.columnSubscribers = {};\n    this.touchWatchers = {\n      row: {\n        tap: null,\n        tapDbl: null,\n        tapHold: null\n      },\n      cell: {\n        tap: null,\n        tapDbl: null,\n        tapHold: null\n      },\n      column: {\n        tap: null,\n        tapDbl: null,\n        tapHold: null\n      },\n      group: {\n        tap: null,\n        tapDbl: null,\n        tapHold: null\n      }\n    };\n    this.registerColumnOption(\"headerClick\");\n    this.registerColumnOption(\"headerDblClick\");\n    this.registerColumnOption(\"headerContext\");\n    this.registerColumnOption(\"headerMouseEnter\");\n    this.registerColumnOption(\"headerMouseLeave\");\n    this.registerColumnOption(\"headerMouseOver\");\n    this.registerColumnOption(\"headerMouseOut\");\n    this.registerColumnOption(\"headerMouseMove\");\n    this.registerColumnOption(\"headerMouseDown\");\n    this.registerColumnOption(\"headerMouseUp\");\n    this.registerColumnOption(\"headerTap\");\n    this.registerColumnOption(\"headerDblTap\");\n    this.registerColumnOption(\"headerTapHold\");\n    this.registerColumnOption(\"cellClick\");\n    this.registerColumnOption(\"cellDblClick\");\n    this.registerColumnOption(\"cellContext\");\n    this.registerColumnOption(\"cellMouseEnter\");\n    this.registerColumnOption(\"cellMouseLeave\");\n    this.registerColumnOption(\"cellMouseOver\");\n    this.registerColumnOption(\"cellMouseOut\");\n    this.registerColumnOption(\"cellMouseMove\");\n    this.registerColumnOption(\"cellMouseDown\");\n    this.registerColumnOption(\"cellMouseUp\");\n    this.registerColumnOption(\"cellTap\");\n    this.registerColumnOption(\"cellDblTap\");\n    this.registerColumnOption(\"cellTapHold\");\n  }\n  initialize() {\n    this.initializeExternalEvents();\n    this.subscribe(\"column-init\", this.initializeColumn.bind(this));\n    this.subscribe(\"cell-dblclick\", this.cellContentsSelectionFixer.bind(this));\n    this.subscribe(\"scroll-horizontal\", this.clearTouchWatchers.bind(this));\n    this.subscribe(\"scroll-vertical\", this.clearTouchWatchers.bind(this));\n  }\n  clearTouchWatchers() {\n    var types = Object.values(this.touchWatchers);\n    types.forEach(type => {\n      for (let key in type) {\n        type[key] = null;\n      }\n    });\n  }\n  cellContentsSelectionFixer(e, cell) {\n    var range;\n    if (this.table.modExists(\"edit\")) {\n      if (this.table.modules.edit.currentCell === cell) {\n        return; //prevent instant selection of editor content\n      }\n    }\n    e.preventDefault();\n    try {\n      if (document.selection) {\n        // IE\n        range = document.body.createTextRange();\n        range.moveToElementText(cell.getElement());\n        range.select();\n      } else if (window.getSelection) {\n        range = document.createRange();\n        range.selectNode(cell.getElement());\n        window.getSelection().removeAllRanges();\n        window.getSelection().addRange(range);\n      }\n    } catch (e) {}\n  }\n  initializeExternalEvents() {\n    for (let key in this.eventMap) {\n      this.subscriptionChangeExternal(key, this.subscriptionChanged.bind(this, key));\n    }\n  }\n  subscriptionChanged(key, added) {\n    if (added) {\n      if (!this.subscribers[key]) {\n        if (this.eventMap[key].includes(\"-\")) {\n          this.subscribers[key] = this.handle.bind(this, key);\n          this.subscribe(this.eventMap[key], this.subscribers[key]);\n        } else {\n          this.subscribeTouchEvents(key);\n        }\n      }\n    } else {\n      if (this.eventMap[key].includes(\"-\")) {\n        if (this.subscribers[key] && !this.columnSubscribers[key] && !this.subscribedExternal(key)) {\n          this.unsubscribe(this.eventMap[key], this.subscribers[key]);\n          delete this.subscribers[key];\n        }\n      } else {\n        this.unsubscribeTouchEvents(key);\n      }\n    }\n  }\n  subscribeTouchEvents(key) {\n    var type = this.eventMap[key];\n    if (!this.touchSubscribers[type + \"-touchstart\"]) {\n      this.touchSubscribers[type + \"-touchstart\"] = this.handleTouch.bind(this, type, \"start\");\n      this.touchSubscribers[type + \"-touchend\"] = this.handleTouch.bind(this, type, \"end\");\n      this.subscribe(type + \"-touchstart\", this.touchSubscribers[type + \"-touchstart\"]);\n      this.subscribe(type + \"-touchend\", this.touchSubscribers[type + \"-touchend\"]);\n    }\n    this.subscribers[key] = true;\n  }\n  unsubscribeTouchEvents(key) {\n    var noTouch = true,\n      type = this.eventMap[key];\n    if (this.subscribers[key] && !this.subscribedExternal(key)) {\n      delete this.subscribers[key];\n      for (let i in this.eventMap) {\n        if (this.eventMap[i] === type) {\n          if (this.subscribers[i]) {\n            noTouch = false;\n          }\n        }\n      }\n      if (noTouch) {\n        this.unsubscribe(type + \"-touchstart\", this.touchSubscribers[type + \"-touchstart\"]);\n        this.unsubscribe(type + \"-touchend\", this.touchSubscribers[type + \"-touchend\"]);\n        delete this.touchSubscribers[type + \"-touchstart\"];\n        delete this.touchSubscribers[type + \"-touchend\"];\n      }\n    }\n  }\n  initializeColumn(column) {\n    var def = column.definition;\n    for (let key in this.eventMap) {\n      if (def[key]) {\n        this.subscriptionChanged(key, true);\n        if (!this.columnSubscribers[key]) {\n          this.columnSubscribers[key] = [];\n        }\n        this.columnSubscribers[key].push(column);\n      }\n    }\n  }\n  handle(action, e, component) {\n    this.dispatchEvent(action, e, component);\n  }\n  handleTouch(type, action, e, component) {\n    var watchers = this.touchWatchers[type];\n    if (type === \"column\") {\n      type = \"header\";\n    }\n    switch (action) {\n      case \"start\":\n        watchers.tap = true;\n        clearTimeout(watchers.tapHold);\n        watchers.tapHold = setTimeout(() => {\n          clearTimeout(watchers.tapHold);\n          watchers.tapHold = null;\n          watchers.tap = null;\n          clearTimeout(watchers.tapDbl);\n          watchers.tapDbl = null;\n          this.dispatchEvent(type + \"TapHold\", e, component);\n        }, 1000);\n        break;\n      case \"end\":\n        if (watchers.tap) {\n          watchers.tap = null;\n          this.dispatchEvent(type + \"Tap\", e, component);\n        }\n        if (watchers.tapDbl) {\n          clearTimeout(watchers.tapDbl);\n          watchers.tapDbl = null;\n          this.dispatchEvent(type + \"DblTap\", e, component);\n        } else {\n          watchers.tapDbl = setTimeout(() => {\n            clearTimeout(watchers.tapDbl);\n            watchers.tapDbl = null;\n          }, 300);\n        }\n        clearTimeout(watchers.tapHold);\n        watchers.tapHold = null;\n        break;\n    }\n  }\n  dispatchEvent(action, e, component) {\n    var componentObj = component.getComponent(),\n      callback;\n    if (this.columnSubscribers[action]) {\n      if (component instanceof Cell) {\n        callback = component.column.definition[action];\n      } else if (component instanceof Column) {\n        callback = component.definition[action];\n      }\n      if (callback) {\n        callback(e, componentObj);\n      }\n    }\n    this.dispatchExternal(action, e, componentObj);\n  }\n}\nvar defaultBindings = {\n  navPrev: \"shift + 9\",\n  navNext: 9,\n  navUp: 38,\n  navDown: 40,\n  navLeft: 37,\n  navRight: 39,\n  scrollPageUp: 33,\n  scrollPageDown: 34,\n  scrollToStart: 36,\n  scrollToEnd: 35\n};\nvar defaultActions = {\n  keyBlock: function (e) {\n    e.stopPropagation();\n    e.preventDefault();\n  },\n  scrollPageUp: function (e) {\n    var rowManager = this.table.rowManager,\n      newPos = rowManager.scrollTop - rowManager.element.clientHeight;\n    e.preventDefault();\n    if (rowManager.displayRowsCount) {\n      if (newPos >= 0) {\n        rowManager.element.scrollTop = newPos;\n      } else {\n        rowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n      }\n    }\n    this.table.element.focus();\n  },\n  scrollPageDown: function (e) {\n    var rowManager = this.table.rowManager,\n      newPos = rowManager.scrollTop + rowManager.element.clientHeight,\n      scrollMax = rowManager.element.scrollHeight;\n    e.preventDefault();\n    if (rowManager.displayRowsCount) {\n      if (newPos <= scrollMax) {\n        rowManager.element.scrollTop = newPos;\n      } else {\n        rowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n      }\n    }\n    this.table.element.focus();\n  },\n  scrollToStart: function (e) {\n    var rowManager = this.table.rowManager;\n    e.preventDefault();\n    if (rowManager.displayRowsCount) {\n      rowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n    }\n    this.table.element.focus();\n  },\n  scrollToEnd: function (e) {\n    var rowManager = this.table.rowManager;\n    e.preventDefault();\n    if (rowManager.displayRowsCount) {\n      rowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n    }\n    this.table.element.focus();\n  },\n  navPrev: function (e) {\n    this.dispatch(\"keybinding-nav-prev\", e);\n  },\n  navNext: function (e) {\n    this.dispatch(\"keybinding-nav-next\", e);\n  },\n  navLeft: function (e) {\n    this.dispatch(\"keybinding-nav-left\", e);\n  },\n  navRight: function (e) {\n    this.dispatch(\"keybinding-nav-right\", e);\n  },\n  navUp: function (e) {\n    this.dispatch(\"keybinding-nav-up\", e);\n  },\n  navDown: function (e) {\n    this.dispatch(\"keybinding-nav-down\", e);\n  }\n};\nclass Keybindings extends Module {\n  static moduleName = \"keybindings\";\n\n  //load defaults\n  static bindings = defaultBindings;\n  static actions = defaultActions;\n  constructor(table) {\n    super(table);\n    this.watchKeys = null;\n    this.pressedKeys = null;\n    this.keyupBinding = false;\n    this.keydownBinding = false;\n    this.registerTableOption(\"keybindings\", {}); //array for keybindings\n    this.registerTableOption(\"tabEndNewRow\", false); //create new row when tab to end of table\n  }\n  initialize() {\n    var bindings = this.table.options.keybindings,\n      mergedBindings = {};\n    this.watchKeys = {};\n    this.pressedKeys = [];\n    if (bindings !== false) {\n      Object.assign(mergedBindings, Keybindings.bindings);\n      Object.assign(mergedBindings, bindings);\n      this.mapBindings(mergedBindings);\n      this.bindEvents();\n    }\n    this.subscribe(\"table-destroy\", this.clearBindings.bind(this));\n  }\n  mapBindings(bindings) {\n    for (let key in bindings) {\n      if (Keybindings.actions[key]) {\n        if (bindings[key]) {\n          if (typeof bindings[key] !== \"object\") {\n            bindings[key] = [bindings[key]];\n          }\n          bindings[key].forEach(binding => {\n            var bindingList = Array.isArray(binding) ? binding : [binding];\n            bindingList.forEach(item => {\n              this.mapBinding(key, item);\n            });\n          });\n        }\n      } else {\n        console.warn(\"Key Binding Error - no such action:\", key);\n      }\n    }\n  }\n  mapBinding(action, symbolsList) {\n    var binding = {\n      action: Keybindings.actions[action],\n      keys: [],\n      ctrl: false,\n      shift: false,\n      meta: false\n    };\n    var symbols = symbolsList.toString().toLowerCase().split(\" \").join(\"\").split(\"+\");\n    symbols.forEach(symbol => {\n      switch (symbol) {\n        case \"ctrl\":\n          binding.ctrl = true;\n          break;\n        case \"shift\":\n          binding.shift = true;\n          break;\n        case \"meta\":\n          binding.meta = true;\n          break;\n        default:\n          symbol = isNaN(symbol) ? symbol.toUpperCase().charCodeAt(0) : parseInt(symbol);\n          binding.keys.push(symbol);\n          if (!this.watchKeys[symbol]) {\n            this.watchKeys[symbol] = [];\n          }\n          this.watchKeys[symbol].push(binding);\n      }\n    });\n  }\n  bindEvents() {\n    var self = this;\n    this.keyupBinding = function (e) {\n      var code = e.keyCode;\n      var bindings = self.watchKeys[code];\n      if (bindings) {\n        self.pressedKeys.push(code);\n        bindings.forEach(function (binding) {\n          self.checkBinding(e, binding);\n        });\n      }\n    };\n    this.keydownBinding = function (e) {\n      var code = e.keyCode;\n      var bindings = self.watchKeys[code];\n      if (bindings) {\n        var index = self.pressedKeys.indexOf(code);\n        if (index > -1) {\n          self.pressedKeys.splice(index, 1);\n        }\n      }\n    };\n    this.table.element.addEventListener(\"keydown\", this.keyupBinding);\n    this.table.element.addEventListener(\"keyup\", this.keydownBinding);\n  }\n  clearBindings() {\n    if (this.keyupBinding) {\n      this.table.element.removeEventListener(\"keydown\", this.keyupBinding);\n    }\n    if (this.keydownBinding) {\n      this.table.element.removeEventListener(\"keyup\", this.keydownBinding);\n    }\n  }\n  checkBinding(e, binding) {\n    var match = true;\n    if (e.ctrlKey == binding.ctrl && e.shiftKey == binding.shift && e.metaKey == binding.meta) {\n      binding.keys.forEach(key => {\n        var index = this.pressedKeys.indexOf(key);\n        if (index == -1) {\n          match = false;\n        }\n      });\n      if (match) {\n        binding.action.call(this, e);\n      }\n      return true;\n    }\n    return false;\n  }\n}\nclass Menu extends Module {\n  static moduleName = \"menu\";\n  constructor(table) {\n    super(table);\n    this.menuContainer = null;\n    this.nestedMenuBlock = false;\n    this.currentComponent = null;\n    this.rootPopup = null;\n    this.columnSubscribers = {};\n\n    // this.registerTableOption(\"menuContainer\", undefined); //deprecated\n\n    this.registerTableOption(\"rowContextMenu\", false);\n    this.registerTableOption(\"rowClickMenu\", false);\n    this.registerTableOption(\"rowDblClickMenu\", false);\n    this.registerTableOption(\"groupContextMenu\", false);\n    this.registerTableOption(\"groupClickMenu\", false);\n    this.registerTableOption(\"groupDblClickMenu\", false);\n    this.registerColumnOption(\"headerContextMenu\");\n    this.registerColumnOption(\"headerClickMenu\");\n    this.registerColumnOption(\"headerDblClickMenu\");\n    this.registerColumnOption(\"headerMenu\");\n    this.registerColumnOption(\"headerMenuIcon\");\n    this.registerColumnOption(\"contextMenu\");\n    this.registerColumnOption(\"clickMenu\");\n    this.registerColumnOption(\"dblClickMenu\");\n  }\n  initialize() {\n    this.deprecatedOptionsCheck();\n    this.initializeRowWatchers();\n    this.initializeGroupWatchers();\n    this.subscribe(\"column-init\", this.initializeColumn.bind(this));\n  }\n  deprecatedOptionsCheck() {\n    // if(!this.deprecationCheck(\"menuContainer\", \"popupContainer\")){\n    // \tthis.table.options.popupContainer = this.table.options.menuContainer;\n    // }\n  }\n  initializeRowWatchers() {\n    if (this.table.options.rowContextMenu) {\n      this.subscribe(\"row-contextmenu\", this.loadMenuEvent.bind(this, this.table.options.rowContextMenu));\n      this.table.on(\"rowTapHold\", this.loadMenuEvent.bind(this, this.table.options.rowContextMenu));\n    }\n    if (this.table.options.rowClickMenu) {\n      this.subscribe(\"row-click\", this.loadMenuEvent.bind(this, this.table.options.rowClickMenu));\n    }\n    if (this.table.options.rowDblClickMenu) {\n      this.subscribe(\"row-dblclick\", this.loadMenuEvent.bind(this, this.table.options.rowDblClickMenu));\n    }\n  }\n  initializeGroupWatchers() {\n    if (this.table.options.groupContextMenu) {\n      this.subscribe(\"group-contextmenu\", this.loadMenuEvent.bind(this, this.table.options.groupContextMenu));\n      this.table.on(\"groupTapHold\", this.loadMenuEvent.bind(this, this.table.options.groupContextMenu));\n    }\n    if (this.table.options.groupClickMenu) {\n      this.subscribe(\"group-click\", this.loadMenuEvent.bind(this, this.table.options.groupClickMenu));\n    }\n    if (this.table.options.groupDblClickMenu) {\n      this.subscribe(\"group-dblclick\", this.loadMenuEvent.bind(this, this.table.options.groupDblClickMenu));\n    }\n  }\n  initializeColumn(column) {\n    var def = column.definition;\n\n    //handle column events\n    if (def.headerContextMenu && !this.columnSubscribers.headerContextMenu) {\n      this.columnSubscribers.headerContextMenu = this.loadMenuTableColumnEvent.bind(this, \"headerContextMenu\");\n      this.subscribe(\"column-contextmenu\", this.columnSubscribers.headerContextMenu);\n      this.table.on(\"headerTapHold\", this.loadMenuTableColumnEvent.bind(this, \"headerContextMenu\"));\n    }\n    if (def.headerClickMenu && !this.columnSubscribers.headerClickMenu) {\n      this.columnSubscribers.headerClickMenu = this.loadMenuTableColumnEvent.bind(this, \"headerClickMenu\");\n      this.subscribe(\"column-click\", this.columnSubscribers.headerClickMenu);\n    }\n    if (def.headerDblClickMenu && !this.columnSubscribers.headerDblClickMenu) {\n      this.columnSubscribers.headerDblClickMenu = this.loadMenuTableColumnEvent.bind(this, \"headerDblClickMenu\");\n      this.subscribe(\"column-dblclick\", this.columnSubscribers.headerDblClickMenu);\n    }\n    if (def.headerMenu) {\n      this.initializeColumnHeaderMenu(column);\n    }\n\n    //handle cell events\n    if (def.contextMenu && !this.columnSubscribers.contextMenu) {\n      this.columnSubscribers.contextMenu = this.loadMenuTableCellEvent.bind(this, \"contextMenu\");\n      this.subscribe(\"cell-contextmenu\", this.columnSubscribers.contextMenu);\n      this.table.on(\"cellTapHold\", this.loadMenuTableCellEvent.bind(this, \"contextMenu\"));\n    }\n    if (def.clickMenu && !this.columnSubscribers.clickMenu) {\n      this.columnSubscribers.clickMenu = this.loadMenuTableCellEvent.bind(this, \"clickMenu\");\n      this.subscribe(\"cell-click\", this.columnSubscribers.clickMenu);\n    }\n    if (def.dblClickMenu && !this.columnSubscribers.dblClickMenu) {\n      this.columnSubscribers.dblClickMenu = this.loadMenuTableCellEvent.bind(this, \"dblClickMenu\");\n      this.subscribe(\"cell-dblclick\", this.columnSubscribers.dblClickMenu);\n    }\n  }\n  initializeColumnHeaderMenu(column) {\n    var icon = column.definition.headerMenuIcon,\n      headerMenuEl;\n    headerMenuEl = document.createElement(\"span\");\n    headerMenuEl.classList.add(\"tabulator-header-popup-button\");\n    if (icon) {\n      if (typeof icon === \"function\") {\n        icon = icon(column.getComponent());\n      }\n      if (icon instanceof HTMLElement) {\n        headerMenuEl.appendChild(icon);\n      } else {\n        headerMenuEl.innerHTML = icon;\n      }\n    } else {\n      headerMenuEl.innerHTML = \"&vellip;\";\n    }\n    headerMenuEl.addEventListener(\"click\", e => {\n      e.stopPropagation();\n      e.preventDefault();\n      this.loadMenuEvent(column.definition.headerMenu, e, column);\n    });\n    column.titleElement.insertBefore(headerMenuEl, column.titleElement.firstChild);\n  }\n  loadMenuTableCellEvent(option, e, cell) {\n    if (cell._cell) {\n      cell = cell._cell;\n    }\n    if (cell.column.definition[option]) {\n      this.loadMenuEvent(cell.column.definition[option], e, cell);\n    }\n  }\n  loadMenuTableColumnEvent(option, e, column) {\n    if (column._column) {\n      column = column._column;\n    }\n    if (column.definition[option]) {\n      this.loadMenuEvent(column.definition[option], e, column);\n    }\n  }\n  loadMenuEvent(menu, e, component) {\n    if (component._group) {\n      component = component._group;\n    } else if (component._row) {\n      component = component._row;\n    }\n    menu = typeof menu == \"function\" ? menu.call(this.table, e, component.getComponent()) : menu;\n    this.loadMenu(e, component, menu);\n  }\n  loadMenu(e, component, menu, parentEl, parentPopup) {\n    var touch = !(e instanceof MouseEvent),\n      menuEl = document.createElement(\"div\"),\n      popup;\n    menuEl.classList.add(\"tabulator-menu\");\n    if (!touch) {\n      e.preventDefault();\n    }\n\n    //abort if no menu set\n    if (!menu || !menu.length) {\n      return;\n    }\n    if (!parentEl) {\n      if (this.nestedMenuBlock) {\n        //abort if child menu already open\n        if (this.rootPopup) {\n          return;\n        }\n      } else {\n        this.nestedMenuBlock = setTimeout(() => {\n          this.nestedMenuBlock = false;\n        }, 100);\n      }\n      if (this.rootPopup) {\n        this.rootPopup.hide();\n      }\n      this.rootPopup = popup = this.popup(menuEl);\n    } else {\n      popup = parentPopup.child(menuEl);\n    }\n    menu.forEach(item => {\n      var itemEl = document.createElement(\"div\"),\n        label = item.label,\n        disabled = item.disabled;\n      if (item.separator) {\n        itemEl.classList.add(\"tabulator-menu-separator\");\n      } else {\n        itemEl.classList.add(\"tabulator-menu-item\");\n        if (typeof label == \"function\") {\n          label = label.call(this.table, component.getComponent());\n        }\n        if (label instanceof Node) {\n          itemEl.appendChild(label);\n        } else {\n          itemEl.innerHTML = label;\n        }\n        if (typeof disabled == \"function\") {\n          disabled = disabled.call(this.table, component.getComponent());\n        }\n        if (disabled) {\n          itemEl.classList.add(\"tabulator-menu-item-disabled\");\n          itemEl.addEventListener(\"click\", e => {\n            e.stopPropagation();\n          });\n        } else {\n          if (item.menu && item.menu.length) {\n            itemEl.addEventListener(\"click\", e => {\n              e.stopPropagation();\n              this.loadMenu(e, component, item.menu, itemEl, popup);\n            });\n          } else {\n            if (item.action) {\n              itemEl.addEventListener(\"click\", e => {\n                item.action(e, component.getComponent());\n              });\n            }\n          }\n        }\n        if (item.menu && item.menu.length) {\n          itemEl.classList.add(\"tabulator-menu-item-submenu\");\n        }\n      }\n      menuEl.appendChild(itemEl);\n    });\n    menuEl.addEventListener(\"click\", e => {\n      if (this.rootPopup) {\n        this.rootPopup.hide();\n      }\n    });\n    popup.show(parentEl || e);\n    if (popup === this.rootPopup) {\n      this.rootPopup.hideOnBlur(() => {\n        this.rootPopup = null;\n        if (this.currentComponent) {\n          this.dispatch(\"menu-closed\", menu, popup);\n          this.dispatchExternal(\"menuClosed\", this.currentComponent.getComponent());\n          this.currentComponent = null;\n        }\n      });\n      this.currentComponent = component;\n      this.dispatch(\"menu-opened\", menu, popup);\n      this.dispatchExternal(\"menuOpened\", component.getComponent());\n    }\n  }\n}\nclass MoveColumns extends Module {\n  static moduleName = \"moveColumn\";\n  constructor(table) {\n    super(table);\n    this.placeholderElement = this.createPlaceholderElement();\n    this.hoverElement = false; //floating column header element\n    this.checkTimeout = false; //click check timeout holder\n    this.checkPeriod = 250; //period to wait on mousedown to consider this a move and not a click\n    this.moving = false; //currently moving column\n    this.toCol = false; //destination column\n    this.toColAfter = false; //position of moving column relative to the destination column\n    this.startX = 0; //starting position within header element\n    this.autoScrollMargin = 40; //auto scroll on edge when within margin\n    this.autoScrollStep = 5; //auto scroll distance in pixels\n    this.autoScrollTimeout = false; //auto scroll timeout\n    this.touchMove = false;\n    this.moveHover = this.moveHover.bind(this);\n    this.endMove = this.endMove.bind(this);\n    this.registerTableOption(\"movableColumns\", false); //enable movable columns\n  }\n  createPlaceholderElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-col\");\n    el.classList.add(\"tabulator-col-placeholder\");\n    return el;\n  }\n  initialize() {\n    if (this.table.options.movableColumns) {\n      this.subscribe(\"column-init\", this.initializeColumn.bind(this));\n      this.subscribe(\"alert-show\", this.abortMove.bind(this));\n    }\n  }\n  abortMove() {\n    clearTimeout(this.checkTimeout);\n  }\n  initializeColumn(column) {\n    var self = this,\n      config = {},\n      colEl;\n    if (!column.modules.frozen && !column.isGroup && !column.isRowHeader) {\n      colEl = column.getElement();\n      config.mousemove = function (e) {\n        if (column.parent === self.moving.parent) {\n          if ((self.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(colEl).left + self.table.columnManager.contentsElement.scrollLeft > column.getWidth() / 2) {\n            if (self.toCol !== column || !self.toColAfter) {\n              colEl.parentNode.insertBefore(self.placeholderElement, colEl.nextSibling);\n              self.moveColumn(column, true);\n            }\n          } else {\n            if (self.toCol !== column || self.toColAfter) {\n              colEl.parentNode.insertBefore(self.placeholderElement, colEl);\n              self.moveColumn(column, false);\n            }\n          }\n        }\n      }.bind(self);\n      colEl.addEventListener(\"mousedown\", function (e) {\n        self.touchMove = false;\n        if (e.which === 1) {\n          self.checkTimeout = setTimeout(function () {\n            self.startMove(e, column);\n          }, self.checkPeriod);\n        }\n      });\n      colEl.addEventListener(\"mouseup\", function (e) {\n        if (e.which === 1) {\n          if (self.checkTimeout) {\n            clearTimeout(self.checkTimeout);\n          }\n        }\n      });\n      self.bindTouchEvents(column);\n    }\n    column.modules.moveColumn = config;\n  }\n  bindTouchEvents(column) {\n    var colEl = column.getElement(),\n      startXMove = false,\n      //shifting center position of the cell\n      nextCol,\n      prevCol,\n      nextColWidth,\n      prevColWidth,\n      nextColWidthLast,\n      prevColWidthLast;\n    colEl.addEventListener(\"touchstart\", e => {\n      this.checkTimeout = setTimeout(() => {\n        this.touchMove = true;\n        nextCol = column.nextColumn();\n        nextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\n        prevCol = column.prevColumn();\n        prevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\n        nextColWidthLast = 0;\n        prevColWidthLast = 0;\n        startXMove = false;\n        this.startMove(e, column);\n      }, this.checkPeriod);\n    }, {\n      passive: true\n    });\n    colEl.addEventListener(\"touchmove\", e => {\n      var diff, moveToCol;\n      if (this.moving) {\n        this.moveHover(e);\n        if (!startXMove) {\n          startXMove = e.touches[0].pageX;\n        }\n        diff = e.touches[0].pageX - startXMove;\n        if (diff > 0) {\n          if (nextCol && diff - nextColWidthLast > nextColWidth) {\n            moveToCol = nextCol;\n            if (moveToCol !== column) {\n              startXMove = e.touches[0].pageX;\n              moveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement().nextSibling);\n              this.moveColumn(moveToCol, true);\n            }\n          }\n        } else {\n          if (prevCol && -diff - prevColWidthLast > prevColWidth) {\n            moveToCol = prevCol;\n            if (moveToCol !== column) {\n              startXMove = e.touches[0].pageX;\n              moveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement());\n              this.moveColumn(moveToCol, false);\n            }\n          }\n        }\n        if (moveToCol) {\n          nextCol = moveToCol.nextColumn();\n          nextColWidthLast = nextColWidth;\n          nextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\n          prevCol = moveToCol.prevColumn();\n          prevColWidthLast = prevColWidth;\n          prevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\n        }\n      }\n    }, {\n      passive: true\n    });\n    colEl.addEventListener(\"touchend\", e => {\n      if (this.checkTimeout) {\n        clearTimeout(this.checkTimeout);\n      }\n      if (this.moving) {\n        this.endMove(e);\n      }\n    });\n  }\n  startMove(e, column) {\n    var element = column.getElement(),\n      headerElement = this.table.columnManager.getContentsElement(),\n      headersElement = this.table.columnManager.getHeadersElement();\n    this.moving = column;\n    this.startX = (this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(element).left;\n    this.table.element.classList.add(\"tabulator-block-select\");\n\n    //create placeholder\n    this.placeholderElement.style.width = column.getWidth() + \"px\";\n    this.placeholderElement.style.height = column.getHeight() + \"px\";\n    element.parentNode.insertBefore(this.placeholderElement, element);\n    element.parentNode.removeChild(element);\n\n    //create hover element\n    this.hoverElement = element.cloneNode(true);\n    this.hoverElement.classList.add(\"tabulator-moving\");\n    headerElement.appendChild(this.hoverElement);\n    this.hoverElement.style.left = \"0\";\n    this.hoverElement.style.bottom = headerElement.clientHeight - headersElement.offsetHeight + \"px\";\n    if (!this.touchMove) {\n      this._bindMouseMove();\n      document.body.addEventListener(\"mousemove\", this.moveHover);\n      document.body.addEventListener(\"mouseup\", this.endMove);\n    }\n    this.moveHover(e);\n  }\n  _bindMouseMove() {\n    this.table.columnManager.columnsByIndex.forEach(function (column) {\n      if (column.modules.moveColumn.mousemove) {\n        column.getElement().addEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n      }\n    });\n  }\n  _unbindMouseMove() {\n    this.table.columnManager.columnsByIndex.forEach(function (column) {\n      if (column.modules.moveColumn.mousemove) {\n        column.getElement().removeEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n      }\n    });\n  }\n  moveColumn(column, after) {\n    var movingCells = this.moving.getCells();\n    this.toCol = column;\n    this.toColAfter = after;\n    if (after) {\n      column.getCells().forEach(function (cell, i) {\n        var cellEl = cell.getElement(true);\n        if (cellEl.parentNode && movingCells[i]) {\n          cellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl.nextSibling);\n        }\n      });\n    } else {\n      column.getCells().forEach(function (cell, i) {\n        var cellEl = cell.getElement(true);\n        if (cellEl.parentNode && movingCells[i]) {\n          cellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl);\n        }\n      });\n    }\n  }\n  endMove(e) {\n    if (e.which === 1 || this.touchMove) {\n      this._unbindMouseMove();\n      this.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n      this.placeholderElement.parentNode.removeChild(this.placeholderElement);\n      this.hoverElement.parentNode.removeChild(this.hoverElement);\n      this.table.element.classList.remove(\"tabulator-block-select\");\n      if (this.toCol) {\n        this.table.columnManager.moveColumnActual(this.moving, this.toCol, this.toColAfter);\n      }\n      this.moving = false;\n      this.toCol = false;\n      this.toColAfter = false;\n      if (!this.touchMove) {\n        document.body.removeEventListener(\"mousemove\", this.moveHover);\n        document.body.removeEventListener(\"mouseup\", this.endMove);\n      }\n    }\n  }\n  moveHover(e) {\n    var columnHolder = this.table.columnManager.getContentsElement(),\n      scrollLeft = columnHolder.scrollLeft,\n      xPos = (this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(columnHolder).left + scrollLeft,\n      scrollPos;\n    this.hoverElement.style.left = xPos - this.startX + \"px\";\n    if (xPos - scrollLeft < this.autoScrollMargin) {\n      if (!this.autoScrollTimeout) {\n        this.autoScrollTimeout = setTimeout(() => {\n          scrollPos = Math.max(0, scrollLeft - 5);\n          this.table.rowManager.getElement().scrollLeft = scrollPos;\n          this.autoScrollTimeout = false;\n        }, 1);\n      }\n    }\n    if (scrollLeft + columnHolder.clientWidth - xPos < this.autoScrollMargin) {\n      if (!this.autoScrollTimeout) {\n        this.autoScrollTimeout = setTimeout(() => {\n          scrollPos = Math.min(columnHolder.clientWidth, scrollLeft + 5);\n          this.table.rowManager.getElement().scrollLeft = scrollPos;\n          this.autoScrollTimeout = false;\n        }, 1);\n      }\n    }\n  }\n}\nvar defaultSenders = {\n  delete: function (fromRow, toRow, toTable) {\n    fromRow.delete();\n  }\n};\nvar defaultReceivers = {\n  insert: function (fromRow, toRow, fromTable) {\n    this.table.addRow(fromRow.getData(), undefined, toRow);\n    return true;\n  },\n  add: function (fromRow, toRow, fromTable) {\n    this.table.addRow(fromRow.getData());\n    return true;\n  },\n  update: function (fromRow, toRow, fromTable) {\n    if (toRow) {\n      toRow.update(fromRow.getData());\n      return true;\n    }\n    return false;\n  },\n  replace: function (fromRow, toRow, fromTable) {\n    if (toRow) {\n      this.table.addRow(fromRow.getData(), undefined, toRow);\n      toRow.delete();\n      return true;\n    }\n    return false;\n  }\n};\nclass MoveRows extends Module {\n  static moduleName = \"moveRow\";\n\n  //load defaults\n  static senders = defaultSenders;\n  static receivers = defaultReceivers;\n  constructor(table) {\n    super(table);\n    this.placeholderElement = this.createPlaceholderElement();\n    this.hoverElement = false; //floating row header element\n    this.checkTimeout = false; //click check timeout holder\n    this.checkPeriod = 150; //period to wait on mousedown to consider this a move and not a click\n    this.moving = false; //currently moving row\n    this.toRow = false; //destination row\n    this.toRowAfter = false; //position of moving row relative to the destination row\n    this.hasHandle = false; //row has handle instead of fully movable row\n    this.startY = 0; //starting Y position within header element\n    this.startX = 0; //starting X position within header element\n\n    this.moveHover = this.moveHover.bind(this);\n    this.endMove = this.endMove.bind(this);\n    this.tableRowDropEvent = false;\n    this.touchMove = false;\n    this.connection = false;\n    this.connectionSelectorsTables = false;\n    this.connectionSelectorsElements = false;\n    this.connectionElements = [];\n    this.connections = [];\n    this.connectedTable = false;\n    this.connectedRow = false;\n    this.registerTableOption(\"movableRows\", false); //enable movable rows\n    this.registerTableOption(\"movableRowsConnectedTables\", false); //tables for movable rows to be connected to\n    this.registerTableOption(\"movableRowsConnectedElements\", false); //other elements for movable rows to be connected to\n    this.registerTableOption(\"movableRowsSender\", false);\n    this.registerTableOption(\"movableRowsReceiver\", \"insert\");\n    this.registerColumnOption(\"rowHandle\");\n  }\n  createPlaceholderElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-row\");\n    el.classList.add(\"tabulator-row-placeholder\");\n    return el;\n  }\n  initialize() {\n    if (this.table.options.movableRows) {\n      this.connectionSelectorsTables = this.table.options.movableRowsConnectedTables;\n      this.connectionSelectorsElements = this.table.options.movableRowsConnectedElements;\n      this.connection = this.connectionSelectorsTables || this.connectionSelectorsElements;\n      this.subscribe(\"cell-init\", this.initializeCell.bind(this));\n      this.subscribe(\"column-init\", this.initializeColumn.bind(this));\n      this.subscribe(\"row-init\", this.initializeRow.bind(this));\n    }\n  }\n  initializeGroupHeader(group) {\n    var self = this,\n      config = {};\n\n    //inter table drag drop\n    config.mouseup = function (e) {\n      self.tableRowDrop(e, group);\n    }.bind(self);\n\n    //same table drag drop\n    config.mousemove = function (e) {\n      var rowEl;\n      if (e.pageY - Helpers.elOffset(group.element).top + self.table.rowManager.element.scrollTop > group.getHeight() / 2) {\n        if (self.toRow !== group || !self.toRowAfter) {\n          rowEl = group.getElement();\n          rowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n          self.moveRow(group, true);\n        }\n      } else {\n        if (self.toRow !== group || self.toRowAfter) {\n          rowEl = group.getElement();\n          if (rowEl.previousSibling) {\n            rowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n            self.moveRow(group, false);\n          }\n        }\n      }\n    }.bind(self);\n    group.modules.moveRow = config;\n  }\n  initializeRow(row) {\n    var self = this,\n      config = {},\n      rowEl;\n\n    //inter table drag drop\n    config.mouseup = function (e) {\n      self.tableRowDrop(e, row);\n    }.bind(self);\n\n    //same table drag drop\n    config.mousemove = function (e) {\n      var rowEl = row.getElement();\n      if (e.pageY - Helpers.elOffset(rowEl).top + self.table.rowManager.element.scrollTop > row.getHeight() / 2) {\n        if (self.toRow !== row || !self.toRowAfter) {\n          rowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n          self.moveRow(row, true);\n        }\n      } else {\n        if (self.toRow !== row || self.toRowAfter) {\n          rowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n          self.moveRow(row, false);\n        }\n      }\n    }.bind(self);\n    if (!this.hasHandle) {\n      rowEl = row.getElement();\n      rowEl.addEventListener(\"mousedown\", function (e) {\n        if (e.which === 1) {\n          self.checkTimeout = setTimeout(function () {\n            self.startMove(e, row);\n          }, self.checkPeriod);\n        }\n      });\n      rowEl.addEventListener(\"mouseup\", function (e) {\n        if (e.which === 1) {\n          if (self.checkTimeout) {\n            clearTimeout(self.checkTimeout);\n          }\n        }\n      });\n      this.bindTouchEvents(row, row.getElement());\n    }\n    row.modules.moveRow = config;\n  }\n  initializeColumn(column) {\n    if (column.definition.rowHandle && this.table.options.movableRows !== false) {\n      this.hasHandle = true;\n    }\n  }\n  initializeCell(cell) {\n    if (cell.column.definition.rowHandle && this.table.options.movableRows !== false) {\n      var self = this,\n        cellEl = cell.getElement(true);\n      cellEl.addEventListener(\"mousedown\", function (e) {\n        if (e.which === 1) {\n          self.checkTimeout = setTimeout(function () {\n            self.startMove(e, cell.row);\n          }, self.checkPeriod);\n        }\n      });\n      cellEl.addEventListener(\"mouseup\", function (e) {\n        if (e.which === 1) {\n          if (self.checkTimeout) {\n            clearTimeout(self.checkTimeout);\n          }\n        }\n      });\n      this.bindTouchEvents(cell.row, cellEl);\n    }\n  }\n  bindTouchEvents(row, element) {\n    var startYMove = false,\n      //shifting center position of the cell\n      nextRow,\n      prevRow,\n      nextRowHeight,\n      prevRowHeight,\n      nextRowHeightLast,\n      prevRowHeightLast;\n    element.addEventListener(\"touchstart\", e => {\n      this.checkTimeout = setTimeout(() => {\n        this.touchMove = true;\n        nextRow = row.nextRow();\n        nextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\n        prevRow = row.prevRow();\n        prevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\n        nextRowHeightLast = 0;\n        prevRowHeightLast = 0;\n        startYMove = false;\n        this.startMove(e, row);\n      }, this.checkPeriod);\n    }, {\n      passive: true\n    });\n    this.moving, this.toRow, this.toRowAfter;\n    element.addEventListener(\"touchmove\", e => {\n      var diff, moveToRow;\n      if (this.moving) {\n        e.preventDefault();\n        this.moveHover(e);\n        if (!startYMove) {\n          startYMove = e.touches[0].pageY;\n        }\n        diff = e.touches[0].pageY - startYMove;\n        if (diff > 0) {\n          if (nextRow && diff - nextRowHeightLast > nextRowHeight) {\n            moveToRow = nextRow;\n            if (moveToRow !== row) {\n              startYMove = e.touches[0].pageY;\n              moveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement().nextSibling);\n              this.moveRow(moveToRow, true);\n            }\n          }\n        } else {\n          if (prevRow && -diff - prevRowHeightLast > prevRowHeight) {\n            moveToRow = prevRow;\n            if (moveToRow !== row) {\n              startYMove = e.touches[0].pageY;\n              moveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement());\n              this.moveRow(moveToRow, false);\n            }\n          }\n        }\n        if (moveToRow) {\n          nextRow = moveToRow.nextRow();\n          nextRowHeightLast = nextRowHeight;\n          nextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\n          prevRow = moveToRow.prevRow();\n          prevRowHeightLast = prevRowHeight;\n          prevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\n        }\n      }\n    });\n    element.addEventListener(\"touchend\", e => {\n      if (this.checkTimeout) {\n        clearTimeout(this.checkTimeout);\n      }\n      if (this.moving) {\n        this.endMove(e);\n        this.touchMove = false;\n      }\n    });\n  }\n  _bindMouseMove() {\n    this.table.rowManager.getDisplayRows().forEach(row => {\n      if ((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow && row.modules.moveRow.mousemove) {\n        row.getElement().addEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n      }\n    });\n  }\n  _unbindMouseMove() {\n    this.table.rowManager.getDisplayRows().forEach(row => {\n      if ((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow && row.modules.moveRow.mousemove) {\n        row.getElement().removeEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n      }\n    });\n  }\n  startMove(e, row) {\n    var element = row.getElement();\n    this.setStartPosition(e, row);\n    this.moving = row;\n    this.table.element.classList.add(\"tabulator-block-select\");\n\n    //create placeholder\n    this.placeholderElement.style.width = row.getWidth() + \"px\";\n    this.placeholderElement.style.height = row.getHeight() + \"px\";\n    if (!this.connection) {\n      element.parentNode.insertBefore(this.placeholderElement, element);\n      element.parentNode.removeChild(element);\n    } else {\n      this.table.element.classList.add(\"tabulator-movingrow-sending\");\n      this.connectToTables(row);\n    }\n\n    //create hover element\n    this.hoverElement = element.cloneNode(true);\n    this.hoverElement.classList.add(\"tabulator-moving\");\n    if (this.connection) {\n      document.body.appendChild(this.hoverElement);\n      this.hoverElement.style.left = \"0\";\n      this.hoverElement.style.top = \"0\";\n      this.hoverElement.style.width = this.table.element.clientWidth + \"px\";\n      this.hoverElement.style.whiteSpace = \"nowrap\";\n      this.hoverElement.style.overflow = \"hidden\";\n      this.hoverElement.style.pointerEvents = \"none\";\n    } else {\n      this.table.rowManager.getTableElement().appendChild(this.hoverElement);\n      this.hoverElement.style.left = \"0\";\n      this.hoverElement.style.top = \"0\";\n      this._bindMouseMove();\n    }\n    document.body.addEventListener(\"mousemove\", this.moveHover);\n    document.body.addEventListener(\"mouseup\", this.endMove);\n    this.dispatchExternal(\"rowMoving\", row.getComponent());\n    this.moveHover(e);\n  }\n  setStartPosition(e, row) {\n    var pageX = this.touchMove ? e.touches[0].pageX : e.pageX,\n      pageY = this.touchMove ? e.touches[0].pageY : e.pageY,\n      element,\n      position;\n    element = row.getElement();\n    if (this.connection) {\n      position = element.getBoundingClientRect();\n      this.startX = position.left - pageX + window.pageXOffset;\n      this.startY = position.top - pageY + window.pageYOffset;\n    } else {\n      this.startY = pageY - element.getBoundingClientRect().top;\n    }\n  }\n  endMove(e) {\n    if (!e || e.which === 1 || this.touchMove) {\n      this._unbindMouseMove();\n      if (!this.connection) {\n        this.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n        this.placeholderElement.parentNode.removeChild(this.placeholderElement);\n      }\n      this.hoverElement.parentNode.removeChild(this.hoverElement);\n      this.table.element.classList.remove(\"tabulator-block-select\");\n      if (this.toRow) {\n        this.table.rowManager.moveRow(this.moving, this.toRow, this.toRowAfter);\n      } else {\n        this.dispatchExternal(\"rowMoveCancelled\", this.moving.getComponent());\n      }\n      this.moving = false;\n      this.toRow = false;\n      this.toRowAfter = false;\n      document.body.removeEventListener(\"mousemove\", this.moveHover);\n      document.body.removeEventListener(\"mouseup\", this.endMove);\n      if (this.connection) {\n        this.table.element.classList.remove(\"tabulator-movingrow-sending\");\n        this.disconnectFromTables();\n      }\n    }\n  }\n  moveRow(row, after) {\n    this.toRow = row;\n    this.toRowAfter = after;\n  }\n  moveHover(e) {\n    if (this.connection) {\n      this.moveHoverConnections.call(this, e);\n    } else {\n      this.moveHoverTable.call(this, e);\n    }\n  }\n  moveHoverTable(e) {\n    var rowHolder = this.table.rowManager.getElement(),\n      scrollTop = rowHolder.scrollTop,\n      yPos = (this.touchMove ? e.touches[0].pageY : e.pageY) - rowHolder.getBoundingClientRect().top + scrollTop;\n    this.hoverElement.style.top = Math.min(yPos - this.startY, this.table.rowManager.element.scrollHeight - this.hoverElement.offsetHeight) + \"px\";\n  }\n  moveHoverConnections(e) {\n    this.hoverElement.style.left = this.startX + (this.touchMove ? e.touches[0].pageX : e.pageX) + \"px\";\n    this.hoverElement.style.top = this.startY + (this.touchMove ? e.touches[0].pageY : e.pageY) + \"px\";\n  }\n  elementRowDrop(e, element, row) {\n    this.dispatchExternal(\"movableRowsElementDrop\", e, element, row ? row.getComponent() : false);\n  }\n\n  //establish connection with other tables\n  connectToTables(row) {\n    var connectionTables;\n    if (this.connectionSelectorsTables) {\n      connectionTables = this.commsConnections(this.connectionSelectorsTables);\n      this.dispatchExternal(\"movableRowsSendingStart\", connectionTables);\n      this.commsSend(this.connectionSelectorsTables, \"moveRow\", \"connect\", {\n        row: row\n      });\n    }\n    if (this.connectionSelectorsElements) {\n      this.connectionElements = [];\n      if (!Array.isArray(this.connectionSelectorsElements)) {\n        this.connectionSelectorsElements = [this.connectionSelectorsElements];\n      }\n      this.connectionSelectorsElements.forEach(query => {\n        if (typeof query === \"string\") {\n          this.connectionElements = this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(query)));\n        } else {\n          this.connectionElements.push(query);\n        }\n      });\n      this.connectionElements.forEach(element => {\n        var dropEvent = e => {\n          this.elementRowDrop(e, element, this.moving);\n        };\n        element.addEventListener(\"mouseup\", dropEvent);\n        element.tabulatorElementDropEvent = dropEvent;\n        element.classList.add(\"tabulator-movingrow-receiving\");\n      });\n    }\n  }\n\n  //disconnect from other tables\n  disconnectFromTables() {\n    var connectionTables;\n    if (this.connectionSelectorsTables) {\n      connectionTables = this.commsConnections(this.connectionSelectorsTables);\n      this.dispatchExternal(\"movableRowsSendingStop\", connectionTables);\n      this.commsSend(this.connectionSelectorsTables, \"moveRow\", \"disconnect\");\n    }\n    this.connectionElements.forEach(element => {\n      element.classList.remove(\"tabulator-movingrow-receiving\");\n      element.removeEventListener(\"mouseup\", element.tabulatorElementDropEvent);\n      delete element.tabulatorElementDropEvent;\n    });\n  }\n\n  //accept incomming connection\n  connect(table, row) {\n    if (!this.connectedTable) {\n      this.connectedTable = table;\n      this.connectedRow = row;\n      this.table.element.classList.add(\"tabulator-movingrow-receiving\");\n      this.table.rowManager.getDisplayRows().forEach(row => {\n        if (row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup) {\n          row.getElement().addEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n        }\n      });\n      this.tableRowDropEvent = this.tableRowDrop.bind(this);\n      this.table.element.addEventListener(\"mouseup\", this.tableRowDropEvent);\n      this.dispatchExternal(\"movableRowsReceivingStart\", row, table);\n      return true;\n    } else {\n      console.warn(\"Move Row Error - Table cannot accept connection, already connected to table:\", this.connectedTable);\n      return false;\n    }\n  }\n\n  //close incoming connection\n  disconnect(table) {\n    if (table === this.connectedTable) {\n      this.connectedTable = false;\n      this.connectedRow = false;\n      this.table.element.classList.remove(\"tabulator-movingrow-receiving\");\n      this.table.rowManager.getDisplayRows().forEach(row => {\n        if (row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup) {\n          row.getElement().removeEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n        }\n      });\n      this.table.element.removeEventListener(\"mouseup\", this.tableRowDropEvent);\n      this.dispatchExternal(\"movableRowsReceivingStop\", table);\n    } else {\n      console.warn(\"Move Row Error - trying to disconnect from non connected table\");\n    }\n  }\n  dropComplete(table, row, success) {\n    var sender = false;\n    if (success) {\n      switch (typeof this.table.options.movableRowsSender) {\n        case \"string\":\n          sender = MoveRows.senders[this.table.options.movableRowsSender];\n          break;\n        case \"function\":\n          sender = this.table.options.movableRowsSender;\n          break;\n      }\n      if (sender) {\n        sender.call(this, this.moving ? this.moving.getComponent() : undefined, row ? row.getComponent() : undefined, table);\n      } else {\n        if (this.table.options.movableRowsSender) {\n          console.warn(\"Mover Row Error - no matching sender found:\", this.table.options.movableRowsSender);\n        }\n      }\n      this.dispatchExternal(\"movableRowsSent\", this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n    } else {\n      this.dispatchExternal(\"movableRowsSentFailed\", this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n    }\n    this.endMove();\n  }\n  tableRowDrop(e, row) {\n    var receiver = false,\n      success = false;\n    e.stopImmediatePropagation();\n    switch (typeof this.table.options.movableRowsReceiver) {\n      case \"string\":\n        receiver = MoveRows.receivers[this.table.options.movableRowsReceiver];\n        break;\n      case \"function\":\n        receiver = this.table.options.movableRowsReceiver;\n        break;\n    }\n    if (receiver) {\n      success = receiver.call(this, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n    } else {\n      console.warn(\"Mover Row Error - no matching receiver found:\", this.table.options.movableRowsReceiver);\n    }\n    if (success) {\n      this.dispatchExternal(\"movableRowsReceived\", this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n    } else {\n      this.dispatchExternal(\"movableRowsReceivedFailed\", this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n    }\n    this.commsSend(this.connectedTable, \"moveRow\", \"dropcomplete\", {\n      row: row,\n      success: success\n    });\n  }\n  commsReceived(table, action, data) {\n    switch (action) {\n      case \"connect\":\n        return this.connect(table, data.row);\n      case \"disconnect\":\n        return this.disconnect(table);\n      case \"dropcomplete\":\n        return this.dropComplete(table, data.row, data.success);\n    }\n  }\n}\nvar defaultMutators = {};\nclass Mutator extends Module {\n  static moduleName = \"mutator\";\n\n  //load defaults\n  static mutators = defaultMutators;\n  constructor(table) {\n    super(table);\n    this.allowedTypes = [\"\", \"data\", \"edit\", \"clipboard\"]; //list of mutation types\n    this.enabled = true;\n    this.registerColumnOption(\"mutator\");\n    this.registerColumnOption(\"mutatorParams\");\n    this.registerColumnOption(\"mutatorData\");\n    this.registerColumnOption(\"mutatorDataParams\");\n    this.registerColumnOption(\"mutatorEdit\");\n    this.registerColumnOption(\"mutatorEditParams\");\n    this.registerColumnOption(\"mutatorClipboard\");\n    this.registerColumnOption(\"mutatorClipboardParams\");\n    this.registerColumnOption(\"mutateLink\");\n  }\n  initialize() {\n    this.subscribe(\"cell-value-changing\", this.transformCell.bind(this));\n    this.subscribe(\"cell-value-changed\", this.mutateLink.bind(this));\n    this.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n    this.subscribe(\"row-data-init-before\", this.rowDataChanged.bind(this));\n    this.subscribe(\"row-data-changing\", this.rowDataChanged.bind(this));\n  }\n  rowDataChanged(row, tempData, updatedData) {\n    return this.transformRow(tempData, \"data\", updatedData);\n  }\n\n  //initialize column mutator\n  initializeColumn(column) {\n    var match = false,\n      config = {};\n    this.allowedTypes.forEach(type => {\n      var key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n        mutator;\n      if (column.definition[key]) {\n        mutator = this.lookupMutator(column.definition[key]);\n        if (mutator) {\n          match = true;\n          config[key] = {\n            mutator: mutator,\n            params: column.definition[key + \"Params\"] || {}\n          };\n        }\n      }\n    });\n    if (match) {\n      column.modules.mutate = config;\n    }\n  }\n  lookupMutator(value) {\n    var mutator = false;\n\n    //set column mutator\n    switch (typeof value) {\n      case \"string\":\n        if (Mutator.mutators[value]) {\n          mutator = Mutator.mutators[value];\n        } else {\n          console.warn(\"Mutator Error - No such mutator found, ignoring: \", value);\n        }\n        break;\n      case \"function\":\n        mutator = value;\n        break;\n    }\n    return mutator;\n  }\n\n  //apply mutator to row\n  transformRow(data, type, updatedData) {\n    var key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n      value;\n    if (this.enabled) {\n      this.table.columnManager.traverse(column => {\n        var mutator, params, component;\n        if (column.modules.mutate) {\n          mutator = column.modules.mutate[key] || column.modules.mutate.mutator || false;\n          if (mutator) {\n            value = column.getFieldValue(typeof updatedData !== \"undefined\" ? updatedData : data);\n            if (type == \"data\" && !updatedData || typeof value !== \"undefined\") {\n              component = column.getComponent();\n              params = typeof mutator.params === \"function\" ? mutator.params(value, data, type, component) : mutator.params;\n              column.setFieldValue(data, mutator.mutator(value, data, type, params, component));\n            }\n          }\n        }\n      });\n    }\n    return data;\n  }\n\n  //apply mutator to new cell value\n  transformCell(cell, value) {\n    if (cell.column.modules.mutate) {\n      var mutator = cell.column.modules.mutate.mutatorEdit || cell.column.modules.mutate.mutator || false,\n        tempData = {};\n      if (mutator) {\n        tempData = Object.assign(tempData, cell.row.getData());\n        cell.column.setFieldValue(tempData, value);\n        return mutator.mutator(value, tempData, \"edit\", mutator.params, cell.getComponent());\n      }\n    }\n    return value;\n  }\n  mutateLink(cell) {\n    var links = cell.column.definition.mutateLink;\n    if (links) {\n      if (!Array.isArray(links)) {\n        links = [links];\n      }\n      links.forEach(link => {\n        var linkCell = cell.row.getCell(link);\n        if (linkCell) {\n          linkCell.setValue(linkCell.getValue(), true, true);\n        }\n      });\n    }\n  }\n  enable() {\n    this.enabled = true;\n  }\n  disable() {\n    this.enabled = false;\n  }\n}\nfunction rows(pageSize, currentRow, currentPage, totalRows, totalPages) {\n  var el = document.createElement(\"span\"),\n    showingEl = document.createElement(\"span\"),\n    valueEl = document.createElement(\"span\"),\n    ofEl = document.createElement(\"span\"),\n    totalEl = document.createElement(\"span\"),\n    rowsEl = document.createElement(\"span\");\n  this.table.modules.localize.langBind(\"pagination|counter|showing\", value => {\n    showingEl.innerHTML = value;\n  });\n  this.table.modules.localize.langBind(\"pagination|counter|of\", value => {\n    ofEl.innerHTML = value;\n  });\n  this.table.modules.localize.langBind(\"pagination|counter|rows\", value => {\n    rowsEl.innerHTML = value;\n  });\n  if (totalRows) {\n    valueEl.innerHTML = \" \" + currentRow + \"-\" + Math.min(currentRow + pageSize - 1, totalRows) + \" \";\n    totalEl.innerHTML = \" \" + totalRows + \" \";\n    el.appendChild(showingEl);\n    el.appendChild(valueEl);\n    el.appendChild(ofEl);\n    el.appendChild(totalEl);\n    el.appendChild(rowsEl);\n  } else {\n    valueEl.innerHTML = \" 0 \";\n    el.appendChild(showingEl);\n    el.appendChild(valueEl);\n    el.appendChild(rowsEl);\n  }\n  return el;\n}\nfunction pages(pageSize, currentRow, currentPage, totalRows, totalPages) {\n  var el = document.createElement(\"span\"),\n    showingEl = document.createElement(\"span\"),\n    valueEl = document.createElement(\"span\"),\n    ofEl = document.createElement(\"span\"),\n    totalEl = document.createElement(\"span\"),\n    rowsEl = document.createElement(\"span\");\n  this.table.modules.localize.langBind(\"pagination|counter|showing\", value => {\n    showingEl.innerHTML = value;\n  });\n  valueEl.innerHTML = \" \" + currentPage + \" \";\n  this.table.modules.localize.langBind(\"pagination|counter|of\", value => {\n    ofEl.innerHTML = value;\n  });\n  totalEl.innerHTML = \" \" + totalPages + \" \";\n  this.table.modules.localize.langBind(\"pagination|counter|pages\", value => {\n    rowsEl.innerHTML = value;\n  });\n  el.appendChild(showingEl);\n  el.appendChild(valueEl);\n  el.appendChild(ofEl);\n  el.appendChild(totalEl);\n  el.appendChild(rowsEl);\n  return el;\n}\nvar defaultPageCounters = {\n  rows: rows,\n  pages: pages\n};\nclass Page extends Module {\n  static moduleName = \"page\";\n\n  //load defaults\n  static pageCounters = defaultPageCounters;\n  constructor(table) {\n    super(table);\n    this.mode = \"local\";\n    this.progressiveLoad = false;\n    this.element = null;\n    this.pageCounterElement = null;\n    this.pageCounter = null;\n    this.size = 0;\n    this.page = 1;\n    this.count = 5;\n    this.max = 1;\n    this.remoteRowCountEstimate = null;\n    this.initialLoad = true;\n    this.dataChanging = false; //flag to check if data is being changed by this module\n\n    this.pageSizes = [];\n    this.registerTableOption(\"pagination\", false); //set pagination type\n    this.registerTableOption(\"paginationMode\", \"local\"); //local or remote pagination\n    this.registerTableOption(\"paginationSize\", false); //set number of rows to a page\n    this.registerTableOption(\"paginationInitialPage\", 1); //initial page to show on load\n    this.registerTableOption(\"paginationCounter\", false); // set pagination counter\n    this.registerTableOption(\"paginationCounterElement\", false); // set pagination counter\n    this.registerTableOption(\"paginationButtonCount\", 5); // set count of page button\n    this.registerTableOption(\"paginationSizeSelector\", false); //add pagination size selector element\n    this.registerTableOption(\"paginationElement\", false); //element to hold pagination numbers\n    // this.registerTableOption(\"paginationDataSent\", {}); //pagination data sent to the server\n    // this.registerTableOption(\"paginationDataReceived\", {}); //pagination data received from the server\n    this.registerTableOption(\"paginationAddRow\", \"page\"); //add rows on table or page\n\n    this.registerTableOption(\"progressiveLoad\", false); //progressive loading\n    this.registerTableOption(\"progressiveLoadDelay\", 0); //delay between requests\n    this.registerTableOption(\"progressiveLoadScrollMargin\", 0); //margin before scroll begins\n\n    this.registerTableFunction(\"setMaxPage\", this.setMaxPage.bind(this));\n    this.registerTableFunction(\"setPage\", this.setPage.bind(this));\n    this.registerTableFunction(\"setPageToRow\", this.userSetPageToRow.bind(this));\n    this.registerTableFunction(\"setPageSize\", this.userSetPageSize.bind(this));\n    this.registerTableFunction(\"getPageSize\", this.getPageSize.bind(this));\n    this.registerTableFunction(\"previousPage\", this.previousPage.bind(this));\n    this.registerTableFunction(\"nextPage\", this.nextPage.bind(this));\n    this.registerTableFunction(\"getPage\", this.getPage.bind(this));\n    this.registerTableFunction(\"getPageMax\", this.getPageMax.bind(this));\n\n    //register component functions\n    this.registerComponentFunction(\"row\", \"pageTo\", this.setPageToRow.bind(this));\n  }\n  initialize() {\n    if (this.table.options.pagination) {\n      this.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n      this.subscribe(\"row-added\", this.rowsUpdated.bind(this));\n      this.subscribe(\"data-processed\", this.initialLoadComplete.bind(this));\n      this.subscribe(\"table-built\", this.calculatePageSizes.bind(this));\n      this.subscribe(\"footer-redraw\", this.footerRedraw.bind(this));\n      if (this.table.options.paginationAddRow == \"page\") {\n        this.subscribe(\"row-adding-position\", this.rowAddingPosition.bind(this));\n      }\n      if (this.table.options.paginationMode === \"remote\") {\n        this.subscribe(\"data-params\", this.remotePageParams.bind(this));\n        this.subscribe(\"data-loaded\", this._parseRemoteData.bind(this));\n      }\n      if (this.table.options.progressiveLoad) {\n        console.error(\"Progressive Load Error - Pagination and progressive load cannot be used at the same time\");\n      }\n      this.registerDisplayHandler(this.restOnRenderBefore.bind(this), 40);\n      this.registerDisplayHandler(this.getRows.bind(this), 50);\n      this.createElements();\n      this.initializePageCounter();\n      this.initializePaginator();\n    } else if (this.table.options.progressiveLoad) {\n      this.subscribe(\"data-params\", this.remotePageParams.bind(this));\n      this.subscribe(\"data-loaded\", this._parseRemoteData.bind(this));\n      this.subscribe(\"table-built\", this.calculatePageSizes.bind(this));\n      this.subscribe(\"data-processed\", this.initialLoadComplete.bind(this));\n      this.initializeProgressive(this.table.options.progressiveLoad);\n      if (this.table.options.progressiveLoad === \"scroll\") {\n        this.subscribe(\"scroll-vertical\", this.scrollVertical.bind(this));\n      }\n    }\n  }\n  rowAddingPosition(row, top) {\n    var rowManager = this.table.rowManager,\n      displayRows = rowManager.getDisplayRows(),\n      index;\n    if (top) {\n      if (displayRows.length) {\n        index = displayRows[0];\n      } else {\n        if (rowManager.activeRows.length) {\n          index = rowManager.activeRows[rowManager.activeRows.length - 1];\n          top = false;\n        }\n      }\n    } else {\n      if (displayRows.length) {\n        index = displayRows[displayRows.length - 1];\n        top = displayRows.length < this.size ? false : true;\n      }\n    }\n    return {\n      index,\n      top\n    };\n  }\n  calculatePageSizes() {\n    var testElRow, testElCell;\n    if (this.table.options.paginationSize) {\n      this.size = this.table.options.paginationSize;\n    } else {\n      testElRow = document.createElement(\"div\");\n      testElRow.classList.add(\"tabulator-row\");\n      testElRow.style.visibility = \"hidden\";\n      testElCell = document.createElement(\"div\");\n      testElCell.classList.add(\"tabulator-cell\");\n      testElCell.innerHTML = \"Page Row Test\";\n      testElRow.appendChild(testElCell);\n      this.table.rowManager.getTableElement().appendChild(testElRow);\n      this.size = Math.floor(this.table.rowManager.getElement().clientHeight / testElRow.offsetHeight);\n      this.table.rowManager.getTableElement().removeChild(testElRow);\n    }\n    this.dispatchExternal(\"pageSizeChanged\", this.size);\n    this.generatePageSizeSelectList();\n  }\n  initialLoadComplete() {\n    this.initialLoad = false;\n  }\n  remotePageParams(data, config, silent, params) {\n    if (!this.initialLoad) {\n      if (this.progressiveLoad && !silent || !this.progressiveLoad && !this.dataChanging) {\n        this.reset(true);\n      }\n    }\n\n    //configure request params\n    params.page = this.page;\n\n    //set page size if defined\n    if (this.size) {\n      params.size = this.size;\n    }\n    return params;\n  }\n\n  ///////////////////////////////////\n  ///////// Table Functions /////////\n  ///////////////////////////////////\n\n  userSetPageToRow(row) {\n    if (this.table.options.pagination) {\n      row = this.table.rowManager.findRow(row);\n      if (row) {\n        return this.setPageToRow(row);\n      }\n    }\n    return Promise.reject();\n  }\n  userSetPageSize(size) {\n    if (this.table.options.pagination) {\n      this.setPageSize(size);\n      return this.setPage(1);\n    } else {\n      return false;\n    }\n  }\n  ///////////////////////////////////\n  ///////// Internal Logic //////////\n  ///////////////////////////////////\n\n  scrollVertical(top, dir) {\n    var element, diff, margin;\n    if (!dir && !this.table.dataLoader.loading) {\n      element = this.table.rowManager.getElement();\n      diff = element.scrollHeight - element.clientHeight - top;\n      margin = this.table.options.progressiveLoadScrollMargin || element.clientHeight * 2;\n      if (diff < margin) {\n        this.nextPage().catch(() => {}); //consume the exception thrown when on the last page\n      }\n    }\n  }\n  restOnRenderBefore(rows, renderInPosition) {\n    if (!renderInPosition) {\n      if (this.mode === \"local\") {\n        this.reset();\n      }\n    }\n    return rows;\n  }\n  rowsUpdated() {\n    this.refreshData(true, \"all\");\n  }\n  createElements() {\n    var button;\n    this.element = document.createElement(\"span\");\n    this.element.classList.add(\"tabulator-paginator\");\n    this.pagesElement = document.createElement(\"span\");\n    this.pagesElement.classList.add(\"tabulator-pages\");\n    button = document.createElement(\"button\");\n    button.classList.add(\"tabulator-page\");\n    button.setAttribute(\"type\", \"button\");\n    button.setAttribute(\"role\", \"button\");\n    button.setAttribute(\"aria-label\", \"\");\n    button.setAttribute(\"title\", \"\");\n    this.firstBut = button.cloneNode(true);\n    this.firstBut.setAttribute(\"data-page\", \"first\");\n    this.prevBut = button.cloneNode(true);\n    this.prevBut.setAttribute(\"data-page\", \"prev\");\n    this.nextBut = button.cloneNode(true);\n    this.nextBut.setAttribute(\"data-page\", \"next\");\n    this.lastBut = button.cloneNode(true);\n    this.lastBut.setAttribute(\"data-page\", \"last\");\n    if (this.table.options.paginationSizeSelector) {\n      this.pageSizeSelect = document.createElement(\"select\");\n      this.pageSizeSelect.classList.add(\"tabulator-page-size\");\n    }\n  }\n  generatePageSizeSelectList() {\n    var pageSizes = [];\n    if (this.pageSizeSelect) {\n      if (Array.isArray(this.table.options.paginationSizeSelector)) {\n        pageSizes = this.table.options.paginationSizeSelector;\n        this.pageSizes = pageSizes;\n        if (this.pageSizes.indexOf(this.size) == -1) {\n          pageSizes.unshift(this.size);\n        }\n      } else {\n        if (this.pageSizes.indexOf(this.size) == -1) {\n          pageSizes = [];\n          for (let i = 1; i < 5; i++) {\n            pageSizes.push(this.size * i);\n          }\n          this.pageSizes = pageSizes;\n        } else {\n          pageSizes = this.pageSizes;\n        }\n      }\n      while (this.pageSizeSelect.firstChild) this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);\n      pageSizes.forEach(item => {\n        var itemEl = document.createElement(\"option\");\n        itemEl.value = item;\n        if (item === true) {\n          this.langBind(\"pagination|all\", function (value) {\n            itemEl.innerHTML = value;\n          });\n        } else {\n          itemEl.innerHTML = item;\n        }\n        this.pageSizeSelect.appendChild(itemEl);\n      });\n      this.pageSizeSelect.value = this.size;\n    }\n  }\n  initializePageCounter() {\n    var counter = this.table.options.paginationCounter,\n      pageCounter = null;\n    if (counter) {\n      if (typeof counter === \"function\") {\n        pageCounter = counter;\n      } else {\n        pageCounter = Page.pageCounters[counter];\n      }\n      if (pageCounter) {\n        this.pageCounter = pageCounter;\n        this.pageCounterElement = document.createElement(\"span\");\n        this.pageCounterElement.classList.add(\"tabulator-page-counter\");\n      } else {\n        console.warn(\"Pagination Error - No such page counter found: \", counter);\n      }\n    }\n  }\n\n  //setup pagination\n  initializePaginator(hidden) {\n    var pageSelectLabel, paginationCounterHolder;\n    if (!hidden) {\n      //build pagination element\n\n      //bind localizations\n      this.langBind(\"pagination|first\", value => {\n        this.firstBut.innerHTML = value;\n      });\n      this.langBind(\"pagination|first_title\", value => {\n        this.firstBut.setAttribute(\"aria-label\", value);\n        this.firstBut.setAttribute(\"title\", value);\n      });\n      this.langBind(\"pagination|prev\", value => {\n        this.prevBut.innerHTML = value;\n      });\n      this.langBind(\"pagination|prev_title\", value => {\n        this.prevBut.setAttribute(\"aria-label\", value);\n        this.prevBut.setAttribute(\"title\", value);\n      });\n      this.langBind(\"pagination|next\", value => {\n        this.nextBut.innerHTML = value;\n      });\n      this.langBind(\"pagination|next_title\", value => {\n        this.nextBut.setAttribute(\"aria-label\", value);\n        this.nextBut.setAttribute(\"title\", value);\n      });\n      this.langBind(\"pagination|last\", value => {\n        this.lastBut.innerHTML = value;\n      });\n      this.langBind(\"pagination|last_title\", value => {\n        this.lastBut.setAttribute(\"aria-label\", value);\n        this.lastBut.setAttribute(\"title\", value);\n      });\n\n      //click bindings\n      this.firstBut.addEventListener(\"click\", () => {\n        this.setPage(1);\n      });\n      this.prevBut.addEventListener(\"click\", () => {\n        this.previousPage();\n      });\n      this.nextBut.addEventListener(\"click\", () => {\n        this.nextPage();\n      });\n      this.lastBut.addEventListener(\"click\", () => {\n        this.setPage(this.max);\n      });\n      if (this.table.options.paginationElement) {\n        this.element = this.table.options.paginationElement;\n      }\n      if (this.pageSizeSelect) {\n        pageSelectLabel = document.createElement(\"label\");\n        this.langBind(\"pagination|page_size\", value => {\n          this.pageSizeSelect.setAttribute(\"aria-label\", value);\n          this.pageSizeSelect.setAttribute(\"title\", value);\n          pageSelectLabel.innerHTML = value;\n        });\n        this.element.appendChild(pageSelectLabel);\n        this.element.appendChild(this.pageSizeSelect);\n        this.pageSizeSelect.addEventListener(\"change\", e => {\n          this.setPageSize(this.pageSizeSelect.value == \"true\" ? true : this.pageSizeSelect.value);\n          this.setPage(1);\n        });\n      }\n\n      //append to DOM\n      this.element.appendChild(this.firstBut);\n      this.element.appendChild(this.prevBut);\n      this.element.appendChild(this.pagesElement);\n      this.element.appendChild(this.nextBut);\n      this.element.appendChild(this.lastBut);\n      if (!this.table.options.paginationElement) {\n        if (this.table.options.paginationCounter) {\n          if (this.table.options.paginationCounterElement) {\n            if (this.table.options.paginationCounterElement instanceof HTMLElement) {\n              this.table.options.paginationCounterElement.appendChild(this.pageCounterElement);\n            } else if (typeof this.table.options.paginationCounterElement === \"string\") {\n              paginationCounterHolder = document.querySelector(this.table.options.paginationCounterElement);\n              if (paginationCounterHolder) {\n                paginationCounterHolder.appendChild(this.pageCounterElement);\n              } else {\n                console.warn(\"Pagination Error - Unable to find element matching paginationCounterElement selector:\", this.table.options.paginationCounterElement);\n              }\n            }\n          } else {\n            this.footerAppend(this.pageCounterElement);\n          }\n        }\n        this.footerAppend(this.element);\n      }\n      this.page = this.table.options.paginationInitialPage;\n      this.count = this.table.options.paginationButtonCount;\n    }\n\n    //set default values\n    this.mode = this.table.options.paginationMode;\n  }\n  initializeProgressive(mode) {\n    this.initializePaginator(true);\n    this.mode = \"progressive_\" + mode;\n    this.progressiveLoad = true;\n  }\n  trackChanges() {\n    this.dispatch(\"page-changed\");\n  }\n\n  //calculate maximum page from number of rows\n  setMaxRows(rowCount) {\n    if (!rowCount) {\n      this.max = 1;\n    } else {\n      this.max = this.size === true ? 1 : Math.ceil(rowCount / this.size);\n    }\n    if (this.page > this.max) {\n      this.page = this.max;\n    }\n  }\n\n  //reset to first page without triggering action\n  reset(force) {\n    if (!this.initialLoad) {\n      if (this.mode == \"local\" || force) {\n        this.page = 1;\n        this.trackChanges();\n      }\n    }\n  }\n\n  //set the maximum page\n  setMaxPage(max) {\n    max = parseInt(max);\n    this.max = max || 1;\n    if (this.page > this.max) {\n      this.page = this.max;\n      this.trigger();\n    }\n  }\n\n  //set current page number\n  setPage(page) {\n    switch (page) {\n      case \"first\":\n        return this.setPage(1);\n      case \"prev\":\n        return this.previousPage();\n      case \"next\":\n        return this.nextPage();\n      case \"last\":\n        return this.setPage(this.max);\n    }\n    page = parseInt(page);\n    if (page > 0 && page <= this.max || this.mode !== \"local\") {\n      this.page = page;\n      this.trackChanges();\n      return this.trigger();\n    } else {\n      console.warn(\"Pagination Error - Requested page is out of range of 1 - \" + this.max + \":\", page);\n      return Promise.reject();\n    }\n  }\n  setPageToRow(row) {\n    var rows = this.displayRows(-1);\n    var index = rows.indexOf(row);\n    if (index > -1) {\n      var page = this.size === true ? 1 : Math.ceil((index + 1) / this.size);\n      return this.setPage(page);\n    } else {\n      console.warn(\"Pagination Error - Requested row is not visible\");\n      return Promise.reject();\n    }\n  }\n  setPageSize(size) {\n    if (size !== true) {\n      size = parseInt(size);\n    }\n    if (size > 0) {\n      this.size = size;\n      this.dispatchExternal(\"pageSizeChanged\", size);\n    }\n    if (this.pageSizeSelect) {\n      // this.pageSizeSelect.value = size;\n      this.generatePageSizeSelectList();\n    }\n    this.trackChanges();\n  }\n  _setPageCounter(totalRows, size, currentRow) {\n    var content;\n    if (this.pageCounter) {\n      if (this.mode === \"remote\") {\n        size = this.size;\n        currentRow = (this.page - 1) * this.size + 1;\n        totalRows = this.remoteRowCountEstimate;\n      }\n      content = this.pageCounter.call(this, size, currentRow, this.page, totalRows, this.max);\n      switch (typeof content) {\n        case \"object\":\n          if (content instanceof Node) {\n            //clear previous cell contents\n            while (this.pageCounterElement.firstChild) this.pageCounterElement.removeChild(this.pageCounterElement.firstChild);\n            this.pageCounterElement.appendChild(content);\n          } else {\n            this.pageCounterElement.innerHTML = \"\";\n            if (content != null) {\n              console.warn(\"Page Counter Error - Page Counter has returned a type of object, the only valid page counter object return is an instance of Node, the page counter returned:\", content);\n            }\n          }\n          break;\n        case \"undefined\":\n          this.pageCounterElement.innerHTML = \"\";\n          break;\n        default:\n          this.pageCounterElement.innerHTML = content;\n      }\n    }\n  }\n\n  //setup the pagination buttons\n  _setPageButtons() {\n    let leftSize = Math.floor((this.count - 1) / 2);\n    let rightSize = Math.ceil((this.count - 1) / 2);\n    let min = this.max - this.page + leftSize + 1 < this.count ? this.max - this.count + 1 : Math.max(this.page - leftSize, 1);\n    let max = this.page <= rightSize ? Math.min(this.count, this.max) : Math.min(this.page + rightSize, this.max);\n    while (this.pagesElement.firstChild) this.pagesElement.removeChild(this.pagesElement.firstChild);\n    if (this.page == 1) {\n      this.firstBut.disabled = true;\n      this.prevBut.disabled = true;\n    } else {\n      this.firstBut.disabled = false;\n      this.prevBut.disabled = false;\n    }\n    if (this.page == this.max) {\n      this.lastBut.disabled = true;\n      this.nextBut.disabled = true;\n    } else {\n      this.lastBut.disabled = false;\n      this.nextBut.disabled = false;\n    }\n    for (let i = min; i <= max; i++) {\n      if (i > 0 && i <= this.max) {\n        this.pagesElement.appendChild(this._generatePageButton(i));\n      }\n    }\n    this.footerRedraw();\n  }\n  _generatePageButton(page) {\n    var button = document.createElement(\"button\");\n    button.classList.add(\"tabulator-page\");\n    if (page == this.page) {\n      button.classList.add(\"active\");\n    }\n    button.setAttribute(\"type\", \"button\");\n    button.setAttribute(\"role\", \"button\");\n    this.langBind(\"pagination|page_title\", value => {\n      button.setAttribute(\"aria-label\", value + \" \" + page);\n      button.setAttribute(\"title\", value + \" \" + page);\n    });\n    button.setAttribute(\"data-page\", page);\n    button.textContent = page;\n    button.addEventListener(\"click\", e => {\n      this.setPage(page);\n    });\n    return button;\n  }\n\n  //previous page\n  previousPage() {\n    if (this.page > 1) {\n      this.page--;\n      this.trackChanges();\n      return this.trigger();\n    } else {\n      console.warn(\"Pagination Error - Previous page would be less than page 1:\", 0);\n      return Promise.reject();\n    }\n  }\n\n  //next page\n  nextPage() {\n    if (this.page < this.max) {\n      this.page++;\n      this.trackChanges();\n      return this.trigger();\n    } else {\n      if (!this.progressiveLoad) {\n        console.warn(\"Pagination Error - Next page would be greater than maximum page of \" + this.max + \":\", this.max + 1);\n      }\n      return Promise.reject();\n    }\n  }\n\n  //return current page number\n  getPage() {\n    return this.page;\n  }\n\n  //return max page number\n  getPageMax() {\n    return this.max;\n  }\n  getPageSize(size) {\n    return this.size;\n  }\n  getMode() {\n    return this.mode;\n  }\n\n  //return appropriate rows for current page\n  getRows(data) {\n    var actualRowPageSize = 0,\n      output,\n      start,\n      end,\n      actualStartRow;\n    var actualRows = data.filter(row => {\n      return row.type === \"row\";\n    });\n    if (this.mode == \"local\") {\n      output = [];\n      this.setMaxRows(data.length);\n      if (this.size === true) {\n        start = 0;\n        end = data.length;\n      } else {\n        start = this.size * (this.page - 1);\n        end = start + parseInt(this.size);\n      }\n      this._setPageButtons();\n      for (let i = start; i < end; i++) {\n        let row = data[i];\n        if (row) {\n          output.push(row);\n          if (row.type === \"row\") {\n            if (!actualStartRow) {\n              actualStartRow = row;\n            }\n            actualRowPageSize++;\n          }\n        }\n      }\n      this._setPageCounter(actualRows.length, actualRowPageSize, actualStartRow ? actualRows.indexOf(actualStartRow) + 1 : 0);\n      return output;\n    } else {\n      this._setPageButtons();\n      this._setPageCounter(actualRows.length);\n      return data.slice(0);\n    }\n  }\n  trigger() {\n    var left;\n    switch (this.mode) {\n      case \"local\":\n        left = this.table.rowManager.scrollLeft;\n        this.refreshData();\n        this.table.rowManager.scrollHorizontal(left);\n        this.dispatchExternal(\"pageLoaded\", this.getPage());\n        return Promise.resolve();\n      case \"remote\":\n        this.dataChanging = true;\n        return this.reloadData(null).finally(() => {\n          this.dataChanging = false;\n        });\n      case \"progressive_load\":\n      case \"progressive_scroll\":\n        return this.reloadData(null, true);\n      default:\n        console.warn(\"Pagination Error - no such pagination mode:\", this.mode);\n        return Promise.reject();\n    }\n  }\n  _parseRemoteData(data) {\n    var margin;\n    if (typeof data.last_page === \"undefined\") {\n      console.warn(\"Remote Pagination Error - Server response missing '\" + (this.options(\"dataReceiveParams\").last_page || \"last_page\") + \"' property\");\n    }\n    if (data.data) {\n      this.max = parseInt(data.last_page) || 1;\n      this.remoteRowCountEstimate = typeof data.last_row !== \"undefined\" ? data.last_row : data.last_page * this.size - (this.page == data.last_page ? this.size - data.data.length : 0);\n      if (this.progressiveLoad) {\n        switch (this.mode) {\n          case \"progressive_load\":\n            if (this.page == 1) {\n              this.table.rowManager.setData(data.data, false, this.page == 1);\n            } else {\n              this.table.rowManager.addRows(data.data);\n            }\n            if (this.page < this.max) {\n              setTimeout(() => {\n                this.nextPage();\n              }, this.table.options.progressiveLoadDelay);\n            }\n            break;\n          case \"progressive_scroll\":\n            data = this.page === 1 ? data.data : this.table.rowManager.getData().concat(data.data);\n            this.table.rowManager.setData(data, this.page !== 1, this.page == 1);\n            margin = this.table.options.progressiveLoadScrollMargin || this.table.rowManager.element.clientHeight * 2;\n            if (this.table.rowManager.element.scrollHeight <= this.table.rowManager.element.clientHeight + margin) {\n              if (this.page < this.max) {\n                setTimeout(() => {\n                  this.nextPage();\n                });\n              }\n            }\n            break;\n        }\n        return false;\n      } else {\n        // left = this.table.rowManager.scrollLeft;\n        this.dispatchExternal(\"pageLoaded\", this.getPage());\n        // this.table.rowManager.scrollHorizontal(left);\n        // this.table.columnManager.scrollHorizontal(left);\n      }\n    } else {\n      console.warn(\"Remote Pagination Error - Server response missing '\" + (this.options(\"dataReceiveParams\").data || \"data\") + \"' property\");\n    }\n    return data.data;\n  }\n\n  //handle the footer element being redrawn\n  footerRedraw() {\n    var footer = this.table.footerManager.containerElement;\n    if (Math.ceil(footer.clientWidth) - footer.scrollWidth < 0) {\n      this.pagesElement.style.display = 'none';\n    } else {\n      this.pagesElement.style.display = '';\n      if (Math.ceil(footer.clientWidth) - footer.scrollWidth < 0) {\n        this.pagesElement.style.display = 'none';\n      }\n    }\n  }\n}\n\n// read persistance information from storage\nvar defaultReaders = {\n  local: function (id, type) {\n    var data = localStorage.getItem(id + \"-\" + type);\n    return data ? JSON.parse(data) : false;\n  },\n  cookie: function (id, type) {\n    var cookie = document.cookie,\n      key = id + \"-\" + type,\n      cookiePos = cookie.indexOf(key + \"=\"),\n      end,\n      data;\n\n    //if cookie exists, decode and load column data into tabulator\n    if (cookiePos > -1) {\n      cookie = cookie.slice(cookiePos);\n      end = cookie.indexOf(\";\");\n      if (end > -1) {\n        cookie = cookie.slice(0, end);\n      }\n      data = cookie.replace(key + \"=\", \"\");\n    }\n    return data ? JSON.parse(data) : false;\n  }\n};\n\n//write persistence information to storage\nvar defaultWriters = {\n  local: function (id, type, data) {\n    localStorage.setItem(id + \"-\" + type, JSON.stringify(data));\n  },\n  cookie: function (id, type, data) {\n    var expireDate = new Date();\n    expireDate.setDate(expireDate.getDate() + 10000);\n    document.cookie = id + \"-\" + type + \"=\" + JSON.stringify(data) + \"; expires=\" + expireDate.toUTCString();\n  }\n};\nclass Persistence extends Module {\n  static moduleName = \"persistence\";\n  static moduleInitOrder = -10;\n\n  //load defaults\n  static readers = defaultReaders;\n  static writers = defaultWriters;\n  constructor(table) {\n    super(table);\n    this.mode = \"\";\n    this.id = \"\";\n    // this.persistProps = [\"field\", \"width\", \"visible\"];\n    this.defWatcherBlock = false;\n    this.config = {};\n    this.readFunc = false;\n    this.writeFunc = false;\n    this.registerTableOption(\"persistence\", false);\n    this.registerTableOption(\"persistenceID\", \"\"); //key for persistent storage\n    this.registerTableOption(\"persistenceMode\", true); //mode for storing persistence information\n    this.registerTableOption(\"persistenceReaderFunc\", false); //function for handling persistence data reading\n    this.registerTableOption(\"persistenceWriterFunc\", false); //function for handling persistence data writing\n  }\n\n  // Test for whether localStorage is available for use.\n  localStorageTest() {\n    var testKey = \"_tabulator_test\";\n    try {\n      window.localStorage.setItem(testKey, testKey);\n      window.localStorage.removeItem(testKey);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  //setup parameters\n  initialize() {\n    if (this.table.options.persistence) {\n      //determine persistent layout storage type\n      var mode = this.table.options.persistenceMode,\n        id = this.table.options.persistenceID,\n        retrievedData;\n      this.mode = mode !== true ? mode : this.localStorageTest() ? \"local\" : \"cookie\";\n      if (this.table.options.persistenceReaderFunc) {\n        if (typeof this.table.options.persistenceReaderFunc === \"function\") {\n          this.readFunc = this.table.options.persistenceReaderFunc;\n        } else {\n          if (Persistence.readers[this.table.options.persistenceReaderFunc]) {\n            this.readFunc = Persistence.readers[this.table.options.persistenceReaderFunc];\n          } else {\n            console.warn(\"Persistence Read Error - invalid reader set\", this.table.options.persistenceReaderFunc);\n          }\n        }\n      } else {\n        if (Persistence.readers[this.mode]) {\n          this.readFunc = Persistence.readers[this.mode];\n        } else {\n          console.warn(\"Persistence Read Error - invalid reader set\", this.mode);\n        }\n      }\n      if (this.table.options.persistenceWriterFunc) {\n        if (typeof this.table.options.persistenceWriterFunc === \"function\") {\n          this.writeFunc = this.table.options.persistenceWriterFunc;\n        } else {\n          if (Persistence.writers[this.table.options.persistenceWriterFunc]) {\n            this.writeFunc = Persistence.writers[this.table.options.persistenceWriterFunc];\n          } else {\n            console.warn(\"Persistence Write Error - invalid reader set\", this.table.options.persistenceWriterFunc);\n          }\n        }\n      } else {\n        if (Persistence.writers[this.mode]) {\n          this.writeFunc = Persistence.writers[this.mode];\n        } else {\n          console.warn(\"Persistence Write Error - invalid writer set\", this.mode);\n        }\n      }\n\n      //set storage tag\n      this.id = \"tabulator-\" + (id || this.table.element.getAttribute(\"id\") || \"\");\n      this.config = {\n        sort: this.table.options.persistence === true || this.table.options.persistence.sort,\n        filter: this.table.options.persistence === true || this.table.options.persistence.filter,\n        headerFilter: this.table.options.persistence === true || this.table.options.persistence.headerFilter,\n        group: this.table.options.persistence === true || this.table.options.persistence.group,\n        page: this.table.options.persistence === true || this.table.options.persistence.page,\n        columns: this.table.options.persistence === true ? [\"title\", \"width\", \"visible\"] : this.table.options.persistence.columns\n      };\n\n      //load pagination data if needed\n      if (this.config.page) {\n        retrievedData = this.retrieveData(\"page\");\n        if (retrievedData) {\n          if (typeof retrievedData.paginationSize !== \"undefined\" && (this.config.page === true || this.config.page.size)) {\n            this.table.options.paginationSize = retrievedData.paginationSize;\n          }\n          if (typeof retrievedData.paginationInitialPage !== \"undefined\" && (this.config.page === true || this.config.page.page)) {\n            this.table.options.paginationInitialPage = retrievedData.paginationInitialPage;\n          }\n        }\n      }\n\n      //load group data if needed\n      if (this.config.group) {\n        retrievedData = this.retrieveData(\"group\");\n        if (retrievedData) {\n          if (typeof retrievedData.groupBy !== \"undefined\" && (this.config.group === true || this.config.group.groupBy)) {\n            this.table.options.groupBy = retrievedData.groupBy;\n          }\n          if (typeof retrievedData.groupStartOpen !== \"undefined\" && (this.config.group === true || this.config.group.groupStartOpen)) {\n            this.table.options.groupStartOpen = retrievedData.groupStartOpen;\n          }\n          if (typeof retrievedData.groupHeader !== \"undefined\" && (this.config.group === true || this.config.group.groupHeader)) {\n            this.table.options.groupHeader = retrievedData.groupHeader;\n          }\n        }\n      }\n      if (this.config.columns) {\n        this.table.options.columns = this.load(\"columns\", this.table.options.columns);\n        this.subscribe(\"column-init\", this.initializeColumn.bind(this));\n        this.subscribe(\"column-show\", this.save.bind(this, \"columns\"));\n        this.subscribe(\"column-hide\", this.save.bind(this, \"columns\"));\n        this.subscribe(\"column-moved\", this.save.bind(this, \"columns\"));\n      }\n      this.subscribe(\"table-built\", this.tableBuilt.bind(this), 0);\n      this.subscribe(\"table-redraw\", this.tableRedraw.bind(this));\n      this.subscribe(\"filter-changed\", this.eventSave.bind(this, \"filter\"));\n      this.subscribe(\"filter-changed\", this.eventSave.bind(this, \"headerFilter\"));\n      this.subscribe(\"sort-changed\", this.eventSave.bind(this, \"sort\"));\n      this.subscribe(\"group-changed\", this.eventSave.bind(this, \"group\"));\n      this.subscribe(\"page-changed\", this.eventSave.bind(this, \"page\"));\n      this.subscribe(\"column-resized\", this.eventSave.bind(this, \"columns\"));\n      this.subscribe(\"column-width\", this.eventSave.bind(this, \"columns\"));\n      this.subscribe(\"layout-refreshed\", this.eventSave.bind(this, \"columns\"));\n    }\n    this.registerTableFunction(\"getColumnLayout\", this.getColumnLayout.bind(this));\n    this.registerTableFunction(\"setColumnLayout\", this.setColumnLayout.bind(this));\n  }\n  eventSave(type) {\n    if (this.config[type]) {\n      this.save(type);\n    }\n  }\n  tableBuilt() {\n    var sorters, filters, headerFilters;\n    if (this.config.sort) {\n      sorters = this.load(\"sort\");\n      if (!sorters === false) {\n        this.table.options.initialSort = sorters;\n      }\n    }\n    if (this.config.filter) {\n      filters = this.load(\"filter\");\n      if (!filters === false) {\n        this.table.options.initialFilter = filters;\n      }\n    }\n    if (this.config.headerFilter) {\n      headerFilters = this.load(\"headerFilter\");\n      if (!headerFilters === false) {\n        this.table.options.initialHeaderFilter = headerFilters;\n      }\n    }\n  }\n  tableRedraw(force) {\n    if (force && this.config.columns) {\n      this.save(\"columns\");\n    }\n  }\n\n  ///////////////////////////////////\n  ///////// Table Functions /////////\n  ///////////////////////////////////\n\n  getColumnLayout() {\n    return this.parseColumns(this.table.columnManager.getColumns());\n  }\n  setColumnLayout(layout) {\n    this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns, layout, true));\n    return true;\n  }\n\n  ///////////////////////////////////\n  ///////// Internal Logic //////////\n  ///////////////////////////////////\n\n  initializeColumn(column) {\n    var def, keys;\n    if (this.config.columns) {\n      this.defWatcherBlock = true;\n      def = column.getDefinition();\n      keys = this.config.columns === true ? Object.keys(def) : this.config.columns;\n      keys.forEach(key => {\n        var props = Object.getOwnPropertyDescriptor(def, key);\n        var value = def[key];\n        if (props) {\n          Object.defineProperty(def, key, {\n            set: newValue => {\n              value = newValue;\n              if (!this.defWatcherBlock) {\n                this.save(\"columns\");\n              }\n              if (props.set) {\n                props.set(newValue);\n              }\n            },\n            get: () => {\n              if (props.get) {\n                props.get();\n              }\n              return value;\n            }\n          });\n        }\n      });\n      this.defWatcherBlock = false;\n    }\n  }\n\n  //load saved definitions\n  load(type, current) {\n    var data = this.retrieveData(type);\n    if (current) {\n      data = data ? this.mergeDefinition(current, data) : current;\n    }\n    return data;\n  }\n\n  //retrieve data from memory\n  retrieveData(type) {\n    return this.readFunc ? this.readFunc(this.id, type) : false;\n  }\n\n  //merge old and new column definitions\n  mergeDefinition(oldCols, newCols, mergeAllNew) {\n    var output = [];\n    newCols = newCols || [];\n    newCols.forEach((column, to) => {\n      var from = this._findColumn(oldCols, column),\n        keys;\n      if (from) {\n        if (mergeAllNew) {\n          keys = Object.keys(column);\n        } else if (this.config.columns === true || this.config.columns == undefined) {\n          keys = Object.keys(from);\n          keys.push(\"width\");\n        } else {\n          keys = this.config.columns;\n        }\n        keys.forEach(key => {\n          if (key !== \"columns\" && typeof column[key] !== \"undefined\") {\n            from[key] = column[key];\n          }\n        });\n        if (from.columns) {\n          from.columns = this.mergeDefinition(from.columns, column.columns);\n        }\n        output.push(from);\n      }\n    });\n    oldCols.forEach((column, i) => {\n      var from = this._findColumn(newCols, column);\n      if (!from) {\n        if (output.length > i) {\n          output.splice(i, 0, column);\n        } else {\n          output.push(column);\n        }\n      }\n    });\n    return output;\n  }\n\n  //find matching columns\n  _findColumn(columns, subject) {\n    var type = subject.columns ? \"group\" : subject.field ? \"field\" : \"object\";\n    return columns.find(function (col) {\n      switch (type) {\n        case \"group\":\n          return col.title === subject.title && col.columns.length === subject.columns.length;\n        case \"field\":\n          return col.field === subject.field;\n        case \"object\":\n          return col === subject;\n      }\n    });\n  }\n\n  //save data\n  save(type) {\n    var data = {};\n    switch (type) {\n      case \"columns\":\n        data = this.parseColumns(this.table.columnManager.getColumns());\n        break;\n      case \"filter\":\n        data = this.table.modules.filter.getFilters();\n        break;\n      case \"headerFilter\":\n        data = this.table.modules.filter.getHeaderFilters();\n        break;\n      case \"sort\":\n        data = this.validateSorters(this.table.modules.sort.getSort());\n        break;\n      case \"group\":\n        data = this.getGroupConfig();\n        break;\n      case \"page\":\n        data = this.getPageConfig();\n        break;\n    }\n    if (this.writeFunc) {\n      this.writeFunc(this.id, type, data);\n    }\n  }\n\n  //ensure sorters contain no function data\n  validateSorters(data) {\n    data.forEach(function (item) {\n      item.column = item.field;\n      delete item.field;\n    });\n    return data;\n  }\n  getGroupConfig() {\n    var data = {};\n    if (this.config.group) {\n      if (this.config.group === true || this.config.group.groupBy) {\n        data.groupBy = this.table.options.groupBy;\n      }\n      if (this.config.group === true || this.config.group.groupStartOpen) {\n        data.groupStartOpen = this.table.options.groupStartOpen;\n      }\n      if (this.config.group === true || this.config.group.groupHeader) {\n        data.groupHeader = this.table.options.groupHeader;\n      }\n    }\n    return data;\n  }\n  getPageConfig() {\n    var data = {};\n    if (this.config.page) {\n      if (this.config.page === true || this.config.page.size) {\n        data.paginationSize = this.table.modules.page.getPageSize();\n      }\n      if (this.config.page === true || this.config.page.page) {\n        data.paginationInitialPage = this.table.modules.page.getPage();\n      }\n    }\n    return data;\n  }\n\n  //parse columns for data to store\n  parseColumns(columns) {\n    var definitions = [],\n      excludedKeys = [\"headerContextMenu\", \"headerMenu\", \"contextMenu\", \"clickMenu\"];\n    columns.forEach(column => {\n      var defStore = {},\n        colDef = column.getDefinition(),\n        keys;\n      if (column.isGroup) {\n        defStore.title = colDef.title;\n        defStore.columns = this.parseColumns(column.getColumns());\n      } else {\n        defStore.field = column.getField();\n        if (this.config.columns === true || this.config.columns == undefined) {\n          keys = Object.keys(colDef);\n          keys.push(\"width\");\n          keys.push(\"visible\");\n        } else {\n          keys = this.config.columns;\n        }\n        keys.forEach(key => {\n          switch (key) {\n            case \"width\":\n              defStore.width = column.getWidth();\n              break;\n            case \"visible\":\n              defStore.visible = column.visible;\n              break;\n            default:\n              if (typeof colDef[key] !== \"function\" && excludedKeys.indexOf(key) === -1) {\n                defStore[key] = colDef[key];\n              }\n          }\n        });\n      }\n      definitions.push(defStore);\n    });\n    return definitions;\n  }\n}\nclass Popup extends Module {\n  static moduleName = \"popup\";\n  constructor(table) {\n    super(table);\n    this.columnSubscribers = {};\n    this.registerTableOption(\"rowContextPopup\", false);\n    this.registerTableOption(\"rowClickPopup\", false);\n    this.registerTableOption(\"rowDblClickPopup\", false);\n    this.registerTableOption(\"groupContextPopup\", false);\n    this.registerTableOption(\"groupClickPopup\", false);\n    this.registerTableOption(\"groupDblClickPopup\", false);\n    this.registerColumnOption(\"headerContextPopup\");\n    this.registerColumnOption(\"headerClickPopup\");\n    this.registerColumnOption(\"headerDblClickPopup\");\n    this.registerColumnOption(\"headerPopup\");\n    this.registerColumnOption(\"headerPopupIcon\");\n    this.registerColumnOption(\"contextPopup\");\n    this.registerColumnOption(\"clickPopup\");\n    this.registerColumnOption(\"dblClickPopup\");\n    this.registerComponentFunction(\"cell\", \"popup\", this._componentPopupCall.bind(this));\n    this.registerComponentFunction(\"column\", \"popup\", this._componentPopupCall.bind(this));\n    this.registerComponentFunction(\"row\", \"popup\", this._componentPopupCall.bind(this));\n    this.registerComponentFunction(\"group\", \"popup\", this._componentPopupCall.bind(this));\n  }\n  initialize() {\n    this.initializeRowWatchers();\n    this.initializeGroupWatchers();\n    this.subscribe(\"column-init\", this.initializeColumn.bind(this));\n  }\n  _componentPopupCall(component, contents, position) {\n    this.loadPopupEvent(contents, null, component, position);\n  }\n  initializeRowWatchers() {\n    if (this.table.options.rowContextPopup) {\n      this.subscribe(\"row-contextmenu\", this.loadPopupEvent.bind(this, this.table.options.rowContextPopup));\n      this.table.on(\"rowTapHold\", this.loadPopupEvent.bind(this, this.table.options.rowContextPopup));\n    }\n    if (this.table.options.rowClickPopup) {\n      this.subscribe(\"row-click\", this.loadPopupEvent.bind(this, this.table.options.rowClickPopup));\n    }\n    if (this.table.options.rowDblClickPopup) {\n      this.subscribe(\"row-dblclick\", this.loadPopupEvent.bind(this, this.table.options.rowDblClickPopup));\n    }\n  }\n  initializeGroupWatchers() {\n    if (this.table.options.groupContextPopup) {\n      this.subscribe(\"group-contextmenu\", this.loadPopupEvent.bind(this, this.table.options.groupContextPopup));\n      this.table.on(\"groupTapHold\", this.loadPopupEvent.bind(this, this.table.options.groupContextPopup));\n    }\n    if (this.table.options.groupClickPopup) {\n      this.subscribe(\"group-click\", this.loadPopupEvent.bind(this, this.table.options.groupClickPopup));\n    }\n    if (this.table.options.groupDblClickPopup) {\n      this.subscribe(\"group-dblclick\", this.loadPopupEvent.bind(this, this.table.options.groupDblClickPopup));\n    }\n  }\n  initializeColumn(column) {\n    var def = column.definition;\n\n    //handle column events\n    if (def.headerContextPopup && !this.columnSubscribers.headerContextPopup) {\n      this.columnSubscribers.headerContextPopup = this.loadPopupTableColumnEvent.bind(this, \"headerContextPopup\");\n      this.subscribe(\"column-contextmenu\", this.columnSubscribers.headerContextPopup);\n      this.table.on(\"headerTapHold\", this.loadPopupTableColumnEvent.bind(this, \"headerContextPopup\"));\n    }\n    if (def.headerClickPopup && !this.columnSubscribers.headerClickPopup) {\n      this.columnSubscribers.headerClickPopup = this.loadPopupTableColumnEvent.bind(this, \"headerClickPopup\");\n      this.subscribe(\"column-click\", this.columnSubscribers.headerClickPopup);\n    }\n    if (def.headerDblClickPopup && !this.columnSubscribers.headerDblClickPopup) {\n      this.columnSubscribers.headerDblClickPopup = this.loadPopupTableColumnEvent.bind(this, \"headerDblClickPopup\");\n      this.subscribe(\"column-dblclick\", this.columnSubscribers.headerDblClickPopup);\n    }\n    if (def.headerPopup) {\n      this.initializeColumnHeaderPopup(column);\n    }\n\n    //handle cell events\n    if (def.contextPopup && !this.columnSubscribers.contextPopup) {\n      this.columnSubscribers.contextPopup = this.loadPopupTableCellEvent.bind(this, \"contextPopup\");\n      this.subscribe(\"cell-contextmenu\", this.columnSubscribers.contextPopup);\n      this.table.on(\"cellTapHold\", this.loadPopupTableCellEvent.bind(this, \"contextPopup\"));\n    }\n    if (def.clickPopup && !this.columnSubscribers.clickPopup) {\n      this.columnSubscribers.clickPopup = this.loadPopupTableCellEvent.bind(this, \"clickPopup\");\n      this.subscribe(\"cell-click\", this.columnSubscribers.clickPopup);\n    }\n    if (def.dblClickPopup && !this.columnSubscribers.dblClickPopup) {\n      this.columnSubscribers.dblClickPopup = this.loadPopupTableCellEvent.bind(this, \"dblClickPopup\");\n      this.subscribe(\"cell-click\", this.columnSubscribers.dblClickPopup);\n    }\n  }\n  initializeColumnHeaderPopup(column) {\n    var icon = column.definition.headerPopupIcon,\n      headerPopupEl;\n    headerPopupEl = document.createElement(\"span\");\n    headerPopupEl.classList.add(\"tabulator-header-popup-button\");\n    if (icon) {\n      if (typeof icon === \"function\") {\n        icon = icon(column.getComponent());\n      }\n      if (icon instanceof HTMLElement) {\n        headerPopupEl.appendChild(icon);\n      } else {\n        headerPopupEl.innerHTML = icon;\n      }\n    } else {\n      headerPopupEl.innerHTML = \"&vellip;\";\n    }\n    headerPopupEl.addEventListener(\"click\", e => {\n      e.stopPropagation();\n      e.preventDefault();\n      this.loadPopupEvent(column.definition.headerPopup, e, column);\n    });\n    column.titleElement.insertBefore(headerPopupEl, column.titleElement.firstChild);\n  }\n  loadPopupTableCellEvent(option, e, cell) {\n    if (cell._cell) {\n      cell = cell._cell;\n    }\n    if (cell.column.definition[option]) {\n      this.loadPopupEvent(cell.column.definition[option], e, cell);\n    }\n  }\n  loadPopupTableColumnEvent(option, e, column) {\n    if (column._column) {\n      column = column._column;\n    }\n    if (column.definition[option]) {\n      this.loadPopupEvent(column.definition[option], e, column);\n    }\n  }\n  loadPopupEvent(contents, e, component, position) {\n    var renderedCallback;\n    function onRendered(callback) {\n      renderedCallback = callback;\n    }\n    if (component._group) {\n      component = component._group;\n    } else if (component._row) {\n      component = component._row;\n    }\n    contents = typeof contents == \"function\" ? contents.call(this.table, e, component.getComponent(), onRendered) : contents;\n    this.loadPopup(e, component, contents, renderedCallback, position);\n  }\n  loadPopup(e, component, contents, renderedCallback, position) {\n    var touch = !(e instanceof MouseEvent),\n      contentsEl,\n      popup;\n    if (contents instanceof HTMLElement) {\n      contentsEl = contents;\n    } else {\n      contentsEl = document.createElement(\"div\");\n      contentsEl.innerHTML = contents;\n    }\n    contentsEl.classList.add(\"tabulator-popup\");\n    contentsEl.addEventListener(\"click\", e => {\n      e.stopPropagation();\n    });\n    if (!touch) {\n      e.preventDefault();\n    }\n    popup = this.popup(contentsEl);\n    if (typeof renderedCallback === \"function\") {\n      popup.renderCallback(renderedCallback);\n    }\n    if (e) {\n      popup.show(e);\n    } else {\n      popup.show(component.getElement(), position || \"center\");\n    }\n    popup.hideOnBlur(() => {\n      this.dispatchExternal(\"popupClosed\", component.getComponent());\n    });\n    this.dispatchExternal(\"popupOpened\", component.getComponent());\n  }\n}\nclass Print extends Module {\n  static moduleName = \"print\";\n  constructor(table) {\n    super(table);\n    this.element = false;\n    this.manualBlock = false;\n    this.beforeprintEventHandler = null;\n    this.afterprintEventHandler = null;\n    this.registerTableOption(\"printAsHtml\", false); //enable print as html\n    this.registerTableOption(\"printFormatter\", false); //printing page formatter\n    this.registerTableOption(\"printHeader\", false); //page header contents\n    this.registerTableOption(\"printFooter\", false); //page footer contents\n    this.registerTableOption(\"printStyled\", true); //enable print as html styling\n    this.registerTableOption(\"printRowRange\", \"visible\"); //restrict print to visible rows only\n    this.registerTableOption(\"printConfig\", {}); //print config options\n\n    this.registerColumnOption(\"print\");\n    this.registerColumnOption(\"titlePrint\");\n  }\n  initialize() {\n    if (this.table.options.printAsHtml) {\n      this.beforeprintEventHandler = this.replaceTable.bind(this);\n      this.afterprintEventHandler = this.cleanup.bind(this);\n      window.addEventListener(\"beforeprint\", this.beforeprintEventHandler);\n      window.addEventListener(\"afterprint\", this.afterprintEventHandler);\n      this.subscribe(\"table-destroy\", this.destroy.bind(this));\n    }\n    this.registerTableFunction(\"print\", this.printFullscreen.bind(this));\n  }\n  destroy() {\n    if (this.table.options.printAsHtml) {\n      window.removeEventListener(\"beforeprint\", this.beforeprintEventHandler);\n      window.removeEventListener(\"afterprint\", this.afterprintEventHandler);\n    }\n  }\n\n  ///////////////////////////////////\n  ///////// Table Functions /////////\n  ///////////////////////////////////\n\n  ///////////////////////////////////\n  ///////// Internal Logic //////////\n  ///////////////////////////////////\n\n  replaceTable() {\n    if (!this.manualBlock) {\n      this.element = document.createElement(\"div\");\n      this.element.classList.add(\"tabulator-print-table\");\n      this.element.appendChild(this.table.modules.export.generateTable(this.table.options.printConfig, this.table.options.printStyled, this.table.options.printRowRange, \"print\"));\n      this.table.element.style.display = \"none\";\n      this.table.element.parentNode.insertBefore(this.element, this.table.element);\n    }\n  }\n  cleanup() {\n    document.body.classList.remove(\"tabulator-print-fullscreen-hide\");\n    if (this.element && this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n      this.table.element.style.display = \"\";\n    }\n  }\n  printFullscreen(visible, style, config) {\n    var scrollX = window.scrollX,\n      scrollY = window.scrollY,\n      headerEl = document.createElement(\"div\"),\n      footerEl = document.createElement(\"div\"),\n      tableEl = this.table.modules.export.generateTable(typeof config != \"undefined\" ? config : this.table.options.printConfig, typeof style != \"undefined\" ? style : this.table.options.printStyled, visible || this.table.options.printRowRange, \"print\"),\n      headerContent,\n      footerContent;\n    this.manualBlock = true;\n    this.element = document.createElement(\"div\");\n    this.element.classList.add(\"tabulator-print-fullscreen\");\n    if (this.table.options.printHeader) {\n      headerEl.classList.add(\"tabulator-print-header\");\n      headerContent = typeof this.table.options.printHeader == \"function\" ? this.table.options.printHeader.call(this.table) : this.table.options.printHeader;\n      if (typeof headerContent == \"string\") {\n        headerEl.innerHTML = headerContent;\n      } else {\n        headerEl.appendChild(headerContent);\n      }\n      this.element.appendChild(headerEl);\n    }\n    this.element.appendChild(tableEl);\n    if (this.table.options.printFooter) {\n      footerEl.classList.add(\"tabulator-print-footer\");\n      footerContent = typeof this.table.options.printFooter == \"function\" ? this.table.options.printFooter.call(this.table) : this.table.options.printFooter;\n      if (typeof footerContent == \"string\") {\n        footerEl.innerHTML = footerContent;\n      } else {\n        footerEl.appendChild(footerContent);\n      }\n      this.element.appendChild(footerEl);\n    }\n    document.body.classList.add(\"tabulator-print-fullscreen-hide\");\n    document.body.appendChild(this.element);\n    if (this.table.options.printFormatter) {\n      this.table.options.printFormatter(this.element, tableEl);\n    }\n    window.print();\n    this.cleanup();\n    window.scrollTo(scrollX, scrollY);\n    this.manualBlock = false;\n  }\n}\nclass ReactiveData extends Module {\n  static moduleName = \"reactiveData\";\n  constructor(table) {\n    super(table);\n    this.data = false;\n    this.blocked = false; //block reactivity while performing update\n    this.origFuncs = {}; // hold original data array functions to allow replacement after data is done with\n    this.currentVersion = 0;\n    this.registerTableOption(\"reactiveData\", false); //enable data reactivity\n  }\n  initialize() {\n    if (this.table.options.reactiveData) {\n      this.subscribe(\"cell-value-save-before\", this.block.bind(this, \"cellsave\"));\n      this.subscribe(\"cell-value-save-after\", this.unblock.bind(this, \"cellsave\"));\n      this.subscribe(\"row-data-save-before\", this.block.bind(this, \"rowsave\"));\n      this.subscribe(\"row-data-save-after\", this.unblock.bind(this, \"rowsave\"));\n      this.subscribe(\"row-data-init-after\", this.watchRow.bind(this));\n      this.subscribe(\"data-processing\", this.watchData.bind(this));\n      this.subscribe(\"table-destroy\", this.unwatchData.bind(this));\n    }\n  }\n  watchData(data) {\n    var self = this,\n      version;\n    this.currentVersion++;\n    version = this.currentVersion;\n    this.unwatchData();\n    this.data = data;\n\n    //override array push function\n    this.origFuncs.push = data.push;\n    Object.defineProperty(this.data, \"push\", {\n      enumerable: false,\n      configurable: true,\n      value: function () {\n        var args = Array.from(arguments),\n          result;\n        if (!self.blocked && version === self.currentVersion) {\n          self.block(\"data-push\");\n          args.forEach(arg => {\n            self.table.rowManager.addRowActual(arg, false);\n          });\n          result = self.origFuncs.push.apply(data, arguments);\n          self.unblock(\"data-push\");\n        }\n        return result;\n      }\n    });\n\n    //override array unshift function\n    this.origFuncs.unshift = data.unshift;\n    Object.defineProperty(this.data, \"unshift\", {\n      enumerable: false,\n      configurable: true,\n      value: function () {\n        var args = Array.from(arguments),\n          result;\n        if (!self.blocked && version === self.currentVersion) {\n          self.block(\"data-unshift\");\n          args.forEach(arg => {\n            self.table.rowManager.addRowActual(arg, true);\n          });\n          result = self.origFuncs.unshift.apply(data, arguments);\n          self.unblock(\"data-unshift\");\n        }\n        return result;\n      }\n    });\n\n    //override array shift function\n    this.origFuncs.shift = data.shift;\n    Object.defineProperty(this.data, \"shift\", {\n      enumerable: false,\n      configurable: true,\n      value: function () {\n        var row, result;\n        if (!self.blocked && version === self.currentVersion) {\n          self.block(\"data-shift\");\n          if (self.data.length) {\n            row = self.table.rowManager.getRowFromDataObject(self.data[0]);\n            if (row) {\n              row.deleteActual();\n            }\n          }\n          result = self.origFuncs.shift.call(data);\n          self.unblock(\"data-shift\");\n        }\n        return result;\n      }\n    });\n\n    //override array pop function\n    this.origFuncs.pop = data.pop;\n    Object.defineProperty(this.data, \"pop\", {\n      enumerable: false,\n      configurable: true,\n      value: function () {\n        var row, result;\n        if (!self.blocked && version === self.currentVersion) {\n          self.block(\"data-pop\");\n          if (self.data.length) {\n            row = self.table.rowManager.getRowFromDataObject(self.data[self.data.length - 1]);\n            if (row) {\n              row.deleteActual();\n            }\n          }\n          result = self.origFuncs.pop.call(data);\n          self.unblock(\"data-pop\");\n        }\n        return result;\n      }\n    });\n\n    //override array splice function\n    this.origFuncs.splice = data.splice;\n    Object.defineProperty(this.data, \"splice\", {\n      enumerable: false,\n      configurable: true,\n      value: function () {\n        var args = Array.from(arguments),\n          start = args[0] < 0 ? data.length + args[0] : args[0],\n          end = args[1],\n          newRows = args[2] ? args.slice(2) : false,\n          startRow,\n          result;\n        if (!self.blocked && version === self.currentVersion) {\n          self.block(\"data-splice\");\n          //add new rows\n          if (newRows) {\n            startRow = data[start] ? self.table.rowManager.getRowFromDataObject(data[start]) : false;\n            if (startRow) {\n              newRows.forEach(rowData => {\n                self.table.rowManager.addRowActual(rowData, true, startRow, true);\n              });\n            } else {\n              newRows = newRows.slice().reverse();\n              newRows.forEach(rowData => {\n                self.table.rowManager.addRowActual(rowData, true, false, true);\n              });\n            }\n          }\n\n          //delete removed rows\n          if (end !== 0) {\n            var oldRows = data.slice(start, typeof args[1] === \"undefined\" ? args[1] : start + end);\n            oldRows.forEach((rowData, i) => {\n              var row = self.table.rowManager.getRowFromDataObject(rowData);\n              if (row) {\n                row.deleteActual(i !== oldRows.length - 1);\n              }\n            });\n          }\n          if (newRows || end !== 0) {\n            self.table.rowManager.reRenderInPosition();\n          }\n          result = self.origFuncs.splice.apply(data, arguments);\n          self.unblock(\"data-splice\");\n        }\n        return result;\n      }\n    });\n  }\n  unwatchData() {\n    if (this.data !== false) {\n      for (var key in this.origFuncs) {\n        Object.defineProperty(this.data, key, {\n          enumerable: true,\n          configurable: true,\n          writable: true,\n          value: this.origFuncs.key\n        });\n      }\n    }\n  }\n  watchRow(row) {\n    var data = row.getData();\n    for (var key in data) {\n      this.watchKey(row, data, key);\n    }\n    if (this.table.options.dataTree) {\n      this.watchTreeChildren(row);\n    }\n  }\n  watchTreeChildren(row) {\n    var self = this,\n      childField = row.getData()[this.table.options.dataTreeChildField],\n      origFuncs = {};\n    if (childField) {\n      origFuncs.push = childField.push;\n      Object.defineProperty(childField, \"push\", {\n        enumerable: false,\n        configurable: true,\n        value: () => {\n          if (!self.blocked) {\n            self.block(\"tree-push\");\n            var result = origFuncs.push.apply(childField, arguments);\n            this.rebuildTree(row);\n            self.unblock(\"tree-push\");\n          }\n          return result;\n        }\n      });\n      origFuncs.unshift = childField.unshift;\n      Object.defineProperty(childField, \"unshift\", {\n        enumerable: false,\n        configurable: true,\n        value: () => {\n          if (!self.blocked) {\n            self.block(\"tree-unshift\");\n            var result = origFuncs.unshift.apply(childField, arguments);\n            this.rebuildTree(row);\n            self.unblock(\"tree-unshift\");\n          }\n          return result;\n        }\n      });\n      origFuncs.shift = childField.shift;\n      Object.defineProperty(childField, \"shift\", {\n        enumerable: false,\n        configurable: true,\n        value: () => {\n          if (!self.blocked) {\n            self.block(\"tree-shift\");\n            var result = origFuncs.shift.call(childField);\n            this.rebuildTree(row);\n            self.unblock(\"tree-shift\");\n          }\n          return result;\n        }\n      });\n      origFuncs.pop = childField.pop;\n      Object.defineProperty(childField, \"pop\", {\n        enumerable: false,\n        configurable: true,\n        value: () => {\n          if (!self.blocked) {\n            self.block(\"tree-pop\");\n            var result = origFuncs.pop.call(childField);\n            this.rebuildTree(row);\n            self.unblock(\"tree-pop\");\n          }\n          return result;\n        }\n      });\n      origFuncs.splice = childField.splice;\n      Object.defineProperty(childField, \"splice\", {\n        enumerable: false,\n        configurable: true,\n        value: () => {\n          if (!self.blocked) {\n            self.block(\"tree-splice\");\n            var result = origFuncs.splice.apply(childField, arguments);\n            this.rebuildTree(row);\n            self.unblock(\"tree-splice\");\n          }\n          return result;\n        }\n      });\n    }\n  }\n  rebuildTree(row) {\n    this.table.modules.dataTree.initializeRow(row);\n    this.table.modules.dataTree.layoutRow(row);\n    this.table.rowManager.refreshActiveData(\"tree\", false, true);\n  }\n  watchKey(row, data, key) {\n    var self = this,\n      props = Object.getOwnPropertyDescriptor(data, key),\n      value = data[key],\n      version = this.currentVersion;\n    Object.defineProperty(data, key, {\n      set: newValue => {\n        value = newValue;\n        if (!self.blocked && version === self.currentVersion) {\n          self.block(\"key\");\n          var update = {};\n          update[key] = newValue;\n          row.updateData(update);\n          self.unblock(\"key\");\n        }\n        if (props.set) {\n          props.set(newValue);\n        }\n      },\n      get: () => {\n        if (props.get) {\n          props.get();\n        }\n        return value;\n      }\n    });\n  }\n  unwatchRow(row) {\n    var data = row.getData();\n    for (var key in data) {\n      Object.defineProperty(data, key, {\n        value: data[key]\n      });\n    }\n  }\n  block(key) {\n    if (!this.blocked) {\n      this.blocked = key;\n    }\n  }\n  unblock(key) {\n    if (this.blocked === key) {\n      this.blocked = false;\n    }\n  }\n}\nclass ResizeColumns extends Module {\n  static moduleName = \"resizeColumns\";\n  constructor(table) {\n    super(table);\n    this.startColumn = false;\n    this.startX = false;\n    this.startWidth = false;\n    this.latestX = false;\n    this.handle = null;\n    this.initialNextColumn = null;\n    this.nextColumn = null;\n    this.initialized = false;\n    this.registerColumnOption(\"resizable\", true);\n    this.registerTableOption(\"resizableColumnFit\", false);\n    this.registerTableOption(\"resizableColumnGuide\", false);\n  }\n  initialize() {\n    this.subscribe(\"column-rendered\", this.layoutColumnHeader.bind(this));\n  }\n  initializeEventWatchers() {\n    if (!this.initialized) {\n      this.subscribe(\"cell-rendered\", this.layoutCellHandles.bind(this));\n      this.subscribe(\"cell-delete\", this.deInitializeComponent.bind(this));\n      this.subscribe(\"cell-height\", this.resizeHandle.bind(this));\n      this.subscribe(\"column-moved\", this.columnLayoutUpdated.bind(this));\n      this.subscribe(\"column-hide\", this.deInitializeColumn.bind(this));\n      this.subscribe(\"column-show\", this.columnLayoutUpdated.bind(this));\n      this.subscribe(\"column-width\", this.columnWidthUpdated.bind(this));\n      this.subscribe(\"column-delete\", this.deInitializeComponent.bind(this));\n      this.subscribe(\"column-height\", this.resizeHandle.bind(this));\n      this.initialized = true;\n    }\n  }\n  layoutCellHandles(cell) {\n    if (cell.row.type === \"row\") {\n      this.deInitializeComponent(cell);\n      this.initializeColumn(\"cell\", cell, cell.column, cell.element);\n    }\n  }\n  layoutColumnHeader(column) {\n    if (column.definition.resizable) {\n      this.initializeEventWatchers();\n      this.deInitializeComponent(column);\n      this.initializeColumn(\"header\", column, column, column.element);\n    }\n  }\n  columnLayoutUpdated(column) {\n    var prev = column.prevColumn();\n    this.reinitializeColumn(column);\n    if (prev) {\n      this.reinitializeColumn(prev);\n    }\n  }\n  columnWidthUpdated(column) {\n    if (column.modules.frozen) {\n      if (this.table.modules.frozenColumns.leftColumns.includes(column)) {\n        this.table.modules.frozenColumns.leftColumns.forEach(col => {\n          this.reinitializeColumn(col);\n        });\n      } else if (this.table.modules.frozenColumns.rightColumns.includes(column)) {\n        this.table.modules.frozenColumns.rightColumns.forEach(col => {\n          this.reinitializeColumn(col);\n        });\n      }\n    }\n  }\n  frozenColumnOffset(column) {\n    var offset = false;\n    if (column.modules.frozen) {\n      offset = column.modules.frozen.marginValue;\n      if (column.modules.frozen.position === \"left\") {\n        offset += column.getWidth() - 3;\n      } else {\n        if (offset) {\n          offset -= 3;\n        }\n      }\n    }\n    return offset !== false ? offset + \"px\" : false;\n  }\n  reinitializeColumn(column) {\n    var frozenOffset = this.frozenColumnOffset(column);\n    column.cells.forEach(cell => {\n      if (cell.modules.resize && cell.modules.resize.handleEl) {\n        if (frozenOffset) {\n          cell.modules.resize.handleEl.style[column.modules.frozen.position] = frozenOffset;\n          cell.modules.resize.handleEl.style[\"z-index\"] = 11;\n        }\n        cell.element.after(cell.modules.resize.handleEl);\n      }\n    });\n    if (column.modules.resize && column.modules.resize.handleEl) {\n      if (frozenOffset) {\n        column.modules.resize.handleEl.style[column.modules.frozen.position] = frozenOffset;\n      }\n      column.element.after(column.modules.resize.handleEl);\n    }\n  }\n  initializeColumn(type, component, column, element) {\n    var self = this,\n      variableHeight = false,\n      mode = column.definition.resizable,\n      config = {},\n      nearestColumn = column.getLastColumn();\n\n    //set column resize mode\n    if (type === \"header\") {\n      variableHeight = column.definition.formatter == \"textarea\" || column.definition.variableHeight;\n      config = {\n        variableHeight: variableHeight\n      };\n    }\n    if ((mode === true || mode == type) && this._checkResizability(nearestColumn)) {\n      var handle = document.createElement('span');\n      handle.className = \"tabulator-col-resize-handle\";\n      handle.addEventListener(\"click\", function (e) {\n        e.stopPropagation();\n      });\n      var handleDown = function (e) {\n        self.startColumn = column;\n        self.initialNextColumn = self.nextColumn = nearestColumn.nextColumn();\n        self._mouseDown(e, nearestColumn, handle);\n      };\n      handle.addEventListener(\"mousedown\", handleDown);\n      handle.addEventListener(\"touchstart\", handleDown, {\n        passive: true\n      });\n\n      //resize column on  double click\n      handle.addEventListener(\"dblclick\", e => {\n        var oldWidth = nearestColumn.getWidth();\n        e.stopPropagation();\n        nearestColumn.reinitializeWidth(true);\n        if (oldWidth !== nearestColumn.getWidth()) {\n          self.dispatch(\"column-resized\", nearestColumn);\n          self.dispatchExternal(\"columnResized\", nearestColumn.getComponent());\n        }\n      });\n      if (column.modules.frozen) {\n        handle.style.position = \"sticky\";\n        handle.style[column.modules.frozen.position] = this.frozenColumnOffset(column);\n      }\n      config.handleEl = handle;\n      if (element.parentNode && column.visible) {\n        element.after(handle);\n      }\n    }\n    component.modules.resize = config;\n  }\n  deInitializeColumn(column) {\n    this.deInitializeComponent(column);\n    column.cells.forEach(cell => {\n      this.deInitializeComponent(cell);\n    });\n  }\n  deInitializeComponent(component) {\n    var handleEl;\n    if (component.modules.resize) {\n      handleEl = component.modules.resize.handleEl;\n      if (handleEl && handleEl.parentElement) {\n        handleEl.parentElement.removeChild(handleEl);\n      }\n    }\n  }\n  resizeHandle(component, height) {\n    if (component.modules.resize && component.modules.resize.handleEl) {\n      component.modules.resize.handleEl.style.height = height;\n    }\n  }\n  resize(e, column) {\n    var x = typeof e.clientX === \"undefined\" ? e.touches[0].clientX : e.clientX,\n      startDiff = x - this.startX,\n      moveDiff = x - this.latestX,\n      blockedBefore,\n      blockedAfter;\n    this.latestX = x;\n    if (this.table.rtl) {\n      startDiff = -startDiff;\n      moveDiff = -moveDiff;\n    }\n    blockedBefore = column.width == column.minWidth || column.width == column.maxWidth;\n    column.setWidth(this.startWidth + startDiff);\n    blockedAfter = column.width == column.minWidth || column.width == column.maxWidth;\n    if (moveDiff < 0) {\n      this.nextColumn = this.initialNextColumn;\n    }\n    if (this.table.options.resizableColumnFit && this.nextColumn && !(blockedBefore && blockedAfter)) {\n      let colWidth = this.nextColumn.getWidth();\n      if (moveDiff > 0) {\n        if (colWidth <= this.nextColumn.minWidth) {\n          this.nextColumn = this.nextColumn.nextColumn();\n        }\n      }\n      if (this.nextColumn) {\n        this.nextColumn.setWidth(this.nextColumn.getWidth() - moveDiff);\n      }\n    }\n    this.table.columnManager.rerenderColumns(true);\n    if (!this.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight) {\n      column.checkCellHeights();\n    }\n  }\n  calcGuidePosition(e, column, handle) {\n    var mouseX = typeof e.clientX === \"undefined\" ? e.touches[0].clientX : e.clientX,\n      handleX = handle.getBoundingClientRect().x - this.table.element.getBoundingClientRect().x,\n      tableX = this.table.element.getBoundingClientRect().x,\n      columnX = column.element.getBoundingClientRect().left - tableX,\n      mouseDiff = mouseX - this.startX,\n      pos = Math.max(handleX + mouseDiff, columnX + column.minWidth);\n    if (column.maxWidth) {\n      pos = Math.min(pos, columnX + column.maxWidth);\n    }\n    return pos;\n  }\n  _checkResizability(column) {\n    return column.definition.resizable;\n  }\n  _mouseDown(e, column, handle) {\n    var self = this,\n      guideEl;\n    this.dispatchExternal(\"columnResizing\", column.getComponent());\n    if (self.table.options.resizableColumnGuide) {\n      guideEl = document.createElement(\"span\");\n      guideEl.classList.add('tabulator-col-resize-guide');\n      self.table.element.appendChild(guideEl);\n      setTimeout(() => {\n        guideEl.style.left = self.calcGuidePosition(e, column, handle) + \"px\";\n      });\n    }\n    self.table.element.classList.add(\"tabulator-block-select\");\n    function mouseMove(e) {\n      if (self.table.options.resizableColumnGuide) {\n        guideEl.style.left = self.calcGuidePosition(e, column, handle) + \"px\";\n      } else {\n        self.resize(e, column);\n      }\n    }\n    function mouseUp(e) {\n      if (self.table.options.resizableColumnGuide) {\n        self.resize(e, column);\n        guideEl.remove();\n      }\n\n      //block editor from taking action while resizing is taking place\n      if (self.startColumn.modules.edit) {\n        self.startColumn.modules.edit.blocked = false;\n      }\n      if (self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight) {\n        column.checkCellHeights();\n      }\n      document.body.removeEventListener(\"mouseup\", mouseUp);\n      document.body.removeEventListener(\"mousemove\", mouseMove);\n      handle.removeEventListener(\"touchmove\", mouseMove);\n      handle.removeEventListener(\"touchend\", mouseUp);\n      self.table.element.classList.remove(\"tabulator-block-select\");\n      if (self.startWidth !== column.getWidth()) {\n        self.table.columnManager.verticalAlignHeaders();\n        self.dispatch(\"column-resized\", column);\n        self.dispatchExternal(\"columnResized\", column.getComponent());\n      }\n    }\n    e.stopPropagation(); //prevent resize from interfering with movable columns\n\n    //block editor from taking action while resizing is taking place\n    if (self.startColumn.modules.edit) {\n      self.startColumn.modules.edit.blocked = true;\n    }\n    self.startX = typeof e.clientX === \"undefined\" ? e.touches[0].clientX : e.clientX;\n    self.latestX = self.startX;\n    self.startWidth = column.getWidth();\n    document.body.addEventListener(\"mousemove\", mouseMove);\n    document.body.addEventListener(\"mouseup\", mouseUp);\n    handle.addEventListener(\"touchmove\", mouseMove, {\n      passive: true\n    });\n    handle.addEventListener(\"touchend\", mouseUp);\n  }\n}\nclass ResizeRows extends Module {\n  static moduleName = \"resizeRows\";\n  constructor(table) {\n    super(table);\n    this.startColumn = false;\n    this.startY = false;\n    this.startHeight = false;\n    this.handle = null;\n    this.prevHandle = null;\n    this.registerTableOption(\"resizableRows\", false); //resizable rows\n    this.registerTableOption(\"resizableRowGuide\", false);\n  }\n  initialize() {\n    if (this.table.options.resizableRows) {\n      this.subscribe(\"row-layout-after\", this.initializeRow.bind(this));\n    }\n  }\n  initializeRow(row) {\n    var self = this,\n      rowEl = row.getElement();\n    var handle = document.createElement('div');\n    handle.className = \"tabulator-row-resize-handle\";\n    var prevHandle = document.createElement('div');\n    prevHandle.className = \"tabulator-row-resize-handle prev\";\n    handle.addEventListener(\"click\", function (e) {\n      e.stopPropagation();\n    });\n    var handleDown = function (e) {\n      self.startRow = row;\n      self._mouseDown(e, row, handle);\n    };\n    handle.addEventListener(\"mousedown\", handleDown);\n    handle.addEventListener(\"touchstart\", handleDown, {\n      passive: true\n    });\n    prevHandle.addEventListener(\"click\", function (e) {\n      e.stopPropagation();\n    });\n    var prevHandleDown = function (e) {\n      var prevRow = self.table.rowManager.prevDisplayRow(row);\n      if (prevRow) {\n        self.startRow = prevRow;\n        self._mouseDown(e, prevRow, prevHandle);\n      }\n    };\n    prevHandle.addEventListener(\"mousedown\", prevHandleDown);\n    prevHandle.addEventListener(\"touchstart\", prevHandleDown, {\n      passive: true\n    });\n    rowEl.appendChild(handle);\n    rowEl.appendChild(prevHandle);\n  }\n  resize(e, row) {\n    row.setHeight(this.startHeight + ((typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY) - this.startY));\n  }\n  calcGuidePosition(e, row, handle) {\n    var mouseY = typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY,\n      handleY = handle.getBoundingClientRect().y - this.table.element.getBoundingClientRect().y,\n      tableY = this.table.element.getBoundingClientRect().y,\n      rowY = row.element.getBoundingClientRect().top - tableY,\n      mouseDiff = mouseY - this.startY;\n    return Math.max(handleY + mouseDiff, rowY);\n  }\n  _mouseDown(e, row, handle) {\n    var self = this,\n      guideEl;\n    self.dispatchExternal(\"rowResizing\", row.getComponent());\n    if (self.table.options.resizableRowGuide) {\n      guideEl = document.createElement(\"span\");\n      guideEl.classList.add('tabulator-row-resize-guide');\n      self.table.element.appendChild(guideEl);\n      setTimeout(() => {\n        guideEl.style.top = self.calcGuidePosition(e, row, handle) + \"px\";\n      });\n    }\n    self.table.element.classList.add(\"tabulator-block-select\");\n    function mouseMove(e) {\n      if (self.table.options.resizableRowGuide) {\n        guideEl.style.top = self.calcGuidePosition(e, row, handle) + \"px\";\n      } else {\n        self.resize(e, row);\n      }\n    }\n    function mouseUp(e) {\n      if (self.table.options.resizableRowGuide) {\n        self.resize(e, row);\n        guideEl.remove();\n      }\n\n      // //block editor from taking action while resizing is taking place\n      // if(self.startColumn.modules.edit){\n      // \tself.startColumn.modules.edit.blocked = false;\n      // }\n\n      document.body.removeEventListener(\"mouseup\", mouseMove);\n      document.body.removeEventListener(\"mousemove\", mouseMove);\n      handle.removeEventListener(\"touchmove\", mouseMove);\n      handle.removeEventListener(\"touchend\", mouseUp);\n      self.table.element.classList.remove(\"tabulator-block-select\");\n      self.dispatchExternal(\"rowResized\", row.getComponent());\n    }\n    e.stopPropagation(); //prevent resize from interfering with movable columns\n\n    //block editor from taking action while resizing is taking place\n    // if(self.startColumn.modules.edit){\n    // \tself.startColumn.modules.edit.blocked = true;\n    // }\n\n    self.startY = typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY;\n    self.startHeight = row.getHeight();\n    document.body.addEventListener(\"mousemove\", mouseMove);\n    document.body.addEventListener(\"mouseup\", mouseUp);\n    handle.addEventListener(\"touchmove\", mouseMove, {\n      passive: true\n    });\n    handle.addEventListener(\"touchend\", mouseUp);\n  }\n}\nclass ResizeTable extends Module {\n  static moduleName = \"resizeTable\";\n  constructor(table) {\n    super(table);\n    this.binding = false;\n    this.visibilityObserver = false;\n    this.resizeObserver = false;\n    this.containerObserver = false;\n    this.tableHeight = 0;\n    this.tableWidth = 0;\n    this.containerHeight = 0;\n    this.containerWidth = 0;\n    this.autoResize = false;\n    this.visible = false;\n    this.initialized = false;\n    this.initialRedraw = false;\n    this.registerTableOption(\"autoResize\", true); //auto resize table\n  }\n  initialize() {\n    if (this.table.options.autoResize) {\n      var table = this.table,\n        tableStyle;\n      this.tableHeight = table.element.clientHeight;\n      this.tableWidth = table.element.clientWidth;\n      if (table.element.parentNode) {\n        this.containerHeight = table.element.parentNode.clientHeight;\n        this.containerWidth = table.element.parentNode.clientWidth;\n      }\n      if (typeof IntersectionObserver !== \"undefined\" && typeof ResizeObserver !== \"undefined\" && table.rowManager.getRenderMode() === \"virtual\") {\n        this.initializeVisibilityObserver();\n        this.autoResize = true;\n        this.resizeObserver = new ResizeObserver(entry => {\n          if (!table.browserMobile || table.browserMobile && (!table.modules.edit || table.modules.edit && !table.modules.edit.currentCell)) {\n            var nodeHeight = Math.floor(entry[0].contentRect.height);\n            var nodeWidth = Math.floor(entry[0].contentRect.width);\n            if (this.tableHeight != nodeHeight || this.tableWidth != nodeWidth) {\n              this.tableHeight = nodeHeight;\n              this.tableWidth = nodeWidth;\n              if (table.element.parentNode) {\n                this.containerHeight = table.element.parentNode.clientHeight;\n                this.containerWidth = table.element.parentNode.clientWidth;\n              }\n              this.redrawTable();\n            }\n          }\n        });\n        this.resizeObserver.observe(table.element);\n        tableStyle = window.getComputedStyle(table.element);\n        if (this.table.element.parentNode && !this.table.rowManager.fixedHeight && (tableStyle.getPropertyValue(\"max-height\") || tableStyle.getPropertyValue(\"min-height\"))) {\n          this.containerObserver = new ResizeObserver(entry => {\n            if (!table.browserMobile || table.browserMobile && (!table.modules.edit || table.modules.edit && !table.modules.edit.currentCell)) {\n              var nodeHeight = Math.floor(entry[0].contentRect.height);\n              var nodeWidth = Math.floor(entry[0].contentRect.width);\n              if (this.containerHeight != nodeHeight || this.containerWidth != nodeWidth) {\n                this.containerHeight = nodeHeight;\n                this.containerWidth = nodeWidth;\n                this.tableHeight = table.element.clientHeight;\n                this.tableWidth = table.element.clientWidth;\n              }\n              this.redrawTable();\n            }\n          });\n          this.containerObserver.observe(this.table.element.parentNode);\n        }\n        this.subscribe(\"table-resize\", this.tableResized.bind(this));\n      } else {\n        this.binding = function () {\n          if (!table.browserMobile || table.browserMobile && (!table.modules.edit || table.modules.edit && !table.modules.edit.currentCell)) {\n            table.columnManager.rerenderColumns(true);\n            table.redraw();\n          }\n        };\n        window.addEventListener(\"resize\", this.binding);\n      }\n      this.subscribe(\"table-destroy\", this.clearBindings.bind(this));\n    }\n  }\n  initializeVisibilityObserver() {\n    this.visibilityObserver = new IntersectionObserver(entries => {\n      this.visible = entries[0].isIntersecting;\n      if (!this.initialized) {\n        this.initialized = true;\n        this.initialRedraw = !this.visible;\n      } else {\n        if (this.visible) {\n          this.redrawTable(this.initialRedraw);\n          this.initialRedraw = false;\n        }\n      }\n    });\n    this.visibilityObserver.observe(this.table.element);\n  }\n  redrawTable(force) {\n    if (this.initialized && this.visible) {\n      this.table.columnManager.rerenderColumns(true);\n      this.table.redraw(force);\n    }\n  }\n  tableResized() {\n    this.table.rowManager.redraw();\n  }\n  clearBindings() {\n    if (this.binding) {\n      window.removeEventListener(\"resize\", this.binding);\n    }\n    if (this.resizeObserver) {\n      this.resizeObserver.unobserve(this.table.element);\n    }\n    if (this.visibilityObserver) {\n      this.visibilityObserver.unobserve(this.table.element);\n    }\n    if (this.containerObserver) {\n      this.containerObserver.unobserve(this.table.element.parentNode);\n    }\n  }\n}\nfunction responsiveCollapse(cell, formatterParams, onRendered) {\n  var el = document.createElement(\"div\"),\n    config = cell.getRow()._row.modules.responsiveLayout;\n  el.classList.add(\"tabulator-responsive-collapse-toggle\");\n  el.innerHTML = `<svg class='tabulator-responsive-collapse-toggle-open' viewbox=\"0 0 24 24\">\n  <line x1=\"7\" y1=\"12\" x2=\"17\" y2=\"12\" fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\n  <line y1=\"7\" x1=\"12\" y2=\"17\" x2=\"12\" fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\n</svg>\n\n<svg class='tabulator-responsive-collapse-toggle-close' viewbox=\"0 0 24 24\">\n  <line x1=\"7\" y1=\"12\" x2=\"17\" y2=\"12\"  fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\n</svg>`;\n  cell.getElement().classList.add(\"tabulator-row-handle\");\n  function toggleList(isOpen) {\n    var collapseEl = config.element;\n    config.open = isOpen;\n    if (collapseEl) {\n      if (config.open) {\n        el.classList.add(\"open\");\n        collapseEl.style.display = '';\n      } else {\n        el.classList.remove(\"open\");\n        collapseEl.style.display = 'none';\n      }\n    }\n  }\n  el.addEventListener(\"click\", function (e) {\n    e.stopImmediatePropagation();\n    toggleList(!config.open);\n    cell.getTable().rowManager.adjustTableSize();\n  });\n  toggleList(config.open);\n  return el;\n}\nvar extensions$2 = {\n  format: {\n    formatters: {\n      responsiveCollapse: responsiveCollapse\n    }\n  }\n};\nclass ResponsiveLayout extends Module {\n  static moduleName = \"responsiveLayout\";\n  static moduleExtensions = extensions$2;\n  constructor(table) {\n    super(table);\n    this.columns = [];\n    this.hiddenColumns = [];\n    this.mode = \"\";\n    this.index = 0;\n    this.collapseFormatter = [];\n    this.collapseStartOpen = true;\n    this.collapseHandleColumn = false;\n    this.registerTableOption(\"responsiveLayout\", false); //responsive layout flags\n    this.registerTableOption(\"responsiveLayoutCollapseStartOpen\", true); //start showing collapsed data\n    this.registerTableOption(\"responsiveLayoutCollapseUseFormatters\", true); //responsive layout collapse formatter\n    this.registerTableOption(\"responsiveLayoutCollapseFormatter\", false); //responsive layout collapse formatter\n\n    this.registerColumnOption(\"responsive\");\n  }\n\n  //generate responsive columns list\n  initialize() {\n    if (this.table.options.responsiveLayout) {\n      this.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n      this.subscribe(\"column-show\", this.updateColumnVisibility.bind(this));\n      this.subscribe(\"column-hide\", this.updateColumnVisibility.bind(this));\n      this.subscribe(\"columns-loaded\", this.initializeResponsivity.bind(this));\n      this.subscribe(\"column-moved\", this.initializeResponsivity.bind(this));\n      this.subscribe(\"column-add\", this.initializeResponsivity.bind(this));\n      this.subscribe(\"column-delete\", this.initializeResponsivity.bind(this));\n      this.subscribe(\"table-redrawing\", this.tableRedraw.bind(this));\n      if (this.table.options.responsiveLayout === \"collapse\") {\n        this.subscribe(\"row-data-changed\", this.generateCollapsedRowContent.bind(this));\n        this.subscribe(\"row-init\", this.initializeRow.bind(this));\n        this.subscribe(\"row-layout\", this.layoutRow.bind(this));\n      }\n    }\n  }\n  tableRedraw(force) {\n    if ([\"fitColumns\", \"fitDataStretch\"].indexOf(this.layoutMode()) === -1) {\n      if (!force) {\n        this.update();\n      }\n    }\n  }\n  initializeResponsivity() {\n    var columns = [];\n    this.mode = this.table.options.responsiveLayout;\n    this.collapseFormatter = this.table.options.responsiveLayoutCollapseFormatter || this.formatCollapsedData;\n    this.collapseStartOpen = this.table.options.responsiveLayoutCollapseStartOpen;\n    this.hiddenColumns = [];\n    if (this.collapseFormatter) {\n      this.collapseFormatter = this.collapseFormatter.bind(this.table);\n    }\n\n    //determine level of responsivity for each column\n    this.table.columnManager.columnsByIndex.forEach((column, i) => {\n      if (column.modules.responsive) {\n        if (column.modules.responsive.order && column.modules.responsive.visible) {\n          column.modules.responsive.index = i;\n          columns.push(column);\n          if (!column.visible && this.mode === \"collapse\") {\n            this.hiddenColumns.push(column);\n          }\n        }\n      }\n    });\n\n    //sort list by responsivity\n    columns = columns.reverse();\n    columns = columns.sort((a, b) => {\n      var diff = b.modules.responsive.order - a.modules.responsive.order;\n      return diff || b.modules.responsive.index - a.modules.responsive.index;\n    });\n    this.columns = columns;\n    if (this.mode === \"collapse\") {\n      this.generateCollapsedContent();\n    }\n\n    //assign collapse column\n    for (let col of this.table.columnManager.columnsByIndex) {\n      if (col.definition.formatter == \"responsiveCollapse\") {\n        this.collapseHandleColumn = col;\n        break;\n      }\n    }\n    if (this.collapseHandleColumn) {\n      if (this.hiddenColumns.length) {\n        this.collapseHandleColumn.show();\n      } else {\n        this.collapseHandleColumn.hide();\n      }\n    }\n  }\n\n  //define layout information\n  initializeColumn(column) {\n    var def = column.getDefinition();\n    column.modules.responsive = {\n      order: typeof def.responsive === \"undefined\" ? 1 : def.responsive,\n      visible: def.visible === false ? false : true\n    };\n  }\n  initializeRow(row) {\n    var el;\n    if (row.type !== \"calc\") {\n      el = document.createElement(\"div\");\n      el.classList.add(\"tabulator-responsive-collapse\");\n      row.modules.responsiveLayout = {\n        element: el,\n        open: this.collapseStartOpen\n      };\n      if (!this.collapseStartOpen) {\n        el.style.display = 'none';\n      }\n    }\n  }\n  layoutRow(row) {\n    var rowEl = row.getElement();\n    if (row.modules.responsiveLayout) {\n      rowEl.appendChild(row.modules.responsiveLayout.element);\n      this.generateCollapsedRowContent(row);\n    }\n  }\n\n  //update column visibility\n  updateColumnVisibility(column, responsiveToggle) {\n    if (!responsiveToggle && column.modules.responsive) {\n      column.modules.responsive.visible = column.visible;\n      this.initializeResponsivity();\n    }\n  }\n  hideColumn(column) {\n    var colCount = this.hiddenColumns.length;\n    column.hide(false, true);\n    if (this.mode === \"collapse\") {\n      this.hiddenColumns.unshift(column);\n      this.generateCollapsedContent();\n      if (this.collapseHandleColumn && !colCount) {\n        this.collapseHandleColumn.show();\n      }\n    }\n  }\n  showColumn(column) {\n    var index;\n    column.show(false, true);\n    //set column width to prevent calculation loops on uninitialized columns\n    column.setWidth(column.getWidth());\n    if (this.mode === \"collapse\") {\n      index = this.hiddenColumns.indexOf(column);\n      if (index > -1) {\n        this.hiddenColumns.splice(index, 1);\n      }\n      this.generateCollapsedContent();\n      if (this.collapseHandleColumn && !this.hiddenColumns.length) {\n        this.collapseHandleColumn.hide();\n      }\n    }\n  }\n\n  //redraw columns to fit space\n  update() {\n    var working = true;\n    while (working) {\n      let width = this.table.modules.layout.getMode() == \"fitColumns\" ? this.table.columnManager.getFlexBaseWidth() : this.table.columnManager.getWidth();\n      let diff = (this.table.options.headerVisible ? this.table.columnManager.element.clientWidth : this.table.element.clientWidth) - width;\n      if (diff < 0) {\n        //table is too wide\n        let column = this.columns[this.index];\n        if (column) {\n          this.hideColumn(column);\n          this.index++;\n        } else {\n          working = false;\n        }\n      } else {\n        //table has spare space\n        let column = this.columns[this.index - 1];\n        if (column) {\n          if (diff > 0) {\n            if (diff >= column.getWidth()) {\n              this.showColumn(column);\n              this.index--;\n            } else {\n              working = false;\n            }\n          } else {\n            working = false;\n          }\n        } else {\n          working = false;\n        }\n      }\n      if (!this.table.rowManager.activeRowsCount) {\n        this.table.rowManager.renderEmptyScroll();\n      }\n    }\n  }\n  generateCollapsedContent() {\n    var rows = this.table.rowManager.getDisplayRows();\n    rows.forEach(row => {\n      this.generateCollapsedRowContent(row);\n    });\n  }\n  generateCollapsedRowContent(row) {\n    var el, contents;\n    if (row.modules.responsiveLayout) {\n      el = row.modules.responsiveLayout.element;\n      while (el.firstChild) el.removeChild(el.firstChild);\n      contents = this.collapseFormatter(this.generateCollapsedRowData(row));\n      if (contents) {\n        el.appendChild(contents);\n      }\n      row.calcHeight(true);\n    }\n  }\n  generateCollapsedRowData(row) {\n    var data = row.getData(),\n      output = [],\n      mockCellComponent;\n    this.hiddenColumns.forEach(column => {\n      var value = column.getFieldValue(data);\n      if (column.definition.title && column.field) {\n        if (column.modules.format && this.table.options.responsiveLayoutCollapseUseFormatters) {\n          mockCellComponent = {\n            value: false,\n            data: {},\n            getValue: function () {\n              return value;\n            },\n            getData: function () {\n              return data;\n            },\n            getType: function () {\n              return \"cell\";\n            },\n            getElement: function () {\n              return document.createElement(\"div\");\n            },\n            getRow: function () {\n              return row.getComponent();\n            },\n            getColumn: function () {\n              return column.getComponent();\n            },\n            getTable: () => {\n              return this.table;\n            }\n          };\n          function onRendered(callback) {\n            callback();\n          }\n          output.push({\n            field: column.field,\n            title: column.definition.title,\n            value: column.modules.format.formatter.call(this.table.modules.format, mockCellComponent, column.modules.format.params, onRendered)\n          });\n        } else {\n          output.push({\n            field: column.field,\n            title: column.definition.title,\n            value: value\n          });\n        }\n      }\n    });\n    return output;\n  }\n  formatCollapsedData(data) {\n    var list = document.createElement(\"table\");\n    data.forEach(item => {\n      var row = document.createElement(\"tr\");\n      var titleData = document.createElement(\"td\");\n      var valueData = document.createElement(\"td\");\n      var node_content;\n      var titleHighlight = document.createElement(\"strong\");\n      titleData.appendChild(titleHighlight);\n      this.modules.localize.bind(\"columns|\" + item.field, function (text) {\n        titleHighlight.innerHTML = text || item.title;\n      });\n      if (item.value instanceof Node) {\n        node_content = document.createElement(\"div\");\n        node_content.appendChild(item.value);\n        valueData.appendChild(node_content);\n      } else {\n        valueData.innerHTML = item.value;\n      }\n      row.appendChild(titleData);\n      row.appendChild(valueData);\n      list.appendChild(row);\n    });\n    return Object.keys(data).length ? list : \"\";\n  }\n}\nfunction rowSelection(cell, formatterParams, onRendered) {\n  var checkbox = document.createElement(\"input\");\n  var blocked = false;\n  checkbox.type = 'checkbox';\n  checkbox.setAttribute(\"aria-label\", \"Select Row\");\n  if (this.table.modExists(\"selectRow\", true)) {\n    checkbox.addEventListener(\"click\", e => {\n      e.stopPropagation();\n    });\n    if (typeof cell.getRow == 'function') {\n      var row = cell.getRow();\n      if (row instanceof RowComponent) {\n        checkbox.addEventListener(\"change\", e => {\n          if (this.table.options.selectableRowsRangeMode === \"click\") {\n            if (!blocked) {\n              row.toggleSelect();\n            } else {\n              blocked = false;\n            }\n          } else {\n            row.toggleSelect();\n          }\n        });\n        if (this.table.options.selectableRowsRangeMode === \"click\") {\n          checkbox.addEventListener(\"click\", e => {\n            blocked = true;\n            this.table.modules.selectRow.handleComplexRowClick(row._row, e);\n          });\n        }\n        checkbox.checked = row.isSelected && row.isSelected();\n        this.table.modules.selectRow.registerRowSelectCheckbox(row, checkbox);\n      } else {\n        checkbox = \"\";\n      }\n    } else {\n      checkbox.addEventListener(\"change\", e => {\n        if (this.table.modules.selectRow.selectedRows.length) {\n          this.table.deselectRow();\n        } else {\n          this.table.selectRow(formatterParams.rowRange);\n        }\n      });\n      this.table.modules.selectRow.registerHeaderSelectCheckbox(checkbox);\n    }\n  }\n  return checkbox;\n}\nvar extensions$1 = {\n  format: {\n    formatters: {\n      rowSelection: rowSelection\n    }\n  }\n};\nclass SelectRow extends Module {\n  static moduleName = \"selectRow\";\n  static moduleExtensions = extensions$1;\n  constructor(table) {\n    super(table);\n    this.selecting = false; //flag selecting in progress\n    this.lastClickedRow = false; //last clicked row\n    this.selectPrev = []; //hold previously selected element for drag drop selection\n    this.selectedRows = []; //hold selected rows\n    this.headerCheckboxElement = null; // hold header select element\n\n    this.registerTableOption(\"selectableRows\", \"highlight\"); //highlight rows on hover\n    this.registerTableOption(\"selectableRowsRangeMode\", \"drag\"); //highlight rows on hover\n    this.registerTableOption(\"selectableRowsRollingSelection\", true); //roll selection once maximum number of selectable rows is reached\n    this.registerTableOption(\"selectableRowsPersistence\", true); // maintain selection when table view is updated\n    this.registerTableOption(\"selectableRowsCheck\", function (data, row) {\n      return true;\n    }); //check whether row is selectable\n\n    this.registerTableFunction(\"selectRow\", this.selectRows.bind(this));\n    this.registerTableFunction(\"deselectRow\", this.deselectRows.bind(this));\n    this.registerTableFunction(\"toggleSelectRow\", this.toggleRow.bind(this));\n    this.registerTableFunction(\"getSelectedRows\", this.getSelectedRows.bind(this));\n    this.registerTableFunction(\"getSelectedData\", this.getSelectedData.bind(this));\n\n    //register component functions\n    this.registerComponentFunction(\"row\", \"select\", this.selectRows.bind(this));\n    this.registerComponentFunction(\"row\", \"deselect\", this.deselectRows.bind(this));\n    this.registerComponentFunction(\"row\", \"toggleSelect\", this.toggleRow.bind(this));\n    this.registerComponentFunction(\"row\", \"isSelected\", this.isRowSelected.bind(this));\n  }\n  initialize() {\n    this.deprecatedOptionsCheck();\n    if (this.table.options.selectableRows === \"highlight\" && this.table.options.selectableRange) {\n      this.table.options.selectableRows = false;\n    }\n    if (this.table.options.selectableRows !== false) {\n      this.subscribe(\"row-init\", this.initializeRow.bind(this));\n      this.subscribe(\"row-deleting\", this.rowDeleted.bind(this));\n      this.subscribe(\"rows-wipe\", this.clearSelectionData.bind(this));\n      this.subscribe(\"rows-retrieve\", this.rowRetrieve.bind(this));\n      if (this.table.options.selectableRows && !this.table.options.selectableRowsPersistence) {\n        this.subscribe(\"data-refreshing\", this.deselectRows.bind(this));\n      }\n    }\n  }\n  deprecatedOptionsCheck() {\n    // this.deprecationCheck(\"selectable\", \"selectableRows\", true);\n    // this.deprecationCheck(\"selectableRollingSelection\", \"selectableRowsRollingSelection\", true);\n    // this.deprecationCheck(\"selectableRangeMode\", \"selectableRowsRangeMode\", true);\n    // this.deprecationCheck(\"selectablePersistence\", \"selectableRowsPersistence\", true);\n    // this.deprecationCheck(\"selectableCheck\", \"selectableRowsCheck\", true);\n  }\n  rowRetrieve(type, prevValue) {\n    return type === \"selected\" ? this.selectedRows : prevValue;\n  }\n  rowDeleted(row) {\n    this._deselectRow(row, true);\n  }\n  clearSelectionData(silent) {\n    var prevSelected = this.selectedRows.length;\n    this.selecting = false;\n    this.lastClickedRow = false;\n    this.selectPrev = [];\n    this.selectedRows = [];\n    if (prevSelected && silent !== true) {\n      this._rowSelectionChanged();\n    }\n  }\n  initializeRow(row) {\n    var self = this,\n      selectable = self.checkRowSelectability(row),\n      element = row.getElement();\n\n    // trigger end of row selection\n    var endSelect = function () {\n      setTimeout(function () {\n        self.selecting = false;\n      }, 50);\n      document.body.removeEventListener(\"mouseup\", endSelect);\n    };\n    row.modules.select = {\n      selected: false\n    };\n    element.classList.toggle(\"tabulator-selectable\", selectable);\n    element.classList.toggle(\"tabulator-unselectable\", !selectable);\n\n    //set row selection class\n    if (self.checkRowSelectability(row)) {\n      if (self.table.options.selectableRows && self.table.options.selectableRows != \"highlight\") {\n        if (self.table.options.selectableRowsRangeMode === \"click\") {\n          element.addEventListener(\"click\", this.handleComplexRowClick.bind(this, row));\n        } else {\n          element.addEventListener(\"click\", function (e) {\n            if (!self.table.modExists(\"edit\") || !self.table.modules.edit.getCurrentCell()) {\n              self.table._clearSelection();\n            }\n            if (!self.selecting) {\n              self.toggleRow(row);\n            }\n          });\n          element.addEventListener(\"mousedown\", function (e) {\n            if (e.shiftKey) {\n              self.table._clearSelection();\n              self.selecting = true;\n              self.selectPrev = [];\n              document.body.addEventListener(\"mouseup\", endSelect);\n              document.body.addEventListener(\"keyup\", endSelect);\n              self.toggleRow(row);\n              return false;\n            }\n          });\n          element.addEventListener(\"mouseenter\", function (e) {\n            if (self.selecting) {\n              self.table._clearSelection();\n              self.toggleRow(row);\n              if (self.selectPrev[1] == row) {\n                self.toggleRow(self.selectPrev[0]);\n              }\n            }\n          });\n          element.addEventListener(\"mouseout\", function (e) {\n            if (self.selecting) {\n              self.table._clearSelection();\n              self.selectPrev.unshift(row);\n            }\n          });\n        }\n      }\n    }\n  }\n  handleComplexRowClick(row, e) {\n    if (e.shiftKey) {\n      this.table._clearSelection();\n      this.lastClickedRow = this.lastClickedRow || row;\n      var lastClickedRowIdx = this.table.rowManager.getDisplayRowIndex(this.lastClickedRow);\n      var rowIdx = this.table.rowManager.getDisplayRowIndex(row);\n      var fromRowIdx = lastClickedRowIdx <= rowIdx ? lastClickedRowIdx : rowIdx;\n      var toRowIdx = lastClickedRowIdx >= rowIdx ? lastClickedRowIdx : rowIdx;\n      var rows = this.table.rowManager.getDisplayRows().slice(0);\n      var toggledRows = rows.splice(fromRowIdx, toRowIdx - fromRowIdx + 1);\n      if (e.ctrlKey || e.metaKey) {\n        toggledRows.forEach(toggledRow => {\n          if (toggledRow !== this.lastClickedRow) {\n            if (this.table.options.selectableRows !== true && !this.isRowSelected(row)) {\n              if (this.selectedRows.length < this.table.options.selectableRows) {\n                this.toggleRow(toggledRow);\n              }\n            } else {\n              this.toggleRow(toggledRow);\n            }\n          }\n        });\n        this.lastClickedRow = row;\n      } else {\n        this.deselectRows(undefined, true);\n        if (this.table.options.selectableRows !== true) {\n          if (toggledRows.length > this.table.options.selectableRows) {\n            toggledRows = toggledRows.slice(0, this.table.options.selectableRows);\n          }\n        }\n        this.selectRows(toggledRows);\n      }\n      this.table._clearSelection();\n    } else if (e.ctrlKey || e.metaKey) {\n      this.toggleRow(row);\n      this.lastClickedRow = row;\n    } else {\n      this.deselectRows(undefined, true);\n      this.selectRows(row);\n      this.lastClickedRow = row;\n    }\n  }\n  checkRowSelectability(row) {\n    if (row && row.type === \"row\") {\n      return this.table.options.selectableRowsCheck.call(this.table, row.getComponent());\n    }\n    return false;\n  }\n\n  //toggle row selection\n  toggleRow(row) {\n    if (this.checkRowSelectability(row)) {\n      if (row.modules.select && row.modules.select.selected) {\n        this._deselectRow(row);\n      } else {\n        this._selectRow(row);\n      }\n    }\n  }\n\n  //select a number of rows\n  selectRows(rows) {\n    var changes = [],\n      rowMatch,\n      change;\n    switch (typeof rows) {\n      case \"undefined\":\n        rowMatch = this.table.rowManager.rows;\n        break;\n      case \"number\":\n        rowMatch = this.table.rowManager.findRow(rows);\n        break;\n      case \"string\":\n        rowMatch = this.table.rowManager.findRow(rows);\n        if (!rowMatch) {\n          rowMatch = this.table.rowManager.getRows(rows);\n        }\n        break;\n      default:\n        rowMatch = rows;\n        break;\n    }\n    if (Array.isArray(rowMatch)) {\n      if (rowMatch.length) {\n        rowMatch.forEach(row => {\n          change = this._selectRow(row, true, true);\n          if (change) {\n            changes.push(change);\n          }\n        });\n        this._rowSelectionChanged(false, changes);\n      }\n    } else {\n      if (rowMatch) {\n        this._selectRow(rowMatch, false, true);\n      }\n    }\n  }\n\n  //select an individual row\n  _selectRow(rowInfo, silent, force) {\n    //handle max row count\n    if (!isNaN(this.table.options.selectableRows) && this.table.options.selectableRows !== true && !force) {\n      if (this.selectedRows.length >= this.table.options.selectableRows) {\n        if (this.table.options.selectableRowsRollingSelection) {\n          this._deselectRow(this.selectedRows[0]);\n        } else {\n          return false;\n        }\n      }\n    }\n    var row = this.table.rowManager.findRow(rowInfo);\n    if (row) {\n      if (this.selectedRows.indexOf(row) == -1) {\n        row.getElement().classList.add(\"tabulator-selected\");\n        if (!row.modules.select) {\n          row.modules.select = {};\n        }\n        row.modules.select.selected = true;\n        if (row.modules.select.checkboxEl) {\n          row.modules.select.checkboxEl.checked = true;\n        }\n        this.selectedRows.push(row);\n        if (this.table.options.dataTreeSelectPropagate) {\n          this.childRowSelection(row, true);\n        }\n        this.dispatchExternal(\"rowSelected\", row.getComponent());\n        this._rowSelectionChanged(silent, row);\n        return row;\n      }\n    } else {\n      if (!silent) {\n        console.warn(\"Selection Error - No such row found, ignoring selection:\" + rowInfo);\n      }\n    }\n  }\n  isRowSelected(row) {\n    return this.selectedRows.indexOf(row) !== -1;\n  }\n\n  //deselect a number of rows\n  deselectRows(rows, silent) {\n    var changes = [],\n      rowMatch,\n      change;\n    switch (typeof rows) {\n      case \"undefined\":\n        rowMatch = Object.assign([], this.selectedRows);\n        break;\n      case \"number\":\n        rowMatch = this.table.rowManager.findRow(rows);\n        break;\n      case \"string\":\n        rowMatch = this.table.rowManager.findRow(rows);\n        if (!rowMatch) {\n          rowMatch = this.table.rowManager.getRows(rows);\n        }\n        break;\n      default:\n        rowMatch = rows;\n        break;\n    }\n    if (Array.isArray(rowMatch)) {\n      if (rowMatch.length) {\n        rowMatch.forEach(row => {\n          change = this._deselectRow(row, true, true);\n          if (change) {\n            changes.push(change);\n          }\n        });\n        this._rowSelectionChanged(silent, [], changes);\n      }\n    } else {\n      if (rowMatch) {\n        this._deselectRow(rowMatch, silent, true);\n      }\n    }\n  }\n\n  //deselect an individual row\n  _deselectRow(rowInfo, silent) {\n    var self = this,\n      row = self.table.rowManager.findRow(rowInfo),\n      index,\n      element;\n    if (row) {\n      index = self.selectedRows.findIndex(function (selectedRow) {\n        return selectedRow == row;\n      });\n      if (index > -1) {\n        element = row.getElement();\n        if (element) {\n          element.classList.remove(\"tabulator-selected\");\n        }\n        if (!row.modules.select) {\n          row.modules.select = {};\n        }\n        row.modules.select.selected = false;\n        if (row.modules.select.checkboxEl) {\n          row.modules.select.checkboxEl.checked = false;\n        }\n        self.selectedRows.splice(index, 1);\n        if (this.table.options.dataTreeSelectPropagate) {\n          this.childRowSelection(row, false);\n        }\n        this.dispatchExternal(\"rowDeselected\", row.getComponent());\n        self._rowSelectionChanged(silent, undefined, row);\n        return row;\n      }\n    } else {\n      if (!silent) {\n        console.warn(\"Deselection Error - No such row found, ignoring selection:\" + rowInfo);\n      }\n    }\n  }\n  getSelectedData() {\n    var data = [];\n    this.selectedRows.forEach(function (row) {\n      data.push(row.getData());\n    });\n    return data;\n  }\n  getSelectedRows() {\n    var rows = [];\n    this.selectedRows.forEach(function (row) {\n      rows.push(row.getComponent());\n    });\n    return rows;\n  }\n  _rowSelectionChanged(silent, selected = [], deselected = []) {\n    if (this.headerCheckboxElement) {\n      if (this.selectedRows.length === 0) {\n        this.headerCheckboxElement.checked = false;\n        this.headerCheckboxElement.indeterminate = false;\n      } else if (this.table.rowManager.rows.length === this.selectedRows.length) {\n        this.headerCheckboxElement.checked = true;\n        this.headerCheckboxElement.indeterminate = false;\n      } else {\n        this.headerCheckboxElement.indeterminate = true;\n        this.headerCheckboxElement.checked = false;\n      }\n    }\n    if (!silent) {\n      if (!Array.isArray(selected)) {\n        selected = [selected];\n      }\n      selected = selected.map(row => row.getComponent());\n      if (!Array.isArray(deselected)) {\n        deselected = [deselected];\n      }\n      deselected = deselected.map(row => row.getComponent());\n      this.dispatchExternal(\"rowSelectionChanged\", this.getSelectedData(), this.getSelectedRows(), selected, deselected);\n    }\n  }\n  registerRowSelectCheckbox(row, element) {\n    if (!row._row.modules.select) {\n      row._row.modules.select = {};\n    }\n    row._row.modules.select.checkboxEl = element;\n  }\n  registerHeaderSelectCheckbox(element) {\n    this.headerCheckboxElement = element;\n  }\n  childRowSelection(row, select) {\n    var children = this.table.modules.dataTree.getChildren(row, true, true);\n    if (select) {\n      for (let child of children) {\n        this._selectRow(child, true);\n      }\n    } else {\n      for (let child of children) {\n        this._deselectRow(child, true);\n      }\n    }\n  }\n}\nclass RangeComponent {\n  constructor(range) {\n    this._range = range;\n    return new Proxy(this, {\n      get: function (target, name, receiver) {\n        if (typeof target[name] !== \"undefined\") {\n          return target[name];\n        } else {\n          return target._range.table.componentFunctionBinder.handle(\"range\", target._range, name);\n        }\n      }\n    });\n  }\n  getElement() {\n    return this._range.element;\n  }\n  getData() {\n    return this._range.getData();\n  }\n  getCells() {\n    return this._range.getCells(true);\n  }\n  getStructuredCells() {\n    return this._range.getStructuredCells();\n  }\n  getRows() {\n    return this._range.getRows().map(row => row.getComponent());\n  }\n  getColumns() {\n    return this._range.getColumns().map(column => column.getComponent());\n  }\n  getBounds() {\n    return this._range.getBounds();\n  }\n  getTopEdge() {\n    return this._range.top;\n  }\n  getBottomEdge() {\n    return this._range.bottom;\n  }\n  getLeftEdge() {\n    return this._range.left;\n  }\n  getRightEdge() {\n    return this._range.right;\n  }\n  setBounds(start, end) {\n    if (this._range.destroyedGuard(\"setBounds\")) {\n      this._range.setBounds(start ? start._cell : start, end ? end._cell : end);\n    }\n  }\n  setStartBound(start) {\n    if (this._range.destroyedGuard(\"setStartBound\")) {\n      this._range.setEndBound(start ? start._cell : start);\n      this._range.rangeManager.layoutElement();\n    }\n  }\n  setEndBound(end) {\n    if (this._range.destroyedGuard(\"setEndBound\")) {\n      this._range.setEndBound(end ? end._cell : end);\n      this._range.rangeManager.layoutElement();\n    }\n  }\n  clearValues() {\n    if (this._range.destroyedGuard(\"clearValues\")) {\n      this._range.clearValues();\n    }\n  }\n  remove() {\n    if (this._range.destroyedGuard(\"remove\")) {\n      this._range.destroy(true);\n    }\n  }\n}\nclass Range extends CoreFeature {\n  constructor(table, rangeManager, start, end) {\n    super(table);\n    this.rangeManager = rangeManager;\n    this.element = null;\n    this.initialized = false;\n    this.initializing = {\n      start: false,\n      end: false\n    };\n    this.destroyed = false;\n    this.top = 0;\n    this.bottom = 0;\n    this.left = 0;\n    this.right = 0;\n    this.table = table;\n    this.start = {\n      row: 0,\n      col: 0\n    };\n    this.end = {\n      row: 0,\n      col: 0\n    };\n    if (this.rangeManager.rowHeader) {\n      this.left = 1;\n      this.right = 1;\n      this.start.col = 1;\n      this.end.col = 1;\n    }\n    this.initElement();\n    setTimeout(() => {\n      this.initBounds(start, end);\n    });\n  }\n  initElement() {\n    this.element = document.createElement(\"div\");\n    this.element.classList.add(\"tabulator-range\");\n  }\n  initBounds(start, end) {\n    this._updateMinMax();\n    if (start) {\n      this.setBounds(start, end || start);\n    }\n  }\n\n  ///////////////////////////////////\n  ///////   Boundary Setup    ///////\n  ///////////////////////////////////\n\n  setStart(row, col) {\n    if (this.start.row !== row || this.start.col !== col) {\n      this.start.row = row;\n      this.start.col = col;\n      this.initializing.start = true;\n      this._updateMinMax();\n    }\n  }\n  setEnd(row, col) {\n    if (this.end.row !== row || this.end.col !== col) {\n      this.end.row = row;\n      this.end.col = col;\n      this.initializing.end = true;\n      this._updateMinMax();\n    }\n  }\n  setBounds(start, end, visibleRows) {\n    if (start) {\n      this.setStartBound(start);\n    }\n    this.setEndBound(end || start);\n    this.rangeManager.layoutElement(visibleRows);\n  }\n  setStartBound(element) {\n    var row, col;\n    if (element.type === \"column\") {\n      if (this.rangeManager.columnSelection) {\n        this.setStart(0, element.getPosition() - 1);\n      }\n    } else {\n      row = element.row.position - 1;\n      col = element.column.getPosition() - 1;\n      if (element.column === this.rangeManager.rowHeader) {\n        this.setStart(row, 1);\n      } else {\n        this.setStart(row, col);\n      }\n    }\n  }\n  setEndBound(element) {\n    var rowsCount = this._getTableRows().length,\n      row,\n      col,\n      isRowHeader;\n    if (element.type === \"column\") {\n      if (this.rangeManager.columnSelection) {\n        if (this.rangeManager.selecting === \"column\") {\n          this.setEnd(rowsCount - 1, element.getPosition() - 1);\n        } else if (this.rangeManager.selecting === \"cell\") {\n          this.setEnd(0, element.getPosition() - 1);\n        }\n      }\n    } else {\n      row = element.row.position - 1;\n      col = element.column.getPosition() - 1;\n      isRowHeader = element.column === this.rangeManager.rowHeader;\n      if (this.rangeManager.selecting === \"row\") {\n        this.setEnd(row, this._getTableColumns().length - 1);\n      } else if (this.rangeManager.selecting !== \"row\" && isRowHeader) {\n        this.setEnd(row, 0);\n      } else if (this.rangeManager.selecting === \"column\") {\n        this.setEnd(rowsCount - 1, col);\n      } else {\n        this.setEnd(row, col);\n      }\n    }\n  }\n  _updateMinMax() {\n    this.top = Math.min(this.start.row, this.end.row);\n    this.bottom = Math.max(this.start.row, this.end.row);\n    this.left = Math.min(this.start.col, this.end.col);\n    this.right = Math.max(this.start.col, this.end.col);\n    if (this.initialized) {\n      this.dispatchExternal(\"rangeChanged\", this.getComponent());\n    } else {\n      if (this.initializing.start && this.initializing.end) {\n        this.initialized = true;\n        this.dispatchExternal(\"rangeAdded\", this.getComponent());\n      }\n    }\n  }\n  _getTableColumns() {\n    return this.table.columnManager.getVisibleColumnsByIndex();\n  }\n  _getTableRows() {\n    return this.table.rowManager.getDisplayRows().filter(row => row.type === \"row\");\n  }\n\n  ///////////////////////////////////\n  ///////      Rendering      ///////\n  ///////////////////////////////////\n\n  layout() {\n    var _vDomTop = this.table.rowManager.renderer.vDomTop,\n      _vDomBottom = this.table.rowManager.renderer.vDomBottom,\n      _vDomLeft = this.table.columnManager.renderer.leftCol,\n      _vDomRight = this.table.columnManager.renderer.rightCol,\n      top,\n      bottom,\n      left,\n      right,\n      topLeftCell,\n      bottomRightCell,\n      topLeftCellEl,\n      bottomRightCellEl,\n      topLeftRowEl,\n      bottomRightRowEl;\n    if (this.table.options.renderHorizontal === \"virtual\" && this.rangeManager.rowHeader) {\n      _vDomRight += 1;\n    }\n    if (_vDomTop == null) {\n      _vDomTop = 0;\n    }\n    if (_vDomBottom == null) {\n      _vDomBottom = Infinity;\n    }\n    if (_vDomLeft == null) {\n      _vDomLeft = 0;\n    }\n    if (_vDomRight == null) {\n      _vDomRight = Infinity;\n    }\n    if (this.overlaps(_vDomLeft, _vDomTop, _vDomRight, _vDomBottom)) {\n      top = Math.max(this.top, _vDomTop);\n      bottom = Math.min(this.bottom, _vDomBottom);\n      left = Math.max(this.left, _vDomLeft);\n      right = Math.min(this.right, _vDomRight);\n      topLeftCell = this.rangeManager.getCell(top, left);\n      bottomRightCell = this.rangeManager.getCell(bottom, right);\n      topLeftCellEl = topLeftCell.getElement();\n      bottomRightCellEl = bottomRightCell.getElement();\n      topLeftRowEl = topLeftCell.row.getElement();\n      bottomRightRowEl = bottomRightCell.row.getElement();\n      this.element.classList.add(\"tabulator-range-active\");\n      // this.element.classList.toggle(\"tabulator-range-active\", this === this.rangeManager.activeRange);\n\n      if (this.table.rtl) {\n        this.element.style.right = topLeftRowEl.offsetWidth - topLeftCellEl.offsetLeft - topLeftCellEl.offsetWidth + \"px\";\n        this.element.style.width = topLeftCellEl.offsetLeft + topLeftCellEl.offsetWidth - bottomRightCellEl.offsetLeft + \"px\";\n      } else {\n        this.element.style.left = topLeftRowEl.offsetLeft + topLeftCellEl.offsetLeft + \"px\";\n        this.element.style.width = bottomRightCellEl.offsetLeft + bottomRightCellEl.offsetWidth - topLeftCellEl.offsetLeft + \"px\";\n      }\n      this.element.style.top = topLeftRowEl.offsetTop + \"px\";\n      this.element.style.height = bottomRightRowEl.offsetTop + bottomRightRowEl.offsetHeight - topLeftRowEl.offsetTop + \"px\";\n    }\n  }\n  atTopLeft(cell) {\n    return cell.row.position - 1 === this.top && cell.column.getPosition() - 1 === this.left;\n  }\n  atBottomRight(cell) {\n    return cell.row.position - 1 === this.bottom && cell.column.getPosition() - 1 === this.right;\n  }\n  occupies(cell) {\n    return this.occupiesRow(cell.row) && this.occupiesColumn(cell.column);\n  }\n  occupiesRow(row) {\n    return this.top <= row.position - 1 && row.position - 1 <= this.bottom;\n  }\n  occupiesColumn(col) {\n    return this.left <= col.getPosition() - 1 && col.getPosition() - 1 <= this.right;\n  }\n  overlaps(left, top, right, bottom) {\n    if (this.left > right || left > this.right || this.top > bottom || top > this.bottom) {\n      return false;\n    }\n    return true;\n  }\n  getData() {\n    var data = [],\n      rows = this.getRows(),\n      columns = this.getColumns();\n    rows.forEach(row => {\n      var rowData = row.getData(),\n        result = {};\n      columns.forEach(column => {\n        result[column.field] = rowData[column.field];\n      });\n      data.push(result);\n    });\n    return data;\n  }\n  getCells(structured, component) {\n    var cells = [],\n      rows = this.getRows(),\n      columns = this.getColumns();\n    if (structured) {\n      cells = rows.map(row => {\n        var arr = [];\n        row.getCells().forEach(cell => {\n          if (columns.includes(cell.column)) {\n            arr.push(component ? cell.getComponent() : cell);\n          }\n        });\n        return arr;\n      });\n    } else {\n      rows.forEach(row => {\n        row.getCells().forEach(cell => {\n          if (columns.includes(cell.column)) {\n            cells.push(component ? cell.getComponent() : cell);\n          }\n        });\n      });\n    }\n    return cells;\n  }\n  getStructuredCells() {\n    return this.getCells(true, true);\n  }\n  getRows() {\n    return this._getTableRows().slice(this.top, this.bottom + 1);\n  }\n  getColumns() {\n    return this._getTableColumns().slice(this.left, this.right + 1);\n  }\n  clearValues() {\n    var cells = this.getCells();\n    var clearValue = this.table.options.selectableRangeClearCellsValue;\n    this.table.blockRedraw();\n    cells.forEach(cell => {\n      cell.setValue(clearValue);\n    });\n    this.table.restoreRedraw();\n  }\n  getBounds(component) {\n    var cells = this.getCells(false, component),\n      output = {\n        start: null,\n        end: null\n      };\n    if (cells.length) {\n      output.start = cells[0];\n      output.end = cells[cells.length - 1];\n    } else {\n      console.warn(\"No bounds defined on range\");\n    }\n    return output;\n  }\n  getComponent() {\n    if (!this.component) {\n      this.component = new RangeComponent(this);\n    }\n    return this.component;\n  }\n  destroy(notify) {\n    this.destroyed = true;\n    this.element.remove();\n    if (notify) {\n      this.rangeManager.rangeRemoved(this);\n    }\n    if (this.initialized) {\n      this.dispatchExternal(\"rangeRemoved\", this.getComponent());\n    }\n  }\n  destroyedGuard(func) {\n    if (this.destroyed) {\n      console.warn(\"You cannot call the \" + func + \" function on a destroyed range\");\n    }\n    return !this.destroyed;\n  }\n}\nvar bindings = {\n  rangeJumpUp: [\"ctrl + 38\", \"meta + 38\"],\n  rangeJumpDown: [\"ctrl + 40\", \"meta + 40\"],\n  rangeJumpLeft: [\"ctrl + 37\", \"meta + 37\"],\n  rangeJumpRight: [\"ctrl + 39\", \"meta + 39\"],\n  rangeExpandUp: \"shift + 38\",\n  rangeExpandDown: \"shift + 40\",\n  rangeExpandLeft: \"shift + 37\",\n  rangeExpandRight: \"shift + 39\",\n  rangeExpandJumpUp: [\"ctrl + shift + 38\", \"meta + shift + 38\"],\n  rangeExpandJumpDown: [\"ctrl + shift + 40\", \"meta + shift + 40\"],\n  rangeExpandJumpLeft: [\"ctrl + shift + 37\", \"meta + shift + 37\"],\n  rangeExpandJumpRight: [\"ctrl + shift + 39\", \"meta + shift + 39\"]\n};\nvar actions = {\n  rangeJumpLeft: function (e) {\n    this.dispatch(\"keybinding-nav-range\", e, \"left\", true, false);\n  },\n  rangeJumpRight: function (e) {\n    this.dispatch(\"keybinding-nav-range\", e, \"right\", true, false);\n  },\n  rangeJumpUp: function (e) {\n    this.dispatch(\"keybinding-nav-range\", e, \"up\", true, false);\n  },\n  rangeJumpDown: function (e) {\n    this.dispatch(\"keybinding-nav-range\", e, \"down\", true, false);\n  },\n  rangeExpandLeft: function (e) {\n    this.dispatch(\"keybinding-nav-range\", e, \"left\", false, true);\n  },\n  rangeExpandRight: function (e) {\n    this.dispatch(\"keybinding-nav-range\", e, \"right\", false, true);\n  },\n  rangeExpandUp: function (e) {\n    this.dispatch(\"keybinding-nav-range\", e, \"up\", false, true);\n  },\n  rangeExpandDown: function (e) {\n    this.dispatch(\"keybinding-nav-range\", e, \"down\", false, true);\n  },\n  rangeExpandJumpLeft: function (e) {\n    this.dispatch(\"keybinding-nav-range\", e, \"left\", true, true);\n  },\n  rangeExpandJumpRight: function (e) {\n    this.dispatch(\"keybinding-nav-range\", e, \"right\", true, true);\n  },\n  rangeExpandJumpUp: function (e) {\n    this.dispatch(\"keybinding-nav-range\", e, \"up\", true, true);\n  },\n  rangeExpandJumpDown: function (e) {\n    this.dispatch(\"keybinding-nav-range\", e, \"down\", true, true);\n  }\n};\nvar pasteActions = {\n  range: function (data) {\n    var rows = [],\n      range = this.table.modules.selectRange.activeRange,\n      singleCell = false,\n      bounds,\n      startCell,\n      startRow,\n      rowWidth,\n      dataLength;\n    dataLength = data.length;\n    if (range) {\n      bounds = range.getBounds();\n      startCell = bounds.start;\n      if (bounds.start === bounds.end) {\n        singleCell = true;\n      }\n      if (startCell) {\n        rows = this.table.rowManager.activeRows.slice();\n        startRow = rows.indexOf(startCell.row);\n        if (singleCell) {\n          rowWidth = data.length;\n        } else {\n          rowWidth = rows.indexOf(bounds.end.row) - startRow + 1;\n        }\n        if (startRow > -1) {\n          this.table.blockRedraw();\n          rows = rows.slice(startRow, startRow + rowWidth);\n          rows.forEach((row, i) => {\n            row.updateData(data[i % dataLength]);\n          });\n          this.table.restoreRedraw();\n        }\n      }\n    }\n    return rows;\n  }\n};\nvar pasteParsers = {\n  range: function (clipboard) {\n    var data = [],\n      rows = [],\n      range = this.table.modules.selectRange.activeRange,\n      singleCell = false,\n      bounds,\n      startCell,\n      colWidth,\n      columnMap,\n      startCol;\n    if (range) {\n      bounds = range.getBounds();\n      startCell = bounds.start;\n      if (bounds.start === bounds.end) {\n        singleCell = true;\n      }\n      if (startCell) {\n        //get data from clipboard into array of columns and rows.\n        clipboard = clipboard.split(\"\\n\");\n        clipboard.forEach(function (row) {\n          data.push(row.split(\"\\t\"));\n        });\n        if (data.length) {\n          columnMap = this.table.columnManager.getVisibleColumnsByIndex();\n          startCol = columnMap.indexOf(startCell.column);\n          if (startCol > -1) {\n            if (singleCell) {\n              colWidth = data[0].length;\n            } else {\n              colWidth = columnMap.indexOf(bounds.end.column) - startCol + 1;\n            }\n            columnMap = columnMap.slice(startCol, startCol + colWidth);\n            data.forEach(item => {\n              var row = {};\n              var itemLength = item.length;\n              columnMap.forEach(function (col, i) {\n                row[col.field] = item[i % itemLength];\n              });\n              rows.push(row);\n            });\n            return rows;\n          }\n        }\n      }\n    }\n    return false;\n  }\n};\nvar columnLookups = {\n  range: function () {\n    var columns = this.modules.selectRange.selectedColumns();\n    if (this.columnManager.rowHeader) {\n      columns.unshift(this.columnManager.rowHeader);\n    }\n    return columns;\n  }\n};\nvar rowLookups = {\n  range: function () {\n    return this.modules.selectRange.selectedRows();\n  }\n};\nvar extensions = {\n  keybindings: {\n    bindings: bindings,\n    actions: actions\n  },\n  clipboard: {\n    pasteActions: pasteActions,\n    pasteParsers: pasteParsers\n  },\n  export: {\n    columnLookups: columnLookups,\n    rowLookups: rowLookups\n  }\n};\nclass SelectRange extends Module {\n  static moduleName = \"selectRange\";\n  static moduleInitOrder = 1;\n  static moduleExtensions = extensions;\n  constructor(table) {\n    super(table);\n    this.selecting = \"cell\";\n    this.mousedown = false;\n    this.ranges = [];\n    this.overlay = null;\n    this.rowHeader = null;\n    this.layoutChangeTimeout = null;\n    this.columnSelection = false;\n    this.rowSelection = false;\n    this.maxRanges = 0;\n    this.activeRange = false;\n    this.blockKeydown = false;\n    this.keyDownEvent = this._handleKeyDown.bind(this);\n    this.mouseUpEvent = this._handleMouseUp.bind(this);\n    this.registerTableOption(\"selectableRange\", false); //enable selectable range\n    this.registerTableOption(\"selectableRangeColumns\", false); //enable selectable range\n    this.registerTableOption(\"selectableRangeRows\", false); //enable selectable range\n    this.registerTableOption(\"selectableRangeClearCells\", false); //allow clearing of active range\n    this.registerTableOption(\"selectableRangeClearCellsValue\", undefined); //value for cleared active range\n\n    this.registerTableFunction(\"getRangesData\", this.getRangesData.bind(this));\n    this.registerTableFunction(\"getRanges\", this.getRanges.bind(this));\n    this.registerTableFunction(\"addRange\", this.addRangeFromComponent.bind(this));\n    this.registerComponentFunction(\"cell\", \"getRanges\", this.cellGetRanges.bind(this));\n    this.registerComponentFunction(\"row\", \"getRanges\", this.rowGetRanges.bind(this));\n    this.registerComponentFunction(\"column\", \"getRanges\", this.colGetRanges.bind(this));\n  }\n\n  ///////////////////////////////////\n  ///////    Initialization   ///////\n  ///////////////////////////////////\n\n  initialize() {\n    if (this.options(\"selectableRange\")) {\n      if (!this.options(\"selectableRows\")) {\n        this.maxRanges = this.options(\"selectableRange\");\n        this.initializeTable();\n        this.initializeWatchers();\n      } else {\n        console.warn(\"SelectRange functionality cannot be used in conjunction with row selection\");\n      }\n      if (this.options('columns').findIndex(column => column.frozen) > 0) {\n        console.warn(\"Having frozen column in arbitrary position with selectRange option may result in unpredictable behavior.\");\n      }\n      if (this.options('columns').filter(column => column.frozen) > 1) {\n        console.warn(\"Having multiple frozen columns with selectRange option may result in unpredictable behavior.\");\n      }\n    }\n  }\n  initializeTable() {\n    this.overlay = document.createElement(\"div\");\n    this.overlay.classList.add(\"tabulator-range-overlay\");\n    this.rangeContainer = document.createElement(\"div\");\n    this.rangeContainer.classList.add(\"tabulator-range-container\");\n    this.activeRangeCellElement = document.createElement(\"div\");\n    this.activeRangeCellElement.classList.add(\"tabulator-range-cell-active\");\n    this.overlay.appendChild(this.rangeContainer);\n    this.overlay.appendChild(this.activeRangeCellElement);\n    this.table.rowManager.element.addEventListener(\"keydown\", this.keyDownEvent);\n    this.resetRanges();\n    this.table.rowManager.element.appendChild(this.overlay);\n    this.table.columnManager.element.setAttribute(\"tabindex\", 0);\n    this.table.element.classList.add(\"tabulator-ranges\");\n  }\n  initializeWatchers() {\n    this.columnSelection = this.options(\"selectableRangeColumns\");\n    this.rowSelection = this.options(\"selectableRangeRows\");\n    this.subscribe(\"column-init\", this.initializeColumn.bind(this));\n    this.subscribe(\"column-mousedown\", this.handleColumnMouseDown.bind(this));\n    this.subscribe(\"column-mousemove\", this.handleColumnMouseMove.bind(this));\n    this.subscribe(\"column-resized\", this.handleColumnResized.bind(this));\n    this.subscribe(\"column-width\", this.layoutChange.bind(this));\n    this.subscribe(\"column-height\", this.layoutChange.bind(this));\n    this.subscribe(\"column-resized\", this.layoutChange.bind(this));\n    this.subscribe(\"columns-loaded\", this.updateHeaderColumn.bind(this));\n    this.subscribe(\"cell-height\", this.layoutChange.bind(this));\n    this.subscribe(\"cell-rendered\", this.renderCell.bind(this));\n    this.subscribe(\"cell-mousedown\", this.handleCellMouseDown.bind(this));\n    this.subscribe(\"cell-mousemove\", this.handleCellMouseMove.bind(this));\n    this.subscribe(\"cell-click\", this.handleCellClick.bind(this));\n    this.subscribe(\"cell-editing\", this.handleEditingCell.bind(this));\n    this.subscribe(\"page-changed\", this.redraw.bind(this));\n    this.subscribe(\"scroll-vertical\", this.layoutChange.bind(this));\n    this.subscribe(\"scroll-horizontal\", this.layoutChange.bind(this));\n    this.subscribe(\"data-destroy\", this.tableDestroyed.bind(this));\n    this.subscribe(\"data-processed\", this.resetRanges.bind(this));\n    this.subscribe(\"table-layout\", this.layoutElement.bind(this));\n    this.subscribe(\"table-redraw\", this.redraw.bind(this));\n    this.subscribe(\"table-destroy\", this.tableDestroyed.bind(this));\n    this.subscribe(\"edit-editor-clear\", this.finishEditingCell.bind(this));\n    this.subscribe(\"edit-blur\", this.restoreFocus.bind(this));\n    this.subscribe(\"keybinding-nav-prev\", this.keyNavigate.bind(this, \"left\"));\n    this.subscribe(\"keybinding-nav-next\", this.keyNavigate.bind(this, \"right\"));\n    this.subscribe(\"keybinding-nav-left\", this.keyNavigate.bind(this, \"left\"));\n    this.subscribe(\"keybinding-nav-right\", this.keyNavigate.bind(this, \"right\"));\n    this.subscribe(\"keybinding-nav-up\", this.keyNavigate.bind(this, \"up\"));\n    this.subscribe(\"keybinding-nav-down\", this.keyNavigate.bind(this, \"down\"));\n    this.subscribe(\"keybinding-nav-range\", this.keyNavigateRange.bind(this));\n  }\n  initializeColumn(column) {\n    if (this.columnSelection && column.definition.headerSort && this.options(\"headerSortClickElement\") !== \"icon\") {\n      console.warn(\"Using column headerSort with selectableRangeColumns option may result in unpredictable behavior. Consider using headerSortClickElement: 'icon'.\");\n    }\n    if (column.modules.edit) ;\n  }\n  updateHeaderColumn() {\n    var frozenCols;\n    if (this.rowSelection) {\n      this.rowHeader = this.table.columnManager.getVisibleColumnsByIndex()[0];\n      if (this.rowHeader) {\n        this.rowHeader.definition.cssClass = this.rowHeader.definition.cssClass + \" tabulator-range-row-header\";\n        if (this.rowHeader.definition.headerSort) {\n          console.warn(\"Using column headerSort with selectableRangeRows option may result in unpredictable behavior\");\n        }\n        if (this.rowHeader.definition.editor) {\n          console.warn(\"Using column editor with selectableRangeRows option may result in unpredictable behavior\");\n        }\n      }\n    }\n\n    //warn if invalid frozen column configuration detected\n    if (this.table.modules.frozenColumns && this.table.modules.frozenColumns.active) {\n      frozenCols = this.table.modules.frozenColumns.getFrozenColumns();\n      if (frozenCols.length > 1 || frozenCols.length === 1 && frozenCols[0] !== this.rowHeader) {\n        console.warn(\"Using frozen columns that are not the range header in combination with the selectRange option may result in unpredictable behavior\");\n      }\n    }\n  }\n\n  ///////////////////////////////////\n  ///////   Table Functions   ///////\n  ///////////////////////////////////\n\n  getRanges() {\n    return this.ranges.map(range => range.getComponent());\n  }\n  getRangesData() {\n    return this.ranges.map(range => range.getData());\n  }\n  addRangeFromComponent(start, end) {\n    start = start ? start._cell : null;\n    end = end ? end._cell : null;\n    return this.addRange(start, end);\n  }\n\n  ///////////////////////////////////\n  /////// Component Functions ///////\n  ///////////////////////////////////\n\n  cellGetRanges(cell) {\n    var ranges = [];\n    if (cell.column === this.rowHeader) {\n      ranges = this.ranges.filter(range => range.occupiesRow(cell.row));\n    } else {\n      ranges = this.ranges.filter(range => range.occupies(cell));\n    }\n    return ranges.map(range => range.getComponent());\n  }\n  rowGetRanges(row) {\n    var ranges = this.ranges.filter(range => range.occupiesRow(row));\n    return ranges.map(range => range.getComponent());\n  }\n  colGetRanges(col) {\n    var ranges = this.ranges.filter(range => range.occupiesColumn(col));\n    return ranges.map(range => range.getComponent());\n  }\n\n  ///////////////////////////////////\n  ////////// Event Handlers /////////\n  ///////////////////////////////////\n\n  _handleMouseUp(e) {\n    this.mousedown = false;\n    document.removeEventListener(\"mouseup\", this.mouseUpEvent);\n  }\n  _handleKeyDown(e) {\n    if (!this.blockKeydown && (!this.table.modules.edit || this.table.modules.edit && !this.table.modules.edit.currentCell)) {\n      if (e.key === \"Enter\") {\n        // is editing a cell?\n        if (this.table.modules.edit && this.table.modules.edit.currentCell) {\n          return;\n        }\n        this.table.modules.edit.editCell(this.getActiveCell());\n        e.preventDefault();\n      }\n      if ((e.key === \"Backspace\" || e.key === \"Delete\") && this.options(\"selectableRangeClearCells\")) {\n        if (this.activeRange) {\n          this.activeRange.clearValues();\n        }\n      }\n    }\n  }\n  initializeFocus(cell) {\n    var range;\n    try {\n      if (document.selection) {\n        // IE\n        range = document.body.createTextRange();\n        range.moveToElementText(cell.getElement());\n        range.select();\n      } else if (window.getSelection) {\n        range = document.createRange();\n        range.selectNode(cell.getElement());\n        window.getSelection().removeAllRanges();\n        window.getSelection().addRange(range);\n      }\n    } catch (e) {}\n  }\n  restoreFocus(element) {\n    this.table.rowManager.element.focus();\n    return true;\n  }\n\n  ///////////////////////////////////\n  ////// Column Functionality ///////\n  ///////////////////////////////////\n\n  handleColumnResized(column) {\n    var selected;\n    if (this.selecting !== \"column\" && this.selecting !== \"all\") {\n      return;\n    }\n    selected = this.ranges.some(range => range.occupiesColumn(column));\n    if (!selected) {\n      return;\n    }\n    this.ranges.forEach(range => {\n      var selectedColumns = range.getColumns(true);\n      selectedColumns.forEach(selectedColumn => {\n        if (selectedColumn !== column) {\n          selectedColumn.setWidth(column.width);\n        }\n      });\n    });\n  }\n  handleColumnMouseDown(event, column) {\n    if (event.button === 2 && (this.selecting === \"column\" || this.selecting === \"all\") && this.activeRange.occupiesColumn(column)) {\n      return;\n    }\n    this.mousedown = true;\n    document.addEventListener(\"mouseup\", this.mouseUpEvent);\n    this.newSelection(event, column);\n  }\n  handleColumnMouseMove(e, column) {\n    if (column === this.rowHeader || !this.mousedown || this.selecting === 'all') {\n      return;\n    }\n    this.activeRange.setBounds(false, column, true);\n  }\n\n  ///////////////////////////////////\n  //////// Cell Functionality ///////\n  ///////////////////////////////////\n\n  renderCell(cell) {\n    var el = cell.getElement(),\n      rangeIdx = this.ranges.findIndex(range => range.occupies(cell));\n    el.classList.toggle(\"tabulator-range-selected\", rangeIdx !== -1);\n    el.classList.toggle(\"tabulator-range-only-cell-selected\", this.ranges.length === 1 && this.ranges[0].atTopLeft(cell) && this.ranges[0].atBottomRight(cell));\n    el.dataset.range = rangeIdx;\n  }\n  handleCellMouseDown(event, cell) {\n    if (event.button === 2 && (this.activeRange.occupies(cell) || (this.selecting === \"row\" || this.selecting === \"all\") && this.activeRange.occupiesRow(cell.row))) {\n      return;\n    }\n    this.mousedown = true;\n    document.addEventListener(\"mouseup\", this.mouseUpEvent);\n    this.newSelection(event, cell);\n  }\n  handleCellMouseMove(e, cell) {\n    if (!this.mousedown || this.selecting === \"all\") {\n      return;\n    }\n    this.activeRange.setBounds(false, cell, true);\n  }\n  handleCellClick(e, cell) {\n    this.initializeFocus(cell);\n  }\n  handleEditingCell(cell) {\n    if (this.activeRange) {\n      this.activeRange.setBounds(cell);\n    }\n  }\n  finishEditingCell() {\n    this.blockKeydown = true;\n    this.table.rowManager.element.focus();\n    setTimeout(() => {\n      this.blockKeydown = false;\n    }, 10);\n  }\n\n  ///////////////////////////////////\n  ///////     Navigation      ///////\n  ///////////////////////////////////\n\n  keyNavigate(dir, e) {\n    if (this.navigate(false, false, dir)) {\n      e.preventDefault();\n    }\n  }\n  keyNavigateRange(e, dir, jump, expand) {\n    if (this.navigate(jump, expand, dir)) {\n      e.preventDefault();\n    }\n  }\n  navigate(jump, expand, dir) {\n    var moved = false,\n      range,\n      rangeEdge,\n      nextRow,\n      nextCol,\n      row,\n      column;\n\n    // Don't navigate while editing\n    if (this.table.modules.edit && this.table.modules.edit.currentCell) {\n      return false;\n    }\n\n    // If there are more than 1 range, use the active range and destroy the others\n    if (this.ranges.length > 1) {\n      this.ranges = this.ranges.filter(range => {\n        if (range === this.activeRange) {\n          range.setEnd(range.start.row, range.start.col);\n          return true;\n        }\n        range.destroy();\n        return false;\n      });\n    }\n    range = this.activeRange;\n    rangeEdge = expand ? range.end : range.start;\n    nextRow = rangeEdge.row;\n    nextCol = rangeEdge.col;\n    if (jump) {\n      switch (dir) {\n        case \"left\":\n          nextCol = this.findJumpCellLeft(range.start.row, rangeEdge.col);\n          break;\n        case \"right\":\n          nextCol = this.findJumpCellRight(range.start.row, rangeEdge.col);\n          break;\n        case \"up\":\n          nextRow = this.findJumpCellUp(rangeEdge.row, range.start.col);\n          break;\n        case \"down\":\n          nextRow = this.findJumpCellDown(rangeEdge.row, range.start.col);\n          break;\n      }\n    } else {\n      if (expand) {\n        if (this.selecting === 'row' && (dir === 'left' || dir === 'right') || this.selecting === 'column' && (dir === 'up' || dir === 'down')) {\n          return;\n        }\n      }\n      switch (dir) {\n        case \"left\":\n          nextCol = Math.max(nextCol - 1, 0);\n          break;\n        case \"right\":\n          nextCol = Math.min(nextCol + 1, this.getTableColumns().length - 1);\n          break;\n        case \"up\":\n          nextRow = Math.max(nextRow - 1, 0);\n          break;\n        case \"down\":\n          nextRow = Math.min(nextRow + 1, this.getTableRows().length - 1);\n          break;\n      }\n    }\n    moved = nextCol !== rangeEdge.col || nextRow !== rangeEdge.row;\n    if (!expand) {\n      range.setStart(nextRow, nextCol);\n    }\n    range.setEnd(nextRow, nextCol);\n    if (!expand) {\n      this.selecting = \"cell\";\n    }\n    if (moved) {\n      row = this.getRowByRangePos(range.end.row);\n      column = this.getColumnByRangePos(range.end.col);\n      if ((dir === 'left' || dir === 'right') && column.getElement().parentNode === null) {\n        column.getComponent().scrollTo(undefined, false);\n      } else if ((dir === 'up' || dir === 'down') && row.getElement().parentNode === null) {\n        row.getComponent().scrollTo(undefined, false);\n      } else {\n        // Use faster autoScroll when the elements are on the DOM\n        this.autoScroll(range, row.getElement(), column.getElement());\n      }\n      this.layoutElement();\n      return true;\n    }\n  }\n  rangeRemoved(removed) {\n    this.ranges = this.ranges.filter(range => range !== removed);\n    if (this.activeRange === removed) {\n      if (this.ranges.length) {\n        this.activeRange = this.ranges[this.ranges.length - 1];\n      } else {\n        this.addRange();\n      }\n    }\n    this.layoutElement();\n  }\n  findJumpCell(cells, reverse, emptyStart, emptySide) {\n    var nextCell;\n    if (reverse) {\n      cells = cells.reverse();\n    }\n    for (let currentCell of cells) {\n      let currentValue = currentCell.getValue();\n      if (emptyStart) {\n        nextCell = currentCell;\n        if (currentValue) {\n          break;\n        }\n      } else {\n        if (emptySide) {\n          nextCell = currentCell;\n          if (currentValue) {\n            break;\n          }\n        } else {\n          if (currentValue) {\n            nextCell = currentCell;\n          } else {\n            break;\n          }\n        }\n      }\n    }\n    return nextCell;\n  }\n  findJumpCellLeft(rowPos, colPos) {\n    var row = this.getRowByRangePos(rowPos),\n      cells = row.cells.filter(cell => cell.column.visible),\n      isStartingCellEmpty = !cells[colPos].getValue(),\n      isLeftOfStartingCellEmpty = cells[colPos] ? !cells[colPos].getValue() : false,\n      jumpCol = colPos,\n      targetCells = this.rowHeader ? cells.slice(1, colPos) : cells.slice(0, colPos),\n      nextCell = this.findJumpCell(targetCells, true, isStartingCellEmpty, isLeftOfStartingCellEmpty);\n    if (nextCell) {\n      jumpCol = nextCell.column.getPosition() - 1;\n    }\n    return jumpCol;\n  }\n  findJumpCellRight(rowPos, colPos) {\n    var row = this.getRowByRangePos(rowPos),\n      cells = row.cells.filter(cell => cell.column.visible),\n      isStartingCellEmpty = !cells[colPos].getValue(),\n      isRightOfStartingCellEmpty = cells[colPos + 1] ? !cells[colPos + 1].getValue() : false,\n      jumpCol = colPos,\n      nextCell = this.findJumpCell(cells.slice(colPos + 1, cells.length), false, isStartingCellEmpty, isRightOfStartingCellEmpty);\n    if (nextCell) {\n      jumpCol = nextCell.column.getPosition() - 1;\n    }\n    return jumpCol;\n  }\n  findJumpCellUp(rowPos, colPos) {\n    var column = this.getColumnByRangePos(colPos),\n      cells = column.cells.filter(cell => this.table.rowManager.activeRows.includes(cell.row)),\n      isStartingCellEmpty = !cells[rowPos].getValue(),\n      isTopOfStartingCellEmpty = cells[rowPos - 1] ? !cells[rowPos - 1].getValue() : false,\n      jumpRow = rowPos,\n      nextCell = this.findJumpCell(cells.slice(0, jumpRow), true, isStartingCellEmpty, isTopOfStartingCellEmpty);\n    if (nextCell) {\n      jumpRow = nextCell.row.position - 1;\n    }\n    return jumpRow;\n  }\n  findJumpCellDown(rowPos, colPos) {\n    var column = this.getColumnByRangePos(colPos),\n      cells = column.cells.filter(cell => this.table.rowManager.activeRows.includes(cell.row)),\n      isStartingCellEmpty = !cells[rowPos].getValue(),\n      isBottomOfStartingCellEmpty = cells[rowPos + 1] ? !cells[rowPos + 1].getValue() : false,\n      jumpRow = rowPos,\n      nextCell = this.findJumpCell(cells.slice(jumpRow + 1, cells.length), false, isStartingCellEmpty, isBottomOfStartingCellEmpty);\n    if (nextCell) {\n      jumpRow = nextCell.row.position - 1;\n    }\n    return jumpRow;\n  }\n\n  ///////////////////////////////////\n  ///////      Selection      ///////\n  ///////////////////////////////////\n  newSelection(event, element) {\n    var range;\n    if (element.type === \"column\") {\n      if (!this.columnSelection) {\n        return;\n      }\n      if (element === this.rowHeader) {\n        range = this.resetRanges();\n        this.selecting = \"all\";\n        var topLeftCell,\n          bottomRightCell = this.getCell(-1, -1);\n        if (this.rowHeader) {\n          topLeftCell = this.getCell(0, 1);\n        } else {\n          topLeftCell = this.getCell(0, 0);\n        }\n        range.setBounds(topLeftCell, bottomRightCell);\n        return;\n      } else {\n        this.selecting = \"column\";\n      }\n    } else if (element.column === this.rowHeader) {\n      this.selecting = \"row\";\n    } else {\n      this.selecting = \"cell\";\n    }\n    if (event.shiftKey) {\n      this.activeRange.setBounds(false, element);\n    } else if (event.ctrlKey) {\n      this.addRange().setBounds(element);\n    } else {\n      this.resetRanges().setBounds(element);\n    }\n  }\n  autoScroll(range, row, column) {\n    var tableHolder = this.table.rowManager.element,\n      rowHeader,\n      rect,\n      view,\n      withinHorizontalView,\n      withinVerticalView;\n    if (typeof row === 'undefined') {\n      row = this.getRowByRangePos(range.end.row).getElement();\n    }\n    if (typeof column === 'undefined') {\n      column = this.getColumnByRangePos(range.end.col).getElement();\n    }\n    if (this.rowHeader) {\n      rowHeader = this.rowHeader.getElement();\n    }\n    rect = {\n      left: column.offsetLeft,\n      right: column.offsetLeft + column.offsetWidth,\n      top: row.offsetTop,\n      bottom: row.offsetTop + row.offsetHeight\n    };\n    view = {\n      left: tableHolder.scrollLeft,\n      right: Math.ceil(tableHolder.scrollLeft + tableHolder.clientWidth),\n      top: tableHolder.scrollTop,\n      bottom: tableHolder.scrollTop + tableHolder.offsetHeight - this.table.rowManager.scrollbarWidth\n    };\n    if (rowHeader) {\n      view.left += rowHeader.offsetWidth;\n    }\n    withinHorizontalView = view.left < rect.left && rect.left < view.right && view.left < rect.right && rect.right < view.right;\n    withinVerticalView = view.top < rect.top && rect.top < view.bottom && view.top < rect.bottom && rect.bottom < view.bottom;\n    if (!withinHorizontalView) {\n      if (rect.left < view.left) {\n        tableHolder.scrollLeft = rect.left;\n        if (rowHeader) {\n          tableHolder.scrollLeft -= rowHeader.offsetWidth;\n        }\n      } else if (rect.right > view.right) {\n        tableHolder.scrollLeft = rect.right - tableHolder.clientWidth;\n      }\n    }\n    if (!withinVerticalView) {\n      if (rect.top < view.top) {\n        tableHolder.scrollTop = rect.top;\n      } else if (rect.bottom > view.bottom) {\n        tableHolder.scrollTop = rect.bottom - tableHolder.clientHeight;\n      }\n    }\n  }\n\n  ///////////////////////////////////\n  ///////       Layout        ///////\n  ///////////////////////////////////\n\n  layoutChange() {\n    this.overlay.style.visibility = \"hidden\";\n    clearTimeout(this.layoutChangeTimeout);\n    this.layoutChangeTimeout = setTimeout(this.layoutRanges.bind(this), 200);\n  }\n  redraw(force) {\n    if (force) {\n      this.selecting = 'cell';\n      this.resetRanges();\n      this.layoutElement();\n    }\n  }\n  layoutElement(visibleRows) {\n    var rows;\n    if (visibleRows) {\n      rows = this.table.rowManager.getVisibleRows(true);\n    } else {\n      rows = this.table.rowManager.getRows();\n    }\n    rows.forEach(row => {\n      if (row.type === \"row\") {\n        this.layoutRow(row);\n        row.cells.forEach(cell => this.renderCell(cell));\n      }\n    });\n    this.getTableColumns().forEach(column => {\n      this.layoutColumn(column);\n    });\n    this.layoutRanges();\n  }\n  layoutRow(row) {\n    var el = row.getElement(),\n      selected = false,\n      occupied = this.ranges.some(range => range.occupiesRow(row));\n    if (this.selecting === \"row\") {\n      selected = occupied;\n    } else if (this.selecting === \"all\") {\n      selected = true;\n    }\n    el.classList.toggle(\"tabulator-range-selected\", selected);\n    el.classList.toggle(\"tabulator-range-highlight\", occupied);\n  }\n  layoutColumn(column) {\n    var el = column.getElement(),\n      selected = false,\n      occupied = this.ranges.some(range => range.occupiesColumn(column));\n    if (this.selecting === \"column\") {\n      selected = occupied;\n    } else if (this.selecting === \"all\") {\n      selected = true;\n    }\n    el.classList.toggle(\"tabulator-range-selected\", selected);\n    el.classList.toggle(\"tabulator-range-highlight\", occupied);\n  }\n  layoutRanges() {\n    var activeCell, activeCellEl, activeRowEl;\n    if (!this.table.initialized) {\n      return;\n    }\n    activeCell = this.getActiveCell();\n    if (!activeCell) {\n      return;\n    }\n    activeCellEl = activeCell.getElement();\n    activeRowEl = activeCell.row.getElement();\n    if (this.table.rtl) {\n      this.activeRangeCellElement.style.right = activeRowEl.offsetWidth - activeCellEl.offsetLeft - activeCellEl.offsetWidth + \"px\";\n    } else {\n      this.activeRangeCellElement.style.left = activeRowEl.offsetLeft + activeCellEl.offsetLeft + \"px\";\n    }\n    this.activeRangeCellElement.style.top = activeRowEl.offsetTop + \"px\";\n    this.activeRangeCellElement.style.width = activeCellEl.offsetWidth + \"px\";\n    this.activeRangeCellElement.style.height = activeRowEl.offsetHeight + \"px\";\n    this.ranges.forEach(range => range.layout());\n    this.overlay.style.visibility = \"visible\";\n  }\n\n  ///////////////////////////////////\n  ///////  Helper Functions   ///////\n  ///////////////////////////////////\t\n\n  getCell(rowIdx, colIdx) {\n    var row;\n    if (colIdx < 0) {\n      colIdx = this.getTableColumns().length + colIdx;\n      if (colIdx < 0) {\n        return null;\n      }\n    }\n    if (rowIdx < 0) {\n      rowIdx = this.getTableRows().length + rowIdx;\n    }\n    row = this.table.rowManager.getRowFromPosition(rowIdx + 1);\n    return row ? row.getCells(false, true).filter(cell => cell.column.visible)[colIdx] : null;\n  }\n  getActiveCell() {\n    return this.getCell(this.activeRange.start.row, this.activeRange.start.col);\n  }\n  getRowByRangePos(pos) {\n    return this.getTableRows()[pos];\n  }\n  getColumnByRangePos(pos) {\n    return this.getTableColumns()[pos];\n  }\n  getTableRows() {\n    return this.table.rowManager.getDisplayRows().filter(row => row.type === \"row\");\n  }\n  getTableColumns() {\n    return this.table.columnManager.getVisibleColumnsByIndex();\n  }\n  addRange(start, end) {\n    var range;\n    if (this.maxRanges !== true && this.ranges.length >= this.maxRanges) {\n      this.ranges.shift().destroy();\n    }\n    range = new Range(this.table, this, start, end);\n    this.activeRange = range;\n    this.ranges.push(range);\n    this.rangeContainer.appendChild(range.element);\n    return range;\n  }\n  resetRanges() {\n    var range, cell, visibleCells;\n    this.ranges.forEach(range => range.destroy());\n    this.ranges = [];\n    range = this.addRange();\n    if (this.table.rowManager.activeRows.length) {\n      visibleCells = this.table.rowManager.activeRows[0].cells.filter(cell => cell.column.visible);\n      cell = visibleCells[this.rowHeader ? 1 : 0];\n      if (cell) {\n        range.setBounds(cell);\n        this.initializeFocus(cell);\n      }\n    }\n    return range;\n  }\n  tableDestroyed() {\n    document.removeEventListener(\"mouseup\", this.mouseUpEvent);\n    this.table.rowManager.element.removeEventListener(\"keydown\", this.keyDownEvent);\n  }\n  selectedRows(component) {\n    return component ? this.activeRange.getRows().map(row => row.getComponent()) : this.activeRange.getRows();\n  }\n  selectedColumns(component) {\n    return component ? this.activeRange.getColumns().map(col => col.getComponent()) : this.activeRange.getColumns();\n  }\n}\n\n//sort numbers\nfunction number(a, b, aRow, bRow, column, dir, params) {\n  var alignEmptyValues = params.alignEmptyValues;\n  var decimal = params.decimalSeparator;\n  var thousand = params.thousandSeparator;\n  var emptyAlign = 0;\n  a = String(a);\n  b = String(b);\n  if (thousand) {\n    a = a.split(thousand).join(\"\");\n    b = b.split(thousand).join(\"\");\n  }\n  if (decimal) {\n    a = a.split(decimal).join(\".\");\n    b = b.split(decimal).join(\".\");\n  }\n  a = parseFloat(a);\n  b = parseFloat(b);\n\n  //handle non numeric values\n  if (isNaN(a)) {\n    emptyAlign = isNaN(b) ? 0 : -1;\n  } else if (isNaN(b)) {\n    emptyAlign = 1;\n  } else {\n    //compare valid values\n    return a - b;\n  }\n\n  //fix empty values in position\n  if (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n    emptyAlign *= -1;\n  }\n  return emptyAlign;\n}\n\n//sort strings\nfunction string(a, b, aRow, bRow, column, dir, params) {\n  var alignEmptyValues = params.alignEmptyValues;\n  var emptyAlign = 0;\n  var locale;\n\n  //handle empty values\n  if (!a) {\n    emptyAlign = !b ? 0 : -1;\n  } else if (!b) {\n    emptyAlign = 1;\n  } else {\n    //compare valid values\n    switch (typeof params.locale) {\n      case \"boolean\":\n        if (params.locale) {\n          locale = this.langLocale();\n        }\n        break;\n      case \"string\":\n        locale = params.locale;\n        break;\n    }\n    return String(a).toLowerCase().localeCompare(String(b).toLowerCase(), locale);\n  }\n\n  //fix empty values in position\n  if (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n    emptyAlign *= -1;\n  }\n  return emptyAlign;\n}\n\n//sort datetime\nfunction datetime(a, b, aRow, bRow, column, dir, params) {\n  var DT = window.DateTime || luxon.DateTime;\n  var format = params.format || \"dd/MM/yyyy HH:mm:ss\",\n    alignEmptyValues = params.alignEmptyValues,\n    emptyAlign = 0;\n  if (typeof DT != \"undefined\") {\n    if (!DT.isDateTime(a)) {\n      if (format === \"iso\") {\n        a = DT.fromISO(String(a));\n      } else {\n        a = DT.fromFormat(String(a), format);\n      }\n    }\n    if (!DT.isDateTime(b)) {\n      if (format === \"iso\") {\n        b = DT.fromISO(String(b));\n      } else {\n        b = DT.fromFormat(String(b), format);\n      }\n    }\n    if (!a.isValid) {\n      emptyAlign = !b.isValid ? 0 : -1;\n    } else if (!b.isValid) {\n      emptyAlign = 1;\n    } else {\n      //compare valid values\n      return a - b;\n    }\n\n    //fix empty values in position\n    if (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n      emptyAlign *= -1;\n    }\n    return emptyAlign;\n  } else {\n    console.error(\"Sort Error - 'datetime' sorter is dependant on luxon.js\");\n  }\n}\n\n//sort date\nfunction date(a, b, aRow, bRow, column, dir, params) {\n  if (!params.format) {\n    params.format = \"dd/MM/yyyy\";\n  }\n  return datetime.call(this, a, b, aRow, bRow, column, dir, params);\n}\n\n//sort times\nfunction time(a, b, aRow, bRow, column, dir, params) {\n  if (!params.format) {\n    params.format = \"HH:mm\";\n  }\n  return datetime.call(this, a, b, aRow, bRow, column, dir, params);\n}\n\n//sort booleans\nfunction boolean(a, b, aRow, bRow, column, dir, params) {\n  var el1 = a === true || a === \"true\" || a === \"True\" || a === 1 ? 1 : 0;\n  var el2 = b === true || b === \"true\" || b === \"True\" || b === 1 ? 1 : 0;\n  return el1 - el2;\n}\n\n//sort if element contains any data\nfunction array(a, b, aRow, bRow, column, dir, params) {\n  var type = params.type || \"length\",\n    alignEmptyValues = params.alignEmptyValues,\n    emptyAlign = 0;\n  function calc(value) {\n    var result;\n    switch (type) {\n      case \"length\":\n        result = value.length;\n        break;\n      case \"sum\":\n        result = value.reduce(function (c, d) {\n          return c + d;\n        });\n        break;\n      case \"max\":\n        result = Math.max.apply(null, value);\n        break;\n      case \"min\":\n        result = Math.min.apply(null, value);\n        break;\n      case \"avg\":\n        result = value.reduce(function (c, d) {\n          return c + d;\n        }) / value.length;\n        break;\n    }\n    return result;\n  }\n\n  //handle non array values\n  if (!Array.isArray(a)) {\n    emptyAlign = !Array.isArray(b) ? 0 : -1;\n  } else if (!Array.isArray(b)) {\n    emptyAlign = 1;\n  } else {\n    return calc(b) - calc(a);\n  }\n\n  //fix empty values in position\n  if (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n    emptyAlign *= -1;\n  }\n  return emptyAlign;\n}\n\n//sort if element contains any data\nfunction exists(a, b, aRow, bRow, column, dir, params) {\n  var el1 = typeof a == \"undefined\" ? 0 : 1;\n  var el2 = typeof b == \"undefined\" ? 0 : 1;\n  return el1 - el2;\n}\n\n//sort alpha numeric strings\nfunction alphanum(as, bs, aRow, bRow, column, dir, params) {\n  var a,\n    b,\n    a1,\n    b1,\n    i = 0,\n    L,\n    rx = /(\\d+)|(\\D+)/g,\n    rd = /\\d/;\n  var alignEmptyValues = params.alignEmptyValues;\n  var emptyAlign = 0;\n\n  //handle empty values\n  if (!as && as !== 0) {\n    emptyAlign = !bs && bs !== 0 ? 0 : -1;\n  } else if (!bs && bs !== 0) {\n    emptyAlign = 1;\n  } else {\n    if (isFinite(as) && isFinite(bs)) return as - bs;\n    a = String(as).toLowerCase();\n    b = String(bs).toLowerCase();\n    if (a === b) return 0;\n    if (!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\n    a = a.match(rx);\n    b = b.match(rx);\n    L = a.length > b.length ? b.length : a.length;\n    while (i < L) {\n      a1 = a[i];\n      b1 = b[i++];\n      if (a1 !== b1) {\n        if (isFinite(a1) && isFinite(b1)) {\n          if (a1.charAt(0) === \"0\") a1 = \".\" + a1;\n          if (b1.charAt(0) === \"0\") b1 = \".\" + b1;\n          return a1 - b1;\n        } else return a1 > b1 ? 1 : -1;\n      }\n    }\n    return a.length > b.length;\n  }\n\n  //fix empty values in position\n  if (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n    emptyAlign *= -1;\n  }\n  return emptyAlign;\n}\nvar defaultSorters = {\n  number: number,\n  string: string,\n  date: date,\n  time: time,\n  datetime: datetime,\n  boolean: boolean,\n  array: array,\n  exists: exists,\n  alphanum: alphanum\n};\nclass Sort extends Module {\n  static moduleName = \"sort\";\n\n  //load defaults\n  static sorters = defaultSorters;\n  constructor(table) {\n    super(table);\n    this.sortList = []; //holder current sort\n    this.changed = false; //has the sort changed since last render\n\n    this.registerTableOption(\"sortMode\", \"local\"); //local or remote sorting\n\n    this.registerTableOption(\"initialSort\", false); //initial sorting criteria\n    this.registerTableOption(\"columnHeaderSortMulti\", true); //multiple or single column sorting\n    this.registerTableOption(\"sortOrderReverse\", false); //reverse internal sort ordering\n    this.registerTableOption(\"headerSortElement\", \"<div class='tabulator-arrow'></div>\"); //header sort element\n    this.registerTableOption(\"headerSortClickElement\", \"header\"); //element which triggers sort when clicked\n\n    this.registerColumnOption(\"sorter\");\n    this.registerColumnOption(\"sorterParams\");\n    this.registerColumnOption(\"headerSort\", true);\n    this.registerColumnOption(\"headerSortStartingDir\");\n    this.registerColumnOption(\"headerSortTristate\");\n  }\n  initialize() {\n    this.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n    this.subscribe(\"table-built\", this.tableBuilt.bind(this));\n    this.registerDataHandler(this.sort.bind(this), 20);\n    this.registerTableFunction(\"setSort\", this.userSetSort.bind(this));\n    this.registerTableFunction(\"getSorters\", this.getSort.bind(this));\n    this.registerTableFunction(\"clearSort\", this.clearSort.bind(this));\n    if (this.table.options.sortMode === \"remote\") {\n      this.subscribe(\"data-params\", this.remoteSortParams.bind(this));\n    }\n  }\n  tableBuilt() {\n    if (this.table.options.initialSort) {\n      this.setSort(this.table.options.initialSort);\n    }\n  }\n  remoteSortParams(data, config, silent, params) {\n    var sorters = this.getSort();\n    sorters.forEach(item => {\n      delete item.column;\n    });\n    params.sort = sorters;\n    return params;\n  }\n\n  ///////////////////////////////////\n  ///////// Table Functions /////////\n  ///////////////////////////////////\n\n  userSetSort(sortList, dir) {\n    this.setSort(sortList, dir);\n    // this.table.rowManager.sorterRefresh();\n    this.refreshSort();\n  }\n  clearSort() {\n    this.clear();\n    // this.table.rowManager.sorterRefresh();\n    this.refreshSort();\n  }\n\n  ///////////////////////////////////\n  ///////// Internal Logic //////////\n  ///////////////////////////////////\n\n  //initialize column header for sorting\n  initializeColumn(column) {\n    var sorter = false,\n      colEl,\n      arrowEl;\n    switch (typeof column.definition.sorter) {\n      case \"string\":\n        if (Sort.sorters[column.definition.sorter]) {\n          sorter = Sort.sorters[column.definition.sorter];\n        } else {\n          console.warn(\"Sort Error - No such sorter found: \", column.definition.sorter);\n        }\n        break;\n      case \"function\":\n        sorter = column.definition.sorter;\n        break;\n    }\n    column.modules.sort = {\n      sorter: sorter,\n      dir: \"none\",\n      params: column.definition.sorterParams || {},\n      startingDir: column.definition.headerSortStartingDir || \"asc\",\n      tristate: column.definition.headerSortTristate\n    };\n    if (column.definition.headerSort !== false) {\n      colEl = column.getElement();\n      colEl.classList.add(\"tabulator-sortable\");\n      arrowEl = document.createElement(\"div\");\n      arrowEl.classList.add(\"tabulator-col-sorter\");\n      switch (this.table.options.headerSortClickElement) {\n        case \"icon\":\n          arrowEl.classList.add(\"tabulator-col-sorter-element\");\n          break;\n        case \"header\":\n          colEl.classList.add(\"tabulator-col-sorter-element\");\n          break;\n        default:\n          colEl.classList.add(\"tabulator-col-sorter-element\");\n          break;\n      }\n      switch (this.table.options.headerSortElement) {\n        case \"function\":\n          //do nothing\n          break;\n        case \"object\":\n          arrowEl.appendChild(this.table.options.headerSortElement);\n          break;\n        default:\n          arrowEl.innerHTML = this.table.options.headerSortElement;\n      }\n\n      //create sorter arrow\n      column.titleHolderElement.appendChild(arrowEl);\n      column.modules.sort.element = arrowEl;\n      this.setColumnHeaderSortIcon(column, \"none\");\n      if (this.table.options.headerSortClickElement === \"icon\") {\n        arrowEl.addEventListener(\"mousedown\", e => {\n          e.stopPropagation();\n        });\n      }\n\n      //sort on click\n      (this.table.options.headerSortClickElement === \"icon\" ? arrowEl : colEl).addEventListener(\"click\", e => {\n        var dir = \"\",\n          sorters = [],\n          match = false;\n        if (column.modules.sort) {\n          if (column.modules.sort.tristate) {\n            if (column.modules.sort.dir == \"none\") {\n              dir = column.modules.sort.startingDir;\n            } else {\n              if (column.modules.sort.dir == column.modules.sort.startingDir) {\n                dir = column.modules.sort.dir == \"asc\" ? \"desc\" : \"asc\";\n              } else {\n                dir = \"none\";\n              }\n            }\n          } else {\n            switch (column.modules.sort.dir) {\n              case \"asc\":\n                dir = \"desc\";\n                break;\n              case \"desc\":\n                dir = \"asc\";\n                break;\n              default:\n                dir = column.modules.sort.startingDir;\n            }\n          }\n          if (this.table.options.columnHeaderSortMulti && (e.shiftKey || e.ctrlKey)) {\n            sorters = this.getSort();\n            match = sorters.findIndex(sorter => {\n              return sorter.field === column.getField();\n            });\n            if (match > -1) {\n              sorters[match].dir = dir;\n              match = sorters.splice(match, 1)[0];\n              if (dir != \"none\") {\n                sorters.push(match);\n              }\n            } else {\n              if (dir != \"none\") {\n                sorters.push({\n                  column: column,\n                  dir: dir\n                });\n              }\n            }\n\n            //add to existing sort\n            this.setSort(sorters);\n          } else {\n            if (dir == \"none\") {\n              this.clear();\n            } else {\n              //sort by column only\n              this.setSort(column, dir);\n            }\n          }\n\n          // this.table.rowManager.sorterRefresh(!this.sortList.length);\n          this.refreshSort();\n        }\n      });\n    }\n  }\n  refreshSort() {\n    if (this.table.options.sortMode === \"remote\") {\n      this.reloadData(null, false, false);\n    } else {\n      this.refreshData(true);\n    }\n\n    //TODO - Persist left position of row manager\n    // left = this.scrollLeft;\n    // this.scrollHorizontal(left);\n  }\n\n  //check if the sorters have changed since last use\n  hasChanged() {\n    var changed = this.changed;\n    this.changed = false;\n    return changed;\n  }\n\n  //return current sorters\n  getSort() {\n    var self = this,\n      sorters = [];\n    self.sortList.forEach(function (item) {\n      if (item.column) {\n        sorters.push({\n          column: item.column.getComponent(),\n          field: item.column.getField(),\n          dir: item.dir\n        });\n      }\n    });\n    return sorters;\n  }\n\n  //change sort list and trigger sort\n  setSort(sortList, dir) {\n    var self = this,\n      newSortList = [];\n    if (!Array.isArray(sortList)) {\n      sortList = [{\n        column: sortList,\n        dir: dir\n      }];\n    }\n    sortList.forEach(function (item) {\n      var column;\n      column = self.table.columnManager.findColumn(item.column);\n      if (column) {\n        item.column = column;\n        newSortList.push(item);\n        self.changed = true;\n      } else {\n        console.warn(\"Sort Warning - Sort field does not exist and is being ignored: \", item.column);\n      }\n    });\n    self.sortList = newSortList;\n    this.dispatch(\"sort-changed\");\n  }\n\n  //clear sorters\n  clear() {\n    this.setSort([]);\n  }\n\n  //find appropriate sorter for column\n  findSorter(column) {\n    var row = this.table.rowManager.activeRows[0],\n      sorter = \"string\",\n      field,\n      value;\n    if (row) {\n      row = row.getData();\n      field = column.getField();\n      if (field) {\n        value = column.getFieldValue(row);\n        switch (typeof value) {\n          case \"undefined\":\n            sorter = \"string\";\n            break;\n          case \"boolean\":\n            sorter = \"boolean\";\n            break;\n          default:\n            if (!isNaN(value) && value !== \"\") {\n              sorter = \"number\";\n            } else {\n              if (value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)) {\n                sorter = \"alphanum\";\n              }\n            }\n            break;\n        }\n      }\n    }\n    return Sort.sorters[sorter];\n  }\n\n  //work through sort list sorting data\n  sort(data, sortOnly) {\n    var self = this,\n      sortList = this.table.options.sortOrderReverse ? self.sortList.slice().reverse() : self.sortList,\n      sortListActual = [],\n      rowComponents = [];\n    if (this.subscribedExternal(\"dataSorting\")) {\n      this.dispatchExternal(\"dataSorting\", self.getSort());\n    }\n    if (!sortOnly) {\n      self.clearColumnHeaders();\n    }\n    if (this.table.options.sortMode !== \"remote\") {\n      //build list of valid sorters and trigger column specific callbacks before sort begins\n      sortList.forEach(function (item, i) {\n        var sortObj;\n        if (item.column) {\n          sortObj = item.column.modules.sort;\n          if (sortObj) {\n            //if no sorter has been defined, take a guess\n            if (!sortObj.sorter) {\n              sortObj.sorter = self.findSorter(item.column);\n            }\n            item.params = typeof sortObj.params === \"function\" ? sortObj.params(item.column.getComponent(), item.dir) : sortObj.params;\n            sortListActual.push(item);\n          }\n          if (!sortOnly) {\n            self.setColumnHeader(item.column, item.dir);\n          }\n        }\n      });\n\n      //sort data\n      if (sortListActual.length) {\n        self._sortItems(data, sortListActual);\n      }\n    } else if (!sortOnly) {\n      sortList.forEach(function (item, i) {\n        self.setColumnHeader(item.column, item.dir);\n      });\n    }\n    if (this.subscribedExternal(\"dataSorted\")) {\n      data.forEach(row => {\n        rowComponents.push(row.getComponent());\n      });\n      this.dispatchExternal(\"dataSorted\", self.getSort(), rowComponents);\n    }\n    return data;\n  }\n\n  //clear sort arrows on columns\n  clearColumnHeaders() {\n    this.table.columnManager.getRealColumns().forEach(column => {\n      if (column.modules.sort) {\n        column.modules.sort.dir = \"none\";\n        column.getElement().setAttribute(\"aria-sort\", \"none\");\n        this.setColumnHeaderSortIcon(column, \"none\");\n      }\n    });\n  }\n\n  //set the column header sort direction\n  setColumnHeader(column, dir) {\n    column.modules.sort.dir = dir;\n    column.getElement().setAttribute(\"aria-sort\", dir === \"asc\" ? \"ascending\" : \"descending\");\n    this.setColumnHeaderSortIcon(column, dir);\n  }\n  setColumnHeaderSortIcon(column, dir) {\n    var sortEl = column.modules.sort.element,\n      arrowEl;\n    if (column.definition.headerSort && typeof this.table.options.headerSortElement === \"function\") {\n      while (sortEl.firstChild) sortEl.removeChild(sortEl.firstChild);\n      arrowEl = this.table.options.headerSortElement.call(this.table, column.getComponent(), dir);\n      if (typeof arrowEl === \"object\") {\n        sortEl.appendChild(arrowEl);\n      } else {\n        sortEl.innerHTML = arrowEl;\n      }\n    }\n  }\n\n  //sort each item in sort list\n  _sortItems(data, sortList) {\n    var sorterCount = sortList.length - 1;\n    data.sort((a, b) => {\n      var result;\n      for (var i = sorterCount; i >= 0; i--) {\n        let sortItem = sortList[i];\n        result = this._sortRow(a, b, sortItem.column, sortItem.dir, sortItem.params);\n        if (result !== 0) {\n          break;\n        }\n      }\n      return result;\n    });\n  }\n\n  //process individual rows for a sort function on active data\n  _sortRow(a, b, column, dir, params) {\n    var el1Comp, el2Comp;\n\n    //switch elements depending on search direction\n    var el1 = dir == \"asc\" ? a : b;\n    var el2 = dir == \"asc\" ? b : a;\n    a = column.getFieldValue(el1.getData());\n    b = column.getFieldValue(el2.getData());\n    a = typeof a !== \"undefined\" ? a : \"\";\n    b = typeof b !== \"undefined\" ? b : \"\";\n    el1Comp = el1.getComponent();\n    el2Comp = el2.getComponent();\n    return column.modules.sort.sorter.call(this, a, b, el1Comp, el2Comp, column.getComponent(), dir, params);\n  }\n}\nclass GridCalculator {\n  constructor(columns, rows) {\n    this.columnCount = columns;\n    this.rowCount = rows;\n    this.columnString = [];\n    this.columns = [];\n    this.rows = [];\n  }\n  genColumns(data) {\n    var colCount = Math.max(this.columnCount, Math.max(...data.map(item => item.length)));\n    this.columnString = [];\n    this.columns = [];\n    for (let i = 1; i <= colCount; i++) {\n      this.incrementChar(this.columnString.length - 1);\n      this.columns.push(this.columnString.join(\"\"));\n    }\n    return this.columns;\n  }\n  genRows(data) {\n    var rowCount = Math.max(this.rowCount, data.length);\n    this.rows = [];\n    for (let i = 1; i <= rowCount; i++) {\n      this.rows.push(i);\n    }\n    return this.rows;\n  }\n  incrementChar(i) {\n    let char = this.columnString[i];\n    if (char) {\n      if (char !== \"Z\") {\n        this.columnString[i] = String.fromCharCode(this.columnString[i].charCodeAt(0) + 1);\n      } else {\n        this.columnString[i] = \"A\";\n        if (i) {\n          this.incrementChar(i - 1);\n        } else {\n          this.columnString.push(\"A\");\n        }\n      }\n    } else {\n      this.columnString.push(\"A\");\n    }\n  }\n  setRowCount(count) {\n    this.rowCount = count;\n  }\n  setColumnCount(count) {\n    this.columnCount = count;\n  }\n}\nclass SheetComponent {\n  constructor(sheet) {\n    this._sheet = sheet;\n    return new Proxy(this, {\n      get: function (target, name, receiver) {\n        if (typeof target[name] !== \"undefined\") {\n          return target[name];\n        } else {\n          return target._sheet.table.componentFunctionBinder.handle(\"sheet\", target._sheet, name);\n        }\n      }\n    });\n  }\n  getTitle() {\n    return this._sheet.title;\n  }\n  getKey() {\n    return this._sheet.key;\n  }\n  getDefinition() {\n    return this._sheet.getDefinition();\n  }\n  getData() {\n    return this._sheet.getData();\n  }\n  setData(data) {\n    return this._sheet.setData(data);\n  }\n  clear() {\n    return this._sheet.clear();\n  }\n  remove() {\n    return this._sheet.remove();\n  }\n  active() {\n    return this._sheet.active();\n  }\n  setTitle(title) {\n    return this._sheet.setTitle(title);\n  }\n  setRows(rows) {\n    return this._sheet.setRows(rows);\n  }\n  setColumns(columns) {\n    return this._sheet.setColumns(columns);\n  }\n}\nclass Sheet extends CoreFeature {\n  constructor(spreadsheetManager, definition) {\n    super(spreadsheetManager.table);\n    this.spreadsheetManager = spreadsheetManager;\n    this.definition = definition;\n    this.title = this.definition.title || \"\";\n    this.key = this.definition.key || this.definition.title;\n    this.rowCount = this.definition.rows;\n    this.columnCount = this.definition.columns;\n    this.data = this.definition.data || [];\n    this.element = null;\n    this.isActive = false;\n    this.grid = new GridCalculator(this.columnCount, this.rowCount);\n    this.defaultColumnDefinition = {\n      width: 100,\n      headerHozAlign: \"center\",\n      headerSort: false\n    };\n    this.columnDefinition = Object.assign(this.defaultColumnDefinition, this.options(\"spreadsheetColumnDefinition\"));\n    this.columnDefs = [];\n    this.rowDefs = [];\n    this.columnFields = [];\n    this.columns = [];\n    this.rows = [];\n    this.scrollTop = null;\n    this.scrollLeft = null;\n    this.initialize();\n    this.dispatchExternal(\"sheetAdded\", this.getComponent());\n  }\n\n  ///////////////////////////////////\n  ///////// Initialization //////////\n  ///////////////////////////////////\n\n  initialize() {\n    this.initializeElement();\n    this.initializeColumns();\n    this.initializeRows();\n  }\n  reinitialize() {\n    this.initializeColumns();\n    this.initializeRows();\n  }\n  initializeElement() {\n    this.element = document.createElement(\"div\");\n    this.element.classList.add(\"tabulator-spreadsheet-tab\");\n    this.element.innerText = this.title;\n    this.element.addEventListener(\"click\", () => {\n      this.spreadsheetManager.loadSheet(this);\n    });\n  }\n  initializeColumns() {\n    this.grid.setColumnCount(this.columnCount);\n    this.columnFields = this.grid.genColumns(this.data);\n    this.columnDefs = [];\n    this.columnFields.forEach(ref => {\n      var def = Object.assign({}, this.columnDefinition);\n      def.field = ref;\n      def.title = ref;\n      this.columnDefs.push(def);\n    });\n  }\n  initializeRows() {\n    var refs;\n    this.grid.setRowCount(this.rowCount);\n    refs = this.grid.genRows(this.data);\n    this.rowDefs = [];\n    refs.forEach((ref, i) => {\n      var def = {\n        \"_id\": ref\n      };\n      var data = this.data[i];\n      if (data) {\n        data.forEach((val, j) => {\n          var field = this.columnFields[j];\n          if (field) {\n            def[field] = val;\n          }\n        });\n      }\n      this.rowDefs.push(def);\n    });\n  }\n  unload() {\n    this.isActive = false;\n    this.scrollTop = this.table.rowManager.scrollTop;\n    this.scrollLeft = this.table.rowManager.scrollLeft;\n    this.data = this.getData(true);\n    this.element.classList.remove(\"tabulator-spreadsheet-tab-active\");\n  }\n  load() {\n    var wasInactive = !this.isActive;\n    this.isActive = true;\n    this.table.blockRedraw();\n    this.table.setData([]);\n    this.table.setColumns(this.columnDefs);\n    this.table.setData(this.rowDefs);\n    this.table.restoreRedraw();\n    if (wasInactive && this.scrollTop !== null) {\n      this.table.rowManager.element.scrollLeft = this.scrollLeft;\n      this.table.rowManager.element.scrollTop = this.scrollTop;\n    }\n    this.element.classList.add(\"tabulator-spreadsheet-tab-active\");\n    this.dispatchExternal(\"sheetLoaded\", this.getComponent());\n  }\n\n  ///////////////////////////////////\n  //////// Helper Functions /////////\n  ///////////////////////////////////\n\n  getComponent() {\n    return new SheetComponent(this);\n  }\n  getDefinition() {\n    return {\n      title: this.title,\n      key: this.key,\n      rows: this.rowCount,\n      columns: this.columnCount,\n      data: this.getData()\n    };\n  }\n  getData(full) {\n    var output = [],\n      rowWidths,\n      outputWidth,\n      outputHeight;\n\n    //map data to array format\n    this.rowDefs.forEach(rowData => {\n      var row = [];\n      this.columnFields.forEach(field => {\n        row.push(rowData[field]);\n      });\n      output.push(row);\n    });\n\n    //trim output\n    if (!full && !this.options(\"spreadsheetOutputFull\")) {\n      //calculate used area of data\n      rowWidths = output.map(row => row.findLastIndex(val => typeof val !== 'undefined') + 1);\n      outputWidth = Math.max(...rowWidths);\n      outputHeight = rowWidths.findLastIndex(width => width > 0) + 1;\n      output = output.slice(0, outputHeight);\n      output = output.map(row => row.slice(0, outputWidth));\n    }\n    return output;\n  }\n  setData(data) {\n    this.data = data;\n    this.reinitialize();\n    this.dispatchExternal(\"sheetUpdated\", this.getComponent());\n    if (this.isActive) {\n      this.load();\n    }\n  }\n  clear() {\n    this.setData([]);\n  }\n  setTitle(title) {\n    this.title = title;\n    this.element.innerText = title;\n    this.dispatchExternal(\"sheetUpdated\", this.getComponent());\n  }\n  setRows(rows) {\n    this.rowCount = rows;\n    this.initializeRows();\n    this.dispatchExternal(\"sheetUpdated\", this.getComponent());\n    if (this.isActive) {\n      this.load();\n    }\n  }\n  setColumns(columns) {\n    this.columnCount = columns;\n    this.reinitialize();\n    this.dispatchExternal(\"sheetUpdated\", this.getComponent());\n    if (this.isActive) {\n      this.load();\n    }\n  }\n  remove() {\n    this.spreadsheetManager.removeSheet(this);\n  }\n  destroy() {\n    if (this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n    }\n    this.dispatchExternal(\"sheetRemoved\", this.getComponent());\n  }\n  active() {\n    this.spreadsheetManager.loadSheet(this);\n  }\n}\nclass Spreadsheet extends Module {\n  static moduleName = \"spreadsheet\";\n  constructor(table) {\n    super(table);\n    this.sheets = [];\n    this.element = null;\n    this.registerTableOption(\"spreadsheet\", false);\n    this.registerTableOption(\"spreadsheetRows\", 50);\n    this.registerTableOption(\"spreadsheetColumns\", 50);\n    this.registerTableOption(\"spreadsheetColumnDefinition\", {});\n    this.registerTableOption(\"spreadsheetOutputFull\", false);\n    this.registerTableOption(\"spreadsheetData\", false);\n    this.registerTableOption(\"spreadsheetSheets\", false);\n    this.registerTableOption(\"spreadsheetSheetTabs\", false);\n    this.registerTableOption(\"spreadsheetSheetTabsElement\", false);\n    this.registerTableFunction(\"setSheets\", this.setSheets.bind(this));\n    this.registerTableFunction(\"addSheet\", this.addSheet.bind(this));\n    this.registerTableFunction(\"getSheets\", this.getSheets.bind(this));\n    this.registerTableFunction(\"getSheetDefinitions\", this.getSheetDefinitions.bind(this));\n    this.registerTableFunction(\"setSheetData\", this.setSheetData.bind(this));\n    this.registerTableFunction(\"getSheet\", this.getSheet.bind(this));\n    this.registerTableFunction(\"getSheetData\", this.getSheetData.bind(this));\n    this.registerTableFunction(\"clearSheet\", this.clearSheet.bind(this));\n    this.registerTableFunction(\"removeSheet\", this.removeSheetFunc.bind(this));\n    this.registerTableFunction(\"activeSheet\", this.activeSheetFunc.bind(this));\n  }\n\n  ///////////////////////////////////\n  ////// Module Initialization //////\n  ///////////////////////////////////\n\n  initialize() {\n    if (this.options(\"spreadsheet\")) {\n      this.subscribe(\"table-initialized\", this.tableInitialized.bind(this));\n      this.subscribe(\"data-loaded\", this.loadRemoteData.bind(this));\n      this.table.options.index = \"_id\";\n      if (this.options(\"spreadsheetData\") && this.options(\"spreadsheetSheets\")) {\n        console.warn(\"You cannot use spreadsheetData and spreadsheetSheets at the same time, ignoring spreadsheetData\");\n        this.table.options.spreadsheetData = false;\n      }\n      this.compatibilityCheck();\n      if (this.options(\"spreadsheetSheetTabs\")) {\n        this.initializeTabset();\n      }\n    }\n  }\n  compatibilityCheck() {\n    if (this.options(\"data\")) {\n      console.warn(\"Do not use the data option when working with spreadsheets, use either spreadsheetData or spreadsheetSheets to pass data into the table\");\n    }\n    if (this.options(\"pagination\")) {\n      console.warn(\"The spreadsheet module is not compatible with the pagination module\");\n    }\n    if (this.options(\"groupBy\")) {\n      console.warn(\"The spreadsheet module is not compatible with the row grouping module\");\n    }\n    if (this.options(\"responsiveCollapse\")) {\n      console.warn(\"The spreadsheet module is not compatible with the responsive collapse module\");\n    }\n  }\n  initializeTabset() {\n    this.element = document.createElement(\"div\");\n    this.element.classList.add(\"tabulator-spreadsheet-tabs\");\n    var altContainer = this.options(\"spreadsheetSheetTabsElement\");\n    if (altContainer && !(altContainer instanceof HTMLElement)) {\n      altContainer = document.querySelector(altContainer);\n      if (!altContainer) {\n        console.warn(\"Unable to find element matching spreadsheetSheetTabsElement selector:\", this.options(\"spreadsheetSheetTabsElement\"));\n      }\n    }\n    if (altContainer) {\n      altContainer.appendChild(this.element);\n    } else {\n      this.footerAppend(this.element);\n    }\n  }\n  tableInitialized() {\n    if (this.sheets.length) {\n      this.loadSheet(this.sheets[0]);\n    } else {\n      if (this.options(\"spreadsheetSheets\")) {\n        this.loadSheets(this.options(\"spreadsheetSheets\"));\n      } else if (this.options(\"spreadsheetData\")) {\n        this.loadData(this.options(\"spreadsheetData\"));\n      }\n    }\n  }\n\n  ///////////////////////////////////\n  /////////// Ajax Parsing //////////\n  ///////////////////////////////////\n\n  loadRemoteData(data, data1, data2) {\n    console.log(\"data\", data, data1, data2);\n    if (Array.isArray(data)) {\n      this.table.dataLoader.clearAlert();\n      this.dispatchExternal(\"dataLoaded\", data);\n      if (!data.length || Array.isArray(data[0])) {\n        this.loadData(data);\n      } else {\n        this.loadSheets(data);\n      }\n    } else {\n      console.error(\"Spreadsheet Loading Error - Unable to process remote data due to invalid data type \\nExpecting: array \\nReceived: \", typeof data, \"\\nData:     \", data);\n    }\n    return false;\n  }\n\n  ///////////////////////////////////\n  ///////// Sheet Management ////////\n  ///////////////////////////////////\n\n  loadData(data) {\n    var def = {\n      data: data\n    };\n    this.loadSheet(this.newSheet(def));\n  }\n  destroySheets() {\n    this.sheets.forEach(sheet => {\n      sheet.destroy();\n    });\n    this.sheets = [];\n    this.activeSheet = null;\n  }\n  loadSheets(sheets) {\n    if (!Array.isArray(sheets)) {\n      sheets = [];\n    }\n    this.destroySheets();\n    sheets.forEach(def => {\n      this.newSheet(def);\n    });\n    this.loadSheet(this.sheets[0]);\n  }\n  loadSheet(sheet) {\n    if (this.activeSheet !== sheet) {\n      if (this.activeSheet) {\n        this.activeSheet.unload();\n      }\n      this.activeSheet = sheet;\n      sheet.load();\n    }\n  }\n  newSheet(definition = {}) {\n    var sheet;\n    if (!definition.rows) {\n      definition.rows = this.options(\"spreadsheetRows\");\n    }\n    if (!definition.columns) {\n      definition.columns = this.options(\"spreadsheetColumns\");\n    }\n    sheet = new Sheet(this, definition);\n    this.sheets.push(sheet);\n    if (this.element) {\n      this.element.appendChild(sheet.element);\n    }\n    return sheet;\n  }\n  removeSheet(sheet) {\n    var index = this.sheets.indexOf(sheet),\n      prevSheet;\n    if (this.sheets.length > 1) {\n      if (index > -1) {\n        this.sheets.splice(index, 1);\n        sheet.destroy();\n        if (this.activeSheet === sheet) {\n          prevSheet = this.sheets[index - 1] || this.sheets[0];\n          if (prevSheet) {\n            this.loadSheet(prevSheet);\n          } else {\n            this.activeSheet = null;\n          }\n        }\n      }\n    } else {\n      console.warn(\"Unable to remove sheet, at least one sheet must be active\");\n    }\n  }\n  lookupSheet(key) {\n    if (!key) {\n      return this.activeSheet;\n    } else if (key instanceof Sheet) {\n      return key;\n    } else if (key instanceof SheetComponent) {\n      return key._sheet;\n    } else {\n      return this.sheets.find(sheet => sheet.key === key) || false;\n    }\n  }\n\n  ///////////////////////////////////\n  //////// Public Functions /////////\n  ///////////////////////////////////\n\n  setSheets(sheets) {\n    this.loadSheets(sheets);\n    return this.getSheets();\n  }\n  addSheet(sheet) {\n    return this.newSheet(sheet).getComponent();\n  }\n  getSheetDefinitions() {\n    return this.sheets.map(sheet => sheet.getDefinition());\n  }\n  getSheets() {\n    return this.sheets.map(sheet => sheet.getComponent());\n  }\n  getSheet(key) {\n    var sheet = this.lookupSheet(key);\n    return sheet ? sheet.getComponent() : false;\n  }\n  setSheetData(key, data) {\n    if (key && !data) {\n      data = key;\n      key = false;\n    }\n    var sheet = this.lookupSheet(key);\n    return sheet ? sheet.setData(data) : false;\n  }\n  getSheetData(key) {\n    var sheet = this.lookupSheet(key);\n    return sheet ? sheet.getData() : false;\n  }\n  clearSheet(key) {\n    var sheet = this.lookupSheet(key);\n    return sheet ? sheet.clear() : false;\n  }\n  removeSheetFunc(key) {\n    var sheet = this.lookupSheet(key);\n    if (sheet) {\n      this.removeSheet(sheet);\n    }\n  }\n  activeSheetFunc(key) {\n    var sheet = this.lookupSheet(key);\n    return sheet ? this.loadSheet(sheet) : false;\n  }\n}\nclass Tooltip extends Module {\n  static moduleName = \"tooltip\";\n  constructor(table) {\n    super(table);\n    this.tooltipSubscriber = null, this.headerSubscriber = null, this.timeout = null;\n    this.popupInstance = null;\n\n    // this.registerTableOption(\"tooltipGenerationMode\", undefined);  //deprecated\n    this.registerTableOption(\"tooltipDelay\", 300);\n    this.registerColumnOption(\"tooltip\");\n    this.registerColumnOption(\"headerTooltip\");\n  }\n  initialize() {\n    this.deprecatedOptionsCheck();\n    this.subscribe(\"column-init\", this.initializeColumn.bind(this));\n  }\n  deprecatedOptionsCheck() {\n    // this.deprecationCheckMsg(\"tooltipGenerationMode\", \"This option is no longer needed as tooltips are always generated on hover now\");\n  }\n  initializeColumn(column) {\n    if (column.definition.headerTooltip && !this.headerSubscriber) {\n      this.headerSubscriber = true;\n      this.subscribe(\"column-mousemove\", this.mousemoveCheck.bind(this, \"headerTooltip\"));\n      this.subscribe(\"column-mouseout\", this.mouseoutCheck.bind(this, \"headerTooltip\"));\n    }\n    if (column.definition.tooltip && !this.tooltipSubscriber) {\n      this.tooltipSubscriber = true;\n      this.subscribe(\"cell-mousemove\", this.mousemoveCheck.bind(this, \"tooltip\"));\n      this.subscribe(\"cell-mouseout\", this.mouseoutCheck.bind(this, \"tooltip\"));\n    }\n  }\n  mousemoveCheck(action, e, component) {\n    var tooltip = action === \"tooltip\" ? component.column.definition.tooltip : component.definition.headerTooltip;\n    if (tooltip) {\n      this.clearPopup();\n      this.timeout = setTimeout(this.loadTooltip.bind(this, e, component, tooltip), this.table.options.tooltipDelay);\n    }\n  }\n  mouseoutCheck(action, e, component) {\n    if (!this.popupInstance) {\n      this.clearPopup();\n    }\n  }\n  clearPopup(action, e, component) {\n    clearTimeout(this.timeout);\n    this.timeout = null;\n    if (this.popupInstance) {\n      this.popupInstance.hide();\n    }\n  }\n  loadTooltip(e, component, tooltip) {\n    var contentsEl, renderedCallback, coords;\n    function onRendered(callback) {\n      renderedCallback = callback;\n    }\n    if (typeof tooltip === \"function\") {\n      tooltip = tooltip(e, component.getComponent(), onRendered);\n    }\n    if (tooltip instanceof HTMLElement) {\n      contentsEl = tooltip;\n    } else {\n      contentsEl = document.createElement(\"div\");\n      if (tooltip === true) {\n        if (component instanceof Cell) {\n          tooltip = component.value;\n        } else {\n          if (component.definition.field) {\n            this.langBind(\"columns|\" + component.definition.field, value => {\n              contentsEl.innerHTML = tooltip = value || component.definition.title;\n            });\n          } else {\n            tooltip = component.definition.title;\n          }\n        }\n      }\n      contentsEl.innerHTML = tooltip;\n    }\n    if (tooltip || tooltip === 0 || tooltip === false) {\n      contentsEl.classList.add(\"tabulator-tooltip\");\n      contentsEl.addEventListener(\"mousemove\", e => e.preventDefault());\n      this.popupInstance = this.popup(contentsEl);\n      if (typeof renderedCallback === \"function\") {\n        this.popupInstance.renderCallback(renderedCallback);\n      }\n      coords = this.popupInstance.containerEventCoords(e);\n      this.popupInstance.show(coords.x + 15, coords.y + 15).hideOnBlur(() => {\n        this.dispatchExternal(\"TooltipClosed\", component.getComponent());\n        this.popupInstance = null;\n      });\n      this.dispatchExternal(\"TooltipOpened\", component.getComponent());\n    }\n  }\n}\nvar defaultValidators = {\n  //is integer\n  integer: function (cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n    value = Number(value);\n    return !isNaN(value) && isFinite(value) && Math.floor(value) === value;\n  },\n  //is float\n  float: function (cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n    value = Number(value);\n    return !isNaN(value) && isFinite(value) && value % 1 !== 0;\n  },\n  //must be a number\n  numeric: function (cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n    return !isNaN(value);\n  },\n  //must be a string\n  string: function (cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n    return isNaN(value);\n  },\n  //must be alphanumeric\n  alphanumeric: function (cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n    var reg = new RegExp(/^[a-z0-9]+$/i);\n    return reg.test(value);\n  },\n  //maximum value\n  max: function (cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n    return parseFloat(value) <= parameters;\n  },\n  //minimum value\n  min: function (cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n    return parseFloat(value) >= parameters;\n  },\n  //starts with  value\n  starts: function (cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n    return String(value).toLowerCase().startsWith(String(parameters).toLowerCase());\n  },\n  //ends with  value\n  ends: function (cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n    return String(value).toLowerCase().endsWith(String(parameters).toLowerCase());\n  },\n  //minimum string length\n  minLength: function (cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n    return String(value).length >= parameters;\n  },\n  //maximum string length\n  maxLength: function (cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n    return String(value).length <= parameters;\n  },\n  //in provided value list\n  in: function (cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n    if (typeof parameters == \"string\") {\n      parameters = parameters.split(\"|\");\n    }\n    return parameters.indexOf(value) > -1;\n  },\n  //must match provided regex\n  regex: function (cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n    var reg = new RegExp(parameters);\n    return reg.test(value);\n  },\n  //value must be unique in this column\n  unique: function (cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n    var unique = true;\n    var cellData = cell.getData();\n    var column = cell.getColumn()._getSelf();\n    this.table.rowManager.rows.forEach(function (row) {\n      var data = row.getData();\n      if (data !== cellData) {\n        if (value == column.getFieldValue(data)) {\n          unique = false;\n        }\n      }\n    });\n    return unique;\n  },\n  //must have a value\n  required: function (cell, value, parameters) {\n    return value !== \"\" && value !== null && typeof value !== \"undefined\";\n  }\n};\nclass Validate extends Module {\n  static moduleName = \"validate\";\n\n  //load defaults\n  static validators = defaultValidators;\n  constructor(table) {\n    super(table);\n    this.invalidCells = [];\n    this.registerTableOption(\"validationMode\", \"blocking\");\n    this.registerColumnOption(\"validator\");\n    this.registerTableFunction(\"getInvalidCells\", this.getInvalidCells.bind(this));\n    this.registerTableFunction(\"clearCellValidation\", this.userClearCellValidation.bind(this));\n    this.registerTableFunction(\"validate\", this.userValidate.bind(this));\n    this.registerComponentFunction(\"cell\", \"isValid\", this.cellIsValid.bind(this));\n    this.registerComponentFunction(\"cell\", \"clearValidation\", this.clearValidation.bind(this));\n    this.registerComponentFunction(\"cell\", \"validate\", this.cellValidate.bind(this));\n    this.registerComponentFunction(\"column\", \"validate\", this.columnValidate.bind(this));\n    this.registerComponentFunction(\"row\", \"validate\", this.rowValidate.bind(this));\n  }\n  initialize() {\n    this.subscribe(\"cell-delete\", this.clearValidation.bind(this));\n    this.subscribe(\"column-layout\", this.initializeColumnCheck.bind(this));\n    this.subscribe(\"edit-success\", this.editValidate.bind(this));\n    this.subscribe(\"edit-editor-clear\", this.editorClear.bind(this));\n    this.subscribe(\"edit-edited-clear\", this.editedClear.bind(this));\n  }\n\n  ///////////////////////////////////\n  ///////// Event Handling //////////\n  ///////////////////////////////////\n\n  editValidate(cell, value, previousValue) {\n    var valid = this.table.options.validationMode !== \"manual\" ? this.validate(cell.column.modules.validate, cell, value) : true;\n\n    // allow time for editor to make render changes then style cell\n    if (valid !== true) {\n      setTimeout(() => {\n        cell.getElement().classList.add(\"tabulator-validation-fail\");\n        this.dispatchExternal(\"validationFailed\", cell.getComponent(), value, valid);\n      });\n    }\n    return valid;\n  }\n  editorClear(cell, cancelled) {\n    if (cancelled) {\n      if (cell.column.modules.validate) {\n        this.cellValidate(cell);\n      }\n    }\n    cell.getElement().classList.remove(\"tabulator-validation-fail\");\n  }\n  editedClear(cell) {\n    if (cell.modules.validate) {\n      cell.modules.validate.invalid = false;\n    }\n  }\n\n  ///////////////////////////////////\n  ////////// Cell Functions /////////\n  ///////////////////////////////////\n\n  cellIsValid(cell) {\n    return cell.modules.validate ? cell.modules.validate.invalid || true : true;\n  }\n  cellValidate(cell) {\n    return this.validate(cell.column.modules.validate, cell, cell.getValue());\n  }\n\n  ///////////////////////////////////\n  ///////// Column Functions ////////\n  ///////////////////////////////////\n\n  columnValidate(column) {\n    var invalid = [];\n    column.cells.forEach(cell => {\n      if (this.cellValidate(cell) !== true) {\n        invalid.push(cell.getComponent());\n      }\n    });\n    return invalid.length ? invalid : true;\n  }\n\n  ///////////////////////////////////\n  ////////// Row Functions //////////\n  ///////////////////////////////////\n\n  rowValidate(row) {\n    var invalid = [];\n    row.cells.forEach(cell => {\n      if (this.cellValidate(cell) !== true) {\n        invalid.push(cell.getComponent());\n      }\n    });\n    return invalid.length ? invalid : true;\n  }\n\n  ///////////////////////////////////\n  ///////// Table Functions /////////\n  ///////////////////////////////////\n\n  userClearCellValidation(cells) {\n    if (!cells) {\n      cells = this.getInvalidCells();\n    }\n    if (!Array.isArray(cells)) {\n      cells = [cells];\n    }\n    cells.forEach(cell => {\n      this.clearValidation(cell._getSelf());\n    });\n  }\n  userValidate(cells) {\n    var output = [];\n\n    //clear row data\n    this.table.rowManager.rows.forEach(row => {\n      row = row.getComponent();\n      var valid = row.validate();\n      if (valid !== true) {\n        output = output.concat(valid);\n      }\n    });\n    return output.length ? output : true;\n  }\n\n  ///////////////////////////////////\n  ///////// Internal Logic //////////\n  ///////////////////////////////////\n\n  initializeColumnCheck(column) {\n    if (typeof column.definition.validator !== \"undefined\") {\n      this.initializeColumn(column);\n    }\n  }\n\n  //validate\n  initializeColumn(column) {\n    var self = this,\n      config = [],\n      validator;\n    if (column.definition.validator) {\n      if (Array.isArray(column.definition.validator)) {\n        column.definition.validator.forEach(item => {\n          validator = self._extractValidator(item);\n          if (validator) {\n            config.push(validator);\n          }\n        });\n      } else {\n        validator = this._extractValidator(column.definition.validator);\n        if (validator) {\n          config.push(validator);\n        }\n      }\n      column.modules.validate = config.length ? config : false;\n    }\n  }\n  _extractValidator(value) {\n    var type, params, pos;\n    switch (typeof value) {\n      case \"string\":\n        pos = value.indexOf(':');\n        if (pos > -1) {\n          type = value.substring(0, pos);\n          params = value.substring(pos + 1);\n        } else {\n          type = value;\n        }\n        return this._buildValidator(type, params);\n      case \"function\":\n        return this._buildValidator(value);\n      case \"object\":\n        return this._buildValidator(value.type, value.parameters);\n    }\n  }\n  _buildValidator(type, params) {\n    var func = typeof type == \"function\" ? type : Validate.validators[type];\n    if (!func) {\n      console.warn(\"Validator Setup Error - No matching validator found:\", type);\n      return false;\n    } else {\n      return {\n        type: typeof type == \"function\" ? \"function\" : type,\n        func: func,\n        params: params\n      };\n    }\n  }\n  validate(validators, cell, value) {\n    var self = this,\n      failedValidators = [],\n      invalidIndex = this.invalidCells.indexOf(cell);\n    if (validators) {\n      validators.forEach(item => {\n        if (!item.func.call(self, cell.getComponent(), value, item.params)) {\n          failedValidators.push({\n            type: item.type,\n            parameters: item.params\n          });\n        }\n      });\n    }\n    if (!cell.modules.validate) {\n      cell.modules.validate = {};\n    }\n    if (!failedValidators.length) {\n      cell.modules.validate.invalid = false;\n      cell.getElement().classList.remove(\"tabulator-validation-fail\");\n      if (invalidIndex > -1) {\n        this.invalidCells.splice(invalidIndex, 1);\n      }\n    } else {\n      cell.modules.validate.invalid = failedValidators;\n      if (this.table.options.validationMode !== \"manual\") {\n        cell.getElement().classList.add(\"tabulator-validation-fail\");\n      }\n      if (invalidIndex == -1) {\n        this.invalidCells.push(cell);\n      }\n    }\n    return failedValidators.length ? failedValidators : true;\n  }\n  getInvalidCells() {\n    var output = [];\n    this.invalidCells.forEach(cell => {\n      output.push(cell.getComponent());\n    });\n    return output;\n  }\n  clearValidation(cell) {\n    var invalidIndex;\n    if (cell.modules.validate && cell.modules.validate.invalid) {\n      cell.getElement().classList.remove(\"tabulator-validation-fail\");\n      cell.modules.validate.invalid = false;\n      invalidIndex = this.invalidCells.indexOf(cell);\n      if (invalidIndex > -1) {\n        this.invalidCells.splice(invalidIndex, 1);\n      }\n    }\n  }\n}\nvar allModules = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  AccessorModule: Accessor,\n  AjaxModule: Ajax,\n  ClipboardModule: Clipboard,\n  ColumnCalcsModule: ColumnCalcs,\n  DataTreeModule: DataTree,\n  DownloadModule: Download,\n  EditModule: Edit,\n  ExportModule: Export,\n  FilterModule: Filter,\n  FormatModule: Format,\n  FrozenColumnsModule: FrozenColumns,\n  FrozenRowsModule: FrozenRows,\n  GroupRowsModule: GroupRows,\n  HistoryModule: History,\n  HtmlTableImportModule: HtmlTableImport,\n  ImportModule: Import,\n  InteractionModule: Interaction,\n  KeybindingsModule: Keybindings,\n  MenuModule: Menu,\n  MoveColumnsModule: MoveColumns,\n  MoveRowsModule: MoveRows,\n  MutatorModule: Mutator,\n  PageModule: Page,\n  PersistenceModule: Persistence,\n  PopupModule: Popup,\n  PrintModule: Print,\n  ReactiveDataModule: ReactiveData,\n  ResizeColumnsModule: ResizeColumns,\n  ResizeRowsModule: ResizeRows,\n  ResizeTableModule: ResizeTable,\n  ResponsiveLayoutModule: ResponsiveLayout,\n  SelectRangeModule: SelectRange,\n  SelectRowModule: SelectRow,\n  SortModule: Sort,\n  SpreadsheetModule: Spreadsheet,\n  TooltipModule: Tooltip,\n  ValidateModule: Validate\n});\nvar defaultOptions = {\n  debugEventsExternal: false,\n  //flag to console log events\n  debugEventsInternal: false,\n  //flag to console log events\n  debugInvalidOptions: true,\n  //allow toggling of invalid option warnings\n  debugInvalidComponentFuncs: true,\n  //allow toggling of invalid component warnings\n  debugInitialization: true,\n  //allow toggling of pre initialization function call warnings\n  debugDeprecation: true,\n  //allow toggling of deprecation warnings\n\n  height: false,\n  //height of tabulator\n  minHeight: false,\n  //minimum height of tabulator\n  maxHeight: false,\n  //maximum height of tabulator\n\n  columnHeaderVertAlign: \"top\",\n  //vertical alignment of column headers\n\n  popupContainer: false,\n  columns: [],\n  //store for colum header info\n  columnDefaults: {},\n  //store column default props\n  rowHeader: false,\n  data: false,\n  //default starting data\n\n  autoColumns: false,\n  //build columns from data row structure\n  autoColumnsDefinitions: false,\n  nestedFieldSeparator: \".\",\n  //separator for nested data\n\n  footerElement: false,\n  //hold footer element\n\n  index: \"id\",\n  //filed for row index\n\n  textDirection: \"auto\",\n  addRowPos: \"bottom\",\n  //position to insert blank rows, top|bottom\n\n  headerVisible: true,\n  //hide header\n\n  renderVertical: \"virtual\",\n  renderHorizontal: \"basic\",\n  renderVerticalBuffer: 0,\n  // set virtual DOM buffer size\n\n  scrollToRowPosition: \"top\",\n  scrollToRowIfVisible: true,\n  scrollToColumnPosition: \"left\",\n  scrollToColumnIfVisible: true,\n  rowFormatter: false,\n  rowFormatterPrint: null,\n  rowFormatterClipboard: null,\n  rowFormatterHtmlOutput: null,\n  rowHeight: null,\n  placeholder: false,\n  dataLoader: true,\n  dataLoaderLoading: false,\n  dataLoaderError: false,\n  dataLoaderErrorTimeout: 3000,\n  dataSendParams: {},\n  dataReceiveParams: {}\n};\nclass OptionsList {\n  constructor(table, msgType, defaults = {}) {\n    this.table = table;\n    this.msgType = msgType;\n    this.registeredDefaults = Object.assign({}, defaults);\n  }\n  register(option, value) {\n    this.registeredDefaults[option] = value;\n  }\n  generate(defaultOptions, userOptions = {}) {\n    var output = Object.assign({}, this.registeredDefaults),\n      warn = this.table.options.debugInvalidOptions || userOptions.debugInvalidOptions === true;\n    Object.assign(output, defaultOptions);\n    for (let key in userOptions) {\n      if (!output.hasOwnProperty(key)) {\n        if (warn) {\n          console.warn(\"Invalid \" + this.msgType + \" option:\", key);\n        }\n        output[key] = userOptions.key;\n      }\n    }\n    for (let key in output) {\n      if (key in userOptions) {\n        output[key] = userOptions[key];\n      } else {\n        if (Array.isArray(output[key])) {\n          output[key] = Object.assign([], output[key]);\n        } else if (typeof output[key] === \"object\" && output[key] !== null) {\n          output[key] = Object.assign({}, output[key]);\n        } else if (typeof output[key] === \"undefined\") {\n          delete output[key];\n        }\n      }\n    }\n    return output;\n  }\n}\nclass Renderer extends CoreFeature {\n  constructor(table) {\n    super(table);\n    this.elementVertical = table.rowManager.element;\n    this.elementHorizontal = table.columnManager.element;\n    this.tableElement = table.rowManager.tableElement;\n    this.verticalFillMode = \"fit\"; // used by row manager to determine how to size the render area (\"fit\" - fits container to the contents, \"fill\" - fills the container without resizing it)\n  }\n\n  ///////////////////////////////////\n  /////// Internal Bindings /////////\n  ///////////////////////////////////\n\n  initialize() {\n    //initialize core functionality\n  }\n  clearRows() {\n    //clear down existing rows layout\n  }\n  clearColumns() {\n    //clear down existing columns layout\n  }\n  reinitializeColumnWidths(columns) {\n    //resize columns to fit data\n  }\n  renderRows() {\n    //render rows from a clean slate\n  }\n  renderColumns() {\n    //render columns from a clean slate\n  }\n  rerenderRows(callback) {\n    // rerender rows and keep position\n    if (callback) {\n      callback();\n    }\n  }\n  rerenderColumns(update, blockRedraw) {\n    //rerender columns\n  }\n  renderRowCells(row) {\n    //render the cells in a row\n  }\n  rerenderRowCells(row, force) {\n    //rerender the cells in a row\n  }\n  scrollColumns(left, dir) {\n    //handle horizontal scrolling\n  }\n  scrollRows(top, dir) {\n    //handle vertical scrolling\n  }\n  resize() {\n    //container has resized, carry out any needed recalculations (DO NOT RERENDER IN THIS FUNCTION)\n  }\n  scrollToRow(row) {\n    //scroll to a specific row\n  }\n  scrollToRowNearestTop(row) {\n    //determine weather the row is nearest the top or bottom of the table, return true for top or false for bottom\n  }\n  visibleRows(includingBuffer) {\n    //return the visible rows\n    return [];\n  }\n\n  ///////////////////////////////////\n  //////// Helper Functions /////////\n  ///////////////////////////////////\n\n  rows() {\n    return this.table.rowManager.getDisplayRows();\n  }\n  styleRow(row, index) {\n    var rowEl = row.getElement();\n    if (index % 2) {\n      rowEl.classList.add(\"tabulator-row-even\");\n      rowEl.classList.remove(\"tabulator-row-odd\");\n    } else {\n      rowEl.classList.add(\"tabulator-row-odd\");\n      rowEl.classList.remove(\"tabulator-row-even\");\n    }\n  }\n\n  ///////////////////////////////////\n  /////// External Triggers /////////\n  /////// (DO NOT OVERRIDE) /////////\n  ///////////////////////////////////\n\n  clear() {\n    //clear down existing layout\n    this.clearRows();\n    this.clearColumns();\n  }\n  render() {\n    //render from a clean slate\n    this.renderRows();\n    this.renderColumns();\n  }\n  rerender(callback) {\n    // rerender and keep position\n    this.rerenderRows();\n    this.rerenderColumns();\n  }\n  scrollToRowPosition(row, position, ifVisible) {\n    var rowIndex = this.rows().indexOf(row),\n      rowEl = row.getElement(),\n      offset = 0;\n    return new Promise((resolve, reject) => {\n      if (rowIndex > -1) {\n        if (typeof ifVisible === \"undefined\") {\n          ifVisible = this.table.options.scrollToRowIfVisible;\n        }\n\n        //check row visibility\n        if (!ifVisible) {\n          if (Helpers.elVisible(rowEl)) {\n            offset = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.elementVertical).top;\n            if (offset > 0 && offset < this.elementVertical.clientHeight - rowEl.offsetHeight) {\n              resolve();\n              return false;\n            }\n          }\n        }\n        if (typeof position === \"undefined\") {\n          position = this.table.options.scrollToRowPosition;\n        }\n        if (position === \"nearest\") {\n          position = this.scrollToRowNearestTop(row) ? \"top\" : \"bottom\";\n        }\n\n        //scroll to row\n        this.scrollToRow(row);\n\n        //align to correct position\n        switch (position) {\n          case \"middle\":\n          case \"center\":\n            if (this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight) {\n              this.elementVertical.scrollTop = this.elementVertical.scrollTop + (rowEl.offsetTop - this.elementVertical.scrollTop) - (this.elementVertical.scrollHeight - rowEl.offsetTop) / 2;\n            } else {\n              this.elementVertical.scrollTop = this.elementVertical.scrollTop - this.elementVertical.clientHeight / 2;\n            }\n            break;\n          case \"bottom\":\n            if (this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight) {\n              this.elementVertical.scrollTop = this.elementVertical.scrollTop - (this.elementVertical.scrollHeight - rowEl.offsetTop) + rowEl.offsetHeight;\n            } else {\n              this.elementVertical.scrollTop = this.elementVertical.scrollTop - this.elementVertical.clientHeight + rowEl.offsetHeight;\n            }\n            break;\n          case \"top\":\n            this.elementVertical.scrollTop = rowEl.offsetTop;\n            break;\n        }\n        resolve();\n      } else {\n        console.warn(\"Scroll Error - Row not visible\");\n        reject(\"Scroll Error - Row not visible\");\n      }\n    });\n  }\n}\nclass BasicHorizontal extends Renderer {\n  constructor(table) {\n    super(table);\n  }\n  renderRowCells(row, inFragment) {\n    const rowFrag = document.createDocumentFragment();\n    row.cells.forEach(cell => {\n      rowFrag.appendChild(cell.getElement());\n    });\n    row.element.appendChild(rowFrag);\n    if (!inFragment) {\n      row.cells.forEach(cell => {\n        cell.cellRendered();\n      });\n    }\n  }\n  reinitializeColumnWidths(columns) {\n    columns.forEach(function (column) {\n      column.reinitializeWidth();\n    });\n  }\n}\nclass VirtualDomHorizontal extends Renderer {\n  constructor(table) {\n    super(table);\n    this.leftCol = 0;\n    this.rightCol = 0;\n    this.scrollLeft = 0;\n    this.vDomScrollPosLeft = 0;\n    this.vDomScrollPosRight = 0;\n    this.vDomPadLeft = 0;\n    this.vDomPadRight = 0;\n    this.fitDataColAvg = 0;\n    this.windowBuffer = 200; //pixel margin to make column visible before it is shown on screen\n\n    this.visibleRows = null;\n    this.initialized = false;\n    this.isFitData = false;\n    this.columns = [];\n  }\n  initialize() {\n    this.compatibilityCheck();\n    this.layoutCheck();\n    this.vertScrollListen();\n  }\n  compatibilityCheck() {\n    if (this.options(\"layout\") == \"fitDataTable\") {\n      console.warn(\"Horizontal Virtual DOM is not compatible with fitDataTable layout mode\");\n    }\n    if (this.options(\"responsiveLayout\")) {\n      console.warn(\"Horizontal Virtual DOM is not compatible with responsive columns\");\n    }\n    if (this.options(\"rtl\")) {\n      console.warn(\"Horizontal Virtual DOM is not currently compatible with RTL text direction\");\n    }\n  }\n  layoutCheck() {\n    this.isFitData = this.options(\"layout\").startsWith('fitData');\n  }\n  vertScrollListen() {\n    this.subscribe(\"scroll-vertical\", this.clearVisRowCache.bind(this));\n    this.subscribe(\"data-refreshed\", this.clearVisRowCache.bind(this));\n  }\n  clearVisRowCache() {\n    this.visibleRows = null;\n  }\n\n  //////////////////////////////////////\n  ///////// Public Functions ///////////\n  //////////////////////////////////////\n\n  renderColumns(row, force) {\n    this.dataChange();\n  }\n  scrollColumns(left, dir) {\n    if (this.scrollLeft != left) {\n      this.scrollLeft = left;\n      this.scroll(left - (this.vDomScrollPosLeft + this.windowBuffer));\n    }\n  }\n  calcWindowBuffer() {\n    var buffer = this.elementVertical.clientWidth;\n    this.table.columnManager.columnsByIndex.forEach(column => {\n      if (column.visible) {\n        var width = column.getWidth();\n        if (width > buffer) {\n          buffer = width;\n        }\n      }\n    });\n    this.windowBuffer = buffer * 2;\n  }\n  rerenderColumns(update, blockRedraw) {\n    var old = {\n        cols: this.columns,\n        leftCol: this.leftCol,\n        rightCol: this.rightCol\n      },\n      colPos = 0;\n    if (update && !this.initialized) {\n      return;\n    }\n    this.clear();\n    this.calcWindowBuffer();\n    this.scrollLeft = this.elementVertical.scrollLeft;\n    this.vDomScrollPosLeft = this.scrollLeft - this.windowBuffer;\n    this.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer;\n    this.table.columnManager.columnsByIndex.forEach(column => {\n      var config = {},\n        width;\n      if (column.visible) {\n        if (!column.modules.frozen) {\n          width = column.getWidth();\n          config.leftPos = colPos;\n          config.rightPos = colPos + width;\n          config.width = width;\n          if (this.isFitData) {\n            config.fitDataCheck = column.modules.vdomHoz ? column.modules.vdomHoz.fitDataCheck : true;\n          }\n          if (colPos + width > this.vDomScrollPosLeft && colPos < this.vDomScrollPosRight) {\n            //column is visible\n\n            if (this.leftCol == -1) {\n              this.leftCol = this.columns.length;\n              this.vDomPadLeft = colPos;\n            }\n            this.rightCol = this.columns.length;\n          } else {\n            // column is hidden\n            if (this.leftCol !== -1) {\n              this.vDomPadRight += width;\n            }\n          }\n          this.columns.push(column);\n          column.modules.vdomHoz = config;\n          colPos += width;\n        }\n      }\n    });\n    this.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n    this.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n    this.initialized = true;\n    if (!blockRedraw) {\n      if (!update || this.reinitChanged(old)) {\n        this.reinitializeRows();\n      }\n    }\n    this.elementVertical.scrollLeft = this.scrollLeft;\n  }\n  renderRowCells(row) {\n    if (this.initialized) {\n      this.initializeRow(row);\n    } else {\n      const rowFrag = document.createDocumentFragment();\n      row.cells.forEach(cell => {\n        rowFrag.appendChild(cell.getElement());\n      });\n      row.element.appendChild(rowFrag);\n      row.cells.forEach(cell => {\n        cell.cellRendered();\n      });\n    }\n  }\n  rerenderRowCells(row, force) {\n    this.reinitializeRow(row, force);\n  }\n  reinitializeColumnWidths(columns) {\n    for (let i = this.leftCol; i <= this.rightCol; i++) {\n      this.columns[i].reinitializeWidth();\n    }\n  }\n\n  //////////////////////////////////////\n  //////// Internal Rendering //////////\n  //////////////////////////////////////\n\n  deinitialize() {\n    this.initialized = false;\n  }\n  clear() {\n    this.columns = [];\n    this.leftCol = -1;\n    this.rightCol = 0;\n    this.vDomScrollPosLeft = 0;\n    this.vDomScrollPosRight = 0;\n    this.vDomPadLeft = 0;\n    this.vDomPadRight = 0;\n  }\n  dataChange() {\n    var change = false,\n      row,\n      rowEl;\n    if (this.isFitData) {\n      this.table.columnManager.columnsByIndex.forEach(column => {\n        if (!column.definition.width && column.visible) {\n          change = true;\n        }\n      });\n      if (change && this.table.rowManager.getDisplayRows().length) {\n        this.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer;\n        row = this.chain(\"rows-sample\", [1], [], () => {\n          return this.table.rowManager.getDisplayRows();\n        })[0];\n        if (row) {\n          rowEl = row.getElement();\n          row.generateCells();\n          this.tableElement.appendChild(rowEl);\n          for (let colEnd = 0; colEnd < row.cells.length; colEnd++) {\n            let cell = row.cells[colEnd];\n            rowEl.appendChild(cell.getElement());\n            cell.column.reinitializeWidth();\n          }\n          rowEl.parentNode.removeChild(rowEl);\n          this.rerenderColumns(false, true);\n        }\n      }\n    } else {\n      if (this.options(\"layout\") === \"fitColumns\") {\n        this.layoutRefresh();\n        this.rerenderColumns(false, true);\n      }\n    }\n  }\n  reinitChanged(old) {\n    var match = true;\n    if (old.cols.length !== this.columns.length || old.leftCol !== this.leftCol || old.rightCol !== this.rightCol) {\n      return true;\n    }\n    old.cols.forEach((col, i) => {\n      if (col !== this.columns[i]) {\n        match = false;\n      }\n    });\n    return !match;\n  }\n  reinitializeRows() {\n    var visibleRows = this.getVisibleRows(),\n      otherRows = this.table.rowManager.getRows().filter(row => !visibleRows.includes(row));\n    visibleRows.forEach(row => {\n      this.reinitializeRow(row, true);\n    });\n    otherRows.forEach(row => {\n      row.deinitialize();\n    });\n  }\n  getVisibleRows() {\n    if (!this.visibleRows) {\n      this.visibleRows = this.table.rowManager.getVisibleRows();\n    }\n    return this.visibleRows;\n  }\n  scroll(diff) {\n    this.vDomScrollPosLeft += diff;\n    this.vDomScrollPosRight += diff;\n    if (Math.abs(diff) > this.windowBuffer / 2) {\n      this.rerenderColumns();\n    } else {\n      if (diff > 0) {\n        //scroll right\n        this.addColRight();\n        this.removeColLeft();\n      } else {\n        //scroll left\n        this.addColLeft();\n        this.removeColRight();\n      }\n    }\n  }\n  colPositionAdjust(start, end, diff) {\n    for (let i = start; i < end; i++) {\n      let column = this.columns[i];\n      column.modules.vdomHoz.leftPos += diff;\n      column.modules.vdomHoz.rightPos += diff;\n    }\n  }\n  addColRight() {\n    var changes = false,\n      working = true;\n    while (working) {\n      let column = this.columns[this.rightCol + 1];\n      if (column) {\n        if (column.modules.vdomHoz.leftPos <= this.vDomScrollPosRight) {\n          changes = true;\n          this.getVisibleRows().forEach(row => {\n            if (row.type !== \"group\") {\n              var cell = row.getCell(column);\n              row.getElement().insertBefore(cell.getElement(), row.getCell(this.columns[this.rightCol]).getElement().nextSibling);\n              cell.cellRendered();\n            }\n          });\n          this.fitDataColActualWidthCheck(column);\n          this.rightCol++; // Don't move this below the >= check below\n\n          this.getVisibleRows().forEach(row => {\n            if (row.type !== \"group\") {\n              row.modules.vdomHoz.rightCol = this.rightCol;\n            }\n          });\n          if (this.rightCol >= this.columns.length - 1) {\n            this.vDomPadRight = 0;\n          } else {\n            this.vDomPadRight -= column.getWidth();\n          }\n        } else {\n          working = false;\n        }\n      } else {\n        working = false;\n      }\n    }\n    if (changes) {\n      this.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n    }\n  }\n  addColLeft() {\n    var changes = false,\n      working = true;\n    while (working) {\n      let column = this.columns[this.leftCol - 1];\n      if (column) {\n        if (column.modules.vdomHoz.rightPos >= this.vDomScrollPosLeft) {\n          changes = true;\n          this.getVisibleRows().forEach(row => {\n            if (row.type !== \"group\") {\n              var cell = row.getCell(column);\n              row.getElement().insertBefore(cell.getElement(), row.getCell(this.columns[this.leftCol]).getElement());\n              cell.cellRendered();\n            }\n          });\n          this.leftCol--; // don't move this below the <= check below\n\n          this.getVisibleRows().forEach(row => {\n            if (row.type !== \"group\") {\n              row.modules.vdomHoz.leftCol = this.leftCol;\n            }\n          });\n          if (this.leftCol <= 0) {\n            // replicating logic in addColRight\n            this.vDomPadLeft = 0;\n          } else {\n            this.vDomPadLeft -= column.getWidth();\n          }\n          let diff = this.fitDataColActualWidthCheck(column);\n          if (diff) {\n            this.scrollLeft = this.elementVertical.scrollLeft = this.elementVertical.scrollLeft + diff;\n            this.vDomPadRight -= diff;\n          }\n        } else {\n          working = false;\n        }\n      } else {\n        working = false;\n      }\n    }\n    if (changes) {\n      this.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n    }\n  }\n  removeColRight() {\n    var changes = false,\n      working = true;\n    while (working) {\n      let column = this.columns[this.rightCol];\n      if (column) {\n        if (column.modules.vdomHoz.leftPos > this.vDomScrollPosRight) {\n          changes = true;\n          this.getVisibleRows().forEach(row => {\n            if (row.type !== \"group\") {\n              var cell = row.getCell(column);\n              try {\n                row.getElement().removeChild(cell.getElement());\n              } catch (ex) {\n                console.warn(\"Could not removeColRight\", ex.message);\n              }\n            }\n          });\n          this.vDomPadRight += column.getWidth();\n          this.rightCol--;\n          this.getVisibleRows().forEach(row => {\n            if (row.type !== \"group\") {\n              row.modules.vdomHoz.rightCol = this.rightCol;\n            }\n          });\n        } else {\n          working = false;\n        }\n      } else {\n        working = false;\n      }\n    }\n    if (changes) {\n      this.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n    }\n  }\n  removeColLeft() {\n    var changes = false,\n      working = true;\n    while (working) {\n      let column = this.columns[this.leftCol];\n      if (column) {\n        if (column.modules.vdomHoz.rightPos < this.vDomScrollPosLeft) {\n          changes = true;\n          this.getVisibleRows().forEach(row => {\n            if (row.type !== \"group\") {\n              var cell = row.getCell(column);\n              try {\n                row.getElement().removeChild(cell.getElement());\n              } catch (ex) {\n                console.warn(\"Could not removeColLeft\", ex.message);\n              }\n            }\n          });\n          this.vDomPadLeft += column.getWidth();\n          this.leftCol++;\n          this.getVisibleRows().forEach(row => {\n            if (row.type !== \"group\") {\n              row.modules.vdomHoz.leftCol = this.leftCol;\n            }\n          });\n        } else {\n          working = false;\n        }\n      } else {\n        working = false;\n      }\n    }\n    if (changes) {\n      this.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n    }\n  }\n  fitDataColActualWidthCheck(column) {\n    var newWidth, widthDiff;\n    if (column.modules.vdomHoz.fitDataCheck) {\n      column.reinitializeWidth();\n      newWidth = column.getWidth();\n      widthDiff = newWidth - column.modules.vdomHoz.width;\n      if (widthDiff) {\n        column.modules.vdomHoz.rightPos += widthDiff;\n        column.modules.vdomHoz.width = newWidth;\n        this.colPositionAdjust(this.columns.indexOf(column) + 1, this.columns.length, widthDiff);\n      }\n      column.modules.vdomHoz.fitDataCheck = false;\n    }\n    return widthDiff;\n  }\n  initializeRow(row) {\n    if (row.type !== \"group\") {\n      row.modules.vdomHoz = {\n        leftCol: this.leftCol,\n        rightCol: this.rightCol\n      };\n      if (this.table.modules.frozenColumns) {\n        this.table.modules.frozenColumns.leftColumns.forEach(column => {\n          this.appendCell(row, column);\n        });\n      }\n      for (let i = this.leftCol; i <= this.rightCol; i++) {\n        this.appendCell(row, this.columns[i]);\n      }\n      if (this.table.modules.frozenColumns) {\n        this.table.modules.frozenColumns.rightColumns.forEach(column => {\n          this.appendCell(row, column);\n        });\n      }\n    }\n  }\n  appendCell(row, column) {\n    if (column && column.visible) {\n      let cell = row.getCell(column);\n      row.getElement().appendChild(cell.getElement());\n      cell.cellRendered();\n    }\n  }\n  reinitializeRow(row, force) {\n    if (row.type !== \"group\") {\n      if (force || !row.modules.vdomHoz || row.modules.vdomHoz.leftCol !== this.leftCol || row.modules.vdomHoz.rightCol !== this.rightCol) {\n        var rowEl = row.getElement();\n        while (rowEl.firstChild) rowEl.removeChild(rowEl.firstChild);\n        this.initializeRow(row);\n      }\n    }\n  }\n}\nclass ColumnManager extends CoreFeature {\n  constructor(table) {\n    super(table);\n    this.blockHozScrollEvent = false;\n    this.headersElement = null;\n    this.contentsElement = null;\n    this.rowHeader = null;\n    this.element = null; //containing element\n    this.columns = []; // column definition object\n    this.columnsByIndex = []; //columns by index\n    this.columnsByField = {}; //columns by field\n    this.scrollLeft = 0;\n    this.optionsList = new OptionsList(this.table, \"column definition\", defaultColumnOptions);\n    this.redrawBlock = false; //prevent redraws to allow multiple data manipulations before continuing\n    this.redrawBlockUpdate = null; //store latest redraw update only status\n\n    this.renderer = null;\n  }\n\n  ////////////// Setup Functions /////////////////\n\n  initialize() {\n    this.initializeRenderer();\n    this.headersElement = this.createHeadersElement();\n    this.contentsElement = this.createHeaderContentsElement();\n    this.element = this.createHeaderElement();\n    this.contentsElement.insertBefore(this.headersElement, this.contentsElement.firstChild);\n    this.element.insertBefore(this.contentsElement, this.element.firstChild);\n    this.initializeScrollWheelWatcher();\n    this.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\n    this.subscribe(\"scrollbar-vertical\", this.padVerticalScrollbar.bind(this));\n  }\n  padVerticalScrollbar(width) {\n    if (this.table.rtl) {\n      this.headersElement.style.marginLeft = width + \"px\";\n    } else {\n      this.headersElement.style.marginRight = width + \"px\";\n    }\n  }\n  initializeRenderer() {\n    var renderClass;\n    var renderers = {\n      \"virtual\": VirtualDomHorizontal,\n      \"basic\": BasicHorizontal\n    };\n    if (typeof this.table.options.renderHorizontal === \"string\") {\n      renderClass = renderers[this.table.options.renderHorizontal];\n    } else {\n      renderClass = this.table.options.renderHorizontal;\n    }\n    if (renderClass) {\n      this.renderer = new renderClass(this.table, this.element, this.tableElement);\n      this.renderer.initialize();\n    } else {\n      console.error(\"Unable to find matching renderer:\", this.table.options.renderHorizontal);\n    }\n  }\n  createHeadersElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-headers\");\n    el.setAttribute(\"role\", \"row\");\n    return el;\n  }\n  createHeaderContentsElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-header-contents\");\n    el.setAttribute(\"role\", \"rowgroup\");\n    return el;\n  }\n  createHeaderElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-header\");\n    el.setAttribute(\"role\", \"rowgroup\");\n    if (!this.table.options.headerVisible) {\n      el.classList.add(\"tabulator-header-hidden\");\n    }\n    return el;\n  }\n\n  //return containing element\n  getElement() {\n    return this.element;\n  }\n\n  //return containing contents element\n  getContentsElement() {\n    return this.contentsElement;\n  }\n\n  //return header containing element\n  getHeadersElement() {\n    return this.headersElement;\n  }\n\n  //scroll horizontally to match table body\n  scrollHorizontal(left) {\n    this.contentsElement.scrollLeft = left;\n    this.scrollLeft = left;\n    this.renderer.scrollColumns(left);\n  }\n  initializeScrollWheelWatcher() {\n    this.contentsElement.addEventListener(\"wheel\", e => {\n      var left;\n      if (e.deltaX) {\n        left = this.contentsElement.scrollLeft + e.deltaX;\n        this.table.rowManager.scrollHorizontal(left);\n        this.table.columnManager.scrollHorizontal(left);\n      }\n    });\n  }\n\n  ///////////// Column Setup Functions /////////////\n  generateColumnsFromRowData(data) {\n    var cols = [],\n      collProgress = {},\n      rowSample = this.table.options.autoColumns === \"full\" ? data : [data[0]],\n      definitions = this.table.options.autoColumnsDefinitions;\n    if (data && data.length) {\n      rowSample.forEach(row => {\n        Object.keys(row).forEach((key, index) => {\n          let value = row[key],\n            col;\n          if (!collProgress[key]) {\n            col = {\n              field: key,\n              title: key,\n              sorter: this.calculateSorterFromValue(value)\n            };\n            cols.splice(index, 0, col);\n            collProgress[key] = typeof value === \"undefined\" ? col : true;\n          } else if (collProgress[key] !== true) {\n            if (typeof value !== \"undefined\") {\n              collProgress[key].sorter = this.calculateSorterFromValue(value);\n              collProgress[key] = true;\n            }\n          }\n        });\n      });\n      if (definitions) {\n        switch (typeof definitions) {\n          case \"function\":\n            this.table.options.columns = definitions.call(this.table, cols);\n            break;\n          case \"object\":\n            if (Array.isArray(definitions)) {\n              cols.forEach(col => {\n                var match = definitions.find(def => {\n                  return def.field === col.field;\n                });\n                if (match) {\n                  Object.assign(col, match);\n                }\n              });\n            } else {\n              cols.forEach(col => {\n                if (definitions[col.field]) {\n                  Object.assign(col, definitions[col.field]);\n                }\n              });\n            }\n            this.table.options.columns = cols;\n            break;\n        }\n      } else {\n        this.table.options.columns = cols;\n      }\n      this.setColumns(this.table.options.columns);\n    }\n  }\n  calculateSorterFromValue(value) {\n    var sorter;\n    switch (typeof value) {\n      case \"undefined\":\n        sorter = \"string\";\n        break;\n      case \"boolean\":\n        sorter = \"boolean\";\n        break;\n      case \"number\":\n        sorter = \"number\";\n        break;\n      case \"object\":\n        if (Array.isArray(value)) {\n          sorter = \"array\";\n        } else {\n          sorter = \"string\";\n        }\n        break;\n      default:\n        if (!isNaN(value) && value !== \"\") {\n          sorter = \"number\";\n        } else {\n          if (value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)) {\n            sorter = \"alphanum\";\n          } else {\n            sorter = \"string\";\n          }\n        }\n        break;\n    }\n    return sorter;\n  }\n  setColumns(cols, row) {\n    while (this.headersElement.firstChild) this.headersElement.removeChild(this.headersElement.firstChild);\n    this.columns = [];\n    this.columnsByIndex = [];\n    this.columnsByField = {};\n    this.dispatch(\"columns-loading\");\n    this.dispatchExternal(\"columnsLoading\");\n    if (this.table.options.rowHeader) {\n      this.rowHeader = new Column(this.table.options.rowHeader === true ? {} : this.table.options.rowHeader, this, true);\n      this.columns.push(this.rowHeader);\n      this.headersElement.appendChild(this.rowHeader.getElement());\n      this.rowHeader.columnRendered();\n    }\n    cols.forEach((def, i) => {\n      this._addColumn(def);\n    });\n    this._reIndexColumns();\n    this.dispatch(\"columns-loaded\");\n    if (this.subscribedExternal(\"columnsLoaded\")) {\n      this.dispatchExternal(\"columnsLoaded\", this.getComponents());\n    }\n    this.rerenderColumns(false, true);\n    this.redraw(true);\n  }\n  _addColumn(definition, before, nextToColumn) {\n    var column = new Column(definition, this),\n      colEl = column.getElement(),\n      index = nextToColumn ? this.findColumnIndex(nextToColumn) : nextToColumn;\n\n    //prevent adding of rows in front of row header\n    if (before && this.rowHeader && (!nextToColumn || nextToColumn === this.rowHeader)) {\n      before = false;\n      nextToColumn = this.rowHeader;\n      index = 0;\n    }\n    if (nextToColumn && index > -1) {\n      var topColumn = nextToColumn.getTopColumn();\n      var parentIndex = this.columns.indexOf(topColumn);\n      var nextEl = topColumn.getElement();\n      if (before) {\n        this.columns.splice(parentIndex, 0, column);\n        nextEl.parentNode.insertBefore(colEl, nextEl);\n      } else {\n        this.columns.splice(parentIndex + 1, 0, column);\n        nextEl.parentNode.insertBefore(colEl, nextEl.nextSibling);\n      }\n    } else {\n      if (before) {\n        this.columns.unshift(column);\n        this.headersElement.insertBefore(column.getElement(), this.headersElement.firstChild);\n      } else {\n        this.columns.push(column);\n        this.headersElement.appendChild(column.getElement());\n      }\n    }\n    column.columnRendered();\n    return column;\n  }\n  registerColumnField(col) {\n    if (col.definition.field) {\n      this.columnsByField[col.definition.field] = col;\n    }\n  }\n  registerColumnPosition(col) {\n    this.columnsByIndex.push(col);\n  }\n  _reIndexColumns() {\n    this.columnsByIndex = [];\n    this.columns.forEach(function (column) {\n      column.reRegisterPosition();\n    });\n  }\n\n  //ensure column headers take up the correct amount of space in column groups\n  verticalAlignHeaders() {\n    var minHeight = 0;\n    if (!this.redrawBlock) {\n      this.headersElement.style.height = \"\";\n      this.columns.forEach(column => {\n        column.clearVerticalAlign();\n      });\n      this.columns.forEach(column => {\n        var height = column.getHeight();\n        if (height > minHeight) {\n          minHeight = height;\n        }\n      });\n      this.headersElement.style.height = minHeight + \"px\";\n      this.columns.forEach(column => {\n        column.verticalAlign(this.table.options.columnHeaderVertAlign, minHeight);\n      });\n      this.table.rowManager.adjustTableSize();\n    }\n  }\n\n  //////////////// Column Details /////////////////\n  findColumn(subject) {\n    var columns;\n    if (typeof subject == \"object\") {\n      if (subject instanceof Column) {\n        //subject is column element\n        return subject;\n      } else if (subject instanceof ColumnComponent) {\n        //subject is public column component\n        return subject._getSelf() || false;\n      } else if (typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement) {\n        columns = [];\n        this.columns.forEach(column => {\n          columns.push(column);\n          columns = columns.concat(column.getColumns(true));\n        });\n\n        //subject is a HTML element of the column header\n        let match = columns.find(column => {\n          return column.element === subject;\n        });\n        return match || false;\n      }\n    } else {\n      //subject should be treated as the field name of the column\n      return this.columnsByField[subject] || false;\n    }\n\n    //catch all for any other type of input\n    return false;\n  }\n  getColumnByField(field) {\n    return this.columnsByField[field];\n  }\n  getColumnsByFieldRoot(root) {\n    var matches = [];\n    Object.keys(this.columnsByField).forEach(field => {\n      var fieldRoot = this.table.options.nestedFieldSeparator ? field.split(this.table.options.nestedFieldSeparator)[0] : field;\n      if (fieldRoot === root) {\n        matches.push(this.columnsByField[field]);\n      }\n    });\n    return matches;\n  }\n  getColumnByIndex(index) {\n    return this.columnsByIndex[index];\n  }\n  getFirstVisibleColumn() {\n    var index = this.columnsByIndex.findIndex(col => {\n      return col.visible;\n    });\n    return index > -1 ? this.columnsByIndex[index] : false;\n  }\n  getVisibleColumnsByIndex() {\n    return this.columnsByIndex.filter(col => col.visible);\n  }\n  getColumns() {\n    return this.columns;\n  }\n  findColumnIndex(column) {\n    return this.columnsByIndex.findIndex(col => {\n      return column === col;\n    });\n  }\n\n  //return all columns that are not groups\n  getRealColumns() {\n    return this.columnsByIndex;\n  }\n\n  //traverse across columns and call action\n  traverse(callback) {\n    this.columnsByIndex.forEach((column, i) => {\n      callback(column, i);\n    });\n  }\n\n  //get definitions of actual columns\n  getDefinitions(active) {\n    var output = [];\n    this.columnsByIndex.forEach(column => {\n      if (!active || active && column.visible) {\n        output.push(column.getDefinition());\n      }\n    });\n    return output;\n  }\n\n  //get full nested definition tree\n  getDefinitionTree() {\n    var output = [];\n    this.columns.forEach(column => {\n      output.push(column.getDefinition(true));\n    });\n    return output;\n  }\n  getComponents(structured) {\n    var output = [],\n      columns = structured ? this.columns : this.columnsByIndex;\n    columns.forEach(column => {\n      output.push(column.getComponent());\n    });\n    return output;\n  }\n  getWidth() {\n    var width = 0;\n    this.columnsByIndex.forEach(column => {\n      if (column.visible) {\n        width += column.getWidth();\n      }\n    });\n    return width;\n  }\n  moveColumn(from, to, after) {\n    to.element.parentNode.insertBefore(from.element, to.element);\n    if (after) {\n      to.element.parentNode.insertBefore(to.element, from.element);\n    }\n    this.moveColumnActual(from, to, after);\n    this.verticalAlignHeaders();\n    this.table.rowManager.reinitialize();\n  }\n  moveColumnActual(from, to, after) {\n    if (from.parent.isGroup) {\n      this._moveColumnInArray(from.parent.columns, from, to, after);\n    } else {\n      this._moveColumnInArray(this.columns, from, to, after);\n    }\n    this._moveColumnInArray(this.columnsByIndex, from, to, after, true);\n    this.rerenderColumns(true);\n    this.dispatch(\"column-moved\", from, to, after);\n    if (this.subscribedExternal(\"columnMoved\")) {\n      this.dispatchExternal(\"columnMoved\", from.getComponent(), this.table.columnManager.getComponents());\n    }\n  }\n  _moveColumnInArray(columns, from, to, after, updateRows) {\n    var fromIndex = columns.indexOf(from),\n      toIndex,\n      rows = [];\n    if (fromIndex > -1) {\n      columns.splice(fromIndex, 1);\n      toIndex = columns.indexOf(to);\n      if (toIndex > -1) {\n        if (after) {\n          toIndex = toIndex + 1;\n        }\n      } else {\n        toIndex = fromIndex;\n      }\n      columns.splice(toIndex, 0, from);\n      if (updateRows) {\n        rows = this.chain(\"column-moving-rows\", [from, to, after], null, []) || [];\n        rows = rows.concat(this.table.rowManager.rows);\n        rows.forEach(function (row) {\n          if (row.cells.length) {\n            var cell = row.cells.splice(fromIndex, 1)[0];\n            row.cells.splice(toIndex, 0, cell);\n          }\n        });\n      }\n    }\n  }\n  scrollToColumn(column, position, ifVisible) {\n    var left = 0,\n      offset = column.getLeftOffset(),\n      adjust = 0,\n      colEl = column.getElement();\n    return new Promise((resolve, reject) => {\n      if (typeof position === \"undefined\") {\n        position = this.table.options.scrollToColumnPosition;\n      }\n      if (typeof ifVisible === \"undefined\") {\n        ifVisible = this.table.options.scrollToColumnIfVisible;\n      }\n      if (column.visible) {\n        //align to correct position\n        switch (position) {\n          case \"middle\":\n          case \"center\":\n            adjust = -this.element.clientWidth / 2;\n            break;\n          case \"right\":\n            adjust = colEl.clientWidth - this.headersElement.clientWidth;\n            break;\n        }\n\n        //check column visibility\n        if (!ifVisible) {\n          if (offset > 0 && offset + colEl.offsetWidth < this.element.clientWidth) {\n            return false;\n          }\n        }\n\n        //calculate scroll position\n        left = offset + adjust;\n        left = Math.max(Math.min(left, this.table.rowManager.element.scrollWidth - this.table.rowManager.element.clientWidth), 0);\n        this.table.rowManager.scrollHorizontal(left);\n        this.scrollHorizontal(left);\n        resolve();\n      } else {\n        console.warn(\"Scroll Error - Column not visible\");\n        reject(\"Scroll Error - Column not visible\");\n      }\n    });\n  }\n\n  //////////////// Cell Management /////////////////\n  generateCells(row) {\n    var cells = [];\n    this.columnsByIndex.forEach(column => {\n      cells.push(column.generateCell(row));\n    });\n    return cells;\n  }\n\n  //////////////// Column Management /////////////////\n  getFlexBaseWidth() {\n    var totalWidth = this.table.element.clientWidth,\n      //table element width\n      fixedWidth = 0;\n\n    //adjust for vertical scrollbar if present\n    if (this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight) {\n      totalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\n    }\n    this.columnsByIndex.forEach(function (column) {\n      var width, minWidth, colWidth;\n      if (column.visible) {\n        width = column.definition.width || 0;\n        minWidth = parseInt(column.minWidth);\n        if (typeof width == \"string\") {\n          if (width.indexOf(\"%\") > -1) {\n            colWidth = totalWidth / 100 * parseInt(width);\n          } else {\n            colWidth = parseInt(width);\n          }\n        } else {\n          colWidth = width;\n        }\n        fixedWidth += colWidth > minWidth ? colWidth : minWidth;\n      }\n    });\n    return fixedWidth;\n  }\n  addColumn(definition, before, nextToColumn) {\n    return new Promise((resolve, reject) => {\n      var column = this._addColumn(definition, before, nextToColumn);\n      this._reIndexColumns();\n      this.dispatch(\"column-add\", definition, before, nextToColumn);\n      if (this.layoutMode() != \"fitColumns\") {\n        column.reinitializeWidth();\n      }\n      this.redraw(true);\n      this.table.rowManager.reinitialize();\n      this.rerenderColumns();\n      resolve(column);\n    });\n  }\n\n  //remove column from system\n  deregisterColumn(column) {\n    var field = column.getField(),\n      index;\n\n    //remove from field list\n    if (field) {\n      delete this.columnsByField[field];\n    }\n\n    //remove from index list\n    index = this.columnsByIndex.indexOf(column);\n    if (index > -1) {\n      this.columnsByIndex.splice(index, 1);\n    }\n\n    //remove from column list\n    index = this.columns.indexOf(column);\n    if (index > -1) {\n      this.columns.splice(index, 1);\n    }\n    this.verticalAlignHeaders();\n    this.redraw();\n  }\n  rerenderColumns(update, silent) {\n    if (!this.redrawBlock) {\n      this.renderer.rerenderColumns(update, silent);\n    } else {\n      if (update === false || update === true && this.redrawBlockUpdate === null) {\n        this.redrawBlockUpdate = update;\n      }\n    }\n  }\n  blockRedraw() {\n    this.redrawBlock = true;\n    this.redrawBlockUpdate = null;\n  }\n  restoreRedraw() {\n    this.redrawBlock = false;\n    this.verticalAlignHeaders();\n    this.renderer.rerenderColumns(this.redrawBlockUpdate);\n  }\n\n  //redraw columns\n  redraw(force) {\n    if (Helpers.elVisible(this.element)) {\n      this.verticalAlignHeaders();\n    }\n    if (force) {\n      this.table.rowManager.resetScroll();\n      this.table.rowManager.reinitialize();\n    }\n    if (!this.confirm(\"table-redrawing\", force)) {\n      this.layoutRefresh(force);\n    }\n    this.dispatch(\"table-redraw\", force);\n    this.table.footerManager.redraw();\n  }\n}\nclass BasicVertical extends Renderer {\n  constructor(table) {\n    super(table);\n    this.verticalFillMode = \"fill\";\n    this.scrollTop = 0;\n    this.scrollLeft = 0;\n    this.scrollTop = 0;\n    this.scrollLeft = 0;\n  }\n  clearRows() {\n    var element = this.tableElement;\n\n    // element.children.detach();\n    while (element.firstChild) element.removeChild(element.firstChild);\n    element.scrollTop = 0;\n    element.scrollLeft = 0;\n    element.style.minWidth = \"\";\n    element.style.minHeight = \"\";\n    element.style.display = \"\";\n    element.style.visibility = \"\";\n  }\n  renderRows() {\n    var element = this.tableElement,\n      onlyGroupHeaders = true,\n      tableFrag = document.createDocumentFragment(),\n      rows = this.rows();\n    rows.forEach((row, index) => {\n      this.styleRow(row, index);\n      row.initialize(false, true);\n      if (row.type !== \"group\") {\n        onlyGroupHeaders = false;\n      }\n      tableFrag.appendChild(row.getElement());\n    });\n    element.appendChild(tableFrag);\n    rows.forEach(row => {\n      row.rendered();\n      if (!row.heightInitialized) {\n        row.calcHeight(true);\n      }\n    });\n    rows.forEach(row => {\n      if (!row.heightInitialized) {\n        row.setCellHeight();\n      }\n    });\n    if (onlyGroupHeaders) {\n      element.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n    } else {\n      element.style.minWidth = \"\";\n    }\n  }\n  rerenderRows(callback) {\n    this.clearRows();\n    if (callback) {\n      callback();\n    }\n    this.renderRows();\n    if (!this.rows().length) {\n      this.table.rowManager.tableEmpty();\n    }\n  }\n  scrollToRowNearestTop(row) {\n    var rowTop = Helpers.elOffset(row.getElement()).top;\n    return !(Math.abs(this.elementVertical.scrollTop - rowTop) > Math.abs(this.elementVertical.scrollTop + this.elementVertical.clientHeight - rowTop));\n  }\n  scrollToRow(row) {\n    var rowEl = row.getElement();\n    this.elementVertical.scrollTop = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.elementVertical).top + this.elementVertical.scrollTop;\n  }\n  visibleRows(includingBuffer) {\n    return this.rows();\n  }\n}\nclass VirtualDomVertical extends Renderer {\n  constructor(table) {\n    super(table);\n    this.verticalFillMode = \"fill\";\n    this.scrollTop = 0;\n    this.scrollLeft = 0;\n    this.vDomRowHeight = 20; //approximation of row heights for padding\n\n    this.vDomTop = 0; //hold position for first rendered row in the virtual DOM\n    this.vDomBottom = 0; //hold position for last rendered row in the virtual DOM\n\n    this.vDomScrollPosTop = 0; //last scroll position of the vDom top;\n    this.vDomScrollPosBottom = 0; //last scroll position of the vDom bottom;\n\n    this.vDomTopPad = 0; //hold value of padding for top of virtual DOM\n    this.vDomBottomPad = 0; //hold value of padding for bottom of virtual DOM\n\n    this.vDomMaxRenderChain = 90; //the maximum number of dom elements that can be rendered in 1 go\n\n    this.vDomWindowBuffer = 0; //window row buffer before removing elements, to smooth scrolling\n\n    this.vDomWindowMinTotalRows = 20; //minimum number of rows to be generated in virtual dom (prevent buffering issues on tables with tall rows)\n    this.vDomWindowMinMarginRows = 5; //minimum number of rows to be generated in virtual dom margin\n\n    this.vDomTopNewRows = []; //rows to normalize after appending to optimize render speed\n    this.vDomBottomNewRows = []; //rows to normalize after appending to optimize render speed\n  }\n\n  //////////////////////////////////////\n  ///////// Public Functions ///////////\n  //////////////////////////////////////\n\n  clearRows() {\n    var element = this.tableElement;\n\n    // element.children.detach();\n    while (element.firstChild) element.removeChild(element.firstChild);\n    element.style.paddingTop = \"\";\n    element.style.paddingBottom = \"\";\n    element.style.minHeight = \"\";\n    element.style.display = \"\";\n    element.style.visibility = \"\";\n    this.elementVertical.scrollTop = 0;\n    this.elementVertical.scrollLeft = 0;\n    this.scrollTop = 0;\n    this.scrollLeft = 0;\n    this.vDomTop = 0;\n    this.vDomBottom = 0;\n    this.vDomTopPad = 0;\n    this.vDomBottomPad = 0;\n    this.vDomScrollPosTop = 0;\n    this.vDomScrollPosBottom = 0;\n  }\n  renderRows() {\n    this._virtualRenderFill();\n  }\n  rerenderRows(callback) {\n    var scrollTop = this.elementVertical.scrollTop;\n    var topRow = false;\n    var topOffset = false;\n    var left = this.table.rowManager.scrollLeft;\n    var rows = this.rows();\n    for (var i = this.vDomTop; i <= this.vDomBottom; i++) {\n      if (rows[i]) {\n        var diff = scrollTop - rows[i].getElement().offsetTop;\n        if (topOffset === false || Math.abs(diff) < topOffset) {\n          topOffset = diff;\n          topRow = i;\n        } else {\n          break;\n        }\n      }\n    }\n    rows.forEach(row => {\n      row.deinitializeHeight();\n    });\n    if (callback) {\n      callback();\n    }\n    if (this.rows().length) {\n      this._virtualRenderFill(topRow === false ? this.rows.length - 1 : topRow, true, topOffset || 0);\n    } else {\n      this.clear();\n      this.table.rowManager.tableEmpty();\n    }\n    this.scrollColumns(left);\n  }\n  scrollColumns(left) {\n    this.table.rowManager.scrollHorizontal(left);\n  }\n  scrollRows(top, dir) {\n    var topDiff = top - this.vDomScrollPosTop;\n    var bottomDiff = top - this.vDomScrollPosBottom;\n    var margin = this.vDomWindowBuffer * 2;\n    var rows = this.rows();\n    this.scrollTop = top;\n    if (-topDiff > margin || bottomDiff > margin) {\n      //if big scroll redraw table;\n      var left = this.table.rowManager.scrollLeft;\n      this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop / this.elementVertical.scrollHeight * rows.length));\n      this.scrollColumns(left);\n    } else {\n      if (dir) {\n        //scrolling up\n        if (topDiff < 0) {\n          this._addTopRow(rows, -topDiff);\n        }\n        if (bottomDiff < 0) {\n          //hide bottom row if needed\n          if (this.vDomScrollHeight - this.scrollTop > this.vDomWindowBuffer) {\n            this._removeBottomRow(rows, -bottomDiff);\n          } else {\n            this.vDomScrollPosBottom = this.scrollTop;\n          }\n        }\n      } else {\n        if (bottomDiff >= 0) {\n          this._addBottomRow(rows, bottomDiff);\n        }\n\n        //scrolling down\n        if (topDiff >= 0) {\n          //hide top row if needed\n          if (this.scrollTop > this.vDomWindowBuffer) {\n            this._removeTopRow(rows, topDiff);\n          } else {\n            this.vDomScrollPosTop = this.scrollTop;\n          }\n        }\n      }\n    }\n  }\n  resize() {\n    this.vDomWindowBuffer = this.table.options.renderVerticalBuffer || this.elementVertical.clientHeight;\n  }\n  scrollToRowNearestTop(row) {\n    var rowIndex = this.rows().indexOf(row);\n    return !(Math.abs(this.vDomTop - rowIndex) > Math.abs(this.vDomBottom - rowIndex));\n  }\n  scrollToRow(row) {\n    var index = this.rows().indexOf(row);\n    if (index > -1) {\n      this._virtualRenderFill(index, true);\n    }\n  }\n  visibleRows(includingBuffer) {\n    var topEdge = this.elementVertical.scrollTop,\n      bottomEdge = this.elementVertical.clientHeight + topEdge,\n      topFound = false,\n      topRow = 0,\n      bottomRow = 0,\n      rows = this.rows();\n    if (includingBuffer) {\n      topRow = this.vDomTop;\n      bottomRow = this.vDomBottom;\n    } else {\n      for (var i = this.vDomTop; i <= this.vDomBottom; i++) {\n        if (rows[i]) {\n          if (!topFound) {\n            if (topEdge - rows[i].getElement().offsetTop >= 0) {\n              topRow = i;\n            } else {\n              topFound = true;\n              if (bottomEdge - rows[i].getElement().offsetTop >= 0) {\n                bottomRow = i;\n              } else {\n                break;\n              }\n            }\n          } else {\n            if (bottomEdge - rows[i].getElement().offsetTop >= 0) {\n              bottomRow = i;\n            } else {\n              break;\n            }\n          }\n        }\n      }\n    }\n    return rows.slice(topRow, bottomRow + 1);\n  }\n\n  //////////////////////////////////////\n  //////// Internal Rendering //////////\n  //////////////////////////////////////\n\n  //full virtual render\n  _virtualRenderFill(position, forceMove, offset) {\n    var element = this.tableElement,\n      holder = this.elementVertical,\n      topPad = 0,\n      rowsHeight = 0,\n      rowHeight = 0,\n      heightOccupied = 0,\n      topPadHeight = 0,\n      i = 0,\n      rows = this.rows(),\n      rowsCount = rows.length,\n      index = 0,\n      row,\n      rowFragment,\n      renderedRows = [],\n      totalRowsRendered = 0,\n      rowsToRender = 0,\n      fixedHeight = this.table.rowManager.fixedHeight,\n      containerHeight = this.elementVertical.clientHeight,\n      avgRowHeight = this.table.options.rowHeight,\n      resized = true;\n    position = position || 0;\n    offset = offset || 0;\n    if (!position) {\n      this.clear();\n    } else {\n      while (element.firstChild) element.removeChild(element.firstChild);\n\n      //check if position is too close to bottom of table\n      heightOccupied = (rowsCount - position + 1) * this.vDomRowHeight;\n      if (heightOccupied < containerHeight) {\n        position -= Math.ceil((containerHeight - heightOccupied) / this.vDomRowHeight);\n        if (position < 0) {\n          position = 0;\n        }\n      }\n\n      //calculate initial pad\n      topPad = Math.min(Math.max(Math.floor(this.vDomWindowBuffer / this.vDomRowHeight), this.vDomWindowMinMarginRows), position);\n      position -= topPad;\n    }\n    if (rowsCount && Helpers.elVisible(this.elementVertical)) {\n      this.vDomTop = position;\n      this.vDomBottom = position - 1;\n      if (fixedHeight || this.table.options.maxHeight) {\n        if (avgRowHeight) {\n          rowsToRender = containerHeight / avgRowHeight + this.vDomWindowBuffer / avgRowHeight;\n        }\n        rowsToRender = Math.max(this.vDomWindowMinTotalRows, Math.ceil(rowsToRender));\n      } else {\n        rowsToRender = rowsCount;\n      }\n      while ((rowsToRender == rowsCount || rowsHeight <= containerHeight + this.vDomWindowBuffer || totalRowsRendered < this.vDomWindowMinTotalRows) && this.vDomBottom < rowsCount - 1) {\n        renderedRows = [];\n        rowFragment = document.createDocumentFragment();\n        i = 0;\n        while (i < rowsToRender && this.vDomBottom < rowsCount - 1) {\n          index = this.vDomBottom + 1, row = rows[index];\n          this.styleRow(row, index);\n          row.initialize(false, true);\n          if (!row.heightInitialized && !this.table.options.rowHeight) {\n            row.clearCellHeight();\n          }\n          rowFragment.appendChild(row.getElement());\n          renderedRows.push(row);\n          this.vDomBottom++;\n          i++;\n        }\n        if (!renderedRows.length) {\n          break;\n        }\n        element.appendChild(rowFragment);\n\n        // NOTE: The next 3 loops are separate on purpose\n        // This is to batch up the dom writes and reads which drastically improves performance \n\n        renderedRows.forEach(row => {\n          row.rendered();\n          if (!row.heightInitialized) {\n            row.calcHeight(true);\n          }\n        });\n        renderedRows.forEach(row => {\n          if (!row.heightInitialized) {\n            row.setCellHeight();\n          }\n        });\n        renderedRows.forEach(row => {\n          rowHeight = row.getHeight();\n          if (totalRowsRendered < topPad) {\n            topPadHeight += rowHeight;\n          } else {\n            rowsHeight += rowHeight;\n          }\n          if (rowHeight > this.vDomWindowBuffer) {\n            this.vDomWindowBuffer = rowHeight * 2;\n          }\n          totalRowsRendered++;\n        });\n        resized = this.table.rowManager.adjustTableSize();\n        containerHeight = this.elementVertical.clientHeight;\n        if (resized && (fixedHeight || this.table.options.maxHeight)) {\n          avgRowHeight = rowsHeight / totalRowsRendered;\n          rowsToRender = Math.max(this.vDomWindowMinTotalRows, Math.ceil(containerHeight / avgRowHeight + this.vDomWindowBuffer / avgRowHeight));\n        }\n      }\n      if (!position) {\n        this.vDomTopPad = 0;\n        //adjust row height to match average of rendered elements\n        this.vDomRowHeight = Math.floor((rowsHeight + topPadHeight) / totalRowsRendered);\n        this.vDomBottomPad = this.vDomRowHeight * (rowsCount - this.vDomBottom - 1);\n        this.vDomScrollHeight = topPadHeight + rowsHeight + this.vDomBottomPad - containerHeight;\n      } else {\n        this.vDomTopPad = !forceMove ? this.scrollTop - topPadHeight : this.vDomRowHeight * this.vDomTop + offset;\n        this.vDomBottomPad = this.vDomBottom == rowsCount - 1 ? 0 : Math.max(this.vDomScrollHeight - this.vDomTopPad - rowsHeight - topPadHeight, 0);\n      }\n      element.style.paddingTop = this.vDomTopPad + \"px\";\n      element.style.paddingBottom = this.vDomBottomPad + \"px\";\n      if (forceMove) {\n        this.scrollTop = this.vDomTopPad + topPadHeight + offset - (this.elementVertical.scrollWidth > this.elementVertical.clientWidth ? this.elementVertical.offsetHeight - containerHeight : 0);\n      }\n      this.scrollTop = Math.min(this.scrollTop, this.elementVertical.scrollHeight - containerHeight);\n\n      //adjust for horizontal scrollbar if present (and not at top of table)\n      if (this.elementVertical.scrollWidth > this.elementVertical.clientWidth && forceMove) {\n        this.scrollTop += this.elementVertical.offsetHeight - containerHeight;\n      }\n      this.vDomScrollPosTop = this.scrollTop;\n      this.vDomScrollPosBottom = this.scrollTop;\n      holder.scrollTop = this.scrollTop;\n      this.dispatch(\"render-virtual-fill\");\n    }\n  }\n  _addTopRow(rows, fillableSpace) {\n    var table = this.tableElement,\n      addedRows = [],\n      paddingAdjust = 0,\n      index = this.vDomTop - 1,\n      i = 0,\n      working = true;\n    while (working) {\n      if (this.vDomTop) {\n        let row = rows[index],\n          rowHeight,\n          initialized;\n        if (row && i < this.vDomMaxRenderChain) {\n          rowHeight = row.getHeight() || this.vDomRowHeight;\n          initialized = row.initialized;\n          if (fillableSpace >= rowHeight) {\n            this.styleRow(row, index);\n            table.insertBefore(row.getElement(), table.firstChild);\n            if (!row.initialized || !row.heightInitialized) {\n              addedRows.push(row);\n            }\n            row.initialize();\n            if (!initialized) {\n              rowHeight = row.getElement().offsetHeight;\n              if (rowHeight > this.vDomWindowBuffer) {\n                this.vDomWindowBuffer = rowHeight * 2;\n              }\n            }\n            fillableSpace -= rowHeight;\n            paddingAdjust += rowHeight;\n            this.vDomTop--;\n            index--;\n            i++;\n          } else {\n            working = false;\n          }\n        } else {\n          working = false;\n        }\n      } else {\n        working = false;\n      }\n    }\n    for (let row of addedRows) {\n      row.clearCellHeight();\n    }\n    this._quickNormalizeRowHeight(addedRows);\n    if (paddingAdjust) {\n      this.vDomTopPad -= paddingAdjust;\n      if (this.vDomTopPad < 0) {\n        this.vDomTopPad = index * this.vDomRowHeight;\n      }\n      if (index < 1) {\n        this.vDomTopPad = 0;\n      }\n      table.style.paddingTop = this.vDomTopPad + \"px\";\n      this.vDomScrollPosTop -= paddingAdjust;\n    }\n  }\n  _removeTopRow(rows, fillableSpace) {\n    var removableRows = [],\n      paddingAdjust = 0,\n      i = 0,\n      working = true;\n    while (working) {\n      let row = rows[this.vDomTop],\n        rowHeight;\n      if (row && i < this.vDomMaxRenderChain) {\n        rowHeight = row.getHeight() || this.vDomRowHeight;\n        if (fillableSpace >= rowHeight) {\n          this.vDomTop++;\n          fillableSpace -= rowHeight;\n          paddingAdjust += rowHeight;\n          removableRows.push(row);\n          i++;\n        } else {\n          working = false;\n        }\n      } else {\n        working = false;\n      }\n    }\n    for (let row of removableRows) {\n      let rowEl = row.getElement();\n      if (rowEl.parentNode) {\n        rowEl.parentNode.removeChild(rowEl);\n      }\n    }\n    if (paddingAdjust) {\n      this.vDomTopPad += paddingAdjust;\n      this.tableElement.style.paddingTop = this.vDomTopPad + \"px\";\n      this.vDomScrollPosTop += this.vDomTop ? paddingAdjust : paddingAdjust + this.vDomWindowBuffer;\n    }\n  }\n  _addBottomRow(rows, fillableSpace) {\n    var table = this.tableElement,\n      addedRows = [],\n      paddingAdjust = 0,\n      index = this.vDomBottom + 1,\n      i = 0,\n      working = true;\n    while (working) {\n      let row = rows[index],\n        rowHeight,\n        initialized;\n      if (row && i < this.vDomMaxRenderChain) {\n        rowHeight = row.getHeight() || this.vDomRowHeight;\n        initialized = row.initialized;\n        if (fillableSpace >= rowHeight) {\n          this.styleRow(row, index);\n          table.appendChild(row.getElement());\n          if (!row.initialized || !row.heightInitialized) {\n            addedRows.push(row);\n          }\n          row.initialize();\n          if (!initialized) {\n            rowHeight = row.getElement().offsetHeight;\n            if (rowHeight > this.vDomWindowBuffer) {\n              this.vDomWindowBuffer = rowHeight * 2;\n            }\n          }\n          fillableSpace -= rowHeight;\n          paddingAdjust += rowHeight;\n          this.vDomBottom++;\n          index++;\n          i++;\n        } else {\n          working = false;\n        }\n      } else {\n        working = false;\n      }\n    }\n    for (let row of addedRows) {\n      row.clearCellHeight();\n    }\n    this._quickNormalizeRowHeight(addedRows);\n    if (paddingAdjust) {\n      this.vDomBottomPad -= paddingAdjust;\n      if (this.vDomBottomPad < 0 || index == rows.length - 1) {\n        this.vDomBottomPad = 0;\n      }\n      table.style.paddingBottom = this.vDomBottomPad + \"px\";\n      this.vDomScrollPosBottom += paddingAdjust;\n    }\n  }\n  _removeBottomRow(rows, fillableSpace) {\n    var removableRows = [],\n      paddingAdjust = 0,\n      i = 0,\n      working = true;\n    while (working) {\n      let row = rows[this.vDomBottom],\n        rowHeight;\n      if (row && i < this.vDomMaxRenderChain) {\n        rowHeight = row.getHeight() || this.vDomRowHeight;\n        if (fillableSpace >= rowHeight) {\n          this.vDomBottom--;\n          fillableSpace -= rowHeight;\n          paddingAdjust += rowHeight;\n          removableRows.push(row);\n          i++;\n        } else {\n          working = false;\n        }\n      } else {\n        working = false;\n      }\n    }\n    for (let row of removableRows) {\n      let rowEl = row.getElement();\n      if (rowEl.parentNode) {\n        rowEl.parentNode.removeChild(rowEl);\n      }\n    }\n    if (paddingAdjust) {\n      this.vDomBottomPad += paddingAdjust;\n      if (this.vDomBottomPad < 0) {\n        this.vDomBottomPad = 0;\n      }\n      this.tableElement.style.paddingBottom = this.vDomBottomPad + \"px\";\n      this.vDomScrollPosBottom -= paddingAdjust;\n    }\n  }\n  _quickNormalizeRowHeight(rows) {\n    for (let row of rows) {\n      row.calcHeight();\n    }\n    for (let row of rows) {\n      row.setCellHeight();\n    }\n  }\n}\nclass RowManager extends CoreFeature {\n  constructor(table) {\n    super(table);\n    this.element = this.createHolderElement(); //containing element\n    this.tableElement = this.createTableElement(); //table element\n    this.heightFixer = this.createTableElement(); //table element\n    this.placeholder = null; //placeholder element\n    this.placeholderContents = null; //placeholder element\n\n    this.firstRender = false; //handle first render\n    this.renderMode = \"virtual\"; //current rendering mode\n    this.fixedHeight = false; //current rendering mode\n\n    this.rows = []; //hold row data objects\n    this.activeRowsPipeline = []; //hold calculation of active rows\n    this.activeRows = []; //rows currently available to on display in the table\n    this.activeRowsCount = 0; //count of active rows\n\n    this.displayRows = []; //rows currently on display in the table\n    this.displayRowsCount = 0; //count of display rows\n\n    this.scrollTop = 0;\n    this.scrollLeft = 0;\n    this.redrawBlock = false; //prevent redraws to allow multiple data manipulations before continuing\n    this.redrawBlockRestoreConfig = false; //store latest redraw function calls for when redraw is needed\n    this.redrawBlockRenderInPosition = false; //store latest redraw function calls for when redraw is needed\n\n    this.dataPipeline = []; //hold data pipeline tasks\n    this.displayPipeline = []; //hold data display pipeline tasks\n\n    this.scrollbarWidth = 0;\n    this.renderer = null;\n  }\n\n  //////////////// Setup Functions /////////////////\n\n  createHolderElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-tableholder\");\n    el.setAttribute(\"tabindex\", 0);\n    // el.setAttribute(\"role\", \"rowgroup\");\n\n    return el;\n  }\n  createTableElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-table\");\n    el.setAttribute(\"role\", \"rowgroup\");\n    return el;\n  }\n  initializePlaceholder() {\n    var placeholder = this.table.options.placeholder;\n    if (typeof placeholder === \"function\") {\n      placeholder = placeholder.call(this.table);\n    }\n    placeholder = this.chain(\"placeholder\", [placeholder], placeholder, placeholder) || placeholder;\n\n    //configure placeholder element\n    if (placeholder) {\n      let el = document.createElement(\"div\");\n      el.classList.add(\"tabulator-placeholder\");\n      if (typeof placeholder == \"string\") {\n        let contents = document.createElement(\"div\");\n        contents.classList.add(\"tabulator-placeholder-contents\");\n        contents.innerHTML = placeholder;\n        el.appendChild(contents);\n        this.placeholderContents = contents;\n      } else if (typeof HTMLElement !== \"undefined\" && placeholder instanceof HTMLElement) {\n        el.appendChild(placeholder);\n        this.placeholderContents = placeholder;\n      } else {\n        console.warn(\"Invalid placeholder provided, must be string or HTML Element\", placeholder);\n        this.el = null;\n      }\n      this.placeholder = el;\n    }\n  }\n\n  //return containing element\n  getElement() {\n    return this.element;\n  }\n\n  //return table element\n  getTableElement() {\n    return this.tableElement;\n  }\n  initialize() {\n    this.initializePlaceholder();\n    this.initializeRenderer();\n\n    //initialize manager\n    this.element.appendChild(this.tableElement);\n    this.firstRender = true;\n\n    //scroll header along with table body\n    this.element.addEventListener(\"scroll\", () => {\n      var left = this.element.scrollLeft,\n        leftDir = this.scrollLeft > left,\n        top = this.element.scrollTop,\n        topDir = this.scrollTop > top;\n\n      //handle horizontal scrolling\n      if (this.scrollLeft != left) {\n        this.scrollLeft = left;\n        this.dispatch(\"scroll-horizontal\", left, leftDir);\n        this.dispatchExternal(\"scrollHorizontal\", left, leftDir);\n        this._positionPlaceholder();\n      }\n\n      //handle vertical scrolling\n      if (this.scrollTop != top) {\n        this.scrollTop = top;\n        this.renderer.scrollRows(top, topDir);\n        this.dispatch(\"scroll-vertical\", top, topDir);\n        this.dispatchExternal(\"scrollVertical\", top, topDir);\n      }\n    });\n  }\n\n  ////////////////// Row Manipulation //////////////////\n  findRow(subject) {\n    if (typeof subject == \"object\") {\n      if (subject instanceof Row) {\n        //subject is row element\n        return subject;\n      } else if (subject instanceof RowComponent) {\n        //subject is public row component\n        return subject._getSelf() || false;\n      } else if (typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement) {\n        //subject is a HTML element of the row\n        let match = this.rows.find(row => {\n          return row.getElement() === subject;\n        });\n        return match || false;\n      } else if (subject === null) {\n        return false;\n      }\n    } else if (typeof subject == \"undefined\") {\n      return false;\n    } else {\n      //subject should be treated as the index of the row\n      let match = this.rows.find(row => {\n        return row.data[this.table.options.index] == subject;\n      });\n      return match || false;\n    }\n\n    //catch all for any other type of input\n    return false;\n  }\n  getRowFromDataObject(data) {\n    var match = this.rows.find(row => {\n      return row.data === data;\n    });\n    return match || false;\n  }\n  getRowFromPosition(position) {\n    return this.getDisplayRows().find(row => {\n      return row.type === \"row\" && row.getPosition() === position && row.isDisplayed();\n    });\n  }\n  scrollToRow(row, position, ifVisible) {\n    return this.renderer.scrollToRowPosition(row, position, ifVisible);\n  }\n\n  ////////////////// Data Handling //////////////////\n  setData(data, renderInPosition, columnsChanged) {\n    return new Promise((resolve, reject) => {\n      if (renderInPosition && this.getDisplayRows().length) {\n        if (this.table.options.pagination) {\n          this._setDataActual(data, true);\n        } else {\n          this.reRenderInPosition(() => {\n            this._setDataActual(data);\n          });\n        }\n      } else {\n        if (this.table.options.autoColumns && columnsChanged && this.table.initialized) {\n          this.table.columnManager.generateColumnsFromRowData(data);\n        }\n        this.resetScroll();\n        this._setDataActual(data);\n      }\n      resolve();\n    });\n  }\n  _setDataActual(data, renderInPosition) {\n    this.dispatchExternal(\"dataProcessing\", data);\n    this._wipeElements();\n    if (Array.isArray(data)) {\n      this.dispatch(\"data-processing\", data);\n      data.forEach((def, i) => {\n        if (def && typeof def === \"object\") {\n          var row = new Row(def, this);\n          this.rows.push(row);\n        } else {\n          console.warn(\"Data Loading Warning - Invalid row data detected and ignored, expecting object but received:\", def);\n        }\n      });\n      this.refreshActiveData(false, false, renderInPosition);\n      this.dispatch(\"data-processed\", data);\n      this.dispatchExternal(\"dataProcessed\", data);\n    } else {\n      console.error(\"Data Loading Error - Unable to process data due to invalid data type \\nExpecting: array \\nReceived: \", typeof data, \"\\nData:     \", data);\n    }\n  }\n  _wipeElements() {\n    this.dispatch(\"rows-wipe\");\n    this.destroy();\n    this.adjustTableSize();\n    this.dispatch(\"rows-wiped\");\n  }\n  destroy() {\n    this.rows.forEach(row => {\n      row.wipe();\n    });\n    this.rows = [];\n    this.activeRows = [];\n    this.activeRowsPipeline = [];\n    this.activeRowsCount = 0;\n    this.displayRows = [];\n    this.displayRowsCount = 0;\n  }\n  deleteRow(row, blockRedraw) {\n    var allIndex = this.rows.indexOf(row),\n      activeIndex = this.activeRows.indexOf(row);\n    if (activeIndex > -1) {\n      this.activeRows.splice(activeIndex, 1);\n    }\n    if (allIndex > -1) {\n      this.rows.splice(allIndex, 1);\n    }\n    this.setActiveRows(this.activeRows);\n    this.displayRowIterator(rows => {\n      var displayIndex = rows.indexOf(row);\n      if (displayIndex > -1) {\n        rows.splice(displayIndex, 1);\n      }\n    });\n    if (!blockRedraw) {\n      this.reRenderInPosition();\n    }\n    this.regenerateRowPositions();\n    this.dispatchExternal(\"rowDeleted\", row.getComponent());\n    if (!this.displayRowsCount) {\n      this.tableEmpty();\n    }\n    if (this.subscribedExternal(\"dataChanged\")) {\n      this.dispatchExternal(\"dataChanged\", this.getData());\n    }\n  }\n  addRow(data, pos, index, blockRedraw) {\n    var row = this.addRowActual(data, pos, index, blockRedraw);\n    return row;\n  }\n\n  //add multiple rows\n  addRows(data, pos, index, refreshDisplayOnly) {\n    var rows = [];\n    return new Promise((resolve, reject) => {\n      pos = this.findAddRowPos(pos);\n      if (!Array.isArray(data)) {\n        data = [data];\n      }\n      if (typeof index == \"undefined\" && pos || typeof index !== \"undefined\" && !pos) {\n        data.reverse();\n      }\n      data.forEach((item, i) => {\n        var row = this.addRow(item, pos, index, true);\n        rows.push(row);\n        this.dispatch(\"row-added\", row, item, pos, index);\n      });\n      this.refreshActiveData(refreshDisplayOnly ? \"displayPipeline\" : false, false, true);\n      this.regenerateRowPositions();\n      if (this.displayRowsCount) {\n        this._clearPlaceholder();\n      }\n      resolve(rows);\n    });\n  }\n  findAddRowPos(pos) {\n    if (typeof pos === \"undefined\") {\n      pos = this.table.options.addRowPos;\n    }\n    if (pos === \"pos\") {\n      pos = true;\n    }\n    if (pos === \"bottom\") {\n      pos = false;\n    }\n    return pos;\n  }\n  addRowActual(data, pos, index, blockRedraw) {\n    var row = data instanceof Row ? data : new Row(data || {}, this),\n      top = this.findAddRowPos(pos),\n      allIndex = -1,\n      activeIndex,\n      chainResult;\n    if (!index) {\n      chainResult = this.chain(\"row-adding-position\", [row, top], null, {\n        index,\n        top\n      });\n      index = chainResult.index;\n      top = chainResult.top;\n    }\n    if (typeof index !== \"undefined\") {\n      index = this.findRow(index);\n    }\n    index = this.chain(\"row-adding-index\", [row, index, top], null, index);\n    if (index) {\n      allIndex = this.rows.indexOf(index);\n    }\n    if (index && allIndex > -1) {\n      activeIndex = this.activeRows.indexOf(index);\n      this.displayRowIterator(function (rows) {\n        var displayIndex = rows.indexOf(index);\n        if (displayIndex > -1) {\n          rows.splice(top ? displayIndex : displayIndex + 1, 0, row);\n        }\n      });\n      if (activeIndex > -1) {\n        this.activeRows.splice(top ? activeIndex : activeIndex + 1, 0, row);\n      }\n      this.rows.splice(top ? allIndex : allIndex + 1, 0, row);\n    } else {\n      if (top) {\n        this.displayRowIterator(function (rows) {\n          rows.unshift(row);\n        });\n        this.activeRows.unshift(row);\n        this.rows.unshift(row);\n      } else {\n        this.displayRowIterator(function (rows) {\n          rows.push(row);\n        });\n        this.activeRows.push(row);\n        this.rows.push(row);\n      }\n    }\n    this.setActiveRows(this.activeRows);\n    this.dispatchExternal(\"rowAdded\", row.getComponent());\n    if (this.subscribedExternal(\"dataChanged\")) {\n      this.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n    }\n    if (!blockRedraw) {\n      this.reRenderInPosition();\n    }\n    return row;\n  }\n  moveRow(from, to, after) {\n    this.dispatch(\"row-move\", from, to, after);\n    this.moveRowActual(from, to, after);\n    this.regenerateRowPositions();\n    this.dispatch(\"row-moved\", from, to, after);\n    this.dispatchExternal(\"rowMoved\", from.getComponent());\n  }\n  moveRowActual(from, to, after) {\n    this.moveRowInArray(this.rows, from, to, after);\n    this.moveRowInArray(this.activeRows, from, to, after);\n    this.displayRowIterator(rows => {\n      this.moveRowInArray(rows, from, to, after);\n    });\n    this.dispatch(\"row-moving\", from, to, after);\n  }\n  moveRowInArray(rows, from, to, after) {\n    var fromIndex, toIndex, start, end;\n    if (from !== to) {\n      fromIndex = rows.indexOf(from);\n      if (fromIndex > -1) {\n        rows.splice(fromIndex, 1);\n        toIndex = rows.indexOf(to);\n        if (toIndex > -1) {\n          if (after) {\n            rows.splice(toIndex + 1, 0, from);\n          } else {\n            rows.splice(toIndex, 0, from);\n          }\n        } else {\n          rows.splice(fromIndex, 0, from);\n        }\n      }\n\n      //restyle rows\n      if (rows === this.getDisplayRows()) {\n        start = fromIndex < toIndex ? fromIndex : toIndex;\n        end = toIndex > fromIndex ? toIndex : fromIndex + 1;\n        for (let i = start; i <= end; i++) {\n          if (rows[i]) {\n            this.styleRow(rows[i], i);\n          }\n        }\n      }\n    }\n  }\n  clearData() {\n    this.setData([]);\n  }\n  getRowIndex(row) {\n    return this.findRowIndex(row, this.rows);\n  }\n  getDisplayRowIndex(row) {\n    var index = this.getDisplayRows().indexOf(row);\n    return index > -1 ? index : false;\n  }\n  nextDisplayRow(row, rowOnly) {\n    var index = this.getDisplayRowIndex(row),\n      nextRow = false;\n    if (index !== false && index < this.displayRowsCount - 1) {\n      nextRow = this.getDisplayRows()[index + 1];\n    }\n    if (nextRow && (!(nextRow instanceof Row) || nextRow.type != \"row\")) {\n      return this.nextDisplayRow(nextRow, rowOnly);\n    }\n    return nextRow;\n  }\n  prevDisplayRow(row, rowOnly) {\n    var index = this.getDisplayRowIndex(row),\n      prevRow = false;\n    if (index) {\n      prevRow = this.getDisplayRows()[index - 1];\n    }\n    if (rowOnly && prevRow && (!(prevRow instanceof Row) || prevRow.type != \"row\")) {\n      return this.prevDisplayRow(prevRow, rowOnly);\n    }\n    return prevRow;\n  }\n  findRowIndex(row, list) {\n    var rowIndex;\n    row = this.findRow(row);\n    if (row) {\n      rowIndex = list.indexOf(row);\n      if (rowIndex > -1) {\n        return rowIndex;\n      }\n    }\n    return false;\n  }\n  getData(active, transform) {\n    var output = [],\n      rows = this.getRows(active);\n    rows.forEach(function (row) {\n      if (row.type == \"row\") {\n        output.push(row.getData(transform || \"data\"));\n      }\n    });\n    return output;\n  }\n  getComponents(active) {\n    var output = [],\n      rows = this.getRows(active);\n    rows.forEach(function (row) {\n      output.push(row.getComponent());\n    });\n    return output;\n  }\n  getDataCount(active) {\n    var rows = this.getRows(active);\n    return rows.length;\n  }\n  scrollHorizontal(left) {\n    this.scrollLeft = left;\n    this.element.scrollLeft = left;\n    this.dispatch(\"scroll-horizontal\", left);\n  }\n  registerDataPipelineHandler(handler, priority) {\n    if (typeof priority !== \"undefined\") {\n      this.dataPipeline.push({\n        handler,\n        priority\n      });\n      this.dataPipeline.sort((a, b) => {\n        return a.priority - b.priority;\n      });\n    } else {\n      console.error(\"Data pipeline handlers must have a priority in order to be registered\");\n    }\n  }\n  registerDisplayPipelineHandler(handler, priority) {\n    if (typeof priority !== \"undefined\") {\n      this.displayPipeline.push({\n        handler,\n        priority\n      });\n      this.displayPipeline.sort((a, b) => {\n        return a.priority - b.priority;\n      });\n    } else {\n      console.error(\"Display pipeline handlers must have a priority in order to be registered\");\n    }\n  }\n\n  //set active data set\n  refreshActiveData(handler, skipStage, renderInPosition) {\n    var table = this.table,\n      stage = \"\",\n      index = 0,\n      cascadeOrder = [\"all\", \"dataPipeline\", \"display\", \"displayPipeline\", \"end\"];\n    if (!this.table.destroyed) {\n      if (typeof handler === \"function\") {\n        index = this.dataPipeline.findIndex(item => {\n          return item.handler === handler;\n        });\n        if (index > -1) {\n          stage = \"dataPipeline\";\n          if (skipStage) {\n            if (index == this.dataPipeline.length - 1) {\n              stage = \"display\";\n            } else {\n              index++;\n            }\n          }\n        } else {\n          index = this.displayPipeline.findIndex(item => {\n            return item.handler === handler;\n          });\n          if (index > -1) {\n            stage = \"displayPipeline\";\n            if (skipStage) {\n              if (index == this.displayPipeline.length - 1) {\n                stage = \"end\";\n              } else {\n                index++;\n              }\n            }\n          } else {\n            console.error(\"Unable to refresh data, invalid handler provided\", handler);\n            return;\n          }\n        }\n      } else {\n        stage = handler || \"all\";\n        index = 0;\n      }\n      if (this.redrawBlock) {\n        if (!this.redrawBlockRestoreConfig || this.redrawBlockRestoreConfig && (this.redrawBlockRestoreConfig.stage === stage && index < this.redrawBlockRestoreConfig.index || cascadeOrder.indexOf(stage) < cascadeOrder.indexOf(this.redrawBlockRestoreConfig.stage))) {\n          this.redrawBlockRestoreConfig = {\n            handler: handler,\n            skipStage: skipStage,\n            renderInPosition: renderInPosition,\n            stage: stage,\n            index: index\n          };\n        }\n        return;\n      } else {\n        if (Helpers.elVisible(this.element)) {\n          if (renderInPosition) {\n            this.reRenderInPosition(this.refreshPipelines.bind(this, handler, stage, index, renderInPosition));\n          } else {\n            this.refreshPipelines(handler, stage, index, renderInPosition);\n            if (!handler) {\n              this.table.columnManager.renderer.renderColumns();\n            }\n            this.renderTable();\n            if (table.options.layoutColumnsOnNewData) {\n              this.table.columnManager.redraw(true);\n            }\n          }\n        } else {\n          this.refreshPipelines(handler, stage, index, renderInPosition);\n        }\n        this.dispatch(\"data-refreshed\");\n      }\n    }\n  }\n  refreshPipelines(handler, stage, index, renderInPosition) {\n    this.dispatch(\"data-refreshing\");\n    if (!handler || !this.activeRowsPipeline[0]) {\n      this.activeRowsPipeline[0] = this.rows.slice(0);\n    }\n\n    //cascade through data refresh stages\n    switch (stage) {\n      case \"all\":\n      //handle case where all data needs refreshing\n\n      case \"dataPipeline\":\n        for (let i = index; i < this.dataPipeline.length; i++) {\n          let result = this.dataPipeline[i].handler(this.activeRowsPipeline[i].slice(0));\n          this.activeRowsPipeline[i + 1] = result || this.activeRowsPipeline[i].slice(0);\n        }\n        this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]);\n      case \"display\":\n        index = 0;\n        this.resetDisplayRows();\n      case \"displayPipeline\":\n        for (let i = index; i < this.displayPipeline.length; i++) {\n          let result = this.displayPipeline[i].handler((i ? this.getDisplayRows(i - 1) : this.activeRows).slice(0), renderInPosition);\n          this.setDisplayRows(result || this.getDisplayRows(i - 1).slice(0), i);\n        }\n      case \"end\":\n        //case to handle scenario when trying to skip past end stage\n        this.regenerateRowPositions();\n    }\n    if (this.getDisplayRows().length) {\n      this._clearPlaceholder();\n    }\n  }\n\n  //regenerate row positions\n  regenerateRowPositions() {\n    var rows = this.getDisplayRows();\n    var index = 1;\n    rows.forEach(row => {\n      if (row.type === \"row\") {\n        row.setPosition(index);\n        index++;\n      }\n    });\n  }\n  setActiveRows(activeRows) {\n    this.activeRows = this.activeRows = Object.assign([], activeRows);\n    this.activeRowsCount = this.activeRows.length;\n  }\n\n  //reset display rows array\n  resetDisplayRows() {\n    this.displayRows = [];\n    this.displayRows.push(this.activeRows.slice(0));\n    this.displayRowsCount = this.displayRows[0].length;\n  }\n\n  //set display row pipeline data\n  setDisplayRows(displayRows, index) {\n    this.displayRows[index] = displayRows;\n    if (index == this.displayRows.length - 1) {\n      this.displayRowsCount = this.displayRows[this.displayRows.length - 1].length;\n    }\n  }\n  getDisplayRows(index) {\n    if (typeof index == \"undefined\") {\n      return this.displayRows.length ? this.displayRows[this.displayRows.length - 1] : [];\n    } else {\n      return this.displayRows[index] || [];\n    }\n  }\n  getVisibleRows(chain, viewable) {\n    var rows = Object.assign([], this.renderer.visibleRows(!viewable));\n    if (chain) {\n      rows = this.chain(\"rows-visible\", [viewable], rows, rows);\n    }\n    return rows;\n  }\n\n  //repeat action across display rows\n  displayRowIterator(callback) {\n    this.activeRowsPipeline.forEach(callback);\n    this.displayRows.forEach(callback);\n    this.displayRowsCount = this.displayRows[this.displayRows.length - 1].length;\n  }\n\n  //return only actual rows (not group headers etc)\n  getRows(type) {\n    var rows = [];\n    switch (type) {\n      case \"active\":\n        rows = this.activeRows;\n        break;\n      case \"display\":\n        rows = this.table.rowManager.getDisplayRows();\n        break;\n      case \"visible\":\n        rows = this.getVisibleRows(false, true);\n        break;\n      default:\n        rows = this.chain(\"rows-retrieve\", type, null, this.rows) || this.rows;\n    }\n    return rows;\n  }\n\n  ///////////////// Table Rendering /////////////////\n  //trigger rerender of table in current position\n  reRenderInPosition(callback) {\n    if (this.redrawBlock) {\n      if (callback) {\n        callback();\n      } else {\n        this.redrawBlockRenderInPosition = true;\n      }\n    } else {\n      this.dispatchExternal(\"renderStarted\");\n      this.renderer.rerenderRows(callback);\n      if (!this.fixedHeight) {\n        this.adjustTableSize();\n      }\n      this.scrollBarCheck();\n      this.dispatchExternal(\"renderComplete\");\n    }\n  }\n  scrollBarCheck() {\n    var scrollbarWidth = 0;\n\n    //adjust for vertical scrollbar moving table when present\n    if (this.element.scrollHeight > this.element.clientHeight) {\n      scrollbarWidth = this.element.offsetWidth - this.element.clientWidth;\n    }\n    if (scrollbarWidth !== this.scrollbarWidth) {\n      this.scrollbarWidth = scrollbarWidth;\n      this.dispatch(\"scrollbar-vertical\", scrollbarWidth);\n    }\n  }\n  initializeRenderer() {\n    var renderClass;\n    var renderers = {\n      \"virtual\": VirtualDomVertical,\n      \"basic\": BasicVertical\n    };\n    if (typeof this.table.options.renderVertical === \"string\") {\n      renderClass = renderers[this.table.options.renderVertical];\n    } else {\n      renderClass = this.table.options.renderVertical;\n    }\n    if (renderClass) {\n      this.renderMode = this.table.options.renderVertical;\n      this.renderer = new renderClass(this.table, this.element, this.tableElement);\n      this.renderer.initialize();\n      if ((this.table.element.clientHeight || this.table.options.height) && !(this.table.options.minHeight && this.table.options.maxHeight)) {\n        this.fixedHeight = true;\n      } else {\n        this.fixedHeight = false;\n      }\n    } else {\n      console.error(\"Unable to find matching renderer:\", this.table.options.renderVertical);\n    }\n  }\n  getRenderMode() {\n    return this.renderMode;\n  }\n  renderTable() {\n    this.dispatchExternal(\"renderStarted\");\n    this.element.scrollTop = 0;\n    this._clearTable();\n    if (this.displayRowsCount) {\n      this.renderer.renderRows();\n      if (this.firstRender) {\n        this.firstRender = false;\n        if (!this.fixedHeight) {\n          this.adjustTableSize();\n        }\n        this.layoutRefresh(true);\n      }\n    } else {\n      this.renderEmptyScroll();\n    }\n    if (!this.fixedHeight) {\n      this.adjustTableSize();\n    }\n    this.dispatch(\"table-layout\");\n    if (!this.displayRowsCount) {\n      this._showPlaceholder();\n    }\n    this.scrollBarCheck();\n    this.dispatchExternal(\"renderComplete\");\n  }\n\n  //show scrollbars on empty table div\n  renderEmptyScroll() {\n    if (this.placeholder) {\n      this.tableElement.style.display = \"none\";\n    } else {\n      this.tableElement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n      // this.tableElement.style.minHeight = \"1px\";\n      // this.tableElement.style.visibility = \"hidden\";\n    }\n  }\n  _clearTable() {\n    this._clearPlaceholder();\n    this.scrollTop = 0;\n    this.scrollLeft = 0;\n    this.renderer.clearRows();\n  }\n  tableEmpty() {\n    this.renderEmptyScroll();\n    this._showPlaceholder();\n  }\n  checkPlaceholder() {\n    if (this.displayRowsCount) {\n      this._clearPlaceholder();\n    } else {\n      this.tableEmpty();\n    }\n  }\n  _showPlaceholder() {\n    if (this.placeholder) {\n      if (this.placeholder && this.placeholder.parentNode) {\n        this.placeholder.parentNode.removeChild(this.placeholder);\n      }\n      this.initializePlaceholder();\n      this.placeholder.setAttribute(\"tabulator-render-mode\", this.renderMode);\n      this.getElement().appendChild(this.placeholder);\n      this._positionPlaceholder();\n      this.adjustTableSize();\n    }\n  }\n  _clearPlaceholder() {\n    if (this.placeholder && this.placeholder.parentNode) {\n      this.placeholder.parentNode.removeChild(this.placeholder);\n    }\n\n    // clear empty table placeholder min\n    this.tableElement.style.minWidth = \"\";\n    this.tableElement.style.display = \"\";\n  }\n  _positionPlaceholder() {\n    if (this.placeholder && this.placeholder.parentNode) {\n      this.placeholder.style.width = this.table.columnManager.getWidth() + \"px\";\n      this.placeholderContents.style.width = this.table.rowManager.element.clientWidth + \"px\";\n      this.placeholderContents.style.marginLeft = this.scrollLeft + \"px\";\n    }\n  }\n  styleRow(row, index) {\n    var rowEl = row.getElement();\n    if (index % 2) {\n      rowEl.classList.add(\"tabulator-row-even\");\n      rowEl.classList.remove(\"tabulator-row-odd\");\n    } else {\n      rowEl.classList.add(\"tabulator-row-odd\");\n      rowEl.classList.remove(\"tabulator-row-even\");\n    }\n  }\n\n  //normalize height of active rows\n  normalizeHeight() {\n    this.activeRows.forEach(function (row) {\n      row.normalizeHeight();\n    });\n  }\n\n  //adjust the height of the table holder to fit in the Tabulator element\n  adjustTableSize() {\n    let initialHeight = this.element.clientHeight,\n      minHeight;\n    let resized = false;\n    if (this.renderer.verticalFillMode === \"fill\") {\n      let otherHeight = Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height + (this.table.footerManager && this.table.footerManager.active && !this.table.footerManager.external ? this.table.footerManager.getElement().getBoundingClientRect().height : 0));\n      if (this.fixedHeight) {\n        minHeight = isNaN(this.table.options.minHeight) ? this.table.options.minHeight : this.table.options.minHeight + \"px\";\n        const height = \"calc(100% - \" + otherHeight + \"px)\";\n        this.element.style.minHeight = minHeight || \"calc(100% - \" + otherHeight + \"px)\";\n        this.element.style.height = height;\n        this.element.style.maxHeight = height;\n      } else {\n        this.element.style.height = \"\";\n        this.element.style.height = this.table.element.clientHeight - otherHeight + \"px\";\n        this.element.scrollTop = this.scrollTop;\n      }\n      this.renderer.resize();\n\n      //check if the table has changed size when dealing with variable height tables\n      if (!this.fixedHeight && initialHeight != this.element.clientHeight) {\n        resized = true;\n        if (this.subscribed(\"table-resize\")) {\n          this.dispatch(\"table-resize\");\n        } else {\n          this.redraw();\n        }\n      }\n      this.scrollBarCheck();\n    }\n    this._positionPlaceholder();\n    return resized;\n  }\n\n  //reinitialize all rows\n  reinitialize() {\n    this.rows.forEach(function (row) {\n      row.reinitialize(true);\n    });\n  }\n\n  //prevent table from being redrawn\n  blockRedraw() {\n    this.redrawBlock = true;\n    this.redrawBlockRestoreConfig = false;\n  }\n\n  //restore table redrawing\n  restoreRedraw() {\n    this.redrawBlock = false;\n    if (this.redrawBlockRestoreConfig) {\n      this.refreshActiveData(this.redrawBlockRestoreConfig.handler, this.redrawBlockRestoreConfig.skipStage, this.redrawBlockRestoreConfig.renderInPosition);\n      this.redrawBlockRestoreConfig = false;\n    } else {\n      if (this.redrawBlockRenderInPosition) {\n        this.reRenderInPosition();\n      }\n    }\n    this.redrawBlockRenderInPosition = false;\n  }\n\n  //redraw table\n  redraw(force) {\n    this.adjustTableSize();\n    this.table.tableWidth = this.table.element.clientWidth;\n    if (!force) {\n      this.reRenderInPosition();\n      this.scrollHorizontal(this.scrollLeft);\n    } else {\n      this.renderTable();\n    }\n  }\n  resetScroll() {\n    this.element.scrollLeft = 0;\n    this.element.scrollTop = 0;\n    if (this.table.browser === \"ie\") {\n      var event = document.createEvent(\"Event\");\n      event.initEvent(\"scroll\", false, true);\n      this.element.dispatchEvent(event);\n    } else {\n      this.element.dispatchEvent(new Event('scroll'));\n    }\n  }\n}\nclass FooterManager extends CoreFeature {\n  constructor(table) {\n    super(table);\n    this.active = false;\n    this.element = this.createElement(); //containing element\n    this.containerElement = this.createContainerElement(); //containing element\n    this.external = false;\n  }\n  initialize() {\n    this.initializeElement();\n  }\n  createElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-footer\");\n    return el;\n  }\n  createContainerElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-footer-contents\");\n    this.element.appendChild(el);\n    return el;\n  }\n  initializeElement() {\n    if (this.table.options.footerElement) {\n      switch (typeof this.table.options.footerElement) {\n        case \"string\":\n          if (this.table.options.footerElement[0] === \"<\") {\n            this.containerElement.innerHTML = this.table.options.footerElement;\n          } else {\n            this.external = true;\n            this.containerElement = document.querySelector(this.table.options.footerElement);\n          }\n          break;\n        default:\n          this.element = this.table.options.footerElement;\n          break;\n      }\n    }\n  }\n  getElement() {\n    return this.element;\n  }\n  append(element) {\n    this.activate();\n    this.containerElement.appendChild(element);\n    this.table.rowManager.adjustTableSize();\n  }\n  prepend(element) {\n    this.activate();\n    this.element.insertBefore(element, this.element.firstChild);\n    this.table.rowManager.adjustTableSize();\n  }\n  remove(element) {\n    element.parentNode.removeChild(element);\n    this.deactivate();\n  }\n  deactivate(force) {\n    if (!this.element.firstChild || force) {\n      if (!this.external) {\n        this.element.parentNode.removeChild(this.element);\n      }\n      this.active = false;\n    }\n  }\n  activate() {\n    if (!this.active) {\n      this.active = true;\n      if (!this.external) {\n        this.table.element.appendChild(this.getElement());\n        this.table.element.style.display = '';\n      }\n    }\n  }\n  redraw() {\n    this.dispatch(\"footer-redraw\");\n  }\n}\nclass InteractionManager extends CoreFeature {\n  constructor(table) {\n    super(table);\n    this.el = null;\n    this.abortClasses = [\"tabulator-headers\", \"tabulator-table\"];\n    this.previousTargets = {};\n    this.listeners = [\"click\", \"dblclick\", \"contextmenu\", \"mouseenter\", \"mouseleave\", \"mouseover\", \"mouseout\", \"mousemove\", \"mouseup\", \"mousedown\", \"touchstart\", \"touchend\"];\n    this.componentMap = {\n      \"tabulator-cell\": \"cell\",\n      \"tabulator-row\": \"row\",\n      \"tabulator-group\": \"group\",\n      \"tabulator-col\": \"column\"\n    };\n    this.pseudoTrackers = {\n      \"row\": {\n        subscriber: null,\n        target: null\n      },\n      \"cell\": {\n        subscriber: null,\n        target: null\n      },\n      \"group\": {\n        subscriber: null,\n        target: null\n      },\n      \"column\": {\n        subscriber: null,\n        target: null\n      }\n    };\n    this.pseudoTracking = false;\n  }\n  initialize() {\n    this.el = this.table.element;\n    this.buildListenerMap();\n    this.bindSubscriptionWatchers();\n  }\n  buildListenerMap() {\n    var listenerMap = {};\n    this.listeners.forEach(listener => {\n      listenerMap[listener] = {\n        handler: null,\n        components: []\n      };\n    });\n    this.listeners = listenerMap;\n  }\n  bindPseudoEvents() {\n    Object.keys(this.pseudoTrackers).forEach(key => {\n      this.pseudoTrackers[key].subscriber = this.pseudoMouseEnter.bind(this, key);\n      this.subscribe(key + \"-mouseover\", this.pseudoTrackers[key].subscriber);\n    });\n    this.pseudoTracking = true;\n  }\n  pseudoMouseEnter(key, e, target) {\n    if (this.pseudoTrackers[key].target !== target) {\n      if (this.pseudoTrackers[key].target) {\n        this.dispatch(key + \"-mouseleave\", e, this.pseudoTrackers[key].target);\n      }\n      this.pseudoMouseLeave(key, e);\n      this.pseudoTrackers[key].target = target;\n      this.dispatch(key + \"-mouseenter\", e, target);\n    }\n  }\n  pseudoMouseLeave(key, e) {\n    var leaveList = Object.keys(this.pseudoTrackers),\n      linkedKeys = {\n        \"row\": [\"cell\"],\n        \"cell\": [\"row\"]\n      };\n    leaveList = leaveList.filter(item => {\n      var links = linkedKeys[key];\n      return item !== key && (!links || links && !links.includes(item));\n    });\n    leaveList.forEach(key => {\n      var target = this.pseudoTrackers[key].target;\n      if (this.pseudoTrackers[key].target) {\n        this.dispatch(key + \"-mouseleave\", e, target);\n        this.pseudoTrackers[key].target = null;\n      }\n    });\n  }\n  bindSubscriptionWatchers() {\n    var listeners = Object.keys(this.listeners),\n      components = Object.values(this.componentMap);\n    for (let comp of components) {\n      for (let listener of listeners) {\n        let key = comp + \"-\" + listener;\n        this.subscriptionChange(key, this.subscriptionChanged.bind(this, comp, listener));\n      }\n    }\n    this.subscribe(\"table-destroy\", this.clearWatchers.bind(this));\n  }\n  subscriptionChanged(component, key, added) {\n    var listener = this.listeners[key].components,\n      index = listener.indexOf(component),\n      changed = false;\n    if (added) {\n      if (index === -1) {\n        listener.push(component);\n        changed = true;\n      }\n    } else {\n      if (!this.subscribed(component + \"-\" + key)) {\n        if (index > -1) {\n          listener.splice(index, 1);\n          changed = true;\n        }\n      }\n    }\n    if ((key === \"mouseenter\" || key === \"mouseleave\") && !this.pseudoTracking) {\n      this.bindPseudoEvents();\n    }\n    if (changed) {\n      this.updateEventListeners();\n    }\n  }\n  updateEventListeners() {\n    for (let key in this.listeners) {\n      let listener = this.listeners[key];\n      if (listener.components.length) {\n        if (!listener.handler) {\n          listener.handler = this.track.bind(this, key);\n          this.el.addEventListener(key, listener.handler);\n          // this.el.addEventListener(key, listener.handler, {passive: true})\n        }\n      } else {\n        if (listener.handler) {\n          this.el.removeEventListener(key, listener.handler);\n          listener.handler = null;\n        }\n      }\n    }\n  }\n  track(type, e) {\n    var path = e.composedPath && e.composedPath() || e.path;\n    var targets = this.findTargets(path);\n    targets = this.bindComponents(type, targets);\n    this.triggerEvents(type, e, targets);\n    if (this.pseudoTracking && (type == \"mouseover\" || type == \"mouseleave\") && !Object.keys(targets).length) {\n      this.pseudoMouseLeave(\"none\", e);\n    }\n  }\n  findTargets(path) {\n    var targets = {};\n    let componentMap = Object.keys(this.componentMap);\n    for (let el of path) {\n      let classList = el.classList ? [...el.classList] : [];\n      let abort = classList.filter(item => {\n        return this.abortClasses.includes(item);\n      });\n      if (abort.length) {\n        break;\n      }\n      let elTargets = classList.filter(item => {\n        return componentMap.includes(item);\n      });\n      for (let target of elTargets) {\n        if (!targets[this.componentMap[target]]) {\n          targets[this.componentMap[target]] = el;\n        }\n      }\n    }\n    if (targets.group && targets.group === targets.row) {\n      delete targets.row;\n    }\n    return targets;\n  }\n  bindComponents(type, targets) {\n    //ensure row component is looked up before cell\n    var keys = Object.keys(targets).reverse(),\n      listener = this.listeners[type],\n      matches = {},\n      targetMatches = {};\n    for (let key of keys) {\n      let component,\n        target = targets[key],\n        previousTarget = this.previousTargets[key];\n      if (previousTarget && previousTarget.target === target) {\n        component = previousTarget.component;\n      } else {\n        switch (key) {\n          case \"row\":\n          case \"group\":\n            if (listener.components.includes(\"row\") || listener.components.includes(\"cell\") || listener.components.includes(\"group\")) {\n              let rows = this.table.rowManager.getVisibleRows(true);\n              component = rows.find(row => {\n                return row.getElement() === target;\n              });\n              if (targets[\"row\"] && targets[\"row\"].parentNode && targets[\"row\"].parentNode.closest(\".tabulator-row\")) {\n                targets[key] = false;\n              }\n            }\n            break;\n          case \"column\":\n            if (listener.components.includes(\"column\")) {\n              component = this.table.columnManager.findColumn(target);\n            }\n            break;\n          case \"cell\":\n            if (listener.components.includes(\"cell\")) {\n              if (matches[\"row\"] instanceof Row) {\n                component = matches[\"row\"].findCell(target);\n              } else {\n                if (targets[\"row\"]) {\n                  console.warn(\"Event Target Lookup Error - The row this cell is attached to cannot be found, has the table been reinitialized without being destroyed first?\");\n                }\n              }\n            }\n            break;\n        }\n      }\n      if (component) {\n        matches[key] = component;\n        targetMatches[key] = {\n          target: target,\n          component: component\n        };\n      }\n    }\n    this.previousTargets = targetMatches;\n    return matches;\n  }\n  triggerEvents(type, e, targets) {\n    var listener = this.listeners[type];\n    for (let key in targets) {\n      if (targets[key] && listener.components.includes(key)) {\n        this.dispatch(key + \"-\" + type, e, targets[key]);\n      }\n    }\n  }\n  clearWatchers() {\n    for (let key in this.listeners) {\n      let listener = this.listeners[key];\n      if (listener.handler) {\n        this.el.removeEventListener(key, listener.handler);\n        listener.handler = null;\n      }\n    }\n  }\n}\nclass ComponentFunctionBinder {\n  constructor(table) {\n    this.table = table;\n    this.bindings = {};\n  }\n  bind(type, funcName, handler) {\n    if (!this.bindings[type]) {\n      this.bindings[type] = {};\n    }\n    if (this.bindings[type][funcName]) {\n      console.warn(\"Unable to bind component handler, a matching function name is already bound\", type, funcName, handler);\n    } else {\n      this.bindings[type][funcName] = handler;\n    }\n  }\n  handle(type, component, name) {\n    if (this.bindings[type] && this.bindings[type][name] && typeof this.bindings[type][name].bind === 'function') {\n      return this.bindings[type][name].bind(null, component);\n    } else {\n      if (name !== \"then\" && typeof name === \"string\" && !name.startsWith(\"_\")) {\n        if (this.table.options.debugInvalidComponentFuncs) {\n          console.error(\"The \" + type + \" component does not have a \" + name + \" function, have you checked that you have the correct Tabulator module installed?\");\n        }\n      }\n    }\n  }\n}\nclass DataLoader extends CoreFeature {\n  constructor(table) {\n    super(table);\n    this.requestOrder = 0; //prevent requests coming out of sequence if overridden by another load request\n    this.loading = false;\n  }\n  initialize() {}\n  load(data, params, config, replace, silent, columnsChanged) {\n    var requestNo = ++this.requestOrder;\n    if (this.table.destroyed) {\n      return Promise.resolve();\n    }\n    this.dispatchExternal(\"dataLoading\", data);\n\n    //parse json data to array\n    if (data && (data.indexOf(\"{\") == 0 || data.indexOf(\"[\") == 0)) {\n      data = JSON.parse(data);\n    }\n    if (this.confirm(\"data-loading\", [data, params, config, silent])) {\n      this.loading = true;\n      if (!silent) {\n        this.alertLoader();\n      }\n\n      //get params for request\n      params = this.chain(\"data-params\", [data, config, silent], params || {}, params || {});\n      params = this.mapParams(params, this.table.options.dataSendParams);\n      var result = this.chain(\"data-load\", [data, params, config, silent], false, Promise.resolve([]));\n      return result.then(response => {\n        if (!this.table.destroyed) {\n          if (!Array.isArray(response) && typeof response == \"object\") {\n            response = this.mapParams(response, this.objectInvert(this.table.options.dataReceiveParams));\n          }\n          var rowData = this.chain(\"data-loaded\", [response], null, response);\n          if (requestNo == this.requestOrder) {\n            this.clearAlert();\n            if (rowData !== false) {\n              this.dispatchExternal(\"dataLoaded\", rowData);\n              this.table.rowManager.setData(rowData, replace, typeof columnsChanged === \"undefined\" ? !replace : columnsChanged);\n            }\n          } else {\n            console.warn(\"Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made\");\n          }\n        } else {\n          console.warn(\"Data Load Response Blocked - Table has been destroyed\");\n        }\n      }).catch(error => {\n        console.error(\"Data Load Error: \", error);\n        this.dispatchExternal(\"dataLoadError\", error);\n        if (!silent) {\n          this.alertError();\n        }\n        setTimeout(() => {\n          this.clearAlert();\n        }, this.table.options.dataLoaderErrorTimeout);\n      }).finally(() => {\n        this.loading = false;\n      });\n    } else {\n      this.dispatchExternal(\"dataLoaded\", data);\n      if (!data) {\n        data = [];\n      }\n      this.table.rowManager.setData(data, replace, typeof columnsChanged === \"undefined\" ? !replace : columnsChanged);\n      return Promise.resolve();\n    }\n  }\n  mapParams(params, map) {\n    var output = {};\n    for (let key in params) {\n      output[map.hasOwnProperty(key) ? map[key] : key] = params[key];\n    }\n    return output;\n  }\n  objectInvert(obj) {\n    var output = {};\n    for (let key in obj) {\n      output[obj[key]] = key;\n    }\n    return output;\n  }\n  blockActiveLoad() {\n    this.requestOrder++;\n  }\n  alertLoader() {\n    var shouldLoad = typeof this.table.options.dataLoader === \"function\" ? this.table.options.dataLoader() : this.table.options.dataLoader;\n    if (shouldLoad) {\n      this.table.alertManager.alert(this.table.options.dataLoaderLoading || this.langText(\"data|loading\"));\n    }\n  }\n  alertError() {\n    this.table.alertManager.alert(this.table.options.dataLoaderError || this.langText(\"data|error\"), \"error\");\n  }\n  clearAlert() {\n    this.table.alertManager.clear();\n  }\n}\nclass ExternalEventBus {\n  constructor(table, optionsList, debug) {\n    this.table = table;\n    this.events = {};\n    this.optionsList = optionsList || {};\n    this.subscriptionNotifiers = {};\n    this.dispatch = debug ? this._debugDispatch.bind(this) : this._dispatch.bind(this);\n    this.debug = debug;\n  }\n  subscriptionChange(key, callback) {\n    if (!this.subscriptionNotifiers[key]) {\n      this.subscriptionNotifiers[key] = [];\n    }\n    this.subscriptionNotifiers[key].push(callback);\n    if (this.subscribed(key)) {\n      this._notifySubscriptionChange(key, true);\n    }\n  }\n  subscribe(key, callback) {\n    if (!this.events[key]) {\n      this.events[key] = [];\n    }\n    this.events[key].push(callback);\n    this._notifySubscriptionChange(key, true);\n  }\n  unsubscribe(key, callback) {\n    var index;\n    if (this.events[key]) {\n      if (callback) {\n        index = this.events[key].findIndex(item => {\n          return item === callback;\n        });\n        if (index > -1) {\n          this.events[key].splice(index, 1);\n        } else {\n          console.warn(\"Cannot remove event, no matching event found:\", key, callback);\n          return;\n        }\n      } else {\n        delete this.events[key];\n      }\n    } else {\n      console.warn(\"Cannot remove event, no events set on:\", key);\n      return;\n    }\n    this._notifySubscriptionChange(key, false);\n  }\n  subscribed(key) {\n    return this.events[key] && this.events[key].length;\n  }\n  _notifySubscriptionChange(key, subscribed) {\n    var notifiers = this.subscriptionNotifiers[key];\n    if (notifiers) {\n      notifiers.forEach(callback => {\n        callback(subscribed);\n      });\n    }\n  }\n  _dispatch() {\n    var args = Array.from(arguments),\n      key = args.shift(),\n      result;\n    if (this.events[key]) {\n      this.events[key].forEach((callback, i) => {\n        let callResult = callback.apply(this.table, args);\n        if (!i) {\n          result = callResult;\n        }\n      });\n    }\n    return result;\n  }\n  _debugDispatch() {\n    var args = Array.from(arguments),\n      key = args[0];\n    args[0] = \"ExternalEvent:\" + args[0];\n    if (this.debug === true || this.debug.includes(key)) {\n      console.log(...args);\n    }\n    return this._dispatch(...arguments);\n  }\n}\nclass InternalEventBus {\n  constructor(debug) {\n    this.events = {};\n    this.subscriptionNotifiers = {};\n    this.dispatch = debug ? this._debugDispatch.bind(this) : this._dispatch.bind(this);\n    this.chain = debug ? this._debugChain.bind(this) : this._chain.bind(this);\n    this.confirm = debug ? this._debugConfirm.bind(this) : this._confirm.bind(this);\n    this.debug = debug;\n  }\n  subscriptionChange(key, callback) {\n    if (!this.subscriptionNotifiers[key]) {\n      this.subscriptionNotifiers[key] = [];\n    }\n    this.subscriptionNotifiers[key].push(callback);\n    if (this.subscribed(key)) {\n      this._notifySubscriptionChange(key, true);\n    }\n  }\n  subscribe(key, callback, priority = 10000) {\n    if (!this.events[key]) {\n      this.events[key] = [];\n    }\n    this.events[key].push({\n      callback,\n      priority\n    });\n    this.events[key].sort((a, b) => {\n      return a.priority - b.priority;\n    });\n    this._notifySubscriptionChange(key, true);\n  }\n  unsubscribe(key, callback) {\n    var index;\n    if (this.events[key]) {\n      if (callback) {\n        index = this.events[key].findIndex(item => {\n          return item.callback === callback;\n        });\n        if (index > -1) {\n          this.events[key].splice(index, 1);\n        } else {\n          console.warn(\"Cannot remove event, no matching event found:\", key, callback);\n          return;\n        }\n      }\n    } else {\n      console.warn(\"Cannot remove event, no events set on:\", key);\n      return;\n    }\n    this._notifySubscriptionChange(key, false);\n  }\n  subscribed(key) {\n    return this.events[key] && this.events[key].length;\n  }\n  _chain(key, args, initialValue, fallback) {\n    var value = initialValue;\n    if (!Array.isArray(args)) {\n      args = [args];\n    }\n    if (this.subscribed(key)) {\n      this.events[key].forEach((subscriber, i) => {\n        value = subscriber.callback.apply(this, args.concat([value]));\n      });\n      return value;\n    } else {\n      return typeof fallback === \"function\" ? fallback() : fallback;\n    }\n  }\n  _confirm(key, args) {\n    var confirmed = false;\n    if (!Array.isArray(args)) {\n      args = [args];\n    }\n    if (this.subscribed(key)) {\n      this.events[key].forEach((subscriber, i) => {\n        if (subscriber.callback.apply(this, args)) {\n          confirmed = true;\n        }\n      });\n    }\n    return confirmed;\n  }\n  _notifySubscriptionChange(key, subscribed) {\n    var notifiers = this.subscriptionNotifiers[key];\n    if (notifiers) {\n      notifiers.forEach(callback => {\n        callback(subscribed);\n      });\n    }\n  }\n  _dispatch() {\n    var args = Array.from(arguments),\n      key = args.shift();\n    if (this.events[key]) {\n      this.events[key].forEach(subscriber => {\n        subscriber.callback.apply(this, args);\n      });\n    }\n  }\n  _debugDispatch() {\n    var args = Array.from(arguments),\n      key = args[0];\n    args[0] = \"InternalEvent:\" + key;\n    if (this.debug === true || this.debug.includes(key)) {\n      console.log(...args);\n    }\n    return this._dispatch(...arguments);\n  }\n  _debugChain() {\n    var args = Array.from(arguments),\n      key = args[0];\n    args[0] = \"InternalEvent:\" + key;\n    if (this.debug === true || this.debug.includes(key)) {\n      console.log(...args);\n    }\n    return this._chain(...arguments);\n  }\n  _debugConfirm() {\n    var args = Array.from(arguments),\n      key = args[0];\n    args[0] = \"InternalEvent:\" + key;\n    if (this.debug === true || this.debug.includes(key)) {\n      console.log(...args);\n    }\n    return this._confirm(...arguments);\n  }\n}\nclass DeprecationAdvisor extends CoreFeature {\n  constructor(table) {\n    super(table);\n  }\n  _warnUser() {\n    if (this.options(\"debugDeprecation\")) {\n      console.warn(...arguments);\n    }\n  }\n  check(oldOption, newOption, convert) {\n    var msg = \"\";\n    if (typeof this.options(oldOption) !== \"undefined\") {\n      msg = \"Deprecated Setup Option - Use of the %c\" + oldOption + \"%c option is now deprecated\";\n      if (newOption) {\n        msg = msg + \", Please use the %c\" + newOption + \"%c option instead\";\n        this._warnUser(msg, 'font-weight: bold;', 'font-weight: normal;', 'font-weight: bold;', 'font-weight: normal;');\n        if (convert) {\n          this.table.options[newOption] = this.table.options[oldOption];\n        }\n      } else {\n        this._warnUser(msg, 'font-weight: bold;', 'font-weight: normal;');\n      }\n      return false;\n    } else {\n      return true;\n    }\n  }\n  checkMsg(oldOption, msg) {\n    if (typeof this.options(oldOption) !== \"undefined\") {\n      this._warnUser(\"%cDeprecated Setup Option - Use of the %c\" + oldOption + \" %c option is now deprecated, \" + msg, 'font-weight: normal;', 'font-weight: bold;', 'font-weight: normal;');\n      return false;\n    } else {\n      return true;\n    }\n  }\n  msg(msg) {\n    this._warnUser(msg);\n  }\n}\n\n//resize columns to fit data they contain\nfunction fitData(columns, forced) {\n  if (forced) {\n    this.table.columnManager.renderer.reinitializeColumnWidths(columns);\n  }\n  if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n    this.table.modules.responsiveLayout.update();\n  }\n}\n\n//resize columns to fit data they contain and stretch row to fill table, also used for fitDataTable\nfunction fitDataGeneral(columns, forced) {\n  columns.forEach(function (column) {\n    column.reinitializeWidth();\n  });\n  if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n    this.table.modules.responsiveLayout.update();\n  }\n}\n\n//resize columns to fit data the contain and stretch last column to fill table\nfunction fitDataStretch(columns, forced) {\n  var colsWidth = 0,\n    tableWidth = this.table.rowManager.element.clientWidth,\n    gap = 0,\n    lastCol = false;\n  columns.forEach((column, i) => {\n    if (!column.widthFixed) {\n      column.reinitializeWidth();\n    }\n    if (this.table.options.responsiveLayout ? column.modules.responsive.visible : column.visible) {\n      lastCol = column;\n    }\n    if (column.visible) {\n      colsWidth += column.getWidth();\n    }\n  });\n  if (lastCol) {\n    gap = tableWidth - colsWidth + lastCol.getWidth();\n    if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n      lastCol.setWidth(0);\n      this.table.modules.responsiveLayout.update();\n    }\n    if (gap > 0) {\n      lastCol.setWidth(gap);\n    } else {\n      lastCol.reinitializeWidth();\n    }\n  } else {\n    if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n      this.table.modules.responsiveLayout.update();\n    }\n  }\n}\n\n//resize columns to fit\nfunction fitColumns(columns, forced) {\n  var totalWidth = this.table.rowManager.element.getBoundingClientRect().width; //table element width\n  var fixedWidth = 0; //total width of columns with a defined width\n  var flexWidth = 0; //total width available to flexible columns\n  var flexGrowUnits = 0; //total number of widthGrow blocks across all columns\n  var flexColWidth = 0; //desired width of flexible columns\n  var flexColumns = []; //array of flexible width columns\n  var fixedShrinkColumns = []; //array of fixed width columns that can shrink\n  var flexShrinkUnits = 0; //total number of widthShrink blocks across all columns\n  var overflowWidth = 0; //horizontal overflow width\n  var gapFill = 0; //number of pixels to be added to final column to close and half pixel gaps\n\n  function calcWidth(width) {\n    var colWidth;\n    if (typeof width == \"string\") {\n      if (width.indexOf(\"%\") > -1) {\n        colWidth = totalWidth / 100 * parseInt(width);\n      } else {\n        colWidth = parseInt(width);\n      }\n    } else {\n      colWidth = width;\n    }\n    return colWidth;\n  }\n\n  //ensure columns resize to take up the correct amount of space\n  function scaleColumns(columns, freeSpace, colWidth, shrinkCols) {\n    var oversizeCols = [],\n      oversizeSpace = 0,\n      remainingSpace = 0,\n      nextColWidth = 0,\n      remainingFlexGrowUnits = flexGrowUnits,\n      gap = 0,\n      changeUnits = 0,\n      undersizeCols = [];\n    function calcGrow(col) {\n      return colWidth * (col.column.definition.widthGrow || 1);\n    }\n    function calcShrink(col) {\n      return calcWidth(col.width) - colWidth * (col.column.definition.widthShrink || 0);\n    }\n    columns.forEach(function (col, i) {\n      var width = shrinkCols ? calcShrink(col) : calcGrow(col);\n      if (col.column.minWidth >= width) {\n        oversizeCols.push(col);\n      } else {\n        if (col.column.maxWidth && col.column.maxWidth < width) {\n          col.width = col.column.maxWidth;\n          freeSpace -= col.column.maxWidth;\n          remainingFlexGrowUnits -= shrinkCols ? col.column.definition.widthShrink || 1 : col.column.definition.widthGrow || 1;\n          if (remainingFlexGrowUnits) {\n            colWidth = Math.floor(freeSpace / remainingFlexGrowUnits);\n          }\n        } else {\n          undersizeCols.push(col);\n          changeUnits += shrinkCols ? col.column.definition.widthShrink || 1 : col.column.definition.widthGrow || 1;\n        }\n      }\n    });\n    if (oversizeCols.length) {\n      oversizeCols.forEach(function (col) {\n        oversizeSpace += shrinkCols ? col.width - col.column.minWidth : col.column.minWidth;\n        col.width = col.column.minWidth;\n      });\n      remainingSpace = freeSpace - oversizeSpace;\n      nextColWidth = changeUnits ? Math.floor(remainingSpace / changeUnits) : remainingSpace;\n      gap = scaleColumns(undersizeCols, remainingSpace, nextColWidth, shrinkCols);\n    } else {\n      gap = changeUnits ? freeSpace - Math.floor(freeSpace / changeUnits) * changeUnits : freeSpace;\n      undersizeCols.forEach(function (column) {\n        column.width = shrinkCols ? calcShrink(column) : calcGrow(column);\n      });\n    }\n    return gap;\n  }\n  if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n    this.table.modules.responsiveLayout.update();\n  }\n\n  //adjust for vertical scrollbar if present\n  if (this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight) {\n    totalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\n  }\n  columns.forEach(function (column) {\n    var width, minWidth, colWidth;\n    if (column.visible) {\n      width = column.definition.width;\n      minWidth = parseInt(column.minWidth);\n      if (width) {\n        colWidth = calcWidth(width);\n        fixedWidth += colWidth > minWidth ? colWidth : minWidth;\n        if (column.definition.widthShrink) {\n          fixedShrinkColumns.push({\n            column: column,\n            width: colWidth > minWidth ? colWidth : minWidth\n          });\n          flexShrinkUnits += column.definition.widthShrink;\n        }\n      } else {\n        flexColumns.push({\n          column: column,\n          width: 0\n        });\n        flexGrowUnits += column.definition.widthGrow || 1;\n      }\n    }\n  });\n\n  //calculate available space\n  flexWidth = totalWidth - fixedWidth;\n\n  //calculate correct column size\n  flexColWidth = Math.floor(flexWidth / flexGrowUnits);\n\n  //generate column widths\n  gapFill = scaleColumns(flexColumns, flexWidth, flexColWidth, false);\n\n  //increase width of last column to account for rounding errors\n  if (flexColumns.length && gapFill > 0) {\n    flexColumns[flexColumns.length - 1].width += gapFill;\n  }\n\n  //calculate space for columns to be shrunk into\n  flexColumns.forEach(function (col) {\n    flexWidth -= col.width;\n  });\n  overflowWidth = Math.abs(gapFill) + flexWidth;\n\n  //shrink oversize columns if there is no available space\n  if (overflowWidth > 0 && flexShrinkUnits) {\n    gapFill = scaleColumns(fixedShrinkColumns, overflowWidth, Math.floor(overflowWidth / flexShrinkUnits), true);\n  }\n\n  //decrease width of last column to account for rounding errors\n  if (gapFill && fixedShrinkColumns.length) {\n    fixedShrinkColumns[fixedShrinkColumns.length - 1].width -= gapFill;\n  }\n  flexColumns.forEach(function (col) {\n    col.column.setWidth(col.width);\n  });\n  fixedShrinkColumns.forEach(function (col) {\n    col.column.setWidth(col.width);\n  });\n}\nvar defaultModes = {\n  fitData: fitData,\n  fitDataFill: fitDataGeneral,\n  fitDataTable: fitDataGeneral,\n  fitDataStretch: fitDataStretch,\n  fitColumns: fitColumns\n};\nclass Layout extends Module {\n  static moduleName = \"layout\";\n\n  //load defaults\n  static modes = defaultModes;\n  constructor(table) {\n    super(table, \"layout\");\n    this.mode = null;\n    this.registerTableOption(\"layout\", \"fitData\"); //layout type\n    this.registerTableOption(\"layoutColumnsOnNewData\", false); //update column widths on setData\n\n    this.registerColumnOption(\"widthGrow\");\n    this.registerColumnOption(\"widthShrink\");\n  }\n\n  //initialize layout system\n  initialize() {\n    var layout = this.table.options.layout;\n    if (Layout.modes[layout]) {\n      this.mode = layout;\n    } else {\n      console.warn(\"Layout Error - invalid mode set, defaulting to 'fitData' : \" + layout);\n      this.mode = 'fitData';\n    }\n    this.table.element.setAttribute(\"tabulator-layout\", this.mode);\n    this.subscribe(\"column-init\", this.initializeColumn.bind(this));\n  }\n  initializeColumn(column) {\n    if (column.definition.widthGrow) {\n      column.definition.widthGrow = Number(column.definition.widthGrow);\n    }\n    if (column.definition.widthShrink) {\n      column.definition.widthShrink = Number(column.definition.widthShrink);\n    }\n  }\n  getMode() {\n    return this.mode;\n  }\n\n  //trigger table layout\n  layout(dataChanged) {\n    this.dispatch(\"layout-refreshing\");\n    Layout.modes[this.mode].call(this, this.table.columnManager.columnsByIndex, dataChanged);\n    this.dispatch(\"layout-refreshed\");\n  }\n}\nvar defaultLangs = {\n  \"default\": {\n    //hold default locale text\n    \"groups\": {\n      \"item\": \"item\",\n      \"items\": \"items\"\n    },\n    \"columns\": {},\n    \"data\": {\n      \"loading\": \"Loading\",\n      \"error\": \"Error\"\n    },\n    \"pagination\": {\n      \"page_size\": \"Page Size\",\n      \"page_title\": \"Show Page\",\n      \"first\": \"First\",\n      \"first_title\": \"First Page\",\n      \"last\": \"Last\",\n      \"last_title\": \"Last Page\",\n      \"prev\": \"Prev\",\n      \"prev_title\": \"Prev Page\",\n      \"next\": \"Next\",\n      \"next_title\": \"Next Page\",\n      \"all\": \"All\",\n      \"counter\": {\n        \"showing\": \"Showing\",\n        \"of\": \"of\",\n        \"rows\": \"rows\",\n        \"pages\": \"pages\"\n      }\n    },\n    \"headerFilters\": {\n      \"default\": \"filter column...\",\n      \"columns\": {}\n    }\n  }\n};\nclass Localize extends Module {\n  static moduleName = \"localize\";\n\n  //load defaults\n  static langs = defaultLangs;\n  constructor(table) {\n    super(table);\n    this.locale = \"default\"; //current locale\n    this.lang = false; //current language\n    this.bindings = {}; //update events to call when locale is changed\n    this.langList = {};\n    this.registerTableOption(\"locale\", false); //current system language\n    this.registerTableOption(\"langs\", {});\n  }\n  initialize() {\n    this.langList = Helpers.deepClone(Localize.langs);\n    if (this.table.options.columnDefaults.headerFilterPlaceholder !== false) {\n      this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);\n    }\n    for (let locale in this.table.options.langs) {\n      this.installLang(locale, this.table.options.langs[locale]);\n    }\n    this.setLocale(this.table.options.locale);\n    this.registerTableFunction(\"setLocale\", this.setLocale.bind(this));\n    this.registerTableFunction(\"getLocale\", this.getLocale.bind(this));\n    this.registerTableFunction(\"getLang\", this.getLang.bind(this));\n  }\n\n  //set header placeholder\n  setHeaderFilterPlaceholder(placeholder) {\n    this.langList.default.headerFilters.default = placeholder;\n  }\n\n  //setup a lang description object\n  installLang(locale, lang) {\n    if (this.langList[locale]) {\n      this._setLangProp(this.langList[locale], lang);\n    } else {\n      this.langList[locale] = lang;\n    }\n  }\n  _setLangProp(lang, values) {\n    for (let key in values) {\n      if (lang[key] && typeof lang[key] == \"object\") {\n        this._setLangProp(lang[key], values[key]);\n      } else {\n        lang[key] = values[key];\n      }\n    }\n  }\n\n  //set current locale\n  setLocale(desiredLocale) {\n    desiredLocale = desiredLocale || \"default\";\n\n    //fill in any matching language values\n    function traverseLang(trans, path) {\n      for (var prop in trans) {\n        if (typeof trans[prop] == \"object\") {\n          if (!path[prop]) {\n            path[prop] = {};\n          }\n          traverseLang(trans[prop], path[prop]);\n        } else {\n          path[prop] = trans[prop];\n        }\n      }\n    }\n\n    //determining correct locale to load\n    if (desiredLocale === true && navigator.language) {\n      //get local from system\n      desiredLocale = navigator.language.toLowerCase();\n    }\n    if (desiredLocale) {\n      //if locale is not set, check for matching top level locale else use default\n      if (!this.langList[desiredLocale]) {\n        let prefix = desiredLocale.split(\"-\")[0];\n        if (this.langList[prefix]) {\n          console.warn(\"Localization Error - Exact matching locale not found, using closest match: \", desiredLocale, prefix);\n          desiredLocale = prefix;\n        } else {\n          console.warn(\"Localization Error - Matching locale not found, using default: \", desiredLocale);\n          desiredLocale = \"default\";\n        }\n      }\n    }\n    this.locale = desiredLocale;\n\n    //load default lang template\n    this.lang = Helpers.deepClone(this.langList.default || {});\n    if (desiredLocale != \"default\") {\n      traverseLang(this.langList[desiredLocale], this.lang);\n    }\n    this.dispatchExternal(\"localized\", this.locale, this.lang);\n    this._executeBindings();\n  }\n\n  //get current locale\n  getLocale(locale) {\n    return this.locale;\n  }\n\n  //get lang object for given local or current if none provided\n  getLang(locale) {\n    return locale ? this.langList[locale] : this.lang;\n  }\n\n  //get text for current locale\n  getText(path, value) {\n    var fillPath = value ? path + \"|\" + value : path,\n      pathArray = fillPath.split(\"|\"),\n      text = this._getLangElement(pathArray, this.locale);\n\n    // if(text === false){\n    // \tconsole.warn(\"Localization Error - Matching localized text not found for given path: \", path);\n    // }\n\n    return text || \"\";\n  }\n\n  //traverse langs object and find localized copy\n  _getLangElement(path, locale) {\n    var root = this.lang;\n    path.forEach(function (level) {\n      var rootPath;\n      if (root) {\n        rootPath = root[level];\n        if (typeof rootPath != \"undefined\") {\n          root = rootPath;\n        } else {\n          root = false;\n        }\n      }\n    });\n    return root;\n  }\n\n  //set update binding\n  bind(path, callback) {\n    if (!this.bindings[path]) {\n      this.bindings[path] = [];\n    }\n    this.bindings[path].push(callback);\n    callback(this.getText(path), this.lang);\n  }\n\n  //iterate through bindings and trigger updates\n  _executeBindings() {\n    for (let path in this.bindings) {\n      this.bindings[path].forEach(binding => {\n        binding(this.getText(path), this.lang);\n      });\n    }\n  }\n}\nclass Comms extends Module {\n  static moduleName = \"comms\";\n  constructor(table) {\n    super(table);\n  }\n  initialize() {\n    this.registerTableFunction(\"tableComms\", this.receive.bind(this));\n  }\n  getConnections(selectors) {\n    var connections = [],\n      connection;\n    connection = this.table.constructor.registry.lookupTable(selectors);\n    connection.forEach(con => {\n      if (this.table !== con) {\n        connections.push(con);\n      }\n    });\n    return connections;\n  }\n  send(selectors, module, action, data) {\n    var connections = this.getConnections(selectors);\n    connections.forEach(connection => {\n      connection.tableComms(this.table.element, module, action, data);\n    });\n    if (!connections.length && selectors) {\n      console.warn(\"Table Connection Error - No tables matching selector found\", selectors);\n    }\n  }\n  receive(table, module, action, data) {\n    if (this.table.modExists(module)) {\n      return this.table.modules[module].commsReceived(table, action, data);\n    } else {\n      console.warn(\"Inter-table Comms Error - no such module:\", module);\n    }\n  }\n}\nvar coreModules = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  CommsModule: Comms,\n  LayoutModule: Layout,\n  LocalizeModule: Localize\n});\nclass TableRegistry {\n  static registry = {\n    tables: [],\n    register(table) {\n      TableRegistry.registry.tables.push(table);\n    },\n    deregister(table) {\n      var index = TableRegistry.registry.tables.indexOf(table);\n      if (index > -1) {\n        TableRegistry.registry.tables.splice(index, 1);\n      }\n    },\n    lookupTable(query, silent) {\n      var results = [],\n        matches,\n        match;\n      if (typeof query === \"string\") {\n        matches = document.querySelectorAll(query);\n        if (matches.length) {\n          for (var i = 0; i < matches.length; i++) {\n            match = TableRegistry.registry.matchElement(matches[i]);\n            if (match) {\n              results.push(match);\n            }\n          }\n        }\n      } else if (typeof HTMLElement !== \"undefined\" && query instanceof HTMLElement || query instanceof TableRegistry) {\n        match = TableRegistry.registry.matchElement(query);\n        if (match) {\n          results.push(match);\n        }\n      } else if (Array.isArray(query)) {\n        query.forEach(function (item) {\n          results = results.concat(TableRegistry.registry.lookupTable(item));\n        });\n      } else {\n        if (!silent) {\n          console.warn(\"Table Connection Error - Invalid Selector\", query);\n        }\n      }\n      return results;\n    },\n    matchElement(element) {\n      return TableRegistry.registry.tables.find(function (table) {\n        return element instanceof TableRegistry ? table === element : table.element === element;\n      });\n    }\n  };\n  static findTable(query) {\n    var results = TableRegistry.registry.lookupTable(query, true);\n    return Array.isArray(results) && !results.length ? false : results;\n  }\n}\nclass ModuleBinder extends TableRegistry {\n  static moduleBindings = {};\n  static moduleExtensions = {};\n  static modulesRegistered = false;\n  static defaultModules = false;\n  constructor() {\n    super();\n  }\n  static initializeModuleBinder(defaultModules) {\n    if (!ModuleBinder.modulesRegistered) {\n      ModuleBinder.modulesRegistered = true;\n      ModuleBinder._registerModules(coreModules, true);\n      if (defaultModules) {\n        ModuleBinder._registerModules(defaultModules);\n      }\n    }\n  }\n  static _extendModule(name, property, values) {\n    if (ModuleBinder.moduleBindings[name]) {\n      var source = ModuleBinder.moduleBindings[name][property];\n      if (source) {\n        if (typeof values == \"object\") {\n          for (let key in values) {\n            source[key] = values[key];\n          }\n        } else {\n          console.warn(\"Module Error - Invalid value type, it must be an object\");\n        }\n      } else {\n        console.warn(\"Module Error - property does not exist:\", property);\n      }\n    } else {\n      console.warn(\"Module Error - module does not exist:\", name);\n    }\n  }\n  static _registerModules(modules, core) {\n    var mods = Object.values(modules);\n    if (core) {\n      mods.forEach(mod => {\n        mod.prototype.moduleCore = true;\n      });\n    }\n    ModuleBinder._registerModule(mods);\n  }\n  static _registerModule(modules) {\n    if (!Array.isArray(modules)) {\n      modules = [modules];\n    }\n    modules.forEach(mod => {\n      ModuleBinder._registerModuleBinding(mod);\n      ModuleBinder._registerModuleExtensions(mod);\n    });\n  }\n  static _registerModuleBinding(mod) {\n    if (mod.moduleName) {\n      ModuleBinder.moduleBindings[mod.moduleName] = mod;\n    } else {\n      console.error(\"Unable to bind module, no moduleName defined\", mod.moduleName);\n    }\n  }\n  static _registerModuleExtensions(mod) {\n    var extensions = mod.moduleExtensions;\n    if (mod.moduleExtensions) {\n      for (let modKey in extensions) {\n        let ext = extensions[modKey];\n        if (ModuleBinder.moduleBindings[modKey]) {\n          for (let propKey in ext) {\n            ModuleBinder._extendModule(modKey, propKey, ext[propKey]);\n          }\n        } else {\n          if (!ModuleBinder.moduleExtensions[modKey]) {\n            ModuleBinder.moduleExtensions[modKey] = {};\n          }\n          for (let propKey in ext) {\n            if (!ModuleBinder.moduleExtensions[modKey][propKey]) {\n              ModuleBinder.moduleExtensions[modKey][propKey] = {};\n            }\n            Object.assign(ModuleBinder.moduleExtensions[modKey][propKey], ext[propKey]);\n          }\n        }\n      }\n    }\n    ModuleBinder._extendModuleFromQueue(mod);\n  }\n  static _extendModuleFromQueue(mod) {\n    var extensions = ModuleBinder.moduleExtensions[mod.moduleName];\n    if (extensions) {\n      for (let propKey in extensions) {\n        ModuleBinder._extendModule(mod.moduleName, propKey, extensions[propKey]);\n      }\n    }\n  }\n\n  //ensure that module are bound to instantiated function\n  _bindModules() {\n    var orderedStartMods = [],\n      orderedEndMods = [],\n      unOrderedMods = [];\n    this.modules = {};\n    for (var name in ModuleBinder.moduleBindings) {\n      let mod = ModuleBinder.moduleBindings[name];\n      let module = new mod(this);\n      this.modules[name] = module;\n      if (mod.prototype.moduleCore) {\n        this.modulesCore.push(module);\n      } else {\n        if (mod.moduleInitOrder) {\n          if (mod.moduleInitOrder < 0) {\n            orderedStartMods.push(module);\n          } else {\n            orderedEndMods.push(module);\n          }\n        } else {\n          unOrderedMods.push(module);\n        }\n      }\n    }\n    orderedStartMods.sort((a, b) => a.moduleInitOrder > b.moduleInitOrder ? 1 : -1);\n    orderedEndMods.sort((a, b) => a.moduleInitOrder > b.moduleInitOrder ? 1 : -1);\n    this.modulesRegular = orderedStartMods.concat(unOrderedMods.concat(orderedEndMods));\n  }\n}\nclass Alert extends CoreFeature {\n  constructor(table) {\n    super(table);\n    this.element = this._createAlertElement();\n    this.msgElement = this._createMsgElement();\n    this.type = null;\n    this.element.appendChild(this.msgElement);\n  }\n  _createAlertElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-alert\");\n    return el;\n  }\n  _createMsgElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-alert-msg\");\n    el.setAttribute(\"role\", \"alert\");\n    return el;\n  }\n  _typeClass() {\n    return \"tabulator-alert-state-\" + this.type;\n  }\n  alert(content, type = \"msg\") {\n    if (content) {\n      this.clear();\n      this.dispatch(\"alert-show\", type);\n      this.type = type;\n      while (this.msgElement.firstChild) this.msgElement.removeChild(this.msgElement.firstChild);\n      this.msgElement.classList.add(this._typeClass());\n      if (typeof content === \"function\") {\n        content = content();\n      }\n      if (content instanceof HTMLElement) {\n        this.msgElement.appendChild(content);\n      } else {\n        this.msgElement.innerHTML = content;\n      }\n      this.table.element.appendChild(this.element);\n    }\n  }\n  clear() {\n    this.dispatch(\"alert-hide\", this.type);\n    if (this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n    }\n    this.msgElement.classList.remove(this._typeClass());\n  }\n}\nclass Tabulator extends ModuleBinder {\n  //default setup options\n  static defaultOptions = defaultOptions;\n  static extendModule() {\n    Tabulator.initializeModuleBinder();\n    Tabulator._extendModule(...arguments);\n  }\n  static registerModule() {\n    Tabulator.initializeModuleBinder();\n    Tabulator._registerModule(...arguments);\n  }\n  constructor(element, options, modules) {\n    super();\n    Tabulator.initializeModuleBinder(modules);\n    this.options = {};\n    this.columnManager = null; // hold Column Manager\n    this.rowManager = null; //hold Row Manager\n    this.footerManager = null; //holder Footer Manager\n    this.alertManager = null; //hold Alert Manager\n    this.vdomHoz = null; //holder horizontal virtual dom\n    this.externalEvents = null; //handle external event messaging\n    this.eventBus = null; //handle internal event messaging\n    this.interactionMonitor = false; //track user interaction\n    this.browser = \"\"; //hold current browser type\n    this.browserSlow = false; //handle reduced functionality for slower browsers\n    this.browserMobile = false; //check if running on mobile, prevent resize cancelling edit on keyboard appearance\n    this.rtl = false; //check if the table is in RTL mode\n    this.originalElement = null; //hold original table element if it has been replaced\n\n    this.componentFunctionBinder = new ComponentFunctionBinder(this); //bind component functions\n    this.dataLoader = false; //bind component functions\n\n    this.modules = {}; //hold all modules bound to this table\n    this.modulesCore = []; //hold core modules bound to this table (for initialization purposes)\n    this.modulesRegular = []; //hold regular modules bound to this table (for initialization purposes)\n\n    this.deprecationAdvisor = new DeprecationAdvisor(this);\n    this.optionsList = new OptionsList(this, \"table constructor\");\n    this.initialized = false;\n    this.destroyed = false;\n    if (this.initializeElement(element)) {\n      this.initializeCoreSystems(options);\n\n      //delay table creation to allow event bindings immediately after the constructor\n      setTimeout(() => {\n        this._create();\n      });\n    }\n    this.constructor.registry.register(this); //register table for inter-device communication\n  }\n  initializeElement(element) {\n    if (typeof HTMLElement !== \"undefined\" && element instanceof HTMLElement) {\n      this.element = element;\n      return true;\n    } else if (typeof element === \"string\") {\n      this.element = document.querySelector(element);\n      if (this.element) {\n        return true;\n      } else {\n        console.error(\"Tabulator Creation Error - no element found matching selector: \", element);\n        return false;\n      }\n    } else {\n      console.error(\"Tabulator Creation Error - Invalid element provided:\", element);\n      return false;\n    }\n  }\n  initializeCoreSystems(options) {\n    this.columnManager = new ColumnManager(this);\n    this.rowManager = new RowManager(this);\n    this.footerManager = new FooterManager(this);\n    this.dataLoader = new DataLoader(this);\n    this.alertManager = new Alert(this);\n    this._bindModules();\n    this.options = this.optionsList.generate(Tabulator.defaultOptions, options);\n    this._clearObjectPointers();\n    this._mapDeprecatedFunctionality();\n    this.externalEvents = new ExternalEventBus(this, this.options, this.options.debugEventsExternal);\n    this.eventBus = new InternalEventBus(this.options.debugEventsInternal);\n    this.interactionMonitor = new InteractionManager(this);\n    this.dataLoader.initialize();\n    // this.columnManager.initialize();\n    // this.rowManager.initialize();\n    this.footerManager.initialize();\n  }\n\n  //convert deprecated functionality to new functions\n  _mapDeprecatedFunctionality() {\n    //all previously deprecated functionality removed in the 6.0 release\n  }\n  _clearSelection() {\n    this.element.classList.add(\"tabulator-block-select\");\n    if (window.getSelection) {\n      if (window.getSelection().empty) {\n        // Chrome\n        window.getSelection().empty();\n      } else if (window.getSelection().removeAllRanges) {\n        // Firefox\n        window.getSelection().removeAllRanges();\n      }\n    } else if (document.selection) {\n      // IE?\n      document.selection.empty();\n    }\n    this.element.classList.remove(\"tabulator-block-select\");\n  }\n\n  //create table\n  _create() {\n    this.externalEvents.dispatch(\"tableBuilding\");\n    this.eventBus.dispatch(\"table-building\");\n    this._rtlCheck();\n    this._buildElement();\n    this._initializeTable();\n    this.initialized = true;\n    this._loadInitialData().finally(() => {\n      this.eventBus.dispatch(\"table-initialized\");\n      this.externalEvents.dispatch(\"tableBuilt\");\n    });\n  }\n  _rtlCheck() {\n    var style = window.getComputedStyle(this.element);\n    switch (this.options.textDirection) {\n      case \"auto\":\n        if (style.direction !== \"rtl\") {\n          break;\n        }\n      case \"rtl\":\n        this.element.classList.add(\"tabulator-rtl\");\n        this.rtl = true;\n        break;\n      case \"ltr\":\n        this.element.classList.add(\"tabulator-ltr\");\n      default:\n        this.rtl = false;\n    }\n  }\n\n  //clear pointers to objects in default config object\n  _clearObjectPointers() {\n    this.options.columns = this.options.columns.slice(0);\n    if (Array.isArray(this.options.data) && !this.options.reactiveData) {\n      this.options.data = this.options.data.slice(0);\n    }\n  }\n\n  //build tabulator element\n  _buildElement() {\n    var element = this.element,\n      options = this.options,\n      newElement;\n    if (element.tagName === \"TABLE\") {\n      this.originalElement = this.element;\n      newElement = document.createElement(\"div\");\n\n      //transfer attributes to new element\n      var attributes = element.attributes;\n\n      // loop through attributes and apply them on div\n      for (var i in attributes) {\n        if (typeof attributes[i] == \"object\") {\n          newElement.setAttribute(attributes[i].name, attributes[i].value);\n        }\n      }\n\n      // replace table with div element\n      element.parentNode.replaceChild(newElement, element);\n      this.element = element = newElement;\n    }\n    element.classList.add(\"tabulator\");\n    element.setAttribute(\"role\", \"grid\");\n\n    //empty element\n    while (element.firstChild) element.removeChild(element.firstChild);\n\n    //set table height\n    if (options.height) {\n      options.height = isNaN(options.height) ? options.height : options.height + \"px\";\n      element.style.height = options.height;\n    }\n\n    //set table min height\n    if (options.minHeight !== false) {\n      options.minHeight = isNaN(options.minHeight) ? options.minHeight : options.minHeight + \"px\";\n      element.style.minHeight = options.minHeight;\n    }\n\n    //set table maxHeight\n    if (options.maxHeight !== false) {\n      options.maxHeight = isNaN(options.maxHeight) ? options.maxHeight : options.maxHeight + \"px\";\n      element.style.maxHeight = options.maxHeight;\n    }\n  }\n\n  //initialize core systems and modules\n  _initializeTable() {\n    var element = this.element,\n      options = this.options;\n    this.interactionMonitor.initialize();\n    this.columnManager.initialize();\n    this.rowManager.initialize();\n    this._detectBrowser();\n\n    //initialize core modules\n    this.modulesCore.forEach(mod => {\n      mod.initialize();\n    });\n\n    //build table elements\n    element.appendChild(this.columnManager.getElement());\n    element.appendChild(this.rowManager.getElement());\n    if (options.footerElement) {\n      this.footerManager.activate();\n    }\n    if (options.autoColumns && options.data) {\n      this.columnManager.generateColumnsFromRowData(this.options.data);\n    }\n\n    //initialize regular modules\n    this.modulesRegular.forEach(mod => {\n      mod.initialize();\n    });\n    this.columnManager.setColumns(options.columns);\n    this.eventBus.dispatch(\"table-built\");\n  }\n  _loadInitialData() {\n    return this.dataLoader.load(this.options.data).finally(() => {\n      this.columnManager.verticalAlignHeaders();\n    });\n  }\n\n  //deconstructor\n  destroy() {\n    var element = this.element;\n    this.destroyed = true;\n    this.constructor.registry.deregister(this); //deregister table from inter-device communication\n\n    this.eventBus.dispatch(\"table-destroy\");\n\n    //clear row data\n    this.rowManager.destroy();\n\n    //clear DOM\n    while (element.firstChild) element.removeChild(element.firstChild);\n    element.classList.remove(\"tabulator\");\n    this.externalEvents.dispatch(\"tableDestroyed\");\n  }\n  _detectBrowser() {\n    var ua = navigator.userAgent || navigator.vendor || window.opera;\n    if (ua.indexOf(\"Trident\") > -1) {\n      this.browser = \"ie\";\n      this.browserSlow = true;\n    } else if (ua.indexOf(\"Edge\") > -1) {\n      this.browser = \"edge\";\n      this.browserSlow = true;\n    } else if (ua.indexOf(\"Firefox\") > -1) {\n      this.browser = \"firefox\";\n      this.browserSlow = false;\n    } else if (ua.indexOf(\"Mac OS\") > -1) {\n      this.browser = \"safari\";\n      this.browserSlow = false;\n    } else {\n      this.browser = \"other\";\n      this.browserSlow = false;\n    }\n    this.browserMobile = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(ua) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(ua.slice(0, 4));\n  }\n  initGuard(func, msg) {\n    var stack, line;\n    if (this.options.debugInitialization && !this.initialized) {\n      if (!func) {\n        stack = new Error().stack.split(\"\\n\");\n        line = stack[0] == \"Error\" ? stack[2] : stack[1];\n        if (line[0] == \" \") {\n          func = line.trim().split(\" \")[1].split(\".\")[1];\n        } else {\n          func = line.trim().split(\"@\")[0];\n        }\n      }\n      console.warn(\"Table Not Initialized - Calling the \" + func + \" function before the table is initialized may result in inconsistent behavior, Please wait for the `tableBuilt` event before calling this function.\" + (msg ? \" \" + msg : \"\"));\n    }\n    return this.initialized;\n  }\n\n  ////////////////// Data Handling //////////////////\n  //block table redrawing\n  blockRedraw() {\n    this.initGuard();\n    this.eventBus.dispatch(\"redraw-blocking\");\n    this.rowManager.blockRedraw();\n    this.columnManager.blockRedraw();\n    this.eventBus.dispatch(\"redraw-blocked\");\n  }\n\n  //restore table redrawing\n  restoreRedraw() {\n    this.initGuard();\n    this.eventBus.dispatch(\"redraw-restoring\");\n    this.rowManager.restoreRedraw();\n    this.columnManager.restoreRedraw();\n    this.eventBus.dispatch(\"redraw-restored\");\n  }\n\n  //load data\n  setData(data, params, config) {\n    this.initGuard(false, \"To set initial data please use the 'data' property in the table constructor.\");\n    return this.dataLoader.load(data, params, config, false);\n  }\n\n  //clear data\n  clearData() {\n    this.initGuard();\n    this.dataLoader.blockActiveLoad();\n    this.rowManager.clearData();\n  }\n\n  //get table data array\n  getData(active) {\n    return this.rowManager.getData(active);\n  }\n\n  //get table data array count\n  getDataCount(active) {\n    return this.rowManager.getDataCount(active);\n  }\n\n  //replace data, keeping table in position with same sort\n  replaceData(data, params, config) {\n    this.initGuard();\n    return this.dataLoader.load(data, params, config, true, true);\n  }\n\n  //update table data\n  updateData(data) {\n    var responses = 0;\n    this.initGuard();\n    return new Promise((resolve, reject) => {\n      this.dataLoader.blockActiveLoad();\n      if (typeof data === \"string\") {\n        data = JSON.parse(data);\n      }\n      if (data && data.length > 0) {\n        data.forEach(item => {\n          var row = this.rowManager.findRow(item[this.options.index]);\n          if (row) {\n            responses++;\n            row.updateData(item).then(() => {\n              responses--;\n              if (!responses) {\n                resolve();\n              }\n            }).catch(e => {\n              reject(\"Update Error - Unable to update row\", item, e);\n            });\n          } else {\n            reject(\"Update Error - Unable to find row\", item);\n          }\n        });\n      } else {\n        console.warn(\"Update Error - No data provided\");\n        reject(\"Update Error - No data provided\");\n      }\n    });\n  }\n  addData(data, pos, index) {\n    this.initGuard();\n    return new Promise((resolve, reject) => {\n      this.dataLoader.blockActiveLoad();\n      if (typeof data === \"string\") {\n        data = JSON.parse(data);\n      }\n      if (data) {\n        this.rowManager.addRows(data, pos, index).then(rows => {\n          var output = [];\n          rows.forEach(function (row) {\n            output.push(row.getComponent());\n          });\n          resolve(output);\n        });\n      } else {\n        console.warn(\"Update Error - No data provided\");\n        reject(\"Update Error - No data provided\");\n      }\n    });\n  }\n\n  //update table data\n  updateOrAddData(data) {\n    var rows = [],\n      responses = 0;\n    this.initGuard();\n    return new Promise((resolve, reject) => {\n      this.dataLoader.blockActiveLoad();\n      if (typeof data === \"string\") {\n        data = JSON.parse(data);\n      }\n      if (data && data.length > 0) {\n        data.forEach(item => {\n          var row = this.rowManager.findRow(item[this.options.index]);\n          responses++;\n          if (row) {\n            row.updateData(item).then(() => {\n              responses--;\n              rows.push(row.getComponent());\n              if (!responses) {\n                resolve(rows);\n              }\n            });\n          } else {\n            this.rowManager.addRows(item).then(newRows => {\n              responses--;\n              rows.push(newRows[0].getComponent());\n              if (!responses) {\n                resolve(rows);\n              }\n            });\n          }\n        });\n      } else {\n        console.warn(\"Update Error - No data provided\");\n        reject(\"Update Error - No data provided\");\n      }\n    });\n  }\n\n  //get row object\n  getRow(index) {\n    var row = this.rowManager.findRow(index);\n    if (row) {\n      return row.getComponent();\n    } else {\n      console.warn(\"Find Error - No matching row found:\", index);\n      return false;\n    }\n  }\n\n  //get row object\n  getRowFromPosition(position) {\n    var row = this.rowManager.getRowFromPosition(position);\n    if (row) {\n      return row.getComponent();\n    } else {\n      console.warn(\"Find Error - No matching row found:\", position);\n      return false;\n    }\n  }\n\n  //delete row from table\n  deleteRow(index) {\n    var foundRows = [];\n    this.initGuard();\n    if (!Array.isArray(index)) {\n      index = [index];\n    }\n\n    //find matching rows\n    for (let item of index) {\n      let row = this.rowManager.findRow(item, true);\n      if (row) {\n        foundRows.push(row);\n      } else {\n        console.error(\"Delete Error - No matching row found:\", item);\n        return Promise.reject(\"Delete Error - No matching row found\");\n      }\n    }\n\n    //sort rows into correct order to ensure smooth delete from table\n    foundRows.sort((a, b) => {\n      return this.rowManager.rows.indexOf(a) > this.rowManager.rows.indexOf(b) ? 1 : -1;\n    });\n\n    //delete rows\n    foundRows.forEach(row => {\n      row.delete();\n    });\n    this.rowManager.reRenderInPosition();\n    return Promise.resolve();\n  }\n\n  //add row to table\n  addRow(data, pos, index) {\n    this.initGuard();\n    if (typeof data === \"string\") {\n      data = JSON.parse(data);\n    }\n    return this.rowManager.addRows(data, pos, index, true).then(rows => {\n      return rows[0].getComponent();\n    });\n  }\n\n  //update a row if it exists otherwise create it\n  updateOrAddRow(index, data) {\n    var row = this.rowManager.findRow(index);\n    this.initGuard();\n    if (typeof data === \"string\") {\n      data = JSON.parse(data);\n    }\n    if (row) {\n      return row.updateData(data).then(() => {\n        return row.getComponent();\n      });\n    } else {\n      return this.rowManager.addRows(data).then(rows => {\n        return rows[0].getComponent();\n      });\n    }\n  }\n\n  //update row data\n  updateRow(index, data) {\n    var row = this.rowManager.findRow(index);\n    this.initGuard();\n    if (typeof data === \"string\") {\n      data = JSON.parse(data);\n    }\n    if (row) {\n      return row.updateData(data).then(() => {\n        return Promise.resolve(row.getComponent());\n      });\n    } else {\n      console.warn(\"Update Error - No matching row found:\", index);\n      return Promise.reject(\"Update Error - No matching row found\");\n    }\n  }\n\n  //scroll to row in DOM\n  scrollToRow(index, position, ifVisible) {\n    var row = this.rowManager.findRow(index);\n    if (row) {\n      return this.rowManager.scrollToRow(row, position, ifVisible);\n    } else {\n      console.warn(\"Scroll Error - No matching row found:\", index);\n      return Promise.reject(\"Scroll Error - No matching row found\");\n    }\n  }\n  moveRow(from, to, after) {\n    var fromRow = this.rowManager.findRow(from);\n    this.initGuard();\n    if (fromRow) {\n      fromRow.moveToRow(to, after);\n    } else {\n      console.warn(\"Move Error - No matching row found:\", from);\n    }\n  }\n  getRows(active) {\n    return this.rowManager.getComponents(active);\n  }\n\n  //get position of row in table\n  getRowPosition(index) {\n    var row = this.rowManager.findRow(index);\n    if (row) {\n      return row.getPosition();\n    } else {\n      console.warn(\"Position Error - No matching row found:\", index);\n      return false;\n    }\n  }\n\n  /////////////// Column Functions  ///////////////\n  setColumns(definition) {\n    this.initGuard(false, \"To set initial columns please use the 'columns' property in the table constructor\");\n    this.columnManager.setColumns(definition);\n  }\n  getColumns(structured) {\n    return this.columnManager.getComponents(structured);\n  }\n  getColumn(field) {\n    var column = this.columnManager.findColumn(field);\n    if (column) {\n      return column.getComponent();\n    } else {\n      console.warn(\"Find Error - No matching column found:\", field);\n      return false;\n    }\n  }\n  getColumnDefinitions() {\n    return this.columnManager.getDefinitionTree();\n  }\n  showColumn(field) {\n    var column = this.columnManager.findColumn(field);\n    this.initGuard();\n    if (column) {\n      column.show();\n    } else {\n      console.warn(\"Column Show Error - No matching column found:\", field);\n      return false;\n    }\n  }\n  hideColumn(field) {\n    var column = this.columnManager.findColumn(field);\n    this.initGuard();\n    if (column) {\n      column.hide();\n    } else {\n      console.warn(\"Column Hide Error - No matching column found:\", field);\n      return false;\n    }\n  }\n  toggleColumn(field) {\n    var column = this.columnManager.findColumn(field);\n    this.initGuard();\n    if (column) {\n      if (column.visible) {\n        column.hide();\n      } else {\n        column.show();\n      }\n    } else {\n      console.warn(\"Column Visibility Toggle Error - No matching column found:\", field);\n      return false;\n    }\n  }\n  addColumn(definition, before, field) {\n    var column = this.columnManager.findColumn(field);\n    this.initGuard();\n    return this.columnManager.addColumn(definition, before, column).then(column => {\n      return column.getComponent();\n    });\n  }\n  deleteColumn(field) {\n    var column = this.columnManager.findColumn(field);\n    this.initGuard();\n    if (column) {\n      return column.delete();\n    } else {\n      console.warn(\"Column Delete Error - No matching column found:\", field);\n      return Promise.reject();\n    }\n  }\n  updateColumnDefinition(field, definition) {\n    var column = this.columnManager.findColumn(field);\n    this.initGuard();\n    if (column) {\n      return column.updateDefinition(definition);\n    } else {\n      console.warn(\"Column Update Error - No matching column found:\", field);\n      return Promise.reject();\n    }\n  }\n  moveColumn(from, to, after) {\n    var fromColumn = this.columnManager.findColumn(from),\n      toColumn = this.columnManager.findColumn(to);\n    this.initGuard();\n    if (fromColumn) {\n      if (toColumn) {\n        this.columnManager.moveColumn(fromColumn, toColumn, after);\n      } else {\n        console.warn(\"Move Error - No matching column found:\", toColumn);\n      }\n    } else {\n      console.warn(\"Move Error - No matching column found:\", from);\n    }\n  }\n\n  //scroll to column in DOM\n  scrollToColumn(field, position, ifVisible) {\n    return new Promise((resolve, reject) => {\n      var column = this.columnManager.findColumn(field);\n      if (column) {\n        return this.columnManager.scrollToColumn(column, position, ifVisible);\n      } else {\n        console.warn(\"Scroll Error - No matching column found:\", field);\n        return Promise.reject(\"Scroll Error - No matching column found\");\n      }\n    });\n  }\n\n  //////////// General Public Functions ////////////\n  //redraw list without updating data\n  redraw(force) {\n    this.initGuard();\n    this.columnManager.redraw(force);\n    this.rowManager.redraw(force);\n  }\n  setHeight(height) {\n    this.options.height = isNaN(height) ? height : height + \"px\";\n    this.element.style.height = this.options.height;\n    this.rowManager.initializeRenderer();\n    this.rowManager.redraw(true);\n  }\n\n  //////////////////// Event Bus ///////////////////\n\n  on(key, callback) {\n    this.externalEvents.subscribe(key, callback);\n  }\n  off(key, callback) {\n    this.externalEvents.unsubscribe(key, callback);\n  }\n  dispatchEvent() {\n    var args = Array.from(arguments);\n    args.shift();\n    this.externalEvents.dispatch(...arguments);\n  }\n\n  //////////////////// Alerts ///////////////////\n\n  alert(contents, type) {\n    this.initGuard();\n    this.alertManager.alert(contents, type);\n  }\n  clearAlert() {\n    this.initGuard();\n    this.alertManager.clear();\n  }\n\n  ////////////// Extension Management //////////////\n  modExists(plugin, required) {\n    if (this.modules[plugin]) {\n      return true;\n    } else {\n      if (required) {\n        console.error(\"Tabulator Module Not Installed: \" + plugin);\n      }\n      return false;\n    }\n  }\n  module(key) {\n    var mod = this.modules[key];\n    if (!mod) {\n      console.error(\"Tabulator module not installed: \" + key);\n    }\n    return mod;\n  }\n}\nvar Tabulator$1 = Tabulator;\n\n//tabulator with all modules installed\n\nclass TabulatorFull extends Tabulator$1 {\n  static extendModule() {\n    Tabulator$1.initializeModuleBinder(allModules);\n    Tabulator$1._extendModule(...arguments);\n  }\n  static registerModule() {\n    Tabulator$1.initializeModuleBinder(allModules);\n    Tabulator$1._registerModule(...arguments);\n  }\n  constructor(element, options, modules) {\n    super(element, options, allModules);\n  }\n}\nvar TabulatorFull$1 = TabulatorFull;\nclass PseudoRow {\n  constructor(type) {\n    this.type = type;\n    this.element = this._createElement();\n  }\n  _createElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-row\");\n    return el;\n  }\n  getElement() {\n    return this.element;\n  }\n  getComponent() {\n    return false;\n  }\n  getData() {\n    return {};\n  }\n  getHeight() {\n    return this.element.outerHeight;\n  }\n  initialize() {}\n  reinitialize() {}\n  normalizeHeight() {}\n  generateCells() {}\n  reinitializeHeight() {}\n  calcHeight() {}\n  setCellHeight() {}\n  clearCellHeight() {}\n  rendered() {}\n}\nexport { Accessor as AccessorModule, Ajax as AjaxModule, CalcComponent, CellComponent, Clipboard as ClipboardModule, ColumnCalcs as ColumnCalcsModule, ColumnComponent, DataTree as DataTreeModule, Download as DownloadModule, Edit as EditModule, Export as ExportModule, Filter as FilterModule, Format as FormatModule, FrozenColumns as FrozenColumnsModule, FrozenRows as FrozenRowsModule, GroupComponent, GroupRows as GroupRowsModule, History as HistoryModule, HtmlTableImport as HtmlTableImportModule, Import as ImportModule, Interaction as InteractionModule, Keybindings as KeybindingsModule, Menu as MenuModule, Module, MoveColumns as MoveColumnsModule, MoveRows as MoveRowsModule, Mutator as MutatorModule, Page as PageModule, Persistence as PersistenceModule, Popup as PopupModule, Print as PrintModule, PseudoRow, RangeComponent, ReactiveData as ReactiveDataModule, Renderer, ResizeColumns as ResizeColumnsModule, ResizeRows as ResizeRowsModule, ResizeTable as ResizeTableModule, ResponsiveLayout as ResponsiveLayoutModule, RowComponent, SelectRange as SelectRangeModule, SelectRow as SelectRowModule, SheetComponent, Sort as SortModule, Spreadsheet as SpreadsheetModule, Tabulator$1 as Tabulator, TabulatorFull$1 as TabulatorFull, Tooltip as TooltipModule, Validate as ValidateModule };","map":{"version":3,"names":["CoreFeature","constructor","table","reloadData","data","silent","columnsChanged","dataLoader","load","undefined","langText","modules","localize","getText","arguments","langBind","bind","langLocale","getLocale","commsConnections","comms","getConnections","commsSend","send","layoutMode","layout","getMode","layoutRefresh","force","subscribe","eventBus","unsubscribe","subscribed","key","subscriptionChange","dispatch","chain","confirm","dispatchExternal","externalEvents","subscribedExternal","subscriptionChangeExternal","options","setOption","value","deprecationCheck","oldOption","newOption","convert","deprecationAdvisor","check","deprecationCheckMsg","msg","checkMsg","deprecationMsg","module","Helpers","elVisible","el","offsetWidth","offsetHeight","elOffset","box","getBoundingClientRect","top","window","pageYOffset","document","documentElement","clientTop","left","pageXOffset","clientLeft","retrieveNestedData","separator","field","structure","split","length","output","i","deepClone","obj","clone","list","objectProto","__proto__","arrayProto","Object","assign","Array","isArray","subject","match","copy","findIndex","item","unshift","Popup","element","parent","container","_lookupContainer","reversedX","childPopup","blurable","blurCallback","blurEventsBound","renderedCallback","visible","hideable","classList","add","blurEvent","hide","escEvent","_escapeCheck","destroyBinding","tableDestroyed","destroyed","popupContainer","querySelector","console","warn","_checkContainerIsParent","body","parentNode","renderCallback","callback","containerEventCoords","e","touch","MouseEvent","x","touches","pageX","y","pageY","parentOffset","elementPositionCoords","position","offset","containerOffset","show","origin","parentEl","coords","HTMLElement","style","appendChild","_fitToScreen","addEventListener","stopPropagation","scrollTop","right","Math","max","scrollHeight","parseInt","isVisible","hideOnBlur","setTimeout","rowManager","keyCode","blockHide","restoreHide","removeEventListener","removeChild","child","Module","name","_handler","initialize","registerTableOption","optionsList","register","registerColumnOption","columnManager","registerTableFunction","func","args","initGuard","registerComponentFunction","component","handler","componentFunctionBinder","registerDataHandler","priority","registerDataPipelineHandler","registerDisplayHandler","registerDisplayPipelineHandler","displayRows","adjust","index","lookupIndex","displayPipeline","getDisplayRows","activeRows","refreshData","renderInPosition","refreshActiveData","footerAppend","footerManager","append","footerPrepend","prepend","footerRemove","remove","popup","menuEl","menuContainer","Popup$1","alert","content","type","alertManager","clearAlert","clear","defaultAccessors","rownum","params","column","row","getPosition","Accessor","moduleName","accessors","allowedTypes","initializeColumn","transformRow","config","forEach","charAt","toUpperCase","slice","accessor","definition","lookupAccessor","rowComponent","getComponent","traverse","colComponent","getFieldValue","setFieldValue","defaultConfig","method","generateParamsList$1","generateParamsList","prefix","concat","push","serializeParams","encoded","encodeURIComponent","join","urlBuilder","url","keys","toLowerCase","includes","defaultLoaderPromise","contentType","Promise","resolve","reject","urlGenerator","call","ajaxContentType","contentTypeFormatters","headers","Accept","mode","location","credentials","fetch","then","response","ok","json","catch","error","status","statusText","defaultContentTypeFormatters","JSON","stringify","form","FormData","Ajax","defaultURLGenerator","loaderPromise","ajaxRequestFunc","ajaxURLGenerator","ajaxURL","setUrl","setDefaultConfig","ajaxConfig","getUrl","requestDataCheck","requestParams","requestData","ajaxParams","previousData","generateConfig","sendRequest","ajaxRequesting","ajaxResponse","defaultPasteActions","replace","setData","update","updateOrAddData","insert","addData","defaultPasteParsers","clipboard","headerFindSuccess","columns","columnMap","rows","find","title","trim","columnsByIndex","shift","bindings$2","copyToClipboard","actions$2","edit","currentCell","modExists","extensions$4","keybindings","bindings","actions","Clipboard","moduleExtensions","pasteActions","pasteParsers","pasteParser","pasteAction","customSelection","rowRange","blocked","clipboardCopyRowRange","plain","html","preventDefault","clipboardCopyFormatter","export","generateExportList","clipboardCopyConfig","clipboardCopyStyled","generateHTMLTable","generatePlainContent","clipboardData","originalEvent","reset","paste","setPasteParser","clipboardPasteParser","setPasteAction","clipboardPasteAction","rowData","col","getKey","range","internal","sel","textRange","getSelection","createRange","selectNodeContents","toString","removeAllRanges","addRange","selection","createTextRange","moveToElementText","select","execCommand","action","parser","checkPasteOrigin","getPasteData","mutateData","mutator","valid","target","tagName","getData","CalcComponent","_row","Proxy","get","receiver","handle","transform","getElement","getTable","getCells","cells","cell","getCell","_getSelf","CellComponent","_cell","getValue","getOldValue","getInitialValue","initialValue","getRow","getType","getField","getColumn","setValue","mutate","restoreOldValue","setValueActual","restoreInitialValue","checkHeight","Cell","oldValue","height","width","minWidth","loaded","build","generateElement","setWidth","_configureCell","createElement","className","setAttribute","isRowHeader","vertAligns","bottom","middle","hozAligns","center","textAlign","hozAlign","vertAlign","display","alignItems","justifyContent","cssClass","classNames","_generateContents","val","innerHTML","Node","firstChild","cellRendered","containerOnly","layoutElement","changed","setValueProcessData","cellEdited","widthStyled","clearWidth","getWidth","setMinWidth","minWidthStyled","setMaxWidth","maxWidth","maxWidthStyled","reinitializeHeight","clearHeight","setHeight","heightStyled","getHeight","delete","redrawBlock","deleteCell","calcs","getIndex","getCellIndex","ColumnComponent","_column","getDefinition","getTitleDownload","isGroup","toggle","getSubColumns","getParentColumn","getParentComponent","scrollTo","ifVisible","scrollToColumn","move","to","after","toColumn","findColumn","moveColumn","getNextColumn","nextCol","nextColumn","getPrevColumn","prevCol","prevColumn","updateDefinition","updates","result","reinitializeWidth","rerenderColumns","defaultColumnOptions","Column","defaultOptionList","def","rowHeader","contentElement","titleHolderElement","titleElement","groupElement","createGroupElement","fieldStructure","titleDownload","titleFormatterRendered","mapDefinitions","setField","maxInitialWidth","widthFixed","newCol","attachColumn","checkColumnVisibility","registerColumnField","_initialize","columnHeaderVertAlign","defaults","columnDefaults","generate","checkDefinition","indexOf","nestedFieldSeparator","_getNestedData","_getFlatData","_setNestedData","_setFlatData","registerColumnPosition","reRegisterPosition","headerVertical","_buildColumnHeaderContent","_buildGroupHeader","_buildColumnHeader","headerHozAlign","_buildColumnHeaderTitle","headerWordWrap","editableTitle","focus","text","_formatColumnHeaderTitle","contents","dataObj","columnRendered","verticalAlign","alignment","parentHeight","getGroupElement","clientHeight","getHeadersElement","minHeight","clearVerticalAlign","paddingTop","getFirstColumn","getLastColumn","getColumns","getTopColumn","updateBranches","colDefs","responsiveToggle","verticalAlignHeaders","matchChildWidths","childWidth","splice","setWidthActual","isNaN","floor","clientWidth","min","checkCellHeights","heightInitialized","offsetParent","clearCellHeight","calcHeight","setCellHeight","getLeftOffset","offsetLeft","ceil","cellCount","deregisterColumn","generateCell","findColumnIndex","_nextVisibleColumn","getColumnByIndex","_prevVisibleColumn","fitToData","setTo","addColumn","getVisibleColumnsByIndex","RowComponent","watchPosition","scrollToRow","moveToRow","updateData","normalizeHeight","reformat","reinitialize","getNextRow","nextRow","getPrevRow","prevRow","Row","manualHeight","outerHeight","initialized","positionWatchers","created","create","detachElement","generateCells","inFragment","deleteCells","renderer","renderRowCells","rowFormatter","rerenderRowCells","rendered","deinitialize","deinitializeHeight","children","maxHeight","rowHeight","calcMinHeight","calcMaxHeight","resizableRows","updatedData","tempData","newRowData","parse","attrname","getColumnsByFieldRoot","findCell","nextDisplayRow","prevDisplayRow","before","toRow","findRow","moveRowActual","deleteActual","blockRedraw","detachModules","deleteRow","wipe","isDisplayed","setPosition","getGroup","group","defaultCalculations","avg","values","calcParams","precision","reduce","sum","Number","toFixed","parseFloat","String","count","unique","filter","ColumnCalcs","calculations","topCalcs","botCalcs","genColumn","topElement","botElement","topRow","botRow","topInitialized","botInitialized","recalcAfterBlock","cellValueChanged","initializeColumnCheck","rowsUpdated","scrollHorizontal","recalcActiveRows","recalcActiveRowsRefresh","tableRedraw","visibleRows","adjustForScrollbar","restoreRedraw","resizeHolderWidth","getResults","userRecalc","headersElement","recalc","redraw","blockCheck","viewable","groupBy","recalcRowGroup","dataTreeStartExpanded","dataTree","recalcAll","topCalc","bottomCalc","columnCalcs","topCalcParams","botCalcParams","bottomCalcParams","initializeTopRow","botCalc","initializeBottomRow","removeCalcs","adjustTableSize","reinitializeCalcs","fragment","createDocumentFragment","getContentsElement","insertBefore","nextSibling","scrollLeft","rowsToData","generateRow","frozenColumns","recalcGroup","groupRows","getRowGroup","groups","getChildGroups","generateRowData","generateTopRow","generateBottomRow","hasDataTreeColumnCalcs","dataTreeChildColumnCalcs","open","getFilteredTreeChildren","dataRow","pos","disable","enable","format","formatter","getFormatter","paramKey","hasTopCalcs","hasBottomCalcs","results","getGroups","getGroupResults","groupObj","subGroups","getSubGroups","subGroupResults","subgroup","rtl","paddingLeft","paddingRight","DataTree","indent","collapseEl","expandEl","branchEl","elementField","startOpen","collapseRow","expandRow","toggleRow","getTreeParent","getRowChildren","addTreeChildRow","isRowExpanded","dummyEl","dataTreeChildField","dataTreeChildIndent","dataTreeBranchElement","dataTreeCollapseElement","tabIndex","dataTreeExpandElement","initializeRow","layoutRow","rowDelete","rowDataChanged","columnMoving","initializeElementField","tableRedrawing","getRows","reinitializeRowChildren","firstCol","getFirstVisibleColumn","dataTreeElementColumn","getTreeChildren","redrawNeeded","childArray","controlEl","generateControlElement","cloneNode","marginRight","marginLeft","getComputedStyle","getPropertyValue","oldControl","replaceChild","getChildren","allChildren","sortOnly","generateChildren","dataTreeFilter","dataTreeSort","sort","subChildren","sub","childData","childRow","getTreeParentRoot","childIndex","findChildIndex","recurse","getChildField","csv$1","setFileContents","delimiter","fileContents","depth","bom","json$1","pdf","header","autoTableParams","rowGroupStyles","fontStyle","fontSize","cellPadding","fillColor","rowCalcStyles","jsPDFParams","jsPDF","orientation","unit","parseRow","styles","colSpan","rowSpan","doc","jspdf","autoTable","didDrawPage","head","documentProcessing","xlsx$1","self","sheetName","workbook","XLSX","utils","book_new","tableFeatures","compression","compress","writeOptions","bookType","bookSST","SheetNames","Sheets","generateSheet","merges","worksheet","s","c","r","a","b","j","Date","sheet_add_aoa","encode_range","sheetOnly","sheets","sheet","active","intercept","s2ab","buf","ArrayBuffer","view","Uint8Array","charCodeAt","write","html$1","jsonLines","defaultDownloaders","csv","xlsx","Download","downloaders","mimeType","Blob","deprecatedOptionsCheck","download","downloadToTab","filename","interceptCallback","downloadFunc","buildLink","mime","triggerDownload","downloadConfig","downloadRowRange","groupHeader","groupHeaderDownload","_group","getRowCount","newTab","blob","downloadEncoder","URL","createObjectURL","navigator","msSaveOrOpenBlob","click","commsReceived","maskInput","mask","maskLetter","maskLetterChar","maskNumber","maskNumberChar","maskWildcard","maskWildcardChar","fillSymbols","symbol","char","ctrlKey","metaKey","maskAutoFill","placeholder","input","onRendered","success","cancel","editorParams","cellValue","search","padding","boxSizing","elementAttributes","getAttribute","preventScroll","selectContents","onChange","textarea$1","vertNav","verticalNavigation","whiteSpace","resize","heightNow","shiftKey","shiftEnterSubmit","selectionStart","stopImmediatePropagation","number$1","step","blurFunc","date$1","inputFormat","DT","DateTime","luxon","convertDate","newDatetime","isDateTime","fromISO","fromFormat","toFormat","luxDate","toISO","relatedTarget","rangeParent","explicitOriginalTarget","time$1","luxTime","datetime$2","luxDateTime","Edit$1","Edit","editor","_initializeParams","displayItems","currentItems","focusedItem","_createInputElement","listEl","_createListElement","initialValues","isFilter","filterTimeout","filtered","typing","listIteration","lastAction","filterTerm","_deprecatedOptionsCheck","_initializeValue","_onRendered","defaultValue","multiselect","headerFilterInitialListGen","cellEl","clickStop","_preventPopupBlur","_preventBlur","_inputKeyDown","_setListWidth","attribs","clearable","autocomplete","cursor","caretColor","_bindInputEvents","valueKeys","valueCheck","placeholderLoading","placeholderEmpty","filterDelay","emptyValue","freetext","filterFunc","filterRemote","allowEmpty","listOnEmpty","valuesLookup","valuesURL","_inputFocus","_inputClick","_inputBlur","_inputSearch","_inputKeyUp","rebuildOptionsList","_filter","clearTimeout","_filterList","_resolveValue","_clearChoices","_keyUp","_keyDown","_keySide","_keyEnter","_keyEsc","_keyHomeEnd","_keyTab","_keySelectLetter","_keyAutoCompLetter","_chooseItem","_focusItem","_cancel","_scrollToValue","character","fromCharCode","label","startsWith","scrollIntoView","behavior","block","inline","_generateOptions","_sortOptions","_buildList","_showList","isInteger","_filterOptions","iteration","_ajaxRequest","_uniqueColumnValues","valuesLookupField","_addPlaceholder","responseValues","_parseList","_clearList","term","getColumnByField","inputValues","entries","map","_parseListItem","option","level","_parseListGroup","itemParams","selected","original","sorter","_defaultSortFunction","_sortGroup","as","bs","a1","b1","L","rx","rd","emptyAlign","isFinite","test","_defaultFilterFunc","_filterItem","matches","_buildItem","itemFormatter","_groupClick","_itemClick","_styleItem","startVis","blur","star$1","maxStars","getElementsByTagName","size","stars","starsHolder","star","createElementNS","starChange","browser","buildStar","starHolder","nextStar","changeValue","overflow","textOverflow","progress$1","percent","bar","mouseDrag","mouseDragWidth","updateValue","calcVal","round","backgroundColor","screenX","tickCross$1","tristate","indetermValue","indeterminateValue","indetermState","trueValueSet","falseValueSet","marginTop","indeterminate","checked","trueValue","checkedValue","falseValue","defaultEditors","textarea","number","date","time","datetime","progress","tickCross","editors","mouseClick","recursionBlock","invalidEdit","editedCells","convertEmptyValues","emptyValueCheck","getEditedCells","clearCellEdited","navigatePrev","navigateNext","navigateLeft","navigateRight","navigateUp","navigateDown","cellIsEdited","clearEdited","editCell","cellCancelEdit","bindEditor","updateCellClass","columnDeleteCheck","rowDeleteCheck","rowEditableCheck","cancelEdit","pasteBlocker","keybindingNavigateNext","newRow","addRow","edited","allowEdit","nextCell","findPrevEditableCell","findNextEditableCell","prevCell","convertEmpty","editable","editorEmptyValue","editorEmptyValueFunc","getCurrentCell","clearEditor","variableHeight","cellEditCancelled","button","contains","focusCellNoEvent","forceEdit","focusScrollAdjust","getRenderMode","topEdge","bottomEdge","rowEl","offsetTop","leftEdge","rightEdge","leftMargin","rightMargin","renderHorizontal","vDomPadLeft","editFinished","cellEditor","validationMode","transformEmptyValues","cellClick","cellEditing","mod","checkFunc","editIndex","ExportRow","ExportColumn","columnLookups$1","rowLookups$1","getVisibleRows","all","selectRow","selectedRows","pagination","Export","columnLookups","rowLookups","cloneTableStyle","colVisProp","colVisPropAttach","getHtml","colLookup","columnVisCheck","columnHeaders","headersToExportRows","generateColumnGroupHeaders","bodyToExportRows","rowLookup","generateTable","generateTableElement","columnGroups","colData","processColumnGroup","maxDepth","groupData","subGroup","subGroupData","visProp","rowHeaders","headerDepth","exportRows","parseColumnGroup","rowGroups","exportCols","headerEl","bodyEl","lookupTableStyles","setup","treeElementField","mapElementStyles","generateHeaderElement","generateGroupElement","generateCalcElement","generateRowElement","evenRow","oddRow","calcRow","firstRow","firstGroup","getElementsByClassName","styleCells","styleRowHeader","firstCell","lastCell","generator","cellStyle","styleProps","cellWrapper","formatCells","formatExportValue","align","formatComponent","holder","htmlOutputConfig","from","props","lookup","fromStyle","prop","defaultFilters","=","filterVal","rowVal","filterParams","<","<=",">",">=","!=","regex","RegExp","like","keywords","keyword","matchAll","starts","ends","endsWith","in","Filter","filters","filterList","headerFilters","headerFilterColumns","prevHeaderFilterChangeCheck","tableInitialized","searchRows","searchData","userSetFilter","userRefreshFilter","userAddFilter","getFilters","userSetHeaderFilterFocus","userGetHeaderFilterValue","userSetHeaderFilterValue","getHeaderFilters","userRemoveFilter","userClearFilter","userClearHeaderFilter","setHeaderFilterFocus","reloadHeaderFilter","getHeaderFilterValue","setHeaderFilterValue","initializeColumnHeaderFilter","hideHeaderFilterElements","showHeaderFilterElements","tableBuilt","generatePlaceholder","filterMode","remoteFilterParams","initialFilter","setFilter","initialHeaderFilter","placeholderHeaderFilter","refreshFilter","addFilter","removeFilter","clearFilter","clearHeaderFilter","headerFilter","filterType","tagType","attrType","filterChangeCheck","prevSuccess","emptyFunc","headerFilterFunc","headerFilterFuncParams","fieldVal","colVal","trackChanges","generateHeaderFilterElement","filterElement","editorElement","typingTimer","searchTrigger","onRenderedCallback","headerElement","headerFilterEmptyCheck","headerFilterParams","headerFilterPlaceholder","contentsElement","headerPos","headerFilterLiveFilterDelay","hasAttribute","headerFilterLiveFilter","hasChanged","findFilter","findSubFilters","ajax","filtersToArray","searchType","filterRecurse","rowList","activeRowComponents","filterRow","subFilter","plaintext","formatterParams","emptyToSpace","sanitizeHTML","money","floatVal","sign","integer","decimal","rgx","decimalSym","thousandSym","thousand","negativeSign","symbolAfter","abs","link","urlPrefix","labelTraverse","path","labelField","urlField","image","src","urlSuffix","empty","truthy","allowTruthy","tick","tickElement","cross","crossElement","datetime$1","outputFormat","invalid","invalidPlaceholder","isValid","timezone","setZone","datetimediff","suffix","humanize","now","diff","toHuman","starActive","starInactive","traffic","colors","color","percentValue","legendAlign","legend","legendColor","barEl","barContainer","legendEl","holderEl","buttonTick","buttonCross","sizePx","containEl","switchEl","onValue","hasOwnProperty","offValue","state","onTruthy","flexDirection","onColor","background","offColor","borderRadius","clickable","relativeToPage","page","getPageSize","getPage","innerText","defaultFormatters","Format","formatters","formatValue","formatHeader","lookupFormatter","formatterPrint","print","formatterClipboard","formatterHtmlOutput","htmlOutput","mockCell","titleFormatter","titleFormatterParams","entityMap","FrozenColumns","leftColumns","rightColumns","initializationMode","layoutCell","reinitializeColumns","blockLayout","unblockLayout","margin","edge","frozenCheck","frozen","layoutCalcRows","layoutGroupCalcs","groupList","layoutColumnPosition","allCells","leftParents","marginValue","getColGroupParentElement","reinitializeRows","otherRows","getTableElement","getFrozenColumns","_calcSpace","FrozenRows","freezeRow","unfreezeRow","isRowFrozen","detachRow","frozenRows","initializeRows","rowType","isFrozen","styleRows","styleRow","GroupComponent","groupManager","getParentGroup","toggleVisibility","Group","oldGroup","hasSubGroups","groupIDLookups","_addRowToGroup","_addRow","old","elementContents","arrowElement","createElements","addBindings","createValueGroups","elementsOnly","arrow","movableRows","moveRow","initializeGroupHeader","allowedValues","_createGroup","toggleElement","groupToggleElement","groupID","groupKey","headerGenerator","insertRow","conformRowData","toIndex","updateGroupRows","scrollHeader","getRowIndex","removeRow","groupValues","removeGroup","generateGroupHeaderContents","getHeadersAndRows","_visSet","groupClosedShowCalcs","prev","includeChildren","getPath","childNodes","GroupRows","displayHandler","setGroupBy","setGroupValues","setGroupStartOpen","setGroupHeader","userGetGroups","userGetGroupedData","rowGetGroup","_blockRedrawing","_restore_redrawing","groupUpdateOnCellEdit","cellUpdated","reassignRowToGroup","configureGroupSetup","rowDeleting","scrollHeaders","rowMoving","rowAddingIndex","rowSample","virtualRenderFill","groupStartOpen","langValue","lang","items","cols","getRealColumns","lookupFunc","prevValue","tableElement","assignRowToGroup","moveRowInArray","getGroupedData","toGroup","fromGroup","generateGroups","groupComponents","pullGroupListData","groupListData","rowCount","headerContent","countGroups","oldGroups","createGroup","assignRowToExistingGroup","newGroupNeeded","oldRowGroup","oldGroupPath","newGroupPath","getExpectedPath","samePath","every","groupPath","groupId","checkBasicModeGroupHeaderWidth","onlyGroupHeaders","defaultUndoers","cellEdit","rowAdd","checkPlaceholder","addRowActual","_rebindRow","rowMove","posFrom","posTo","getRowFromPosition","regenerateRowPositions","reRenderInPosition","defaultRedoers","newValue","bindings$1","undo","redo","actions$1","history","extensions$3","History","undoers","redoers","clearComponentHistory","rowDeleted","rowAdded","rowMoved","getHistoryUndoSize","getHistoryRedoSize","oldRow","HtmlTableImport","fieldIndex","hasIndex","tableElementCheck","originalElement","parseTable","_extractOptions","_extractHeaders","_generateBlankHeaders","defaultOptions","attributes","optionsArr","attrib","_attribValue","_findCol","exists","textContent","replaceAll","registeredDefaults","inQuote","nextChar","array$1","floop","workbook2","read","sheet_to_json","defaultImporters","array","Import","importers","importFromFile","importFormat","loadDataCheck","loadData","importData","lookupImporter","structureData","err","importer","extension","importReader","pickFile","extensions","accept","file","files","reader","FileReader","readAsArrayBuffer","readAsBinaryString","readAsDataURL","readAsText","onload","onerror","parsedData","autoColumns","structureArrayToObject","structureArrayToColumns","Interaction","eventMap","rowClick","rowDblClick","rowContext","rowMouseEnter","rowMouseLeave","rowMouseOver","rowMouseOut","rowMouseMove","rowMouseDown","rowMouseUp","rowTap","rowDblTap","rowTapHold","cellDblClick","cellContext","cellMouseEnter","cellMouseLeave","cellMouseOver","cellMouseOut","cellMouseMove","cellMouseDown","cellMouseUp","cellTap","cellDblTap","cellTapHold","headerClick","headerDblClick","headerContext","headerMouseEnter","headerMouseLeave","headerMouseOver","headerMouseOut","headerMouseMove","headerMouseDown","headerMouseUp","headerTap","headerDblTap","headerTapHold","groupClick","groupDblClick","groupContext","groupMouseEnter","groupMouseLeave","groupMouseOver","groupMouseOut","groupMouseMove","groupMouseDown","groupMouseUp","groupTap","groupDblTap","groupTapHold","subscribers","touchSubscribers","columnSubscribers","touchWatchers","tap","tapDbl","tapHold","initializeExternalEvents","cellContentsSelectionFixer","clearTouchWatchers","types","selectNode","subscriptionChanged","added","subscribeTouchEvents","unsubscribeTouchEvents","handleTouch","noTouch","dispatchEvent","watchers","componentObj","defaultBindings","navPrev","navNext","navUp","navDown","navLeft","navRight","scrollPageUp","scrollPageDown","scrollToStart","scrollToEnd","defaultActions","keyBlock","newPos","displayRowsCount","scrollMax","Keybindings","watchKeys","pressedKeys","keyupBinding","keydownBinding","mergedBindings","mapBindings","bindEvents","clearBindings","binding","bindingList","mapBinding","symbolsList","ctrl","meta","symbols","code","checkBinding","Menu","nestedMenuBlock","currentComponent","rootPopup","initializeRowWatchers","initializeGroupWatchers","rowContextMenu","loadMenuEvent","on","rowClickMenu","rowDblClickMenu","groupContextMenu","groupClickMenu","groupDblClickMenu","headerContextMenu","loadMenuTableColumnEvent","headerClickMenu","headerDblClickMenu","headerMenu","initializeColumnHeaderMenu","contextMenu","loadMenuTableCellEvent","clickMenu","dblClickMenu","icon","headerMenuIcon","headerMenuEl","menu","loadMenu","parentPopup","itemEl","disabled","MoveColumns","placeholderElement","createPlaceholderElement","hoverElement","checkTimeout","checkPeriod","moving","toCol","toColAfter","startX","autoScrollMargin","autoScrollStep","autoScrollTimeout","touchMove","moveHover","endMove","movableColumns","abortMove","colEl","mousemove","which","startMove","bindTouchEvents","startXMove","nextColWidth","prevColWidth","nextColWidthLast","prevColWidthLast","passive","moveToCol","_bindMouseMove","_unbindMouseMove","movingCells","moveColumnActual","columnHolder","xPos","scrollPos","defaultSenders","fromRow","toTable","defaultReceivers","fromTable","MoveRows","senders","receivers","toRowAfter","hasHandle","startY","tableRowDropEvent","connection","connectionSelectorsTables","connectionSelectorsElements","connectionElements","connections","connectedTable","connectedRow","movableRowsConnectedTables","movableRowsConnectedElements","initializeCell","mouseup","tableRowDrop","previousSibling","rowHandle","startYMove","nextRowHeight","prevRowHeight","nextRowHeightLast","prevRowHeightLast","setStartPosition","connectToTables","pointerEvents","disconnectFromTables","moveHoverConnections","moveHoverTable","rowHolder","yPos","elementRowDrop","connectionTables","query","prototype","querySelectorAll","dropEvent","tabulatorElementDropEvent","connect","disconnect","dropComplete","sender","movableRowsSender","movableRowsReceiver","defaultMutators","Mutator","mutators","enabled","transformCell","mutateLink","lookupMutator","mutatorEdit","links","linkCell","pageSize","currentRow","currentPage","totalRows","totalPages","showingEl","valueEl","ofEl","totalEl","rowsEl","pages","defaultPageCounters","Page","pageCounters","progressiveLoad","pageCounterElement","pageCounter","remoteRowCountEstimate","initialLoad","dataChanging","pageSizes","setMaxPage","setPage","userSetPageToRow","userSetPageSize","previousPage","nextPage","getPageMax","setPageToRow","initialLoadComplete","calculatePageSizes","footerRedraw","paginationAddRow","rowAddingPosition","paginationMode","remotePageParams","_parseRemoteData","restOnRenderBefore","initializePageCounter","initializePaginator","initializeProgressive","scrollVertical","testElRow","testElCell","paginationSize","visibility","generatePageSizeSelectList","setPageSize","dir","loading","progressiveLoadScrollMargin","pagesElement","firstBut","prevBut","nextBut","lastBut","paginationSizeSelector","pageSizeSelect","counter","paginationCounter","hidden","pageSelectLabel","paginationCounterHolder","paginationElement","paginationCounterElement","paginationInitialPage","paginationButtonCount","setMaxRows","trigger","_setPageCounter","_setPageButtons","leftSize","rightSize","_generatePageButton","actualRowPageSize","start","end","actualStartRow","actualRows","finally","last_page","last_row","addRows","progressiveLoadDelay","footer","containerElement","scrollWidth","defaultReaders","local","id","localStorage","getItem","cookie","cookiePos","defaultWriters","setItem","expireDate","setDate","getDate","toUTCString","Persistence","moduleInitOrder","readers","writers","defWatcherBlock","readFunc","writeFunc","localStorageTest","testKey","removeItem","persistence","persistenceMode","persistenceID","retrievedData","persistenceReaderFunc","persistenceWriterFunc","retrieveData","save","eventSave","getColumnLayout","setColumnLayout","sorters","initialSort","parseColumns","setColumns","mergeDefinition","getOwnPropertyDescriptor","defineProperty","set","current","oldCols","newCols","mergeAllNew","_findColumn","validateSorters","getSort","getGroupConfig","getPageConfig","definitions","excludedKeys","defStore","colDef","_componentPopupCall","loadPopupEvent","rowContextPopup","rowClickPopup","rowDblClickPopup","groupContextPopup","groupClickPopup","groupDblClickPopup","headerContextPopup","loadPopupTableColumnEvent","headerClickPopup","headerDblClickPopup","headerPopup","initializeColumnHeaderPopup","contextPopup","loadPopupTableCellEvent","clickPopup","dblClickPopup","headerPopupIcon","headerPopupEl","loadPopup","contentsEl","Print","manualBlock","beforeprintEventHandler","afterprintEventHandler","printAsHtml","replaceTable","cleanup","destroy","printFullscreen","printConfig","printStyled","printRowRange","scrollX","scrollY","footerEl","tableEl","footerContent","printHeader","printFooter","printFormatter","ReactiveData","origFuncs","currentVersion","reactiveData","unblock","watchRow","watchData","unwatchData","version","enumerable","configurable","arg","apply","getRowFromDataObject","pop","newRows","startRow","reverse","oldRows","writable","watchKey","watchTreeChildren","childField","rebuildTree","unwatchRow","ResizeColumns","startColumn","startWidth","latestX","initialNextColumn","layoutColumnHeader","initializeEventWatchers","layoutCellHandles","deInitializeComponent","resizeHandle","columnLayoutUpdated","deInitializeColumn","columnWidthUpdated","resizable","reinitializeColumn","frozenColumnOffset","frozenOffset","handleEl","nearestColumn","_checkResizability","handleDown","_mouseDown","oldWidth","parentElement","clientX","startDiff","moveDiff","blockedBefore","blockedAfter","resizableColumnFit","colWidth","browserSlow","calcGuidePosition","mouseX","handleX","tableX","columnX","mouseDiff","guideEl","resizableColumnGuide","mouseMove","mouseUp","ResizeRows","startHeight","prevHandle","prevHandleDown","screenY","mouseY","handleY","tableY","rowY","resizableRowGuide","ResizeTable","visibilityObserver","resizeObserver","containerObserver","tableHeight","tableWidth","containerHeight","containerWidth","autoResize","initialRedraw","tableStyle","IntersectionObserver","ResizeObserver","initializeVisibilityObserver","entry","browserMobile","nodeHeight","contentRect","nodeWidth","redrawTable","observe","fixedHeight","tableResized","isIntersecting","unobserve","responsiveCollapse","responsiveLayout","toggleList","isOpen","extensions$2","ResponsiveLayout","hiddenColumns","collapseFormatter","collapseStartOpen","collapseHandleColumn","updateColumnVisibility","initializeResponsivity","generateCollapsedRowContent","responsiveLayoutCollapseFormatter","formatCollapsedData","responsiveLayoutCollapseStartOpen","responsive","order","generateCollapsedContent","hideColumn","colCount","showColumn","working","getFlexBaseWidth","headerVisible","activeRowsCount","renderEmptyScroll","generateCollapsedRowData","mockCellComponent","responsiveLayoutCollapseUseFormatters","titleData","valueData","node_content","titleHighlight","rowSelection","checkbox","selectableRowsRangeMode","toggleSelect","handleComplexRowClick","isSelected","registerRowSelectCheckbox","deselectRow","registerHeaderSelectCheckbox","extensions$1","SelectRow","selecting","lastClickedRow","selectPrev","headerCheckboxElement","selectRows","deselectRows","getSelectedRows","getSelectedData","isRowSelected","selectableRows","selectableRange","clearSelectionData","rowRetrieve","selectableRowsPersistence","_deselectRow","prevSelected","_rowSelectionChanged","selectable","checkRowSelectability","endSelect","_clearSelection","lastClickedRowIdx","getDisplayRowIndex","rowIdx","fromRowIdx","toRowIdx","toggledRows","toggledRow","selectableRowsCheck","_selectRow","changes","rowMatch","change","rowInfo","selectableRowsRollingSelection","checkboxEl","dataTreeSelectPropagate","childRowSelection","selectedRow","deselected","RangeComponent","_range","getStructuredCells","getBounds","getTopEdge","getBottomEdge","getLeftEdge","getRightEdge","setBounds","destroyedGuard","setStartBound","setEndBound","rangeManager","clearValues","Range","initializing","initElement","initBounds","_updateMinMax","setStart","setEnd","columnSelection","rowsCount","_getTableRows","_getTableColumns","_vDomTop","vDomTop","_vDomBottom","vDomBottom","_vDomLeft","leftCol","_vDomRight","rightCol","topLeftCell","bottomRightCell","topLeftCellEl","bottomRightCellEl","topLeftRowEl","bottomRightRowEl","Infinity","overlaps","atTopLeft","atBottomRight","occupies","occupiesRow","occupiesColumn","structured","arr","clearValue","selectableRangeClearCellsValue","notify","rangeRemoved","rangeJumpUp","rangeJumpDown","rangeJumpLeft","rangeJumpRight","rangeExpandUp","rangeExpandDown","rangeExpandLeft","rangeExpandRight","rangeExpandJumpUp","rangeExpandJumpDown","rangeExpandJumpLeft","rangeExpandJumpRight","selectRange","activeRange","singleCell","bounds","startCell","rowWidth","dataLength","startCol","itemLength","selectedColumns","SelectRange","mousedown","ranges","overlay","layoutChangeTimeout","maxRanges","blockKeydown","keyDownEvent","_handleKeyDown","mouseUpEvent","_handleMouseUp","getRangesData","getRanges","addRangeFromComponent","cellGetRanges","rowGetRanges","colGetRanges","initializeTable","initializeWatchers","rangeContainer","activeRangeCellElement","resetRanges","handleColumnMouseDown","handleColumnMouseMove","handleColumnResized","layoutChange","updateHeaderColumn","renderCell","handleCellMouseDown","handleCellMouseMove","handleCellClick","handleEditingCell","finishEditingCell","restoreFocus","keyNavigate","keyNavigateRange","headerSort","frozenCols","getActiveCell","initializeFocus","some","selectedColumn","event","newSelection","rangeIdx","dataset","navigate","jump","expand","moved","rangeEdge","findJumpCellLeft","findJumpCellRight","findJumpCellUp","findJumpCellDown","getTableColumns","getTableRows","getRowByRangePos","getColumnByRangePos","autoScroll","removed","findJumpCell","emptyStart","emptySide","currentValue","rowPos","colPos","isStartingCellEmpty","isLeftOfStartingCellEmpty","jumpCol","targetCells","isRightOfStartingCellEmpty","isTopOfStartingCellEmpty","jumpRow","isBottomOfStartingCellEmpty","tableHolder","rect","withinHorizontalView","withinVerticalView","scrollbarWidth","layoutRanges","layoutColumn","occupied","activeCell","activeCellEl","activeRowEl","colIdx","visibleCells","aRow","bRow","alignEmptyValues","decimalSeparator","thousandSeparator","string","locale","localeCompare","boolean","el1","el2","calc","d","alphanum","defaultSorters","Sort","sortList","userSetSort","clearSort","sortMode","remoteSortParams","setSort","refreshSort","arrowEl","sorterParams","startingDir","headerSortStartingDir","headerSortTristate","headerSortClickElement","headerSortElement","setColumnHeaderSortIcon","columnHeaderSortMulti","newSortList","findSorter","sortOrderReverse","sortListActual","rowComponents","clearColumnHeaders","sortObj","setColumnHeader","_sortItems","sortEl","sorterCount","sortItem","_sortRow","el1Comp","el2Comp","GridCalculator","columnCount","columnString","genColumns","incrementChar","genRows","setRowCount","setColumnCount","SheetComponent","_sheet","getTitle","setTitle","setRows","Sheet","spreadsheetManager","isActive","grid","defaultColumnDefinition","columnDefinition","columnDefs","rowDefs","columnFields","initializeElement","initializeColumns","loadSheet","ref","refs","unload","wasInactive","full","rowWidths","outputWidth","outputHeight","findLastIndex","removeSheet","Spreadsheet","setSheets","addSheet","getSheets","getSheetDefinitions","setSheetData","getSheet","getSheetData","clearSheet","removeSheetFunc","activeSheetFunc","loadRemoteData","spreadsheetData","compatibilityCheck","initializeTabset","altContainer","loadSheets","data1","data2","log","newSheet","destroySheets","activeSheet","prevSheet","lookupSheet","Tooltip","tooltipSubscriber","headerSubscriber","timeout","popupInstance","headerTooltip","mousemoveCheck","mouseoutCheck","tooltip","clearPopup","loadTooltip","tooltipDelay","defaultValidators","parameters","float","numeric","alphanumeric","reg","minLength","maxLength","cellData","required","Validate","validators","invalidCells","getInvalidCells","userClearCellValidation","userValidate","cellIsValid","clearValidation","cellValidate","columnValidate","rowValidate","editValidate","editorClear","editedClear","previousValue","validate","cancelled","validator","_extractValidator","substring","_buildValidator","failedValidators","invalidIndex","debugEventsExternal","debugEventsInternal","debugInvalidOptions","debugInvalidComponentFuncs","debugInitialization","debugDeprecation","autoColumnsDefinitions","footerElement","textDirection","addRowPos","renderVertical","renderVerticalBuffer","scrollToRowPosition","scrollToRowIfVisible","scrollToColumnPosition","scrollToColumnIfVisible","rowFormatterPrint","rowFormatterClipboard","rowFormatterHtmlOutput","dataLoaderLoading","dataLoaderError","dataLoaderErrorTimeout","dataSendParams","dataReceiveParams","OptionsList","msgType","userOptions","Renderer","elementVertical","elementHorizontal","verticalFillMode","clearRows","clearColumns","reinitializeColumnWidths","renderRows","renderColumns","rerenderRows","scrollColumns","scrollRows","scrollToRowNearestTop","includingBuffer","render","rerender","rowIndex","BasicHorizontal","rowFrag","VirtualDomHorizontal","vDomScrollPosLeft","vDomScrollPosRight","vDomPadRight","fitDataColAvg","windowBuffer","isFitData","layoutCheck","vertScrollListen","clearVisRowCache","dataChange","scroll","calcWindowBuffer","buffer","leftPos","rightPos","fitDataCheck","vdomHoz","reinitChanged","reinitializeRow","colEnd","addColRight","removeColLeft","addColLeft","removeColRight","colPositionAdjust","fitDataColActualWidthCheck","ex","message","newWidth","widthDiff","appendCell","ColumnManager","blockHozScrollEvent","columnsByField","redrawBlockUpdate","initializeRenderer","createHeadersElement","createHeaderContentsElement","createHeaderElement","initializeScrollWheelWatcher","padVerticalScrollbar","renderClass","renderers","deltaX","generateColumnsFromRowData","collProgress","calculateSorterFromValue","_addColumn","_reIndexColumns","getComponents","nextToColumn","topColumn","parentIndex","nextEl","root","fieldRoot","getDefinitions","getDefinitionTree","_moveColumnInArray","updateRows","fromIndex","totalWidth","fixedWidth","resetScroll","BasicVertical","tableFrag","tableEmpty","rowTop","VirtualDomVertical","vDomRowHeight","vDomScrollPosTop","vDomScrollPosBottom","vDomTopPad","vDomBottomPad","vDomMaxRenderChain","vDomWindowBuffer","vDomWindowMinTotalRows","vDomWindowMinMarginRows","vDomTopNewRows","vDomBottomNewRows","paddingBottom","_virtualRenderFill","topOffset","topDiff","bottomDiff","_addTopRow","vDomScrollHeight","_removeBottomRow","_addBottomRow","_removeTopRow","topFound","bottomRow","forceMove","topPad","rowsHeight","heightOccupied","topPadHeight","rowFragment","renderedRows","totalRowsRendered","rowsToRender","avgRowHeight","resized","fillableSpace","addedRows","paddingAdjust","_quickNormalizeRowHeight","removableRows","RowManager","createHolderElement","createTableElement","heightFixer","placeholderContents","firstRender","renderMode","activeRowsPipeline","redrawBlockRestoreConfig","redrawBlockRenderInPosition","dataPipeline","initializePlaceholder","leftDir","topDir","_positionPlaceholder","_setDataActual","_wipeElements","allIndex","activeIndex","setActiveRows","displayRowIterator","displayIndex","refreshDisplayOnly","findAddRowPos","_clearPlaceholder","chainResult","clearData","findRowIndex","rowOnly","getDataCount","skipStage","stage","cascadeOrder","refreshPipelines","renderTable","layoutColumnsOnNewData","resetDisplayRows","setDisplayRows","scrollBarCheck","_clearTable","_showPlaceholder","initialHeight","otherHeight","external","createEvent","initEvent","Event","FooterManager","createContainerElement","activate","deactivate","InteractionManager","abortClasses","previousTargets","listeners","componentMap","pseudoTrackers","subscriber","pseudoTracking","buildListenerMap","bindSubscriptionWatchers","listenerMap","listener","components","bindPseudoEvents","pseudoMouseEnter","pseudoMouseLeave","leaveList","linkedKeys","comp","clearWatchers","updateEventListeners","track","composedPath","targets","findTargets","bindComponents","triggerEvents","abort","elTargets","targetMatches","previousTarget","closest","ComponentFunctionBinder","funcName","DataLoader","requestOrder","requestNo","alertLoader","mapParams","objectInvert","alertError","blockActiveLoad","shouldLoad","ExternalEventBus","debug","events","subscriptionNotifiers","_debugDispatch","_dispatch","_notifySubscriptionChange","notifiers","callResult","InternalEventBus","_debugChain","_chain","_debugConfirm","_confirm","fallback","confirmed","DeprecationAdvisor","_warnUser","fitData","forced","fitDataGeneral","fitDataStretch","colsWidth","gap","lastCol","fitColumns","flexWidth","flexGrowUnits","flexColWidth","flexColumns","fixedShrinkColumns","flexShrinkUnits","overflowWidth","gapFill","calcWidth","scaleColumns","freeSpace","shrinkCols","oversizeCols","oversizeSpace","remainingSpace","remainingFlexGrowUnits","changeUnits","undersizeCols","calcGrow","widthGrow","calcShrink","widthShrink","defaultModes","fitDataFill","fitDataTable","Layout","modes","dataChanged","defaultLangs","Localize","langs","langList","setHeaderFilterPlaceholder","installLang","setLocale","getLang","default","_setLangProp","desiredLocale","traverseLang","trans","language","_executeBindings","fillPath","pathArray","_getLangElement","rootPath","Comms","receive","selectors","registry","lookupTable","con","tableComms","TableRegistry","tables","deregister","matchElement","findTable","ModuleBinder","moduleBindings","modulesRegistered","defaultModules","initializeModuleBinder","_registerModules","coreModules","_extendModule","property","source","core","mods","moduleCore","_registerModule","_registerModuleBinding","_registerModuleExtensions","modKey","ext","propKey","_extendModuleFromQueue","_bindModules","orderedStartMods","orderedEndMods","unOrderedMods","modulesCore","modulesRegular","Alert","_createAlertElement","msgElement","_createMsgElement","_typeClass","Tabulator","extendModule","registerModule","interactionMonitor","initializeCoreSystems","_create","_clearObjectPointers","_mapDeprecatedFunctionality","_rtlCheck","_buildElement","_initializeTable","_loadInitialData","direction","newElement","_detectBrowser","ua","userAgent","vendor","opera","stack","line","Error","replaceData","responses","foundRows","updateOrAddRow","updateRow","getRowPosition","getColumnDefinitions","toggleColumn","deleteColumn","updateColumnDefinition","fromColumn","off","plugin","Tabulator$1","TabulatorFull","allModules","TabulatorFull$1","PseudoRow","_createElement"],"sources":["D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\CoreFeature.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\tools\\Helpers.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\tools\\Popup.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\Module.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Accessor\\defaults\\accessors.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Accessor\\Accessor.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Ajax\\defaults\\config.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Ajax\\defaults\\urlGenerator.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Ajax\\defaults\\loaderPromise.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Ajax\\defaults\\contentTypeFormatters.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Ajax\\Ajax.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Clipboard\\defaults\\pasteActions.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Clipboard\\defaults\\pasteParsers.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Clipboard\\extensions\\keybindings\\bindings.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Clipboard\\extensions\\keybindings\\actions.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Clipboard\\extensions\\extensions.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Clipboard\\Clipboard.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\ColumnCalcs\\CalcComponent.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\cell\\CellComponent.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\cell\\Cell.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\column\\ColumnComponent.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\column\\defaults\\options.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\column\\Column.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\row\\RowComponent.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\row\\Row.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\ColumnCalcs\\defaults\\calculations.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\ColumnCalcs\\ColumnCalcs.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\DataTree\\DataTree.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Download\\defaults\\downloaders\\csv.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Download\\defaults\\downloaders\\json.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Download\\defaults\\downloaders\\pdf.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Download\\defaults\\downloaders\\xlsx.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Download\\defaults\\downloaders\\html.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Download\\defaults\\downloaders\\jsonLines.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Download\\defaults\\downloaders.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Download\\Download.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\inputMask.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\defaults\\editors\\input.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\defaults\\editors\\textarea.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\defaults\\editors\\number.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\defaults\\editors\\range.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\defaults\\editors\\date.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\defaults\\editors\\time.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\defaults\\editors\\datetime.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\List.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\defaults\\editors\\list.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\defaults\\editors\\star.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\defaults\\editors\\progress.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\defaults\\editors\\tickCross.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\defaults\\editors.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\Edit.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Export\\ExportRow.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Export\\ExportColumn.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Export\\defaults\\columnLookups.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Export\\defaults\\rowLookups.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Export\\Export.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Filter\\defaults\\filters.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Filter\\Filter.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\plaintext.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\html.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\textarea.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\money.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\link.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\image.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\tickCross.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\datetime.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\datetimediff.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\lookup.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\star.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\traffic.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\progress.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\color.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\buttonTick.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\buttonCross.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\toggle.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\rownum.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\handle.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\Format.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\FrozenColumns\\FrozenColumns.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\FrozenRows\\FrozenRows.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\GroupRows\\GroupComponent.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\GroupRows\\Group.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\GroupRows\\GroupRows.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\History\\defaults\\undoers.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\History\\defaults\\redoers.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\History\\extensions\\keybindings\\bindings.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\History\\extensions\\keybindings\\actions.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\History\\extensions\\extensions.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\History\\History.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\HtmlTableImport\\HtmlTableImport.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Import\\defaults\\importers\\csv.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Import\\defaults\\importers\\json.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Import\\defaults\\importers\\array.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Import\\defaults\\importers\\xlsx.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Import\\defaults\\importers.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Import\\Import.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Interaction\\Interaction.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Keybindings\\defaults\\bindings.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Keybindings\\defaults\\actions.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Keybindings\\Keybindings.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Menu\\Menu.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\MoveColumns\\MoveColumns.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\MoveRows\\defaults\\senders.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\MoveRows\\defaults\\receivers.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\MoveRows\\MoveRows.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Mutator\\defaults\\mutators.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Mutator\\Mutator.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Page\\defaults\\pageCounters\\rows.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Page\\defaults\\pageCounters\\pages.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Page\\defaults\\pageCounters.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Page\\Page.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Persistence\\defaults\\readers.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Persistence\\defaults\\writers.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Persistence\\Persistence.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Popup\\Popup.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Print\\Print.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\ReactiveData\\ReactiveData.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\ResizeColumns\\ResizeColumns.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\ResizeRows\\ResizeRows.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\ResizeTable\\ResizeTable.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\ResponsiveLayout\\extensions\\formatters\\responsiveCollapse.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\ResponsiveLayout\\extensions\\extensions.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\ResponsiveLayout\\ResponsiveLayout.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\SelectRow\\extensions\\formatters\\rowSelection.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\SelectRow\\extensions\\extensions.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\SelectRow\\SelectRow.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\SelectRange\\RangeComponent.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\SelectRange\\Range.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\SelectRange\\extensions\\keybindings\\bindings.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\SelectRange\\extensions\\keybindings\\actions.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\SelectRange\\extensions\\clipboard\\pasteActions.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\SelectRange\\extensions\\clipboard\\pasteParsers.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\SelectRange\\extensions\\export\\columnLookups.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\SelectRange\\extensions\\export\\rowLookups.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\SelectRange\\extensions\\extensions.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\SelectRange\\SelectRange.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Sort\\defaults\\sorters\\number.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Sort\\defaults\\sorters\\string.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Sort\\defaults\\sorters\\datetime.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Sort\\defaults\\sorters\\date.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Sort\\defaults\\sorters\\time.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Sort\\defaults\\sorters\\boolean.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Sort\\defaults\\sorters\\array.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Sort\\defaults\\sorters\\exists.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Sort\\defaults\\sorters\\alphanum.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Sort\\defaults\\sorters.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Sort\\Sort.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Spreadsheet\\GridCalculator.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Spreadsheet\\SheetComponent.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Spreadsheet\\Sheet.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Spreadsheet\\Spreadsheet.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Tooltip\\Tooltip.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Validate\\defaults\\validators.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Validate\\Validate.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\defaults\\options.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\tools\\OptionsList.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\rendering\\Renderer.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\rendering\\renderers\\BasicHorizontal.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\rendering\\renderers\\VirtualDomHorizontal.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\ColumnManager.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\rendering\\renderers\\BasicVertical.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\rendering\\renderers\\VirtualDomVertical.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\RowManager.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\FooterManager.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\tools\\InteractionMonitor.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\tools\\ComponentFunctionBinder.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\tools\\DataLoader.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\tools\\ExternalEventBus.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\tools\\InternalEventBus.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\tools\\DeprecationAdvisor.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Layout\\defaults\\modes\\fitData.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Layout\\defaults\\modes\\fitDataGeneral.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Layout\\defaults\\modes\\fitDataStretch.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Layout\\defaults\\modes\\fitColumns.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Layout\\defaults\\modes.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Layout\\Layout.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Localize\\defaults\\langs.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Localize\\Localize.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\modules\\Comms\\Comms.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\tools\\TableRegistry.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\tools\\ModuleBinder.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\tools\\Alert.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\Tabulator.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\TabulatorFull.js","D:\\git\\phone-app\\node_modules\\tabulator-tables\\src\\js\\core\\row\\PseudoRow.js"],"sourcesContent":["export default class CoreFeature{\n\n\tconstructor(table){\n\t\tthis.table = table;\n\t}\n\n\t//////////////////////////////////////////\n\t/////////////// DataLoad /////////////////\n\t//////////////////////////////////////////\n\n\treloadData(data, silent, columnsChanged){\n\t\treturn this.table.dataLoader.load(data, undefined, undefined, undefined, silent, columnsChanged);\n\t}\n\n\t//////////////////////////////////////////\n\t///////////// Localization ///////////////\n\t//////////////////////////////////////////\n\n\tlangText(){\n\t\treturn this.table.modules.localize.getText(...arguments);\n\t}\n\n\tlangBind(){\n\t\treturn this.table.modules.localize.bind(...arguments);\n\t}\n\n\tlangLocale(){\n\t\treturn this.table.modules.localize.getLocale(...arguments);\n\t}\n\n\n\t//////////////////////////////////////////\n\t////////// Inter Table Comms /////////////\n\t//////////////////////////////////////////\n\n\tcommsConnections(){\n\t\treturn this.table.modules.comms.getConnections(...arguments);\n\t}\n\n\tcommsSend(){\n\t\treturn this.table.modules.comms.send(...arguments);\n\t}\n\n\t//////////////////////////////////////////\n\t//////////////// Layout  /////////////////\n\t//////////////////////////////////////////\n\n\tlayoutMode(){\n\t\treturn this.table.modules.layout.getMode();\n\t}\n\n\tlayoutRefresh(force){\n\t\treturn this.table.modules.layout.layout(force);\n\t}\n\n\n\t//////////////////////////////////////////\n\t/////////////// Event Bus ////////////////\n\t//////////////////////////////////////////\n\n\tsubscribe(){\n\t\treturn this.table.eventBus.subscribe(...arguments);\n\t}\n\n\tunsubscribe(){\n\t\treturn this.table.eventBus.unsubscribe(...arguments);\n\t}\n\n\tsubscribed(key){\n\t\treturn this.table.eventBus.subscribed(key);\n\t}\n\n\tsubscriptionChange(){\n\t\treturn this.table.eventBus.subscriptionChange(...arguments);\n\t}\n\n\tdispatch(){\n\t\treturn this.table.eventBus.dispatch(...arguments);\n\t}\n\n\tchain(){\n\t\treturn this.table.eventBus.chain(...arguments);\n\t}\n\n\tconfirm(){\n\t\treturn this.table.eventBus.confirm(...arguments);\n\t}\n\n\tdispatchExternal(){\n\t\treturn this.table.externalEvents.dispatch(...arguments);\n\t}\n\n\tsubscribedExternal(key){\n\t\treturn this.table.externalEvents.subscribed(key);\n\t}\n\n\tsubscriptionChangeExternal(){\n\t\treturn this.table.externalEvents.subscriptionChange(...arguments);\n\t}\n\n\t//////////////////////////////////////////\n\t//////////////// Options /////////////////\n\t//////////////////////////////////////////\n\n\toptions(key){\n\t\treturn this.table.options[key];\n\t}\n\n\tsetOption(key, value){\n\t\tif(typeof value !== \"undefined\"){\n\t\t\tthis.table.options[key] = value;\n\t\t}\n\n\t\treturn this.table.options[key];\n\t}\n\n\t//////////////////////////////////////////\n\t/////////// Deprecation Checks ///////////\n\t//////////////////////////////////////////\n\n\tdeprecationCheck(oldOption, newOption,  convert){\n\t\treturn this.table.deprecationAdvisor.check(oldOption, newOption,  convert);\n\t}\n\n\tdeprecationCheckMsg(oldOption, msg){\n\t\treturn this.table.deprecationAdvisor.checkMsg(oldOption, msg);\n\t}\n\n\tdeprecationMsg(msg){\n\t\treturn this.table.deprecationAdvisor.msg(msg);\n\t}\n\t//////////////////////////////////////////\n\t//////////////// Modules /////////////////\n\t//////////////////////////////////////////\n\n\tmodule(key){\n\t\treturn this.table.module(key);\n\t}\n}","export default class Helpers{\n\n\tstatic elVisible(el){\n\t\treturn !(el.offsetWidth <= 0 && el.offsetHeight <= 0);\n\t}\n\n\tstatic elOffset(el){\n\t\tvar box = el.getBoundingClientRect();\n\n\t\treturn {\n\t\t\ttop: box.top + window.pageYOffset - document.documentElement.clientTop,\n\t\t\tleft: box.left + window.pageXOffset - document.documentElement.clientLeft\n\t\t};\n\t}\n\n\tstatic retrieveNestedData(separator, field, data){\n\t\tvar structure = separator ? field.split(separator) : [field],\n\t\tlength = structure.length,\n\t\toutput;\n\n\t\tfor(let i = 0; i < length; i++){\n\n\t\t\tdata = data[structure[i]];\n\n\t\t\toutput = data;\n\n\t\t\tif(!data){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tstatic deepClone(obj, clone, list = []){\n\t\tvar objectProto = {}.__proto__,\n\t\tarrayProto = [].__proto__;\n\n\t\tif (!clone){\n\t\t\tclone = Object.assign(Array.isArray(obj) ? [] : {}, obj);\n\t\t}\n\n\t\tfor(var i in obj) {\n\t\t\tlet subject = obj[i],\n\t\t\tmatch, copy;\n\n\t\t\tif(subject != null && typeof subject === \"object\" && (subject.__proto__ === objectProto || subject.__proto__ === arrayProto)){\n\t\t\t\tmatch = list.findIndex((item) => {\n\t\t\t\t\treturn item.subject === subject;\n\t\t\t\t});\n\n\t\t\t\tif(match > -1){\n\t\t\t\t\tclone[i] = list[match].copy;\n\t\t\t\t}else{\n\t\t\t\t\tcopy = Object.assign(Array.isArray(subject) ? [] : {}, subject);\n\n\t\t\t\t\tlist.unshift({subject, copy});\n\n\t\t\t\t\tclone[i] = this.deepClone(subject, copy, list);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn clone;\n\t}\n}\n","import CoreFeature from '../CoreFeature.js';\nimport Helpers from './Helpers.js';\n\nexport default class Popup extends CoreFeature{\n\tconstructor(table, element, parent){\n\t\tsuper(table);\n\t\t\n\t\tthis.element = element;\n\t\tthis.container = this._lookupContainer();\n\t\t\n\t\tthis.parent = parent;\n\t\t\n\t\tthis.reversedX = false;\n\t\tthis.childPopup = null;\n\t\tthis.blurable = false;\n\t\tthis.blurCallback = null;\n\t\tthis.blurEventsBound = false;\n\t\tthis.renderedCallback = null;\n\t\t\n\t\tthis.visible = false;\n\t\tthis.hideable = true;\n\t\t\n\t\tthis.element.classList.add(\"tabulator-popup-container\");\n\t\t\n\t\tthis.blurEvent = this.hide.bind(this, false);\n\t\tthis.escEvent = this._escapeCheck.bind(this);\n\t\t\n\t\tthis.destroyBinding = this.tableDestroyed.bind(this);\n\t\tthis.destroyed = false;\n\t}\n\t\n\ttableDestroyed(){\n\t\tthis.destroyed = true;\n\t\tthis.hide(true);\n\t}\n\t\n\t_lookupContainer(){\n\t\tvar container = this.table.options.popupContainer;\n\t\t\n\t\tif(typeof container === \"string\"){\n\t\t\tcontainer = document.querySelector(container);\n\t\t\t\n\t\t\tif(!container){\n\t\t\t\tconsole.warn(\"Menu Error - no container element found matching selector:\",  this.table.options.popupContainer , \"(defaulting to document body)\");\n\t\t\t}\n\t\t}else if (container === true){\n\t\t\tcontainer = this.table.element;\n\t\t}\n\t\t\n\t\tif(container && !this._checkContainerIsParent(container)){\n\t\t\tcontainer = false;\n\t\t\tconsole.warn(\"Menu Error - container element does not contain this table:\",  this.table.options.popupContainer , \"(defaulting to document body)\");\n\t\t}\n\t\t\n\t\tif(!container){\n\t\t\tcontainer = document.body;\n\t\t}\n\t\t\n\t\treturn container;\n\t}\n\t\n\t_checkContainerIsParent(container, element = this.table.element){\n\t\tif(container === element){\n\t\t\treturn true;\n\t\t}else{\n\t\t\treturn element.parentNode ? this._checkContainerIsParent(container, element.parentNode) : false;\n\t\t}\n\t}\n\t\n\trenderCallback(callback){\n\t\tthis.renderedCallback = callback;\n\t}\n\t\n\tcontainerEventCoords(e){\n\t\tvar touch = !(e instanceof MouseEvent);\n\t\t\n\t\tvar x = touch ? e.touches[0].pageX : e.pageX;\n\t\tvar y = touch ? e.touches[0].pageY : e.pageY;\n\t\t\n\t\tif(this.container !== document.body){\n\t\t\tlet parentOffset = Helpers.elOffset(this.container);\n\t\t\t\n\t\t\tx -= parentOffset.left;\n\t\t\ty -= parentOffset.top;\n\t\t}\n\t\t\n\t\treturn {x, y};\n\t}\n\t\n\telementPositionCoords(element, position = \"right\"){\n\t\tvar offset = Helpers.elOffset(element),\n\t\tcontainerOffset, x, y;\n\t\t\n\t\tif(this.container !== document.body){\n\t\t\tcontainerOffset = Helpers.elOffset(this.container);\n\t\t\t\n\t\t\toffset.left -= containerOffset.left;\n\t\t\toffset.top -= containerOffset.top;\n\t\t}\n\t\t\n\t\tswitch(position){\n\t\t\tcase \"right\":\n\t\t\t\tx = offset.left + element.offsetWidth;\n\t\t\t\ty = offset.top - 1;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"bottom\":\n\t\t\t\tx = offset.left;\n\t\t\t\ty = offset.top + element.offsetHeight;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"left\":\n\t\t\t\tx = offset.left;\n\t\t\t\ty = offset.top - 1;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"top\":\n\t\t\t\tx = offset.left;\n\t\t\t\ty = offset.top;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"center\":\n\t\t\t\tx = offset.left + (element.offsetWidth / 2);\n\t\t\t\ty = offset.top + (element.offsetHeight / 2);\n\t\t\t\tbreak;\n\t\t\t\n\t\t}\n\t\t\n\t\treturn {x, y, offset};\n\t}\n\t\n\tshow(origin, position){\n\t\tvar x, y, parentEl, parentOffset, coords;\n\t\t\n\t\tif(this.destroyed || this.table.destroyed){\n\t\t\treturn this;\n\t\t}\n\t\t\n\t\tif(origin instanceof HTMLElement){\n\t\t\tparentEl = origin;\n\t\t\tcoords = this.elementPositionCoords(origin, position);\n\t\t\t\n\t\t\tparentOffset = coords.offset;\n\t\t\tx = coords.x;\n\t\t\ty = coords.y;\n\t\t\t\n\t\t}else if(typeof origin === \"number\"){\n\t\t\tparentOffset = {top:0, left:0};\n\t\t\tx = origin;\n\t\t\ty = position;\n\t\t}else{\n\t\t\tcoords = this.containerEventCoords(origin);\n\t\t\t\n\t\t\tx = coords.x;\n\t\t\ty = coords.y;\n\t\t\t\n\t\t\tthis.reversedX = false;\n\t\t}\n\t\t\n\t\tthis.element.style.top = y + \"px\";\n\t\tthis.element.style.left = x + \"px\";\n\t\t\n\t\tthis.container.appendChild(this.element);\n\t\t\n\t\tif(typeof this.renderedCallback === \"function\"){\n\t\t\tthis.renderedCallback();\n\t\t}\n\t\t\n\t\tthis._fitToScreen(x, y, parentEl, parentOffset, position);\n\t\t\n\t\tthis.visible = true;\n\t\t\n\t\tthis.subscribe(\"table-destroy\", this.destroyBinding);\n\t\t\n\t\tthis.element.addEventListener(\"mousedown\", (e) => {\n\t\t\te.stopPropagation();\n\t\t});\n\t\t\n\t\treturn this;\n\t}\n\t\n\t_fitToScreen(x, y, parentEl, parentOffset, position){\n\t\tvar scrollTop = this.container === document.body ? document.documentElement.scrollTop : this.container.scrollTop;\n\t\t\n\t\t//move menu to start on right edge if it is too close to the edge of the screen\n\t\tif((x + this.element.offsetWidth) >= this.container.offsetWidth || this.reversedX){\n\t\t\tthis.element.style.left = \"\";\n\t\t\t\n\t\t\tif(parentEl){\n\t\t\t\tthis.element.style.right = (this.container.offsetWidth - parentOffset.left) + \"px\";\n\t\t\t}else{\n\t\t\t\tthis.element.style.right = (this.container.offsetWidth - x) + \"px\";\n\t\t\t}\n\t\t\t\n\t\t\tthis.reversedX = true;\n\t\t}\n\t\t\n\t\t//move menu to start on bottom edge if it is too close to the edge of the screen\n\t\tif((y + this.element.offsetHeight) > Math.max(this.container.offsetHeight, scrollTop ? this.container.scrollHeight : 0)) {\n\t\t\tif(parentEl){\n\t\t\t\tswitch(position){\n\t\t\t\t\tcase \"bottom\":\n\t\t\t\t\t\tthis.element.style.top = (parseInt(this.element.style.top) - this.element.offsetHeight - parentEl.offsetHeight - 1) + \"px\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthis.element.style.top = (parseInt(this.element.style.top) - this.element.offsetHeight + parentEl.offsetHeight + 1) + \"px\";\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.element.style.top = (parseInt(this.element.style.top) - this.element.offsetHeight) + \"px\";\n\t\t\t}\n\t\t}\n\t}\n\t\n\tisVisible(){\n\t\treturn this.visible;\n\t}\n\t\n\thideOnBlur(callback){\n\t\tthis.blurable = true;\n\t\t\n\t\tif(this.visible){\n\t\t\tsetTimeout(() => {\n\t\t\t\tif(this.visible){\n\t\t\t\t\tthis.table.rowManager.element.addEventListener(\"scroll\", this.blurEvent);\n\t\t\t\t\tthis.subscribe(\"cell-editing\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"click\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"contextmenu\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"mousedown\", this.blurEvent);\n\t\t\t\t\twindow.addEventListener(\"resize\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"keydown\", this.escEvent);\n\n\t\t\t\t\tthis.blurEventsBound = true;\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t\t\n\t\t\tthis.blurCallback = callback;\n\t\t}\n\t\t\n\t\treturn this;\n\t}\n\t\n\t_escapeCheck(e){\n\t\tif(e.keyCode == 27){\n\t\t\tthis.hide();\n\t\t}\n\t}\n\t\n\tblockHide(){\n\t\tthis.hideable = false;\n\t}\n\t\n\trestoreHide(){\n\t\tthis.hideable = true;\n\t}\n\t\n\thide(silent = false){\n\t\tif(this.visible && this.hideable){\n\t\t\tif(this.blurable && this.blurEventsBound){\n\t\t\t\tdocument.body.removeEventListener(\"keydown\", this.escEvent);\n\t\t\t\tdocument.body.removeEventListener(\"click\", this.blurEvent);\n\t\t\t\tdocument.body.removeEventListener(\"contextmenu\", this.blurEvent);\n\t\t\t\tdocument.body.removeEventListener(\"mousedown\", this.blurEvent);\n\t\t\t\twindow.removeEventListener(\"resize\", this.blurEvent);\n\t\t\t\tthis.table.rowManager.element.removeEventListener(\"scroll\", this.blurEvent);\n\t\t\t\tthis.unsubscribe(\"cell-editing\", this.blurEvent);\n\n\t\t\t\tthis.blurEventsBound = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.childPopup){\n\t\t\t\tthis.childPopup.hide();\n\t\t\t}\n\t\t\t\n\t\t\tif(this.parent){\n\t\t\t\tthis.parent.childPopup = null;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.element.parentNode){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t\t\n\t\t\tthis.visible = false;\n\t\t\t\n\t\t\tif(this.blurCallback && !silent){\n\t\t\t\tthis.blurCallback();\n\t\t\t}\n\t\t\t\n\t\t\tthis.unsubscribe(\"table-destroy\", this.destroyBinding);\n\t\t}\n\t\t\n\t\treturn this;\n\t}\n\t\n\tchild(element){\n\t\tif(this.childPopup){\n\t\t\tthis.childPopup.hide();\n\t\t}\n\t\t\n\t\tthis.childPopup = new Popup(this.table, element, this);\n\t\t\n\t\treturn this.childPopup;\n\t}\n}","import CoreFeature from './CoreFeature.js';\nimport Popup from './tools/Popup.js';\n\nexport default class Module extends CoreFeature{\n\t\n\tconstructor(table, name){\n\t\tsuper(table);\n\t\t\n\t\tthis._handler = null;\n\t}\n\t\n\tinitialize(){\n\t\t// setup module when table is initialized, to be overridden in module\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t////// Options Registration ///////\n\t///////////////////////////////////\n\t\n\tregisterTableOption(key, value){\n\t\tthis.table.optionsList.register(key, value);\n\t}\n\t\n\tregisterColumnOption(key, value){\n\t\tthis.table.columnManager.optionsList.register(key, value);\n\t}\n\t\n\t///////////////////////////////////\n\t/// Public Function Registration ///\n\t///////////////////////////////////\n\t\n\tregisterTableFunction(name, func){\n\t\tif(typeof this.table[name] === \"undefined\"){\n\t\t\tthis.table[name] = (...args) => {\n\t\t\t\tthis.table.initGuard(name);\n\t\t\t\t\n\t\t\t\treturn func(...args);\n\t\t\t};\n\t\t}else{\n\t\t\tconsole.warn(\"Unable to bind table function, name already in use\", name);\n\t\t}\n\t}\n\t\n\tregisterComponentFunction(component, func, handler){\n\t\treturn this.table.componentFunctionBinder.bind(component, func, handler);\n\t}\n\t\n\t///////////////////////////////////\n\t////////// Data Pipeline //////////\n\t///////////////////////////////////\n\t\n\tregisterDataHandler(handler, priority){\n\t\tthis.table.rowManager.registerDataPipelineHandler(handler, priority);\n\t\tthis._handler = handler;\n\t}\n\t\n\tregisterDisplayHandler(handler, priority){\n\t\tthis.table.rowManager.registerDisplayPipelineHandler(handler, priority);\n\t\tthis._handler = handler;\n\t}\n\t\n\tdisplayRows(adjust){\n\t\tvar index = this.table.rowManager.displayRows.length - 1, \n\t\tlookupIndex;\n\t\t\n\t\tif(this._handler){\n\t\t\tlookupIndex = this.table.rowManager.displayPipeline.findIndex((item) => {\n\t\t\t\treturn item.handler === this._handler;\n\t\t\t});\n\n\t\t\tif(lookupIndex > -1){\n\t\t\t\tindex = lookupIndex;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(adjust){\n\t\t\tindex = index + adjust;\n\t\t}\n\n\t\tif(this._handler){\n\t\t\tif(index > -1){\n\t\t\t\treturn this.table.rowManager.getDisplayRows(index);\n\t\t\t}else{\n\t\t\t\treturn this.activeRows();\n\t\t\t}\n\t\t}\t\n\t}\n\t\n\tactiveRows(){\n\t\treturn this.table.rowManager.activeRows;\n\t}\n\t\n\trefreshData(renderInPosition, handler){\n\t\tif(!handler){\n\t\t\thandler = this._handler;\n\t\t}\n\t\t\n\t\tif(handler){\n\t\t\tthis.table.rowManager.refreshActiveData(handler, false, renderInPosition);\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t//////// Footer Management ////////\n\t///////////////////////////////////\n\t\n\tfooterAppend(element){\n\t\treturn this.table.footerManager.append(element);\n\t}\n\t\n\tfooterPrepend(element){\n\t\treturn this.table.footerManager.prepend(element);\n\t}\n\t\n\tfooterRemove(element){\n\t\treturn this.table.footerManager.remove(element);\n\t} \n\t\n\t///////////////////////////////////\n\t//////// Popups Management ////////\n\t///////////////////////////////////\n\t\n\tpopup(menuEl, menuContainer){\n\t\treturn new Popup(this.table, menuEl, menuContainer);\n\t}\n\t\n\t///////////////////////////////////\n\t//////// Alert Management ////////\n\t///////////////////////////////////\n\t\n\talert(content, type){\n\t\treturn this.table.alertManager.alert(content, type);\n\t}\n\t\n\tclearAlert(){\n\t\treturn this.table.alertManager.clear();\n\t}\n\t\n}","export default {\r\n\trownum:function(value, data, type, params, column, row){\r\n\t\treturn row.getPosition();\r\n\t}\r\n};","import Module from '../../core/Module.js';\nimport Helpers from '../../core/tools/Helpers.js';\n\nimport defaultAccessors from './defaults/accessors.js';\n\nexport default class Accessor extends Module{\n\t\n\tstatic moduleName = \"accessor\";\n\n\t//load defaults\n\tstatic accessors = defaultAccessors;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.allowedTypes = [\"\", \"data\", \"download\", \"clipboard\", \"print\", \"htmlOutput\"]; //list of accessor types\n\n\t\tthis.registerColumnOption(\"accessor\");\n\t\tthis.registerColumnOption(\"accessorParams\");\n\t\tthis.registerColumnOption(\"accessorData\");\n\t\tthis.registerColumnOption(\"accessorDataParams\");\n\t\tthis.registerColumnOption(\"accessorDownload\");\n\t\tthis.registerColumnOption(\"accessorDownloadParams\");\n\t\tthis.registerColumnOption(\"accessorClipboard\");\n\t\tthis.registerColumnOption(\"accessorClipboardParams\");\n\t\tthis.registerColumnOption(\"accessorPrint\");\n\t\tthis.registerColumnOption(\"accessorPrintParams\");\n\t\tthis.registerColumnOption(\"accessorHtmlOutput\");\n\t\tthis.registerColumnOption(\"accessorHtmlOutputParams\");\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"row-data-retrieve\", this.transformRow.bind(this));\n\t}\n\n\t//initialize column accessor\n\tinitializeColumn(column){\n\t\tvar match = false,\n\t\tconfig = {};\n\n\t\tthis.allowedTypes.forEach((type) => {\n\t\t\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\t\taccessor;\n\n\t\t\tif(column.definition[key]){\n\t\t\t\taccessor = this.lookupAccessor(column.definition[key]);\n\n\t\t\t\tif(accessor){\n\t\t\t\t\tmatch = true;\n\n\t\t\t\t\tconfig[key] = {\n\t\t\t\t\t\taccessor:accessor,\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {},\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(match){\n\t\t\tcolumn.modules.accessor = config;\n\t\t}\n\t}\n\n\tlookupAccessor(value){\n\t\tvar accessor = false;\n\n\t\t//set column accessor\n\t\tswitch(typeof value){\n\t\t\tcase \"string\":\n\t\t\t\tif(Accessor.accessors[value]){\n\t\t\t\t\taccessor = Accessor.accessors[value];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Accessor Error - No such accessor found, ignoring: \", value);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\taccessor = value;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn accessor;\n\t}\n\n\t//apply accessor to row\n\ttransformRow(row, type){\n\t\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\trowComponent = row.getComponent();\n\n\t\t//clone data object with deep copy to isolate internal data from returned result\n\t\tvar data = Helpers.deepClone(row.data || {});\n\n\t\tthis.table.columnManager.traverse(function(column){\n\t\t\tvar value, accessor, params, colComponent;\n\n\t\t\tif(column.modules.accessor){\n\n\t\t\t\taccessor = column.modules.accessor[key] || column.modules.accessor.accessor || false;\n\n\t\t\t\tif(accessor){\n\t\t\t\t\tvalue = column.getFieldValue(data);\n\n\t\t\t\t\tif(value != \"undefined\"){\n\t\t\t\t\t\tcolComponent = column.getComponent();\n\t\t\t\t\t\tparams = typeof accessor.params === \"function\" ? accessor.params(value, data, type, colComponent, rowComponent) : accessor.params;\n\t\t\t\t\t\tcolumn.setFieldValue(data, accessor.accessor(value, data, type, params, colComponent, rowComponent));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn data;\n\t}\n}","export default {\n\tmethod: \"GET\",\n};","function generateParamsList(data, prefix){\n\tvar output = [];\n\n\tprefix = prefix || \"\";\n\n\tif(Array.isArray(data)){\n\t\tdata.forEach((item, i) => {\n\t\t\toutput = output.concat(generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\n\t\t});\n\t}else if (typeof data === \"object\"){\n\t\tfor (var key in data){\n\t\t\toutput = output.concat(generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\n\t\t}\n\t}else{\n\t\toutput.push({key:prefix, value:data});\n\t}\n\n\treturn output;\n}\n\nfunction serializeParams(params){\n\tvar output = generateParamsList(params),\n\tencoded = [];\n\n\toutput.forEach(function(item){\n\t\tencoded.push(encodeURIComponent(item.key) + \"=\" + encodeURIComponent(item.value));\n\t});\n\n\treturn encoded.join(\"&\");\n}\n\nexport default function(url, config, params){\n\tif(url){\n\t\tif(params && Object.keys(params).length){\n\t\t\tif(!config.method || config.method.toLowerCase() == \"get\"){\n\t\t\t\tconfig.method = \"get\";\n\n\t\t\t\turl += (url.includes(\"?\") ? \"&\" : \"?\") + serializeParams(params);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn url;\n}","export default function(url, config, params){\n\tvar contentType;\n\n\treturn new Promise((resolve, reject) => {\n\t\t//set url\n\t\turl = this.urlGenerator.call(this.table, url, config, params);\n\n\t\t//set body content if not GET request\n\t\tif(config.method.toUpperCase() != \"GET\"){\n\t\t\tcontentType = typeof this.table.options.ajaxContentType === \"object\" ?  this.table.options.ajaxContentType : this.contentTypeFormatters[this.table.options.ajaxContentType];\n\t\t\tif(contentType){\n\n\t\t\t\tfor(var key in contentType.headers){\n\t\t\t\t\tif(!config.headers){\n\t\t\t\t\t\tconfig.headers = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif(typeof config.headers[key] === \"undefined\"){\n\t\t\t\t\t\tconfig.headers[key] = contentType.headers[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconfig.body = contentType.body.call(this, url, config, params);\n\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Ajax Error - Invalid ajaxContentType value:\", this.table.options.ajaxContentType);\n\t\t\t}\n\t\t}\n\n\t\tif(url){\n\t\t\t//configure headers\n\t\t\tif(typeof config.headers === \"undefined\"){\n\t\t\t\tconfig.headers = {};\n\t\t\t}\n\n\t\t\tif(typeof config.headers.Accept === \"undefined\"){\n\t\t\t\tconfig.headers.Accept = \"application/json\";\n\t\t\t}\n\n\t\t\tif(typeof config.headers[\"X-Requested-With\"] === \"undefined\"){\n\t\t\t\tconfig.headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\n\t\t\t}\n\n\t\t\tif(typeof config.mode === \"undefined\"){\n\t\t\t\tconfig.mode = \"cors\";\n\t\t\t}\n\n\t\t\tif(config.mode == \"cors\"){\n\t\t\t\tif(typeof config.headers[\"Origin\"] === \"undefined\"){\n\t\t\t\t\tconfig.headers[\"Origin\"] = window.location.origin;\n\t\t\t\t}\n        \n\t\t\t\tif(typeof config.credentials === \"undefined\"){\n\t\t\t\t\tconfig.credentials = 'same-origin';\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(typeof config.credentials === \"undefined\"){\n\t\t\t\t\tconfig.credentials = 'include';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//send request\n\t\t\tfetch(url, config)\n\t\t\t\t.then((response)=>{\n\t\t\t\t\tif(response.ok) {\n\t\t\t\t\t\tresponse.json()\n\t\t\t\t\t\t\t.then((data)=>{\n\t\t\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t\t\t}).catch((error)=>{\n\t\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t\t\tconsole.warn(\"Ajax Load Error - Invalid JSON returned\", error);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \" + response.status, response.statusText);\n\t\t\t\t\t\treject(response);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((error)=>{\n\t\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \", error);\n\t\t\t\t\treject(error);\n\t\t\t\t});\n\t\t}else{\n\t\t\tconsole.warn(\"Ajax Load Error - No URL Set\");\n\t\t\tresolve([]);\n\t\t}\n\t});\n}","function generateParamsList(data, prefix){\n\tvar output = [];\n\n\tprefix = prefix || \"\";\n\n\tif(Array.isArray(data)){\n\t\tdata.forEach((item, i) => {\n\t\t\toutput = output.concat(generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\n\t\t});\n\t}else if (typeof data === \"object\"){\n\t\tfor (var key in data){\n\t\t\toutput = output.concat(generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\n\t\t}\n\t}else{\n\t\toutput.push({key:prefix, value:data});\n\t}\n\n\treturn output;\n}\n\nexport default {\n\t\"json\":{\n\t\theaders:{\n\t\t\t'Content-Type': 'application/json',\n\t\t},\n\t\tbody:function(url, config, params){\n\t\t\treturn JSON.stringify(params);\n\t\t},\n\t},\n\t\"form\":{\n\t\theaders:{\n\t\t},\n\t\tbody:function(url, config, params){\n\n\t\t\tvar output = generateParamsList(params),\n\t\t\tform = new FormData();\n\n\t\t\toutput.forEach(function(item){\n\t\t\t\tform.append(item.key, item.value);\n\t\t\t});\n\n\t\t\treturn form;\n\t\t},\n\t},\n};","import Module from '../../core/Module.js';\n\nimport defaultConfig from './defaults/config.js';\nimport defaultURLGenerator from './defaults/urlGenerator.js';\nimport defaultLoaderPromise from './defaults/loaderPromise.js';\nimport defaultContentTypeFormatters from './defaults/contentTypeFormatters.js';\n\nexport default class Ajax extends Module{\n\n\tstatic moduleName = \"ajax\";\n\n\t//load defaults\n\tstatic defaultConfig = defaultConfig;\n\tstatic defaultURLGenerator = defaultURLGenerator;\n\tstatic defaultLoaderPromise = defaultLoaderPromise;\n\tstatic contentTypeFormatters = defaultContentTypeFormatters;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.config = {}; //hold config object for ajax request\n\t\tthis.url = \"\"; //request URL\n\t\tthis.urlGenerator = false;\n\t\tthis.params = false; //request parameters\n\t\t\n\t\tthis.loaderPromise = false;\n\t\t\n\t\tthis.registerTableOption(\"ajaxURL\", false); //url for ajax loading\n\t\tthis.registerTableOption(\"ajaxURLGenerator\", false);\n\t\tthis.registerTableOption(\"ajaxParams\", {});  //params for ajax loading\n\t\tthis.registerTableOption(\"ajaxConfig\", \"get\"); //ajax request type\n\t\tthis.registerTableOption(\"ajaxContentType\", \"form\"); //ajax request type\n\t\tthis.registerTableOption(\"ajaxRequestFunc\", false); //promise function\n\t\t\n\t\tthis.registerTableOption(\"ajaxRequesting\", function(){});\n\t\tthis.registerTableOption(\"ajaxResponse\", false);\n\t\t\n\t\tthis.contentTypeFormatters = Ajax.contentTypeFormatters;\n\t}\n\t\n\t//initialize setup options\n\tinitialize(){\n\t\tthis.loaderPromise = this.table.options.ajaxRequestFunc || Ajax.defaultLoaderPromise;\n\t\tthis.urlGenerator = this.table.options.ajaxURLGenerator || Ajax.defaultURLGenerator;\n\t\t\n\t\tif(this.table.options.ajaxURL){\n\t\t\tthis.setUrl(this.table.options.ajaxURL);\n\t\t}\n\n\n\t\tthis.setDefaultConfig(this.table.options.ajaxConfig);\n\t\t\n\t\tthis.registerTableFunction(\"getAjaxUrl\", this.getUrl.bind(this));\n\t\t\n\t\tthis.subscribe(\"data-loading\", this.requestDataCheck.bind(this));\n\t\tthis.subscribe(\"data-params\", this.requestParams.bind(this));\n\t\tthis.subscribe(\"data-load\", this.requestData.bind(this));\n\t}\n\t\n\trequestParams(data, config, silent, params){\n\t\tvar ajaxParams = this.table.options.ajaxParams;\n\t\t\n\t\tif(ajaxParams){\n\t\t\tif(typeof ajaxParams === \"function\"){\n\t\t\t\tajaxParams = ajaxParams.call(this.table);\n\t\t\t}\n\t\t\t\n\t\t\tparams = Object.assign(Object.assign({}, ajaxParams), params);\n\t\t}\t\t\n\t\t\n\t\treturn params;\n\t}\n\t\n\trequestDataCheck(data, params, config, silent){\n\t\treturn !!((!data && this.url) || typeof data === \"string\");\n\t}\n\t\n\trequestData(url, params, config, silent, previousData){\n\t\tvar ajaxConfig;\n\t\t\n\t\tif(!previousData && this.requestDataCheck(url)){\n\t\t\tif(url){\n\t\t\t\tthis.setUrl(url);\n\t\t\t}\n\t\t\t\n\t\t\tajaxConfig = this.generateConfig(config);\n\t\t\t\n\t\t\treturn this.sendRequest(this.url, params, ajaxConfig);\n\t\t}else{\n\t\t\treturn previousData;\n\t\t}\n\t}\n\t\n\tsetDefaultConfig(config = {}){\n\t\tthis.config = Object.assign({}, Ajax.defaultConfig);\n\n\t\tif(typeof config == \"string\"){\n\t\t\tthis.config.method = config;\n\t\t}else{\n\t\t\tObject.assign(this.config, config);\n\t\t}\n\t}\n\t\n\t//load config object\n\tgenerateConfig(config = {}){\n\t\tvar ajaxConfig = Object.assign({}, this.config);\n\t\t\n\t\tif(typeof config == \"string\"){\n\t\t\tajaxConfig.method = config;\n\t\t}else{\n\t\t\tObject.assign(ajaxConfig, config);\n\t\t}\n\t\t\n\t\treturn ajaxConfig;\n\t}\n\t\n\t//set request url\n\tsetUrl(url){\n\t\tthis.url = url;\n\t}\n\t\n\t//get request url\n\tgetUrl(){\n\t\treturn this.url;\n\t}\n\t\n\t//send ajax request\n\tsendRequest(url, params, config){\n\t\tif(this.table.options.ajaxRequesting.call(this.table, url, params) !== false){\n\t\t\treturn this.loaderPromise(url, config, params)\n\t\t\t\t.then((data)=>{\n\t\t\t\t\tif(this.table.options.ajaxResponse){\n\t\t\t\t\t\tdata = this.table.options.ajaxResponse.call(this.table, url, params, data);\n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\treturn data;\n\t\t\t\t});\n\t\t}else{\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n}","export default {\n\treplace:function(data){\n\t\treturn this.table.setData(data);\n\t},\n\tupdate:function(data){\n\t\treturn this.table.updateOrAddData(data);\n\t},\n\tinsert:function(data){\n\t\treturn this.table.addData(data);\n\t},\n};","export default {\n\ttable:function(clipboard){\n\t\tvar data = [],\n\t\theaderFindSuccess = true,\n\t\tcolumns = this.table.columnManager.columns,\n\t\tcolumnMap = [],\n\t\trows = [];\n\t\t\n\t\t//get data from clipboard into array of columns and rows.\n\t\tclipboard = clipboard.split(\"\\n\");\n\t\t\n\t\tclipboard.forEach(function(row){\n\t\t\tdata.push(row.split(\"\\t\"));\n\t\t});\n\t\t\n\t\tif(data.length && !(data.length === 1 && data[0].length < 2)){\n\t\t\t\n\t\t\t//check if headers are present by title\n\t\t\tdata[0].forEach(function(value){\n\t\t\t\tvar column = columns.find(function(column){\n\t\t\t\t\treturn value && column.definition.title && value.trim() && column.definition.title.trim() === value.trim();\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif(column){\n\t\t\t\t\tcolumnMap.push(column);\n\t\t\t\t}else{\n\t\t\t\t\theaderFindSuccess = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\t//check if column headers are present by field\n\t\t\tif(!headerFindSuccess){\n\t\t\t\theaderFindSuccess = true;\n\t\t\t\tcolumnMap = [];\n\t\t\t\t\n\t\t\t\tdata[0].forEach(function(value){\n\t\t\t\t\tvar column = columns.find(function(column){\n\t\t\t\t\t\treturn value && column.field && value.trim() && column.field.trim() === value.trim();\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif(column){\n\t\t\t\t\t\tcolumnMap.push(column);\n\t\t\t\t\t}else{\n\t\t\t\t\t\theaderFindSuccess = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif(!headerFindSuccess){\n\t\t\t\t\tcolumnMap = this.table.columnManager.columnsByIndex;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t//remove header row if found\n\t\t\tif(headerFindSuccess){\n\t\t\t\tdata.shift();\n\t\t\t}\n\t\t\t\n\t\t\tdata.forEach(function(item){\n\t\t\t\tvar row = {};\n\t\t\t\t\n\t\t\t\titem.forEach(function(value, i){\n\t\t\t\t\tif(columnMap[i]){\n\t\t\t\t\t\trow[columnMap[i].field] = value;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\trows.push(row);\n\t\t\t});\n\t\t\t\n\t\t\treturn rows;\n\t\t}else{\n\t\t\treturn false;\n\t\t}\n\t},\n};","export default {\r\n\tcopyToClipboard:[\"ctrl + 67\", \"meta + 67\"],\r\n};\r\n","export default {\r\n\tcopyToClipboard:function(e){\r\n\t\tif(!this.table.modules.edit.currentCell){\r\n\t\t\tif(this.table.modExists(\"clipboard\", true)){\r\n\t\t\t\tthis.table.modules.clipboard.copy(false, true);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n};\r\n","import bindings from './keybindings/bindings.js';\r\nimport actions from './keybindings/actions.js';\r\n\r\nexport default {\r\n\tkeybindings:{\r\n\t\tbindings:bindings,\r\n\t\tactions:actions\r\n\t},\r\n};","import Module from '../../core/Module.js';\n\nimport defaultPasteActions from './defaults/pasteActions.js';\nimport defaultPasteParsers from './defaults/pasteParsers.js';\nimport extensions from './extensions/extensions.js';\n\nexport default class Clipboard extends Module{\n\n\tstatic moduleName = \"clipboard\";\n\tstatic moduleExtensions = extensions;\n\n\t//load defaults\n\tstatic pasteActions = defaultPasteActions;\n\tstatic pasteParsers = defaultPasteParsers;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.mode = true;\n\t\tthis.pasteParser = function(){};\n\t\tthis.pasteAction = function(){};\n\t\tthis.customSelection = false;\n\t\tthis.rowRange = false;\n\t\tthis.blocked = true; //block copy actions not originating from this command\n\n\t\tthis.registerTableOption(\"clipboard\", false); //enable clipboard\n\t\tthis.registerTableOption(\"clipboardCopyStyled\", true); //formatted table data\n\t\tthis.registerTableOption(\"clipboardCopyConfig\", false); //clipboard config\n\t\tthis.registerTableOption(\"clipboardCopyFormatter\", false); //DEPRECATED - REMOVE in 5.0\n\t\tthis.registerTableOption(\"clipboardCopyRowRange\", \"active\"); //restrict clipboard to visible rows only\n\t\tthis.registerTableOption(\"clipboardPasteParser\", \"table\"); //convert pasted clipboard data to rows\n\t\tthis.registerTableOption(\"clipboardPasteAction\", \"insert\"); //how to insert pasted data into the table\n\n\t\tthis.registerColumnOption(\"clipboard\");\n\t\tthis.registerColumnOption(\"titleClipboard\");\n\t}\n\n\tinitialize(){\n\t\tthis.mode = this.table.options.clipboard;\n\n\t\tthis.rowRange = this.table.options.clipboardCopyRowRange;\n\n\t\tif(this.mode === true || this.mode === \"copy\"){\n\t\t\tthis.table.element.addEventListener(\"copy\", (e) => {\n\t\t\t\tvar plain, html, list;\n\n\t\t\t\tif(!this.blocked){\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tif(this.customSelection){\n\t\t\t\t\t\tplain = this.customSelection;\n\n\t\t\t\t\t\tif(this.table.options.clipboardCopyFormatter){\n\t\t\t\t\t\t\tplain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\n\t\t\t\t\t\tlist = this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig, this.table.options.clipboardCopyStyled, this.rowRange, \"clipboard\");\n\n\t\t\t\t\t\thtml = this.table.modules.export.generateHTMLTable(list);\n\t\t\t\t\t\tplain = html ? this.generatePlainContent(list) : \"\";\n\n\t\t\t\t\t\tif(this.table.options.clipboardCopyFormatter){\n\t\t\t\t\t\t\tplain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\n\t\t\t\t\t\t\thtml = this.table.options.clipboardCopyFormatter(\"html\", html);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (window.clipboardData && window.clipboardData.setData) {\n\t\t\t\t\t\twindow.clipboardData.setData('Text', plain);\n\t\t\t\t\t} else if (e.clipboardData && e.clipboardData.setData) {\n\t\t\t\t\t\te.clipboardData.setData('text/plain', plain);\n\t\t\t\t\t\tif(html){\n\t\t\t\t\t\t\te.clipboardData.setData('text/html', html);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.setData) {\n\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/plain', plain);\n\t\t\t\t\t\tif(html){\n\t\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/html', html);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.dispatchExternal(\"clipboardCopied\", plain, html);\n\n\t\t\t\t\tthis.reset();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif(this.mode === true || this.mode === \"paste\"){\n\t\t\tthis.table.element.addEventListener(\"paste\", (e) => {\n\t\t\t\tthis.paste(e);\n\t\t\t});\n\t\t}\n\n\t\tthis.setPasteParser(this.table.options.clipboardPasteParser);\n\t\tthis.setPasteAction(this.table.options.clipboardPasteAction);\n\n\t\tthis.registerTableFunction(\"copyToClipboard\", this.copy.bind(this));\n\t}\n\n\treset(){\n\t\tthis.blocked = true;\n\t\tthis.customSelection = false;\n\t}\n\n\tgeneratePlainContent (list) {\n\t\tvar output = [];\n\n\t\tlist.forEach((row) => {\n\t\t\tvar rowData = [];\n\n\t\t\trow.columns.forEach((col) => {\n\t\t\t\tvar value = \"\";\n\n\t\t\t\tif(col){\n\n\t\t\t\t\tif(row.type === \"group\"){\n\t\t\t\t\t\tcol.value = col.component.getKey();\n\t\t\t\t\t}\n\n\t\t\t\t\tif(col.value === null){\n\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t}else{\n\t\t\t\t\t\tswitch(typeof col.value){\n\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\tvalue = JSON.stringify(col.value);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tvalue = col.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\trowData.push(value);\n\t\t\t});\n\n\t\t\toutput.push(rowData.join(\"\\t\"));\n\t\t});\n\n\t\treturn output.join(\"\\n\");\n\t}\n\n\tcopy (range, internal) {\n\t\tvar sel, textRange;\n\t\tthis.blocked = false;\n\t\tthis.customSelection = false;\n\t\n\n\t\tif (this.mode === true || this.mode === \"copy\") {\n\n\t\t\tthis.rowRange = range || this.table.options.clipboardCopyRowRange;\n\n\t\t\tif (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\n\t\t\t\trange = document.createRange();\n\t\t\t\trange.selectNodeContents(this.table.element);\n\t\t\t\tsel = window.getSelection();\n\n\t\t\t\tif (sel.toString() && internal) {\n\t\t\t\t\tthis.customSelection = sel.toString();\n\t\t\t\t}\n\n\t\t\t\tsel.removeAllRanges();\n\t\t\t\tsel.addRange(range);\n\t\t\t} else if (typeof document.selection != \"undefined\" && typeof document.body.createTextRange != \"undefined\") {\n\t\t\t\ttextRange = document.body.createTextRange();\n\t\t\t\ttextRange.moveToElementText(this.table.element);\n\t\t\t\ttextRange.select();\n\t\t\t}\n\n\t\t\tdocument.execCommand('copy');\n\n\t\t\tif (sel) {\n\t\t\t\tsel.removeAllRanges();\n\t\t\t}\n\t\t}\n\t}\n\n\t//PASTE EVENT HANDLING\n\tsetPasteAction(action){\n\n\t\tswitch(typeof action){\n\t\t\tcase \"string\":\n\t\t\t\tthis.pasteAction = Clipboard.pasteActions[action];\n\n\t\t\t\tif(!this.pasteAction){\n\t\t\t\t\tconsole.warn(\"Clipboard Error - No such paste action found:\", action);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tthis.pasteAction = action;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetPasteParser(parser){\n\t\tswitch(typeof parser){\n\t\t\tcase \"string\":\n\t\t\t\tthis.pasteParser = Clipboard.pasteParsers[parser];\n\n\t\t\t\tif(!this.pasteParser){\n\t\t\t\t\tconsole.warn(\"Clipboard Error - No such paste parser found:\", parser);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tthis.pasteParser = parser;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tpaste(e){\n\t\tvar data, rowData, rows;\n\n\t\tif(this.checkPasteOrigin(e)){\n\n\t\t\tdata = this.getPasteData(e);\n\n\t\t\trowData = this.pasteParser.call(this, data);\n\n\t\t\tif(rowData){\n\t\t\t\te.preventDefault();\n\n\t\t\t\tif(this.table.modExists(\"mutator\")){\n\t\t\t\t\trowData = this.mutateData(rowData);\n\t\t\t\t}\n\n\t\t\t\trows = this.pasteAction.call(this, rowData);\n\n\t\t\t\tthis.dispatchExternal(\"clipboardPasted\", data, rowData, rows);\n\t\t\t}else{\n\t\t\t\tthis.dispatchExternal(\"clipboardPasteError\", data);\n\t\t\t}\n\t\t}\n\t}\n\n\tmutateData(data){\n\t\tvar output = [];\n\n\t\tif(Array.isArray(data)){\n\t\t\tdata.forEach((row) => {\n\t\t\t\toutput.push(this.table.modules.mutator.transformRow(row, \"clipboard\"));\n\t\t\t});\n\t\t}else{\n\t\t\toutput = data;\n\t\t}\n\n\t\treturn output;\n\t}\n\n\n\tcheckPasteOrigin(e){\n\t\tvar valid = true;\n\t\tvar blocked = this.confirm(\"clipboard-paste\", [e]);\n\n\t\tif(blocked || ![\"DIV\", \"SPAN\"].includes(e.target.tagName)){\n\t\t\tvalid = false;\n\t\t}\n\n\t\treturn valid;\n\t}\n\n\tgetPasteData(e){\n\t\tvar data;\n\n\t\tif (window.clipboardData && window.clipboardData.getData) {\n\t\t\tdata = window.clipboardData.getData('Text');\n\t\t} else if (e.clipboardData && e.clipboardData.getData) {\n\t\t\tdata = e.clipboardData.getData('text/plain');\n\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.getData) {\n\t\t\tdata = e.originalEvent.clipboardData.getData('text/plain');\n\t\t}\n\n\t\treturn data;\n\t}\n}","export default class CalcComponent{\n\tconstructor (row){\n\t\tthis._row = row;\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._row.table.componentFunctionBinder.handle(\"row\", target._row, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetData(transform){\n\t\treturn this._row.getData(transform);\n\t}\n\n\tgetElement(){\n\t\treturn this._row.getElement();\n\t}\n\n\tgetTable(){\n\t\treturn this._row.table;\n\t}\n\n\tgetCells(){\n\t\tvar cells = [];\n\n\t\tthis._row.getCells().forEach(function(cell){\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t}\n\n\tgetCell(column){\n\t\tvar cell = this._row.getCell(column);\n\t\treturn cell ? cell.getComponent() : false;\n\t}\n\n\t_getSelf(){\n\t\treturn this._row;\n\t}\n}","//public cell object\nexport default class CellComponent {\n\n\tconstructor (cell){\n\t\tthis._cell = cell;\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._cell.table.componentFunctionBinder.handle(\"cell\", target._cell, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetValue(){\n\t\treturn this._cell.getValue();\n\t}\n\n\tgetOldValue(){\n\t\treturn this._cell.getOldValue();\n\t}\n\n\tgetInitialValue(){\n\t\treturn this._cell.initialValue;\n\t}\n\n\tgetElement(){\n\t\treturn this._cell.getElement();\n\t}\n\n\tgetRow(){\n\t\treturn this._cell.row.getComponent();\n\t}\n\n\tgetData(transform){\n\t\treturn this._cell.row.getData(transform);\n\t}\n\tgetType(){\n\t\treturn \"cell\";\n\t}\n\tgetField(){\n\t\treturn this._cell.column.getField();\n\t}\n\n\tgetColumn(){\n\t\treturn this._cell.column.getComponent();\n\t}\n\n\tsetValue(value, mutate){\n\t\tif(typeof mutate == \"undefined\"){\n\t\t\tmutate = true;\n\t\t}\n\n\t\tthis._cell.setValue(value, mutate);\n\t}\n\n\trestoreOldValue(){\n\t\tthis._cell.setValueActual(this._cell.getOldValue());\n\t}\n\n\trestoreInitialValue(){\n\t\tthis._cell.setValueActual(this._cell.initialValue);\n\t}\n\n\tcheckHeight(){\n\t\tthis._cell.checkHeight();\n\t}\n\n\tgetTable(){\n\t\treturn this._cell.table;\n\t}\n\n\t_getSelf(){\n\t\treturn this._cell;\n\t}\n}","import CoreFeature from '../CoreFeature.js';\nimport CellComponent from './CellComponent.js';\n\nexport default class Cell extends CoreFeature{\n\tconstructor(column, row){\n\t\tsuper(column.table);\n\n\t\tthis.table = column.table;\n\t\tthis.column = column;\n\t\tthis.row = row;\n\t\tthis.element = null;\n\t\tthis.value = null;\n\t\tthis.initialValue;\n\t\tthis.oldValue = null;\n\t\tthis.modules = {};\n\n\t\tthis.height = null;\n\t\tthis.width = null;\n\t\tthis.minWidth = null;\n\n\t\tthis.component = null;\n\n\t\tthis.loaded = false; //track if the cell has been added to the DOM yet\n\n\t\tthis.build();\n\t}\n\n\t//////////////// Setup Functions /////////////////\n\t//generate element\n\tbuild(){\n\t\tthis.generateElement();\n\n\t\tthis.setWidth();\n\n\t\tthis._configureCell();\n\n\t\tthis.setValueActual(this.column.getFieldValue(this.row.data));\n\n\t\tthis.initialValue = this.value;\n\t}\n\n\tgenerateElement(){\n\t\tthis.element = document.createElement('div');\n\t\tthis.element.className = \"tabulator-cell\";\n\t\tthis.element.setAttribute(\"role\", \"gridcell\");\n\n\t\tif(this.column.isRowHeader){\n\t\t\tthis.element.classList.add(\"tabulator-row-header\");\n\t\t}\n\t}\n\n\t_configureCell(){\n\t\tvar element = this.element,\n\t\tfield = this.column.getField(),\n\t\tvertAligns = {\n\t\t\ttop:\"flex-start\",\n\t\t\tbottom:\"flex-end\",\n\t\t\tmiddle:\"center\",\n\t\t},\n\t\thozAligns = {\n\t\t\tleft:\"flex-start\",\n\t\t\tright:\"flex-end\",\n\t\t\tcenter:\"center\",\n\t\t};\n\n\t\t//set text alignment\n\t\telement.style.textAlign = this.column.hozAlign;\n\n\t\tif(this.column.vertAlign){\n\t\t\telement.style.display = \"inline-flex\";\n\n\t\t\telement.style.alignItems = vertAligns[this.column.vertAlign] || \"\";\n\n\t\t\tif(this.column.hozAlign){\n\t\t\t\telement.style.justifyContent = hozAligns[this.column.hozAlign] || \"\";\n\t\t\t}\n\t\t}\n\n\t\tif(field){\n\t\t\telement.setAttribute(\"tabulator-field\", field);\n\t\t}\n\n\t\t//add class to cell if needed\n\t\tif(this.column.definition.cssClass){\n\t\t\tvar classNames = this.column.definition.cssClass.split(\" \");\n\t\t\tclassNames.forEach((className) => {\n\t\t\t\telement.classList.add(className);\n\t\t\t});\n\t\t}\n\n\t\tthis.dispatch(\"cell-init\", this);\n\n\t\t//hide cell if not visible\n\t\tif(!this.column.visible){\n\t\t\tthis.hide();\n\t\t}\n\t}\n\n\t//generate cell contents\n\t_generateContents(){\n\t\tvar val;\n\n\t\tval = this.chain(\"cell-format\", this, null, () => {\n\t\t\treturn this.element.innerHTML = this.value;\n\t\t});\n\n\t\tswitch(typeof val){\n\t\t\tcase \"object\":\n\t\t\t\tif(val instanceof Node){\n\n\t\t\t\t\t//clear previous cell contents\n\t\t\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\n\t\t\t\t\tthis.element.appendChild(val);\n\t\t\t\t}else{\n\t\t\t\t\tthis.element.innerHTML = \"\";\n\n\t\t\t\t\tif(val != null){\n\t\t\t\t\t\tconsole.warn(\"Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", val);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"undefined\":\n\t\t\t\tthis.element.innerHTML = \"\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.element.innerHTML = val;\n\t\t}\n\t}\n\n\tcellRendered(){\n\t\tthis.dispatch(\"cell-rendered\", this);\n\t}\n\n\t//////////////////// Getters ////////////////////\n\tgetElement(containerOnly){\n\t\tif(!this.loaded){\n\t\t\tthis.loaded = true;\n\t\t\tif(!containerOnly){\n\t\t\t\tthis.layoutElement();\n\t\t\t}\n\t\t}\n\n\t\treturn this.element;\n\t}\n\n\tgetValue(){\n\t\treturn this.value;\n\t}\n\n\tgetOldValue(){\n\t\treturn this.oldValue;\n\t}\n\n\t//////////////////// Actions ////////////////////\n\tsetValue(value, mutate, force){\n\t\tvar changed = this.setValueProcessData(value, mutate, force);\n\n\t\tif(changed){\n\t\t\tthis.dispatch(\"cell-value-updated\", this);\n\n\t\t\tthis.cellRendered();\n\n\t\t\tif(this.column.definition.cellEdited){\n\t\t\t\tthis.column.definition.cellEdited.call(this.table, this.getComponent());\n\t\t\t}\n\n\t\t\tthis.dispatchExternal(\"cellEdited\", this.getComponent());\n\n\t\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n\t\t\t}\n\t\t}\n\t}\n\n\tsetValueProcessData(value, mutate, force){\n\t\tvar changed = false;\n\n\t\tif(this.value !== value || force){\n\n\t\t\tchanged = true;\n\n\t\t\tif(mutate){\n\t\t\t\tvalue = this.chain(\"cell-value-changing\", [this, value], null, value);\n\t\t\t}\n\t\t}\n\n\t\tthis.setValueActual(value);\n\n\t\tif(changed){\n\t\t\tthis.dispatch(\"cell-value-changed\", this);\n\t\t}\n\n\t\treturn changed;\n\t}\n\n\tsetValueActual(value){\n\t\tthis.oldValue = this.value;\n\n\t\tthis.value = value;\n\n\t\tthis.dispatch(\"cell-value-save-before\", this);\n\n\t\tthis.column.setFieldValue(this.row.data, value);\n\n\t\tthis.dispatch(\"cell-value-save-after\", this);\n\n\t\tif(this.loaded){\n\t\t\tthis.layoutElement();\n\t\t}\n\t}\n\n\tlayoutElement(){\n\t\tthis._generateContents();\n\n\t\tthis.dispatch(\"cell-layout\", this);\n\t}\n\n\tsetWidth(){\n\t\tthis.width = this.column.width;\n\t\tthis.element.style.width = this.column.widthStyled;\n\t}\n\n\tclearWidth(){\n\t\tthis.width = \"\";\n\t\tthis.element.style.width = \"\";\n\t}\n\n\tgetWidth(){\n\t\treturn this.width || this.element.offsetWidth;\n\t}\n\n\tsetMinWidth(){\n\t\tthis.minWidth = this.column.minWidth;\n\t\tthis.element.style.minWidth = this.column.minWidthStyled;\n\t}\n\n\tsetMaxWidth(){\n\t\tthis.maxWidth = this.column.maxWidth;\n\t\tthis.element.style.maxWidth = this.column.maxWidthStyled;\n\t}\n\n\tcheckHeight(){\n\t\t// var height = this.element.css(\"height\");\n\t\tthis.row.reinitializeHeight();\n\t}\n\n\tclearHeight(){\n\t\tthis.element.style.height = \"\";\n\t\tthis.height = null;\n\n\t\tthis.dispatch(\"cell-height\", this, \"\");\n\t}\n\n\tsetHeight(){\n\t\tthis.height = this.row.height;\n\t\tthis.element.style.height = this.row.heightStyled;\n\n\t\tthis.dispatch(\"cell-height\", this, this.row.heightStyled);\n\t}\n\n\tgetHeight(){\n\t\treturn this.height || this.element.offsetHeight;\n\t}\n\n\tshow(){\n\t\tthis.element.style.display = this.column.vertAlign ? \"inline-flex\" : \"\";\n\t}\n\n\thide(){\n\t\tthis.element.style.display = \"none\";\n\t}\n\n\tdelete(){\n\t\tthis.dispatch(\"cell-delete\", this);\n\n\t\tif(!this.table.rowManager.redrawBlock && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\n\t\tthis.element = false;\n\t\tthis.column.deleteCell(this);\n\t\tthis.row.deleteCell(this);\n\t\tthis.calcs = {};\n\t}\n\n\tgetIndex(){\n\t\treturn this.row.getCellIndex(this);\n\t}\n\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new CellComponent(this);\n\t\t}\n\n\t\treturn this.component;\n\t}\n}\n","//public column object\nexport default class ColumnComponent {\n\tconstructor (column){\n\t\tthis._column = column;\n\t\tthis.type = \"ColumnComponent\";\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._column.table.componentFunctionBinder.handle(\"column\", target._column, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetElement(){\n\t\treturn this._column.getElement();\n\t}\n\n\tgetDefinition(){\n\t\treturn this._column.getDefinition();\n\t}\n\n\tgetField(){\n\t\treturn this._column.getField();\n\t}\n\n\tgetTitleDownload() {\n\t\treturn this._column.getTitleDownload();\n\t}\n\n\tgetCells(){\n\t\tvar cells = [];\n\n\t\tthis._column.cells.forEach(function(cell){\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t}\n\n\tisVisible(){\n\t\treturn this._column.visible;\n\t}\n\n\tshow(){\n\t\tif(this._column.isGroup){\n\t\t\tthis._column.columns.forEach(function(column){\n\t\t\t\tcolumn.show();\n\t\t\t});\n\t\t}else{\n\t\t\tthis._column.show();\n\t\t}\n\t}\n\n\thide(){\n\t\tif(this._column.isGroup){\n\t\t\tthis._column.columns.forEach(function(column){\n\t\t\t\tcolumn.hide();\n\t\t\t});\n\t\t}else{\n\t\t\tthis._column.hide();\n\t\t}\n\t}\n\n\ttoggle(){\n\t\tif(this._column.visible){\n\t\t\tthis.hide();\n\t\t}else{\n\t\t\tthis.show();\n\t\t}\n\t}\n\n\tdelete(){\n\t\treturn this._column.delete();\n\t}\n\n\tgetSubColumns(){\n\t\tvar output = [];\n\n\t\tif(this._column.columns.length){\n\t\t\tthis._column.columns.forEach(function(column){\n\t\t\t\toutput.push(column.getComponent());\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tgetParentColumn(){\n\t\treturn this._column.getParentComponent();\n\t}\n\n\t_getSelf(){\n\t\treturn this._column;\n\t}\n\n\tscrollTo(position, ifVisible){\n\t\treturn this._column.table.columnManager.scrollToColumn(this._column, position, ifVisible);\n\t}\n\n\tgetTable(){\n\t\treturn this._column.table;\n\t}\n\n\tmove(to, after){\n\t\tvar toColumn = this._column.table.columnManager.findColumn(to);\n\n\t\tif(toColumn){\n\t\t\tthis._column.table.columnManager.moveColumn(this._column, toColumn, after);\n\t\t}else{\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\n\t\t}\n\t}\n\n\tgetNextColumn(){\n\t\tvar nextCol = this._column.nextColumn();\n\n\t\treturn nextCol ? nextCol.getComponent() : false;\n\t}\n\n\tgetPrevColumn(){\n\t\tvar prevCol = this._column.prevColumn();\n\n\t\treturn prevCol ? prevCol.getComponent() : false;\n\t}\n\n\tupdateDefinition(updates){\n\t\treturn this._column.updateDefinition(updates);\n\t}\n\n\tgetWidth(){\n\t\treturn this._column.getWidth();\n\t}\n\n\tsetWidth(width){\n\t\tvar result;\n\n\t\tif(width === true){\n\t\t\tresult =  this._column.reinitializeWidth(true);\n\t\t}else{\n\t\t\tresult =  this._column.setWidth(width);\n\t\t}\n\n\t\tthis._column.table.columnManager.rerenderColumns(true);\n\n\t\treturn result;\n\t}\n}","export default {\n\t\"title\": undefined,\n\t\"field\": undefined,\n\t\"columns\": undefined,\n\t\"visible\": undefined,\n\t\"hozAlign\": undefined,\n\t\"vertAlign\": undefined,\n\t\"width\": undefined,\n\t\"minWidth\": 40,\n\t\"maxWidth\": undefined,\n\t\"maxInitialWidth\": undefined,\n\t\"cssClass\": undefined,\n\t\"variableHeight\": undefined,\n\t\"headerVertical\": undefined,\n\t\"headerHozAlign\": undefined,\n\t\"headerWordWrap\": false,\n\t\"editableTitle\": undefined,\n};","import CoreFeature from '../CoreFeature.js';\nimport ColumnComponent from './ColumnComponent.js';\nimport defaultOptions from './defaults/options.js';\n\nimport Cell from '../cell/Cell.js';\n\nexport default class Column extends CoreFeature{\n\t\n\tstatic defaultOptionList = defaultOptions;\n\t\n\tconstructor(def, parent, rowHeader){\n\t\tsuper(parent.table);\n\t\t\n\t\tthis.definition = def; //column definition\n\t\tthis.parent = parent; //hold parent object\n\t\tthis.type = \"column\"; //type of element\n\t\tthis.columns = []; //child columns\n\t\tthis.cells = []; //cells bound to this column\n\t\tthis.isGroup = false;\n\t\tthis.isRowHeader = rowHeader;\n\t\tthis.element = this.createElement(); //column header element\n\t\tthis.contentElement = false;\n\t\tthis.titleHolderElement = false;\n\t\tthis.titleElement = false;\n\t\tthis.groupElement = this.createGroupElement(); //column group holder element\n\t\tthis.hozAlign = \"\"; //horizontal text alignment\n\t\tthis.vertAlign = \"\"; //vert text alignment\n\t\t\n\t\t//multi dimensional filed handling\n\t\tthis.field =\"\";\n\t\tthis.fieldStructure = \"\";\n\t\tthis.getFieldValue = \"\";\n\t\tthis.setFieldValue = \"\";\n\t\t\n\t\tthis.titleDownload = null;\n\t\tthis.titleFormatterRendered = false;\n\t\t\n\t\tthis.mapDefinitions();\n\t\t\n\t\tthis.setField(this.definition.field);\n\t\t\n\t\tthis.modules = {}; //hold module variables;\n\t\t\n\t\tthis.width = null; //column width\n\t\tthis.widthStyled = \"\"; //column width pre-styled to improve render efficiency\n\t\tthis.maxWidth = null; //column maximum width\n\t\tthis.maxWidthStyled = \"\"; //column maximum pre-styled to improve render efficiency\n\t\tthis.maxInitialWidth = null;\n\t\tthis.minWidth = null; //column minimum width\n\t\tthis.minWidthStyled = \"\"; //column minimum pre-styled to improve render efficiency\n\t\tthis.widthFixed = false; //user has specified a width for this column\n\t\t\n\t\tthis.visible = true; //default visible state\n\t\t\n\t\tthis.component = null;\n\t\t\n\t\t//initialize column\n\t\tif(this.definition.columns){\n\t\t\t\n\t\t\tthis.isGroup = true;\n\t\t\t\n\t\t\tthis.definition.columns.forEach((def, i) => {\n\t\t\t\tvar newCol = new Column(def, this);\n\t\t\t\tthis.attachColumn(newCol);\n\t\t\t});\n\t\t\t\n\t\t\tthis.checkColumnVisibility();\n\t\t}else{\n\t\t\tparent.registerColumnField(this);\n\t\t}\n\t\t\n\t\tthis._initialize();\n\t}\n\t\n\tcreateElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-col\");\n\t\tel.setAttribute(\"role\", \"columnheader\");\n\t\tel.setAttribute(\"aria-sort\", \"none\");\n\n\t\tif(this.isRowHeader){\n\t\t\tel.classList.add(\"tabulator-row-header\");\n\t\t}\n\t\t\n\t\tswitch(this.table.options.columnHeaderVertAlign){\n\t\t\tcase \"middle\":\n\t\t\t\tel.style.justifyContent = \"center\";\n\t\t\t\tbreak;\n\t\t\tcase \"bottom\":\n\t\t\t\tel.style.justifyContent = \"flex-end\";\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\treturn el;\n\t}\n\t\n\tcreateGroupElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-col-group-cols\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tmapDefinitions(){\n\t\tvar defaults = this.table.options.columnDefaults;\n\t\t\n\t\t//map columnDefaults onto column definitions\n\t\tif(defaults){\n\t\t\tfor(let key in defaults){\n\t\t\t\tif(typeof this.definition[key] === \"undefined\"){\n\t\t\t\t\tthis.definition[key] = defaults[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.definition = this.table.columnManager.optionsList.generate(Column.defaultOptionList, this.definition);\n\t}\n\t\n\tcheckDefinition(){\n\t\tObject.keys(this.definition).forEach((key) => {\n\t\t\tif(Column.defaultOptionList.indexOf(key) === -1){\n\t\t\t\tconsole.warn(\"Invalid column definition option in '\" + (this.field || this.definition.title) + \"' column:\", key);\n\t\t\t}\n\t\t});\n\t}\n\n\tsetField(field){\n\t\tthis.field = field;\n\t\tthis.fieldStructure = field ? (this.table.options.nestedFieldSeparator ? field.split(this.table.options.nestedFieldSeparator) : [field]) : [];\n\t\tthis.getFieldValue = this.fieldStructure.length > 1 ? this._getNestedData : this._getFlatData;\n\t\tthis.setFieldValue = this.fieldStructure.length > 1 ? this._setNestedData : this._setFlatData;\n\t}\n\t\n\t//register column position with column manager\n\tregisterColumnPosition(column){\n\t\tthis.parent.registerColumnPosition(column);\n\t}\n\t\n\t//register column position with column manager\n\tregisterColumnField(column){\n\t\tthis.parent.registerColumnField(column);\n\t}\n\t\n\t//trigger position registration\n\treRegisterPosition(){\n\t\tif(this.isGroup){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tcolumn.reRegisterPosition();\n\t\t\t});\n\t\t}else{\n\t\t\tthis.registerColumnPosition(this);\n\t\t}\n\t}\n\t\n\t//build header element\n\t_initialize(){\n\t\tvar def = this.definition;\n\t\t\n\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\t\t\n\t\tif(def.headerVertical){\n\t\t\tthis.element.classList.add(\"tabulator-col-vertical\");\n\t\t\t\n\t\t\tif(def.headerVertical === \"flip\"){\n\t\t\t\tthis.element.classList.add(\"tabulator-col-vertical-flip\");\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.contentElement = this._buildColumnHeaderContent();\n\t\t\n\t\tthis.element.appendChild(this.contentElement);\n\t\t\n\t\tif(this.isGroup){\n\t\t\tthis._buildGroupHeader();\n\t\t}else{\n\t\t\tthis._buildColumnHeader();\n\t\t}\n\t\t\n\t\tthis.dispatch(\"column-init\", this);\n\t}\n\t\n\t//build header element for header\n\t_buildColumnHeader(){\n\t\tvar def = this.definition;\n\t\t\n\t\tthis.dispatch(\"column-layout\", this);\n\t\t\n\t\t//set column visibility\n\t\tif(typeof def.visible != \"undefined\"){\n\t\t\tif(def.visible){\n\t\t\t\tthis.show(true);\n\t\t\t}else{\n\t\t\t\tthis.hide(true);\n\t\t\t}\n\t\t}\n\t\t\n\t\t//assign additional css classes to column header\n\t\tif(def.cssClass){\n\t\t\tvar classNames = def.cssClass.split(\" \");\n\t\t\tclassNames.forEach((className) => {\n\t\t\t\tthis.element.classList.add(className);\n\t\t\t});\n\t\t}\n\t\t\n\t\tif(def.field){\n\t\t\tthis.element.setAttribute(\"tabulator-field\", def.field);\n\t\t}\n\t\t\n\t\t//set min width if present\n\t\tthis.setMinWidth(parseInt(def.minWidth));\n\t\t\n\t\tif (def.maxInitialWidth) {\n\t\t\tthis.maxInitialWidth = parseInt(def.maxInitialWidth);\n\t\t}\n\t\t\n\t\tif(def.maxWidth){\n\t\t\tthis.setMaxWidth(parseInt(def.maxWidth));\n\t\t}\n\t\t\n\t\tthis.reinitializeWidth();\n\t\t\n\t\t//set horizontal text alignment\n\t\tthis.hozAlign = this.definition.hozAlign;\n\t\tthis.vertAlign = this.definition.vertAlign;\n\t\t\n\t\tthis.titleElement.style.textAlign = this.definition.headerHozAlign;\n\t}\n\t\n\t_buildColumnHeaderContent(){\n\t\tvar contentElement = document.createElement(\"div\");\n\t\tcontentElement.classList.add(\"tabulator-col-content\");\n\t\t\n\t\tthis.titleHolderElement = document.createElement(\"div\");\n\t\tthis.titleHolderElement.classList.add(\"tabulator-col-title-holder\");\n\t\t\n\t\tcontentElement.appendChild(this.titleHolderElement);\n\t\t\n\t\tthis.titleElement = this._buildColumnHeaderTitle();\n\t\t\n\t\tthis.titleHolderElement.appendChild(this.titleElement);\n\t\t\n\t\treturn contentElement;\n\t}\n\t\n\t//build title element of column\n\t_buildColumnHeaderTitle(){\n\t\tvar def = this.definition;\n\t\t\n\t\tvar titleHolderElement = document.createElement(\"div\");\n\t\ttitleHolderElement.classList.add(\"tabulator-col-title\");\n\t\t\n\t\tif(def.headerWordWrap){\n\t\t\ttitleHolderElement.classList.add(\"tabulator-col-title-wrap\");\n\t\t}\n\t\t\n\t\tif(def.editableTitle){\n\t\t\tvar titleElement = document.createElement(\"input\");\n\t\t\ttitleElement.classList.add(\"tabulator-title-editor\");\n\t\t\t\n\t\t\ttitleElement.addEventListener(\"click\", (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\ttitleElement.focus();\n\t\t\t});\n\t\t\t\n\t\t\ttitleElement.addEventListener(\"mousedown\", (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t\t\n\t\t\ttitleElement.addEventListener(\"change\", () => {\n\t\t\t\tdef.title = titleElement.value;\n\t\t\t\tthis.dispatchExternal(\"columnTitleChanged\", this.getComponent());\n\t\t\t});\n\t\t\t\n\t\t\ttitleHolderElement.appendChild(titleElement);\n\t\t\t\n\t\t\tif(def.field){\n\t\t\t\tthis.langBind(\"columns|\" + def.field, (text) => {\n\t\t\t\t\ttitleElement.value = text || (def.title || \"&nbsp;\");\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\ttitleElement.value  = def.title || \"&nbsp;\";\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\tif(def.field){\n\t\t\t\tthis.langBind(\"columns|\" + def.field, (text) => {\n\t\t\t\t\tthis._formatColumnHeaderTitle(titleHolderElement, text || (def.title || \"&nbsp;\"));\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tthis._formatColumnHeaderTitle(titleHolderElement, def.title || \"&nbsp;\");\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn titleHolderElement;\n\t}\n\t\n\t_formatColumnHeaderTitle(el, title){\n\t\tvar contents = this.chain(\"column-format\", [this, title, el], null, () => {\n\t\t\treturn title;\n\t\t});\n\t\t\n\t\tswitch(typeof contents){\n\t\t\tcase \"object\":\n\t\t\t\tif(contents instanceof Node){\n\t\t\t\t\tel.appendChild(contents);\n\t\t\t\t}else{\n\t\t\t\t\tel.innerHTML = \"\";\n\t\t\t\t\tconsole.warn(\"Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", contents);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"undefined\":\n\t\t\t\tel.innerHTML = \"\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tel.innerHTML = contents;\n\t\t}\n\t}\n\t\n\t//build header element for column group\n\t_buildGroupHeader(){\n\t\tthis.element.classList.add(\"tabulator-col-group\");\n\t\tthis.element.setAttribute(\"role\", \"columngroup\");\n\t\tthis.element.setAttribute(\"aria-title\", this.definition.title);\n\t\t\n\t\t//asign additional css classes to column header\n\t\tif(this.definition.cssClass){\n\t\t\tvar classNames = this.definition.cssClass.split(\" \");\n\t\t\tclassNames.forEach((className) => {\n\t\t\t\tthis.element.classList.add(className);\n\t\t\t});\n\t\t}\n\t\t\n\t\tthis.titleElement.style.textAlign = this.definition.headerHozAlign;\n\t\t\n\t\tthis.element.appendChild(this.groupElement);\n\t}\n\t\n\t//flat field lookup\n\t_getFlatData(data){\n\t\treturn data[this.field];\n\t}\n\t\n\t//nested field lookup\n\t_getNestedData(data){\n\t\tvar dataObj = data,\n\t\tstructure = this.fieldStructure,\n\t\tlength = structure.length,\n\t\toutput;\n\t\t\n\t\tfor(let i = 0; i < length; i++){\n\t\t\t\n\t\t\tdataObj = dataObj[structure[i]];\n\t\t\t\n\t\t\toutput = dataObj;\n\t\t\t\n\t\t\tif(!dataObj){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\t//flat field set\n\t_setFlatData(data, value){\n\t\tif(this.field){\n\t\t\tdata[this.field] = value;\n\t\t}\n\t}\n\t\n\t//nested field set\n\t_setNestedData(data, value){\n\t\tvar dataObj = data,\n\t\tstructure = this.fieldStructure,\n\t\tlength = structure.length;\n\t\t\n\t\tfor(let i = 0; i < length; i++){\n\t\t\t\n\t\t\tif(i == length -1){\n\t\t\t\tdataObj[structure[i]] = value;\n\t\t\t}else{\n\t\t\t\tif(!dataObj[structure[i]]){\n\t\t\t\t\tif(typeof value !== \"undefined\"){\n\t\t\t\t\t\tdataObj[structure[i]] = {};\n\t\t\t\t\t}else{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tdataObj = dataObj[structure[i]];\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//attach column to this group\n\tattachColumn(column){\n\t\tif(this.groupElement){\n\t\t\tthis.columns.push(column);\n\t\t\tthis.groupElement.appendChild(column.getElement());\n\t\t\t\n\t\t\tcolumn.columnRendered();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Warning - Column being attached to another column instead of column group\");\n\t\t}\n\t}\n\t\n\t//vertically align header in column\n\tverticalAlign(alignment, height){\n\t\t\n\t\t//calculate height of column header and group holder element\n\t\tvar parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : (height || this.parent.getHeadersElement().clientHeight);\n\t\t// var parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : this.parent.getHeadersElement().clientHeight;\n\t\t\n\t\tthis.element.style.height = parentHeight + \"px\";\n\t\t\n\t\tthis.dispatch(\"column-height\", this, this.element.style.height);\n\t\t\n\t\tif(this.isGroup){\n\t\t\tthis.groupElement.style.minHeight = (parentHeight - this.contentElement.offsetHeight) + \"px\";\n\t\t}\n\t\t\n\t\t//vertically align cell contents\n\t\t// if(!this.isGroup && alignment !== \"top\"){\n\t\t// \tif(alignment === \"bottom\"){\n\t\t// \t\tthis.element.style.paddingTop = (this.element.clientHeight - this.contentElement.offsetHeight) + \"px\";\n\t\t// \t}else{\n\t\t// \t\tthis.element.style.paddingTop = ((this.element.clientHeight - this.contentElement.offsetHeight) / 2) + \"px\";\n\t\t// \t}\n\t\t// }\n\t\t\n\t\tthis.columns.forEach(function(column){\n\t\t\tcolumn.verticalAlign(alignment);\n\t\t});\n\t}\n\t\n\t//clear vertical alignment\n\tclearVerticalAlign(){\n\t\tthis.element.style.paddingTop = \"\";\n\t\tthis.element.style.height = \"\";\n\t\tthis.element.style.minHeight = \"\";\n\t\tthis.groupElement.style.minHeight = \"\";\n\t\t\n\t\tthis.columns.forEach(function(column){\n\t\t\tcolumn.clearVerticalAlign();\n\t\t});\n\t\t\n\t\tthis.dispatch(\"column-height\", this, \"\");\n\t}\n\t\n\t//// Retrieve Column Information ////\n\t//return column header element\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\t\n\t//return column group element\n\tgetGroupElement(){\n\t\treturn this.groupElement;\n\t}\n\t\n\t//return field name\n\tgetField(){\n\t\treturn this.field;\n\t}\n\t\n\tgetTitleDownload() {\n\t\treturn this.titleDownload;\n\t}\n\t\n\t//return the first column in a group\n\tgetFirstColumn(){\n\t\tif(!this.isGroup){\n\t\t\treturn this;\n\t\t}else{\n\t\t\tif(this.columns.length){\n\t\t\t\treturn this.columns[0].getFirstColumn();\n\t\t\t}else{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//return the last column in a group\n\tgetLastColumn(){\n\t\tif(!this.isGroup){\n\t\t\treturn this;\n\t\t}else{\n\t\t\tif(this.columns.length){\n\t\t\t\treturn this.columns[this.columns.length -1].getLastColumn();\n\t\t\t}else{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//return all columns in a group\n\tgetColumns(traverse){\n\t\tvar columns = [];\n\t\t\n\t\tif(traverse){\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tcolumns.push(column);\n\t\t\t\t\n\t\t\t\tcolumns = columns.concat(column.getColumns(true));\n\t\t\t});\n\t\t}else{\n\t\t\tcolumns = this.columns;\n\t\t}\n\t\t\n\t\treturn columns;\n\t}\n\t\n\t//return all columns in a group\n\tgetCells(){\n\t\treturn this.cells;\n\t}\n\t\n\t//retrieve the top column in a group of columns\n\tgetTopColumn(){\n\t\tif(this.parent.isGroup){\n\t\t\treturn this.parent.getTopColumn();\n\t\t}else{\n\t\t\treturn this;\n\t\t}\n\t}\n\t\n\t//return column definition object\n\tgetDefinition(updateBranches){\n\t\tvar colDefs = [];\n\t\t\n\t\tif(this.isGroup && updateBranches){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tcolDefs.push(column.getDefinition(true));\n\t\t\t});\n\t\t\t\n\t\t\tthis.definition.columns = colDefs;\n\t\t}\n\t\t\n\t\treturn this.definition;\n\t}\n\t\n\t//////////////////// Actions ////////////////////\n\tcheckColumnVisibility(){\n\t\tvar visible = false;\n\t\t\n\t\tthis.columns.forEach(function(column){\n\t\t\tif(column.visible){\n\t\t\t\tvisible = true;\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(visible){\n\t\t\tthis.show();\n\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), false);\n\t\t}else{\n\t\t\tthis.hide();\n\t\t}\n\t}\n\t\n\t//show column\n\tshow(silent, responsiveToggle){\n\t\tif(!this.visible){\n\t\t\tthis.visible = true;\n\t\t\t\n\t\t\tthis.element.style.display = \"\";\n\t\t\t\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.checkColumnVisibility();\n\t\t\t}\n\t\t\t\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tcell.show();\n\t\t\t});\n\t\t\t\n\t\t\tif(!this.isGroup && this.width === null){\n\t\t\t\tthis.reinitializeWidth();\n\t\t\t}\n\t\t\t\n\t\t\tthis.table.columnManager.verticalAlignHeaders();\n\t\t\t\n\t\t\tthis.dispatch(\"column-show\", this, responsiveToggle);\n\t\t\t\n\t\t\tif(!silent){\n\t\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), true);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\t\t\t\n\t\t\tif(!this.silent){\n\t\t\t\tthis.table.columnManager.rerenderColumns();\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//hide column\n\thide(silent, responsiveToggle){\n\t\tif(this.visible){\n\t\t\tthis.visible = false;\n\t\t\t\n\t\t\tthis.element.style.display = \"none\";\n\t\t\t\n\t\t\tthis.table.columnManager.verticalAlignHeaders();\n\t\t\t\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.checkColumnVisibility();\n\t\t\t}\n\t\t\t\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tcell.hide();\n\t\t\t});\n\t\t\t\n\t\t\tthis.dispatch(\"column-hide\", this, responsiveToggle);\n\t\t\t\n\t\t\tif(!silent){\n\t\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), false);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\t\t\t\n\t\t\tif(!this.silent){\n\t\t\t\tthis.table.columnManager.rerenderColumns();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tmatchChildWidths(){\n\t\tvar childWidth = 0;\n\t\t\n\t\tif(this.contentElement && this.columns.length){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tif(column.visible){\n\t\t\t\t\tchildWidth += column.getWidth();\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tthis.contentElement.style.maxWidth = (childWidth - 1) + \"px\";\n\t\t\t\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tremoveChild(child){\n\t\tvar index = this.columns.indexOf(child);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.columns.splice(index, 1);\n\t\t}\n\t\t\n\t\tif(!this.columns.length){\n\t\t\tthis.delete();\n\t\t}\n\t}\n\t\n\tsetWidth(width){\n\t\tthis.widthFixed = true;\n\t\tthis.setWidthActual(width);\n\t}\n\t\n\tsetWidthActual(width){\n\t\tif(isNaN(width)){\n\t\t\twidth = Math.floor((this.table.element.clientWidth/100) * parseInt(width));\n\t\t}\n\t\t\n\t\twidth = Math.max(this.minWidth, width);\n\t\t\n\t\tif(this.maxWidth){\n\t\t\twidth = Math.min(this.maxWidth, width);\n\t\t}\n\t\t\n\t\tthis.width = width;\n\t\tthis.widthStyled = width ? width + \"px\" : \"\";\n\t\t\n\t\tthis.element.style.width = this.widthStyled;\n\t\t\n\t\tif(!this.isGroup){\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tcell.setWidth();\n\t\t\t});\n\t\t}\n\t\t\n\t\tif(this.parent.isGroup){\n\t\t\tthis.parent.matchChildWidths();\n\t\t}\n\t\t\n\t\tthis.dispatch(\"column-width\", this);\n\t\t\n\t\tif(this.subscribedExternal(\"columnWidth\")){\n\t\t\tthis.dispatchExternal(\"columnWidth\", this.getComponent());\n\t\t}\n\t}\n\t\n\tcheckCellHeights(){\n\t\tvar rows = [];\n\t\t\n\t\tthis.cells.forEach(function(cell){\n\t\t\tif(cell.row.heightInitialized){\n\t\t\t\tif(cell.row.getElement().offsetParent !== null){\n\t\t\t\t\trows.push(cell.row);\n\t\t\t\t\tcell.row.clearCellHeight();\n\t\t\t\t}else{\n\t\t\t\t\tcell.row.heightInitialized = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\trows.forEach(function(row){\n\t\t\trow.calcHeight();\n\t\t});\n\t\t\n\t\trows.forEach(function(row){\n\t\t\trow.setCellHeight();\n\t\t});\n\t}\n\t\n\tgetWidth(){\n\t\tvar width = 0;\n\t\t\n\t\tif(this.isGroup){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tif(column.visible){\n\t\t\t\t\twidth += column.getWidth();\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\twidth = this.width;\n\t\t}\n\t\t\n\t\treturn width;\n\t}\n\t\n\tgetLeftOffset(){\n\t\tvar offset = this.element.offsetLeft;\n\t\t\n\t\tif(this.parent.isGroup){\n\t\t\toffset += this.parent.getLeftOffset();\n\t\t}\n\t\t\n\t\treturn offset;\n\t}\n\t\n\tgetHeight(){\n\t\treturn Math.ceil(this.element.getBoundingClientRect().height);\n\t}\n\t\n\tsetMinWidth(minWidth){\n\t\tif(this.maxWidth && minWidth > this.maxWidth){\n\t\t\tminWidth = this.maxWidth;\n\t\t\t\n\t\t\tconsole.warn(\"the minWidth (\"+ minWidth + \"px) for column '\" + this.field + \"' cannot be bigger that its maxWidth (\"+ this.maxWidthStyled + \")\");\n\t\t}\n\t\t\n\t\tthis.minWidth = minWidth;\n\t\tthis.minWidthStyled = minWidth ? minWidth + \"px\" : \"\";\n\t\t\n\t\tthis.element.style.minWidth = this.minWidthStyled;\n\t\t\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.setMinWidth();\n\t\t});\n\t}\n\t\n\tsetMaxWidth(maxWidth){\n\t\tif(this.minWidth && maxWidth < this.minWidth){\n\t\t\tmaxWidth = this.minWidth;\n\t\t\t\n\t\t\tconsole.warn(\"the maxWidth (\"+ maxWidth + \"px) for column '\" + this.field + \"' cannot be smaller that its minWidth (\"+ this.minWidthStyled + \")\");\n\t\t}\n\t\t\n\t\tthis.maxWidth = maxWidth;\n\t\tthis.maxWidthStyled = maxWidth ? maxWidth + \"px\" : \"\";\n\t\t\n\t\tthis.element.style.maxWidth = this.maxWidthStyled;\n\t\t\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.setMaxWidth();\n\t\t});\n\t}\n\t\n\tdelete(){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif(this.isGroup){\n\t\t\t\tthis.columns.forEach(function(column){\n\t\t\t\t\tcolumn.delete();\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"column-delete\", this);\n\t\t\t\n\t\t\tvar cellCount = this.cells.length;\n\t\t\t\n\t\t\tfor(let i = 0; i < cellCount; i++){\n\t\t\t\tthis.cells[0].delete();\n\t\t\t}\n\t\t\t\n\t\t\tif(this.element.parentNode){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t\t\n\t\t\tthis.element = false;\n\t\t\tthis.contentElement = false;\n\t\t\tthis.titleElement = false;\n\t\t\tthis.groupElement = false;\n\t\t\t\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.removeChild(this);\n\t\t\t}\n\t\t\t\n\t\t\tthis.table.columnManager.deregisterColumn(this);\n\t\t\t\n\t\t\tthis.table.columnManager.rerenderColumns(true);\n\t\t\t\n\t\t\tthis.dispatch(\"column-deleted\", this);\n\t\t\t\n\t\t\tresolve();\n\t\t});\n\t}\n\t\n\tcolumnRendered(){\n\t\tif(this.titleFormatterRendered){\n\t\t\tthis.titleFormatterRendered();\n\t\t}\n\t\t\n\t\tthis.dispatch(\"column-rendered\", this);\n\t}\n\t\n\t//////////////// Cell Management /////////////////\n\t//generate cell for this column\n\tgenerateCell(row){\n\t\tvar cell = new Cell(this, row);\n\t\t\n\t\tthis.cells.push(cell);\n\t\t\n\t\treturn cell;\n\t}\n\t\n\tnextColumn(){\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\n\t\treturn index > -1 ? this._nextVisibleColumn(index + 1) : false;\n\t}\n\t\n\t_nextVisibleColumn(index){\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\n\t\treturn !column || column.visible ? column : this._nextVisibleColumn(index + 1);\n\t}\n\t\n\tprevColumn(){\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\n\t\treturn index > -1 ? this._prevVisibleColumn(index - 1) : false;\n\t}\n\t\n\t_prevVisibleColumn(index){\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\n\t\treturn !column || column.visible ? column : this._prevVisibleColumn(index - 1);\n\t}\n\t\n\treinitializeWidth(force){\n\t\tthis.widthFixed = false;\n\t\t\n\t\t//set width if present\n\t\tif(typeof this.definition.width !== \"undefined\" && !force){\n\t\t\t// maxInitialWidth ignored here as width specified\n\t\t\tthis.setWidth(this.definition.width);\n\t\t}\n\t\t\n\t\tthis.dispatch(\"column-width-fit-before\", this);\n\t\t\n\t\tthis.fitToData(force);\n\t\t\n\t\tthis.dispatch(\"column-width-fit-after\", this);\n\t}\n\t\n\t//set column width to maximum cell width for non group columns\n\tfitToData(force){\n\t\tif(this.isGroup){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif(!this.widthFixed){\n\t\t\tthis.element.style.width = \"\";\n\t\t\t\n\t\t\tthis.cells.forEach((cell) => {\n\t\t\t\tcell.clearWidth();\n\t\t\t});\n\t\t}\n\t\t\n\t\tvar maxWidth = this.element.offsetWidth;\n\t\t\n\t\tif(!this.width || !this.widthFixed){\n\t\t\tthis.cells.forEach((cell) => {\n\t\t\t\tvar width = cell.getWidth();\n\t\t\t\t\n\t\t\t\tif(width > maxWidth){\n\t\t\t\t\tmaxWidth = width;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(maxWidth){\n\t\t\t\tvar setTo = maxWidth + 1;\n\t\t\t\tif (this.maxInitialWidth && !force) {\n\t\t\t\t\tsetTo = Math.min(setTo, this.maxInitialWidth);\n\t\t\t\t}\n\t\t\t\tthis.setWidthActual(setTo);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tupdateDefinition(updates){\n\t\tvar definition;\n\t\t\n\t\tif(!this.isGroup){\n\t\t\tif(!this.parent.isGroup){\n\t\t\t\tdefinition = Object.assign({}, this.getDefinition());\n\t\t\t\tdefinition = Object.assign(definition, updates);\n\t\t\t\t\n\t\t\t\treturn this.table.columnManager.addColumn(definition, false, this)\n\t\t\t\t\t.then((column) => {\n\t\t\t\t\t\n\t\t\t\t\t\tif(definition.field == this.field){\n\t\t\t\t\t\t\tthis.field = false; //clear field name to prevent deletion of duplicate column from arrays\n\t\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\treturn this.delete()\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconsole.error(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\n\t\t\t\treturn Promise.reject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.error(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\n\t\t\treturn Promise.reject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\n\t\t}\n\t}\n\t\n\tdeleteCell(cell){\n\t\tvar index = this.cells.indexOf(cell);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.cells.splice(index, 1);\n\t\t}\n\t}\n\t\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new ColumnComponent(this);\n\t\t}\n\t\t\n\t\treturn this.component;\n\t}\n\t\n\tgetPosition(){\n\t\treturn this.table.columnManager.getVisibleColumnsByIndex().indexOf(this) + 1;\n\t}\n\t\n\tgetParentComponent(){\n\t\treturn this.parent instanceof Column ? this.parent.getComponent() : false;\n\t}\n}","//public row object\nexport default class RowComponent {\n\n\tconstructor (row){\n\t\tthis._row = row;\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._row.table.componentFunctionBinder.handle(\"row\", target._row, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetData(transform){\n\t\treturn this._row.getData(transform);\n\t}\n\n\tgetElement(){\n\t\treturn this._row.getElement();\n\t}\n\n\tgetCells(){\n\t\tvar cells = [];\n\n\t\tthis._row.getCells().forEach(function(cell){\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t}\n\n\tgetCell(column){\n\t\tvar cell = this._row.getCell(column);\n\t\treturn cell ? cell.getComponent() : false;\n\t}\n\n\tgetIndex(){\n\t\treturn this._row.getData(\"data\")[this._row.table.options.index];\n\t}\n\n\tgetPosition(){\n\t\treturn this._row.getPosition();\n\t}\n\n\twatchPosition(callback){\n\t\treturn this._row.watchPosition(callback);\n\t}\n\n\tdelete(){\n\t\treturn this._row.delete();\n\t}\n\n\tscrollTo(position, ifVisible){\n\t\treturn this._row.table.rowManager.scrollToRow(this._row, position, ifVisible);\n\t}\n\n\tmove(to, after){\n\t\tthis._row.moveToRow(to, after);\n\t}\n\n\tupdate(data){\n\t\treturn this._row.updateData(data);\n\t}\n\n\tnormalizeHeight(){\n\t\tthis._row.normalizeHeight(true);\n\t}\n\n\t_getSelf(){\n\t\treturn this._row;\n\t}\n\n\treformat(){\n\t\treturn this._row.reinitialize();\n\t}\n\n\tgetTable(){\n\t\treturn this._row.table;\n\t}\n\n\tgetNextRow(){\n\t\tvar row = this._row.nextRow();\n\t\treturn row ? row.getComponent() : row;\n\t}\n\n\tgetPrevRow(){\n\t\tvar row = this._row.prevRow();\n\t\treturn row ? row.getComponent() : row;\n\t}\n}","import CoreFeature from '../CoreFeature.js';\nimport RowComponent from './RowComponent.js';\nimport Helpers from '../tools/Helpers.js';\n\nexport default class Row extends CoreFeature{\n\tconstructor (data, parent, type = \"row\"){\n\t\tsuper(parent.table);\n\t\t\n\t\tthis.parent = parent;\n\t\tthis.data = {};\n\t\tthis.type = type; //type of element\n\t\tthis.element = false;\n\t\tthis.modules = {}; //hold module variables;\n\t\tthis.cells = [];\n\t\tthis.height = 0; //hold element height\n\t\tthis.heightStyled = \"\"; //hold element height pre-styled to improve render efficiency\n\t\tthis.manualHeight = false; //user has manually set row height\n\t\tthis.outerHeight = 0; //hold elements outer height\n\t\tthis.initialized = false; //element has been rendered\n\t\tthis.heightInitialized = false; //element has resized cells to fit\n\t\tthis.position = 0; //store position of element in row list\n\t\tthis.positionWatchers = [];\n\t\t\n\t\tthis.component = null;\n\t\t\n\t\tthis.created = false;\n\t\t\n\t\tthis.setData(data);\n\t}\n\t\n\tcreate(){\n\t\tif(!this.created){\n\t\t\tthis.created = true;\n\t\t\tthis.generateElement();\n\t\t}\n\t}\n\t\n\tcreateElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-row\");\n\t\tel.setAttribute(\"role\", \"row\");\n\t\t\n\t\tthis.element = el;\n\t}\n\t\n\tgetElement(){\n\t\tthis.create();\n\t\treturn this.element;\n\t}\n\t\n\tdetachElement(){\n\t\tif (this.element && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\t}\n\t\n\tgenerateElement(){\n\t\tthis.createElement();\n\t\tthis.dispatch(\"row-init\", this);\n\t}\n\t\n\tgenerateCells(){\n\t\tthis.cells = this.table.columnManager.generateCells(this);\n\t}\n\t\n\t//functions to setup on first render\n\tinitialize(force, inFragment){\n\t\tthis.create();\n\t\t\n\t\tif(!this.initialized || force){\n\t\t\t\n\t\t\tthis.deleteCells();\n\t\t\t\n\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\t\t\t\n\t\t\tthis.dispatch(\"row-layout-before\", this);\n\t\t\t\n\t\t\tthis.generateCells();\n\t\t\t\n\t\t\tthis.initialized = true;\n\t\t\t\n\t\t\tthis.table.columnManager.renderer.renderRowCells(this, inFragment);\n\t\t\t\n\t\t\tif(force){\n\t\t\t\tthis.normalizeHeight();\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-layout\", this);\n\t\t\t\n\t\t\tif(this.table.options.rowFormatter){\n\t\t\t\tthis.table.options.rowFormatter(this.getComponent());\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-layout-after\", this);\n\t\t}else{\n\t\t\tthis.table.columnManager.renderer.rerenderRowCells(this, inFragment);\n\t\t}\n\t}\n\n\trendered(){\n\t\tthis.cells.forEach((cell) => {\n\t\t\tcell.cellRendered();\n\t\t});\n\t}\n\t\n\treinitializeHeight(){\n\t\tthis.heightInitialized = false;\n\t\t\n\t\tif(this.element && this.element.offsetParent !== null){\n\t\t\tthis.normalizeHeight(true);\n\t\t}\n\t}\n\n\tdeinitialize(){\n\t\tthis.initialized = false;\n\t}\n\t\n\tdeinitializeHeight(){\n\t\tthis.heightInitialized = false;\n\t}\n\t\n\treinitialize(children){\n\t\tthis.initialized = false;\n\t\tthis.heightInitialized = false;\n\t\t\n\t\tif(!this.manualHeight){\n\t\t\tthis.height = 0;\n\t\t\tthis.heightStyled = \"\";\n\t\t}\n\t\t\n\t\tif(this.element && this.element.offsetParent !== null){\n\t\t\tthis.initialize(true);\n\t\t}\n\t\t\n\t\tthis.dispatch(\"row-relayout\", this);\n\t}\n\t\n\t//get heights when doing bulk row style calcs in virtual DOM\n\tcalcHeight(force){\n\t\tvar maxHeight = 0, minHeight  = 0;\n\n\t\tif(this.table.options.rowHeight){\n\t\t\tthis.height = this.table.options.rowHeight;\n\t\t}else{\n\t\t\tminHeight = this.calcMinHeight();\n\t\t\tmaxHeight = this.calcMaxHeight();\n\t\t\t\n\t\t\tif(force){\n\t\t\t\tthis.height = Math.max(maxHeight, minHeight);\n\t\t\t}else{\n\t\t\t\tthis.height = this.manualHeight ? this.height : Math.max(maxHeight, minHeight);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.heightStyled = this.height ? this.height + \"px\" : \"\";\n\t\tthis.outerHeight = this.element.offsetHeight;\n\t}\n\n\tcalcMinHeight(){\n\t\treturn this.table.options.resizableRows ? this.element.clientHeight : 0;\n\t}\n\n\tcalcMaxHeight(){\n\t\tvar maxHeight = 0;\n\t\tthis.cells.forEach(function(cell){\n\t\t\tvar height = cell.getHeight();\n\t\t\tif(height > maxHeight){\n\t\t\t\tmaxHeight = height;\n\t\t\t}\n\t\t});\n\t\treturn maxHeight;\n\t}\n\t\n\t//set of cells\n\tsetCellHeight(){\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.setHeight();\n\t\t});\n\t\t\n\t\tthis.heightInitialized = true;\n\t}\n\t\n\tclearCellHeight(){\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.clearHeight();\n\t\t});\n\t}\n\t\n\t//normalize the height of elements in the row\n\tnormalizeHeight(force){\n\t\tif(force && !this.table.options.rowHeight){\n\t\t\tthis.clearCellHeight();\n\t\t}\n\t\t\n\t\tthis.calcHeight(force);\n\t\t\n\t\tthis.setCellHeight();\n\t}\n\t\n\t//set height of rows\n\tsetHeight(height, force){\n\t\tif(this.height != height || force){\n\t\t\t\n\t\t\tthis.manualHeight = true;\n\t\t\t\n\t\t\tthis.height = height;\n\t\t\tthis.heightStyled = height ? height + \"px\" : \"\";\n\t\t\t\n\t\t\tthis.setCellHeight();\n\t\t\t\n\t\t\t// this.outerHeight = this.element.outerHeight();\n\t\t\tthis.outerHeight = this.element.offsetHeight;\n\n\t\t\tif(this.subscribedExternal(\"rowHeight\")){\n\t\t\t\tthis.dispatchExternal(\"rowHeight\", this.getComponent());\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//return rows outer height\n\tgetHeight(){\n\t\treturn this.outerHeight;\n\t}\n\t\n\t//return rows outer Width\n\tgetWidth(){\n\t\treturn this.element.offsetWidth;\n\t}\n\t\n\t//////////////// Cell Management /////////////////\n\tdeleteCell(cell){\n\t\tvar index = this.cells.indexOf(cell);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.cells.splice(index, 1);\n\t\t}\n\t}\n\t\n\t//////////////// Data Management /////////////////\n\tsetData(data){\n\t\tthis.data = this.chain(\"row-data-init-before\", [this, data], undefined, data);\n\t\t\n\t\tthis.dispatch(\"row-data-init-after\", this);\n\t}\n\t\n\t//update the rows data\n\tupdateData(updatedData){\n\t\tvar visible = this.element && Helpers.elVisible(this.element),\n\t\ttempData = {},\n\t\tnewRowData;\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t\n\t\t\tif(typeof updatedData === \"string\"){\n\t\t\t\tupdatedData = JSON.parse(updatedData);\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-data-save-before\", this);\n\t\t\t\n\t\t\tif(this.subscribed(\"row-data-changing\")){\n\t\t\t\ttempData = Object.assign(tempData, this.data);\n\t\t\t\ttempData = Object.assign(tempData, updatedData);\n\t\t\t}\n\t\t\t\n\t\t\tnewRowData = this.chain(\"row-data-changing\", [this, tempData, updatedData], null, updatedData);\n\t\t\t\n\t\t\t//set data\n\t\t\tfor (let attrname in newRowData) {\n\t\t\t\tthis.data[attrname] = newRowData[attrname];\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-data-save-after\", this);\n\t\t\t\n\t\t\t//update affected cells only\n\t\t\tfor (let attrname in updatedData) {\n\t\t\t\t\n\t\t\t\tlet columns = this.table.columnManager.getColumnsByFieldRoot(attrname);\n\t\t\t\t\n\t\t\t\tcolumns.forEach((column) => {\n\t\t\t\t\tlet cell = this.getCell(column.getField());\n\t\t\t\t\t\n\t\t\t\t\tif(cell){\n\t\t\t\t\t\tlet value = column.getFieldValue(newRowData);\n\t\t\t\t\t\tif(cell.getValue() !== value){\n\t\t\t\t\t\t\tcell.setValueProcessData(value);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(visible){\n\t\t\t\t\t\t\t\tcell.cellRendered();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t//Partial reinitialization if visible\n\t\t\tif(visible){\n\t\t\t\tthis.normalizeHeight(true);\n\t\t\t\t\n\t\t\t\tif(this.table.options.rowFormatter){\n\t\t\t\t\tthis.table.options.rowFormatter(this.getComponent());\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.initialized = false;\n\t\t\t\tthis.height = 0;\n\t\t\t\tthis.heightStyled = \"\";\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-data-changed\", this, visible, updatedData);\n\t\t\t\n\t\t\t//this.reinitialize();\n\t\t\t\n\t\t\tthis.dispatchExternal(\"rowUpdated\", this.getComponent());\n\t\t\t\n\t\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n\t\t\t}\n\t\t\t\n\t\t\tresolve();\n\t\t});\n\t}\n\t\n\tgetData(transform){\n\t\tif(transform){\n\t\t\treturn this.chain(\"row-data-retrieve\", [this, transform], null, this.data);\n\t\t}\n\t\t\n\t\treturn this.data;\n\t}\n\t\n\tgetCell(column){\n\t\tvar match = false;\n\t\t\n\t\tcolumn = this.table.columnManager.findColumn(column);\n\t\t\n\t\tif(!this.initialized && this.cells.length === 0){\n\t\t\tthis.generateCells();\n\t\t}\n\t\t\n\t\tmatch = this.cells.find(function(cell){\n\t\t\treturn cell.column === column;\n\t\t});\n\t\t\n\t\treturn match;\n\t}\n\t\n\tgetCellIndex(findCell){\n\t\treturn this.cells.findIndex(function(cell){\n\t\t\treturn cell === findCell;\n\t\t});\n\t}\n\t\n\tfindCell(subject){\n\t\treturn this.cells.find((cell) => {\n\t\t\treturn cell.element === subject;\n\t\t});\n\t}\n\t\n\tgetCells(){\n\t\tif(!this.initialized && this.cells.length === 0){\n\t\t\tthis.generateCells();\n\t\t}\n\t\t\n\t\treturn this.cells;\n\t}\n\t\n\tnextRow(){\n\t\tvar row = this.table.rowManager.nextDisplayRow(this, true);\n\t\treturn row || false;\n\t}\n\t\n\tprevRow(){\n\t\tvar row = this.table.rowManager.prevDisplayRow(this, true);\n\t\treturn row || false;\n\t}\n\t\n\tmoveToRow(to, before){\n\t\tvar toRow = this.table.rowManager.findRow(to);\n\t\t\n\t\tif(toRow){\n\t\t\tthis.table.rowManager.moveRowActual(this, toRow, !before);\n\t\t\tthis.table.rowManager.refreshActiveData(\"display\", false, true);\n\t\t}else{\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", to);\n\t\t}\n\t}\n\t\n\t///////////////////// Actions  /////////////////////\n\tdelete(){\n\t\tthis.dispatch(\"row-delete\", this);\n\t\t\n\t\tthis.deleteActual();\n\t\t\n\t\treturn Promise.resolve();\n\t}\n\t\n\tdeleteActual(blockRedraw){\n\t\tthis.detachModules();\n\t\t\n\t\tthis.table.rowManager.deleteRow(this, blockRedraw);\n\t\t\n\t\tthis.deleteCells();\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.heightInitialized = false;\n\t\tthis.element = false;\n\t\t\n\t\tthis.dispatch(\"row-deleted\", this);\n\t}\n\t\n\tdetachModules(){\n\t\tthis.dispatch(\"row-deleting\", this);\n\t}\n\t\n\tdeleteCells(){\n\t\tvar cellCount = this.cells.length;\n\t\t\n\t\tfor(let i = 0; i < cellCount; i++){\n\t\t\tthis.cells[0].delete();\n\t\t}\n\t}\n\t\n\twipe(){\n\t\tthis.detachModules();\n\t\tthis.deleteCells();\n\t\t\n\t\tif(this.element){\n\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\t\t\t\n\t\t\tif(this.element.parentNode){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.element = false;\n\t\tthis.modules = {};\n\t}\n\n\tisDisplayed(){\n\t\treturn this.table.rowManager.getDisplayRows().includes(this);\n\t}\n\n\tgetPosition(){\n\t\treturn this.isDisplayed() ? this.position : false;\n\t}\n\n\tsetPosition(position){\n\t\tif(position != this.position){\n\t\t\tthis.position = position;\n\n\t\t\tthis.positionWatchers.forEach((callback) => {\n\t\t\t\tcallback(this.position);\n\t\t\t});\n\t\t}\n\t}\n\n\twatchPosition(callback){\n\t\tthis.positionWatchers.push(callback);\n\n\t\tcallback(this.position);\n\t}\n\t\n\tgetGroup(){\n\t\treturn this.modules.group || false;\n\t}\n\t\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new RowComponent(this);\n\t\t}\n\t\t\n\t\treturn this.component;\n\t}\n}\n","export default {\n\t\"avg\":function(values, data, calcParams){\n\t\tvar output = 0,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : 2;\n\n\t\tif(values.length){\n\t\t\toutput = values.reduce(function(sum, value){\n\t\t\t\treturn Number(sum) + Number(value);\n\t\t\t});\n\n\t\t\toutput = output / values.length;\n\n\t\t\toutput = precision !== false ? output.toFixed(precision) : output;\n\t\t}\n\n\t\treturn parseFloat(output).toString();\n\t},\n\t\"max\":function(values, data, calcParams){\n\t\tvar output = null,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\tvalues.forEach(function(value){\n\n\t\t\tvalue = Number(value);\n\n\t\t\tif(value > output || output === null){\n\t\t\t\toutput = value;\n\t\t\t}\n\t\t});\n\n\t\treturn output !== null ? (precision !== false ? output.toFixed(precision) : output) : \"\";\n\t},\n\t\"min\":function(values, data, calcParams){\n\t\tvar output = null,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\tvalues.forEach(function(value){\n\n\t\t\tvalue = Number(value);\n\n\t\t\tif(value < output || output === null){\n\t\t\t\toutput = value;\n\t\t\t}\n\t\t});\n\n\t\treturn output !== null ? (precision !== false ? output.toFixed(precision) : output) : \"\";\n\t},\n\t\"sum\":function(values, data, calcParams){\n\t\tvar output = 0,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\tif(values.length){\n\t\t\tvalues.forEach(function(value){\n\t\t\t\tvalue = Number(value);\n\n\t\t\t\toutput += !isNaN(value) ? Number(value) : 0;\n\t\t\t});\n\t\t}\n\n\t\treturn precision !== false ? output.toFixed(precision) : output;\n\t},\n\t\"concat\":function(values, data, calcParams){\n\t\tvar output = 0;\n\n\t\tif(values.length){\n\t\t\toutput = values.reduce(function(sum, value){\n\t\t\t\treturn String(sum) + String(value);\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t},\n\t\"count\":function(values, data, calcParams){\n\t\tvar output = 0;\n\n\t\tif(values.length){\n\t\t\tvalues.forEach(function(value){\n\t\t\t\tif(value){\n\t\t\t\t\toutput ++;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t},\n\t\"unique\":function(values, data, calcParams){\n\t\tvar unique = values.filter((value, index) => {\n\t\t\treturn (values || value === 0) && values.indexOf(value) === index;\n\t\t});\n\n\t\treturn unique.length;\n\t},\n};","import Module from '../../core/Module.js';\n\nimport CalcComponent from './CalcComponent.js';\n\nimport Cell from '../../core/cell/Cell.js';\nimport Column from '../../core/column/Column.js';\nimport Row from '../../core/row/Row.js';\n\nimport defaultCalculations from './defaults/calculations.js';\n\nexport default class ColumnCalcs extends Module{\n\n\tstatic moduleName = \"columnCalcs\";\n\n\t//load defaults\n\tstatic calculations = defaultCalculations;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.topCalcs = [];\n\t\tthis.botCalcs = [];\n\t\tthis.genColumn = false;\n\t\tthis.topElement = this.createElement();\n\t\tthis.botElement = this.createElement();\n\t\tthis.topRow = false;\n\t\tthis.botRow = false;\n\t\tthis.topInitialized = false;\n\t\tthis.botInitialized = false;\n\t\t\n\t\tthis.blocked = false;\n\t\tthis.recalcAfterBlock = false;\n\t\t\n\t\tthis.registerTableOption(\"columnCalcs\", true);\n\t\t\n\t\tthis.registerColumnOption(\"topCalc\");\n\t\tthis.registerColumnOption(\"topCalcParams\");\n\t\tthis.registerColumnOption(\"topCalcFormatter\");\n\t\tthis.registerColumnOption(\"topCalcFormatterParams\");\n\t\tthis.registerColumnOption(\"bottomCalc\");\n\t\tthis.registerColumnOption(\"bottomCalcParams\");\n\t\tthis.registerColumnOption(\"bottomCalcFormatter\");\n\t\tthis.registerColumnOption(\"bottomCalcFormatterParams\");\n\t}\n\t\n\tcreateElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-calcs-holder\");\n\t\treturn el;\n\t}\n\t\n\tinitialize(){\n\t\tthis.genColumn = new Column({field:\"value\"}, this);\n\t\t\n\t\tthis.subscribe(\"cell-value-changed\", this.cellValueChanged.bind(this));\n\t\tthis.subscribe(\"column-init\", this.initializeColumnCheck.bind(this));\n\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\n\t\tthis.subscribe(\"row-added\", this.rowsUpdated.bind(this));\n\t\tthis.subscribe(\"column-moved\", this.recalcActiveRows.bind(this));\n\t\tthis.subscribe(\"column-add\", this.recalcActiveRows.bind(this));\n\t\tthis.subscribe(\"data-refreshed\", this.recalcActiveRowsRefresh.bind(this));\n\t\tthis.subscribe(\"table-redraw\", this.tableRedraw.bind(this));\n\t\tthis.subscribe(\"rows-visible\", this.visibleRows.bind(this));\n\t\tthis.subscribe(\"scrollbar-vertical\", this.adjustForScrollbar.bind(this));\n\t\t\n\t\tthis.subscribe(\"redraw-blocked\", this.blockRedraw.bind(this));\n\t\tthis.subscribe(\"redraw-restored\", this.restoreRedraw.bind(this));\n\n\t\tthis.subscribe(\"table-redrawing\", this.resizeHolderWidth.bind(this));\n\t\tthis.subscribe(\"column-resized\", this.resizeHolderWidth.bind(this));\n\t\tthis.subscribe(\"column-show\", this.resizeHolderWidth.bind(this));\n\t\tthis.subscribe(\"column-hide\", this.resizeHolderWidth.bind(this));\n\t\t\n\t\tthis.registerTableFunction(\"getCalcResults\", this.getResults.bind(this));\n\t\tthis.registerTableFunction(\"recalc\", this.userRecalc.bind(this));\n\n\n\t\tthis.resizeHolderWidth();\n\t}\n\n\tresizeHolderWidth(){\n\t\tthis.topElement.style.minWidth = this.table.columnManager.headersElement.offsetWidth + \"px\";\n\t}\n\n\t\n\ttableRedraw(force){\n\t\tthis.recalc(this.table.rowManager.activeRows);\n\t\t\n\t\tif(force){\n\t\t\tthis.redraw();\n\t\t}\n\t}\n\t\n\tblockRedraw(){\n\t\tthis.blocked = true;\n\t\tthis.recalcAfterBlock = false;\n\t}\n\t\n\t\n\trestoreRedraw(){\n\t\tthis.blocked = false;\n\t\t\n\t\tif(this.recalcAfterBlock){\n\t\t\tthis.recalcAfterBlock = false;\n\t\t\tthis.recalcActiveRowsRefresh();\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\tuserRecalc(){\n\t\tthis.recalc(this.table.rowManager.activeRows);\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tblockCheck(){\n\t\tif(this.blocked){\n\t\t\tthis.recalcAfterBlock = true;\n\t\t}\n\t\t\n\t\treturn this.blocked;\n\t}\n\t\n\tvisibleRows(viewable, rows){\n\t\tif(this.topRow){\n\t\t\trows.unshift(this.topRow);\n\t\t}\n\t\t\n\t\tif(this.botRow){\n\t\t\trows.push(this.botRow);\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\trowsUpdated(row){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.recalcRowGroup(row);\n\t\t}else{\n\t\t\tthis.recalcActiveRows();\n\t\t}\n\t}\n\t\n\trecalcActiveRowsRefresh(){\n\t\tif(this.table.options.groupBy && this.table.options.dataTreeStartExpanded && this.table.options.dataTree){\n\t\t\tthis.recalcAll();\n\t\t}else{\n\t\t\tthis.recalcActiveRows();\n\t\t}\n\t}\n\t\n\trecalcActiveRows(){\n\t\tthis.recalc(this.table.rowManager.activeRows);\n\t}\n\t\n\tcellValueChanged(cell){\n\t\tif(cell.column.definition.topCalc || cell.column.definition.bottomCalc){\n\t\t\tif(this.table.options.groupBy){\n\t\t\t\tif(this.table.options.columnCalcs == \"table\" || this.table.options.columnCalcs == \"both\"){\n\t\t\t\t\tthis.recalcActiveRows();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(this.table.options.columnCalcs != \"table\"){\n\t\t\t\t\tthis.recalcRowGroup(cell.row);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.recalcActiveRows();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tinitializeColumnCheck(column){\n\t\tif(column.definition.topCalc || column.definition.bottomCalc){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\t\n\t//initialize column calcs\n\tinitializeColumn(column){\n\t\tvar def = column.definition;\n\t\t\n\t\tvar config = {\n\t\t\ttopCalcParams:def.topCalcParams || {},\n\t\t\tbotCalcParams:def.bottomCalcParams || {},\n\t\t};\n\t\t\n\t\tif(def.topCalc){\n\t\t\t\n\t\t\tswitch(typeof def.topCalc){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(ColumnCalcs.calculations[def.topCalc]){\n\t\t\t\t\t\tconfig.topCalc = ColumnCalcs.calculations[def.topCalc];\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.topCalc);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"function\":\n\t\t\t\t\tconfig.topCalc = def.topCalc;\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif(config.topCalc){\n\t\t\t\tcolumn.modules.columnCalcs = config;\n\t\t\t\tthis.topCalcs.push(column);\n\t\t\t\t\n\t\t\t\tif(this.table.options.columnCalcs != \"group\"){\n\t\t\t\t\tthis.initializeTopRow();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\tif(def.bottomCalc){\n\t\t\tswitch(typeof def.bottomCalc){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(ColumnCalcs.calculations[def.bottomCalc]){\n\t\t\t\t\t\tconfig.botCalc = ColumnCalcs.calculations[def.bottomCalc];\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.bottomCalc);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"function\":\n\t\t\t\t\tconfig.botCalc = def.bottomCalc;\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif(config.botCalc){\n\t\t\t\tcolumn.modules.columnCalcs = config;\n\t\t\t\tthis.botCalcs.push(column);\n\t\t\t\t\n\t\t\t\tif(this.table.options.columnCalcs != \"group\"){\n\t\t\t\t\tthis.initializeBottomRow();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\t\n\t//dummy functions to handle being mock column manager\n\tregisterColumnField(){}\n\t\n\tremoveCalcs(){\n\t\tvar changed = false;\n\t\t\n\t\tif(this.topInitialized){\n\t\t\tthis.topInitialized = false;\n\t\t\tthis.topElement.parentNode.removeChild(this.topElement);\n\t\t\tchanged = true;\n\t\t}\n\t\t\n\t\tif(this.botInitialized){\n\t\t\tthis.botInitialized = false;\n\t\t\tthis.footerRemove(this.botElement);\n\t\t\tchanged = true;\n\t\t}\n\t\t\n\t\tif(changed){\n\t\t\tthis.table.rowManager.adjustTableSize();\n\t\t}\n\t}\n\t\n\treinitializeCalcs(){\n\t\tif(this.topCalcs.length){\n\t\t\tthis.initializeTopRow();\n\t\t}\n\n\t\tif(this.botCalcs.length){\n\t\t\tthis.initializeBottomRow();\n\t\t}\n\t}\n\t\n\tinitializeTopRow(){\n\t\tvar\tfragment = document.createDocumentFragment();\n\t\t\n\t\tif(!this.topInitialized){\n\n\t\t\tfragment.appendChild(document.createElement(\"br\"));\n\t\t\tfragment.appendChild(this.topElement);\n\n\t\t\tthis.table.columnManager.getContentsElement().insertBefore(fragment, this.table.columnManager.headersElement.nextSibling);\n\t\t\tthis.topInitialized = true;\n\t\t}\n\t}\n\t\n\tinitializeBottomRow(){\n\t\tif(!this.botInitialized){\n\t\t\tthis.footerPrepend(this.botElement);\n\t\t\tthis.botInitialized = true;\n\t\t}\n\t}\n\t\n\tscrollHorizontal(left){\n\t\tif(this.botInitialized && this.botRow){\n\t\t\tthis.botElement.scrollLeft = left;\n\t\t}\n\t}\n\t\n\trecalc(rows){\n\t\tvar data, row;\n\t\t\n\t\tif(!this.blockCheck()){\n\t\t\tif(this.topInitialized || this.botInitialized){\n\t\t\t\tdata = this.rowsToData(rows);\n\t\t\t\t\n\t\t\t\tif(this.topInitialized){\n\t\t\t\t\tif(this.topRow){\n\t\t\t\t\t\tthis.topRow.deleteCells();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\trow = this.generateRow(\"top\", data);\n\t\t\t\t\tthis.topRow = row;\n\t\t\t\t\twhile(this.topElement.firstChild) this.topElement.removeChild(this.topElement.firstChild);\n\t\t\t\t\tthis.topElement.appendChild(row.getElement());\n\t\t\t\t\trow.initialize(true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(this.botInitialized){\n\t\t\t\t\tif(this.botRow){\n\t\t\t\t\t\tthis.botRow.deleteCells();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\trow = this.generateRow(\"bottom\", data);\n\t\t\t\t\tthis.botRow = row;\n\t\t\t\t\twhile(this.botElement.firstChild) this.botElement.removeChild(this.botElement.firstChild);\n\t\t\t\t\tthis.botElement.appendChild(row.getElement());\n\t\t\t\t\trow.initialize(true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.table.rowManager.adjustTableSize();\n\t\t\t\t\n\t\t\t\t//set resizable handles\n\t\t\t\tif(this.table.modExists(\"frozenColumns\")){\n\t\t\t\t\tthis.table.modules.frozenColumns.layout();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\trecalcRowGroup(row){\n\t\tthis.recalcGroup(this.table.modules.groupRows.getRowGroup(row));\n\t}\n\t\n\trecalcAll(){\n\t\tif(this.topCalcs.length || this.botCalcs.length){\n\t\t\tif(this.table.options.columnCalcs !== \"group\"){\n\t\t\t\tthis.recalcActiveRows();\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.groupBy && this.table.options.columnCalcs !== \"table\"){\n\t\t\t\t\n\t\t\t\tvar groups = this.table.modules.groupRows.getChildGroups();\n\t\t\t\t\n\t\t\t\tgroups.forEach((group) => {\n\t\t\t\t\tthis.recalcGroup(group);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\t\n\trecalcGroup(group){\n\t\tvar data, rowData;\n\t\t\n\t\tif(!this.blockCheck()){\n\t\t\tif(group){\n\t\t\t\tif(group.calcs){\n\t\t\t\t\tif(group.calcs.bottom){\n\t\t\t\t\t\tdata = this.rowsToData(group.rows);\n\t\t\t\t\t\trowData = this.generateRowData(\"bottom\", data);\n\t\t\t\t\t\t\n\t\t\t\t\t\tgroup.calcs.bottom.updateData(rowData);\n\t\t\t\t\t\tgroup.calcs.bottom.reinitialize();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(group.calcs.top){\n\t\t\t\t\t\tdata = this.rowsToData(group.rows);\n\t\t\t\t\t\trowData = this.generateRowData(\"top\", data);\n\t\t\t\t\t\t\n\t\t\t\t\t\tgroup.calcs.top.updateData(rowData);\n\t\t\t\t\t\tgroup.calcs.top.reinitialize();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//generate top stats row\n\tgenerateTopRow(rows){\n\t\treturn this.generateRow(\"top\", this.rowsToData(rows));\n\t}\n\t//generate bottom stats row\n\tgenerateBottomRow(rows){\n\t\treturn this.generateRow(\"bottom\", this.rowsToData(rows));\n\t}\n\t\n\trowsToData(rows){\n\t\tvar data = [],\n\t\thasDataTreeColumnCalcs = this.table.options.dataTree && this.table.options.dataTreeChildColumnCalcs,\n\t\tdataTree = this.table.modules.dataTree;\n\n\t\trows.forEach((row) => {\n\t\t\tdata.push(row.getData());\n\n\t\t\tif(hasDataTreeColumnCalcs && row.modules.dataTree?.open){\n\t\t\t\tthis.rowsToData(dataTree.getFilteredTreeChildren(row)).forEach(dataRow =>{\n\t\t\t\t\tdata.push(row);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn data;\n\t}\n\t\n\t//generate stats row\n\tgenerateRow(pos, data){\n\t\tvar rowData = this.generateRowData(pos, data),\n\t\trow;\n\t\t\n\t\tif(this.table.modExists(\"mutator\")){\n\t\t\tthis.table.modules.mutator.disable();\n\t\t}\n\t\t\n\t\trow = new Row(rowData, this, \"calc\");\n\t\t\n\t\tif(this.table.modExists(\"mutator\")){\n\t\t\tthis.table.modules.mutator.enable();\n\t\t}\n\t\t\n\t\trow.getElement().classList.add(\"tabulator-calcs\", \"tabulator-calcs-\" + pos);\n\t\t\n\t\trow.component = false;\n\t\t\n\t\trow.getComponent = () => {\n\t\t\tif(!row.component){\n\t\t\t\trow.component = new CalcComponent(row);\n\t\t\t}\n\t\t\t\n\t\t\treturn row.component;\n\t\t};\n\t\t\n\t\trow.generateCells = () => {\n\t\t\t\n\t\t\tvar cells = [];\n\t\t\t\n\t\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\t\t\n\t\t\t\t//set field name of mock column\n\t\t\t\tthis.genColumn.setField(column.getField());\n\t\t\t\tthis.genColumn.hozAlign = column.hozAlign;\n\t\t\t\t\n\t\t\t\tif(column.definition[pos + \"CalcFormatter\"] && this.table.modExists(\"format\")){\n\t\t\t\t\tthis.genColumn.modules.format = {\n\t\t\t\t\t\tformatter: this.table.modules.format.getFormatter(column.definition[pos + \"CalcFormatter\"]),\n\t\t\t\t\t\tparams: column.definition[pos + \"CalcFormatterParams\"] || {},\n\t\t\t\t\t};\n\t\t\t\t}else{\n\t\t\t\t\tthis.genColumn.modules.format = {\n\t\t\t\t\t\tformatter: this.table.modules.format.getFormatter(\"plaintext\"),\n\t\t\t\t\t\tparams:{}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//ensure css class definition is replicated to calculation cell\n\t\t\t\tthis.genColumn.definition.cssClass = column.definition.cssClass;\n\t\t\t\t\n\t\t\t\t//generate cell and assign to correct column\n\t\t\t\tvar cell = new Cell(this.genColumn, row);\n\t\t\t\tcell.getElement();\n\t\t\t\tcell.column = column;\n\t\t\t\tcell.setWidth();\n\t\t\t\t\n\t\t\t\tcolumn.cells.push(cell);\n\t\t\t\tcells.push(cell);\n\t\t\t\t\n\t\t\t\tif(!column.visible){\n\t\t\t\t\tcell.hide();\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\trow.cells = cells;\n\t\t};\n\t\t\n\t\treturn row;\n\t}\n\t\n\t//generate stats row\n\tgenerateRowData(pos, data){\n\t\tvar rowData = {},\n\t\tcalcs = pos == \"top\" ? this.topCalcs : this.botCalcs,\n\t\ttype = pos == \"top\" ? \"topCalc\" : \"botCalc\",\n\t\tparams, paramKey;\n\t\t\n\t\tcalcs.forEach(function(column){\n\t\t\tvar values = [];\n\t\t\t\n\t\t\tif(column.modules.columnCalcs && column.modules.columnCalcs[type]){\n\t\t\t\tdata.forEach(function(item){\n\t\t\t\t\tvalues.push(column.getFieldValue(item));\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tparamKey = type + \"Params\";\n\t\t\t\tparams = typeof column.modules.columnCalcs[paramKey] === \"function\" ? column.modules.columnCalcs[paramKey](values, data) : column.modules.columnCalcs[paramKey];\n\t\t\t\t\n\t\t\t\tcolumn.setFieldValue(rowData, column.modules.columnCalcs[type](values, data, params));\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn rowData;\n\t}\n\t\n\thasTopCalcs(){\n\t\treturn\t!!(this.topCalcs.length);\n\t}\n\t\n\thasBottomCalcs(){\n\t\treturn\t!!(this.botCalcs.length);\n\t}\n\t\n\t//handle table redraw\n\tredraw(){\n\t\tif(this.topRow){\n\t\t\tthis.topRow.normalizeHeight(true);\n\t\t}\n\t\tif(this.botRow){\n\t\t\tthis.botRow.normalizeHeight(true);\n\t\t}\n\t}\n\t\n\t//return the calculated\n\tgetResults(){\n\t\tvar results = {},\n\t\tgroups;\n\t\t\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\n\t\t\tgroups = this.table.modules.groupRows.getGroups(true);\n\t\t\t\n\t\t\tgroups.forEach((group) => {\n\t\t\t\tresults[group.getKey()] = this.getGroupResults(group);\n\t\t\t});\n\t\t}else{\n\t\t\tresults = {\n\t\t\t\ttop: this.topRow ? this.topRow.getData() : {},\n\t\t\t\tbottom: this.botRow ? this.botRow.getData() : {},\n\t\t\t};\n\t\t}\n\t\t\n\t\treturn results;\n\t}\n\t\n\t//get results from a group\n\tgetGroupResults(group){\n\t\tvar groupObj = group._getSelf(),\n\t\tsubGroups = group.getSubGroups(),\n\t\tsubGroupResults = {},\n\t\tresults = {};\n\t\t\n\t\tsubGroups.forEach((subgroup) => {\n\t\t\tsubGroupResults[subgroup.getKey()] = this.getGroupResults(subgroup);\n\t\t});\n\t\t\n\t\tresults = {\n\t\t\ttop: groupObj.calcs.top ? groupObj.calcs.top.getData() : {},\n\t\t\tbottom: groupObj.calcs.bottom ? groupObj.calcs.bottom.getData() : {},\n\t\t\tgroups: subGroupResults,\n\t\t};\n\t\t\n\t\treturn results;\n\t}\n\t\n\tadjustForScrollbar(width){\n\t\tif(this.botRow){\n\t\t\tif(this.table.rtl){\n\t\t\t\tthis.botElement.style.paddingLeft = width + \"px\";\n\t\t\t}else{\n\t\t\t\tthis.botElement.style.paddingRight = width + \"px\";\n\t\t\t}\n\t\t}\n\t}\n}","import Module from '../../core/Module.js';\n\nimport Row from '../../core/row/Row.js';\n\nimport RowComponent from '../../core/row/RowComponent.js';\n\nexport default class DataTree extends Module{\n\n\tstatic moduleName = \"dataTree\";\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.indent = 10;\n\t\tthis.field = \"\";\n\t\tthis.collapseEl = null;\n\t\tthis.expandEl = null;\n\t\tthis.branchEl = null;\n\t\tthis.elementField = false;\n\n\t\tthis.startOpen = function(){};\n\n\t\tthis.registerTableOption(\"dataTree\", false); //enable data tree\n\t\tthis.registerTableOption(\"dataTreeFilter\", true); //filter child rows\n\t\tthis.registerTableOption(\"dataTreeSort\", true); //sort child rows\n\t\tthis.registerTableOption(\"dataTreeElementColumn\", false);\n\t\tthis.registerTableOption(\"dataTreeBranchElement\", true);//show data tree branch element\n\t\tthis.registerTableOption(\"dataTreeChildIndent\", 9); //data tree child indent in px\n\t\tthis.registerTableOption(\"dataTreeChildField\", \"_children\");//data tre column field to look for child rows\n\t\tthis.registerTableOption(\"dataTreeCollapseElement\", false);//data tree row collapse element\n\t\tthis.registerTableOption(\"dataTreeExpandElement\", false);//data tree row expand element\n\t\tthis.registerTableOption(\"dataTreeStartExpanded\", false);\n\t\tthis.registerTableOption(\"dataTreeChildColumnCalcs\", false);//include visible data tree rows in column calculations\n\t\tthis.registerTableOption(\"dataTreeSelectPropagate\", false);//selecting a parent row selects its children\n\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"treeCollapse\", this.collapseRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"treeExpand\", this.expandRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"treeToggle\", this.toggleRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"getTreeParent\", this.getTreeParent.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"getTreeChildren\", this.getRowChildren.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"addTreeChild\", this.addTreeChildRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"isTreeExpanded\", this.isRowExpanded.bind(this));\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.dataTree){\n\t\t\tvar dummyEl = null,\n\t\t\toptions = this.table.options;\n\n\t\t\tthis.field = options.dataTreeChildField;\n\t\t\tthis.indent = options.dataTreeChildIndent;\n\n\t\t\tif(this.options(\"movableRows\")){\n\t\t\t\tconsole.warn(\"The movableRows option is not available with dataTree enabled, moving of child rows could result in unpredictable behavior\");\n\t\t\t}\n\n\t\t\tif(options.dataTreeBranchElement){\n\n\t\t\t\tif(options.dataTreeBranchElement === true){\n\t\t\t\t\tthis.branchEl = document.createElement(\"div\");\n\t\t\t\t\tthis.branchEl.classList.add(\"tabulator-data-tree-branch\");\n\t\t\t\t}else{\n\t\t\t\t\tif(typeof options.dataTreeBranchElement === \"string\"){\n\t\t\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\t\t\tdummyEl.innerHTML = options.dataTreeBranchElement;\n\t\t\t\t\t\tthis.branchEl = dummyEl.firstChild;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.branchEl = options.dataTreeBranchElement;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.branchEl = document.createElement(\"div\");\n\t\t\t\tthis.branchEl.classList.add(\"tabulator-data-tree-branch-empty\");\n\t\t\t}\n\n\t\t\tif(options.dataTreeCollapseElement){\n\t\t\t\tif(typeof options.dataTreeCollapseElement === \"string\"){\n\t\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\t\tdummyEl.innerHTML = options.dataTreeCollapseElement;\n\t\t\t\t\tthis.collapseEl = dummyEl.firstChild;\n\t\t\t\t}else{\n\t\t\t\t\tthis.collapseEl = options.dataTreeCollapseElement;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.collapseEl = document.createElement(\"div\");\n\t\t\t\tthis.collapseEl.classList.add(\"tabulator-data-tree-control\");\n\t\t\t\tthis.collapseEl.tabIndex = 0;\n\t\t\t\tthis.collapseEl.innerHTML = \"<div class='tabulator-data-tree-control-collapse'></div>\";\n\t\t\t}\n\n\t\t\tif(options.dataTreeExpandElement){\n\t\t\t\tif(typeof options.dataTreeExpandElement === \"string\"){\n\t\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\t\tdummyEl.innerHTML = options.dataTreeExpandElement;\n\t\t\t\t\tthis.expandEl = dummyEl.firstChild;\n\t\t\t\t}else{\n\t\t\t\t\tthis.expandEl = options.dataTreeExpandElement;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.expandEl = document.createElement(\"div\");\n\t\t\t\tthis.expandEl.classList.add(\"tabulator-data-tree-control\");\n\t\t\t\tthis.expandEl.tabIndex = 0;\n\t\t\t\tthis.expandEl.innerHTML = \"<div class='tabulator-data-tree-control-expand'></div>\";\n\t\t\t}\n\n\n\t\t\tswitch(typeof options.dataTreeStartExpanded){\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tthis.startOpen = function(row, index){\n\t\t\t\t\t\treturn options.dataTreeStartExpanded;\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tthis.startOpen = options.dataTreeStartExpanded;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis.startOpen = function(row, index){\n\t\t\t\t\t\treturn options.dataTreeStartExpanded[index];\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t\tthis.subscribe(\"row-layout-after\", this.layoutRow.bind(this));\n\t\t\tthis.subscribe(\"row-deleted\", this.rowDelete.bind(this),0);\n\t\t\tthis.subscribe(\"row-data-changed\", this.rowDataChanged.bind(this), 10);\n\t\t\tthis.subscribe(\"cell-value-updated\", this.cellValueChanged.bind(this));\n\t\t\tthis.subscribe(\"edit-cancelled\", this.cellValueChanged.bind(this));\n\t\t\tthis.subscribe(\"column-moving-rows\", this.columnMoving.bind(this));\n\t\t\tthis.subscribe(\"table-built\", this.initializeElementField.bind(this));\n\t\t\tthis.subscribe(\"table-redrawing\", this.tableRedrawing.bind(this));\n\n\t\t\tthis.registerDisplayHandler(this.getRows.bind(this), 30);\n\t\t}\n\t}\n\n\ttableRedrawing(force){\n\t\tvar rows;\n\n\t\tif(force){\n\t\t\trows = this.table.rowManager.getRows();\n\t\t\t\n\t\t\trows.forEach((row) => {\n\t\t\t\tthis.reinitializeRowChildren(row);\n\t\t\t});\n\t\t}\n\t}\n\n\tinitializeElementField(){\n\t\tvar firstCol = this.table.columnManager.getFirstVisibleColumn();\n\n\t\tthis.elementField = this.table.options.dataTreeElementColumn || (firstCol ? firstCol.field : false);\n\t}\n\t\n\tgetRowChildren(row){\n\t\treturn this.getTreeChildren(row, true);\n\t}\n\n\tcolumnMoving(){\n\t\tvar rows = [];\n\n\t\tthis.table.rowManager.rows.forEach((row) => {\n\t\t\trows = rows.concat(this.getTreeChildren(row, false, true));\n\t\t});\n\n\t\treturn rows;\n\t}\n\n\trowDataChanged(row, visible, updatedData){\n\t\tif(this.redrawNeeded(updatedData)){\n\t\t\tthis.initializeRow(row);\n\n\t\t\tif(visible){\n\t\t\t\tthis.layoutRow(row);\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\t}\n\n\tcellValueChanged(cell){\n\t\tvar field = cell.column.getField();\n\n\t\tif(field === this.elementField){\n\t\t\tthis.layoutRow(cell.row);\n\t\t}\n\t}\n\n\tinitializeRow(row){\n\t\tvar childArray = row.getData()[this.field];\n\t\tvar isArray = Array.isArray(childArray);\n\n\t\tvar children = isArray || (!isArray && typeof childArray === \"object\" && childArray !== null);\n\n\t\tif(!children && row.modules.dataTree && row.modules.dataTree.branchEl){\n\t\t\trow.modules.dataTree.branchEl.parentNode.removeChild(row.modules.dataTree.branchEl);\n\t\t}\n\n\t\tif(!children && row.modules.dataTree && row.modules.dataTree.controlEl){\n\t\t\trow.modules.dataTree.controlEl.parentNode.removeChild(row.modules.dataTree.controlEl);\n\t\t}\n\n\t\trow.modules.dataTree = {\n\t\t\tindex: row.modules.dataTree ? row.modules.dataTree.index : 0,\n\t\t\topen: children ? (row.modules.dataTree ? row.modules.dataTree.open : this.startOpen(row.getComponent(), 0)) : false,\n\t\t\tcontrolEl: row.modules.dataTree && children ? row.modules.dataTree.controlEl : false,\n\t\t\tbranchEl: row.modules.dataTree && children ? row.modules.dataTree.branchEl : false,\n\t\t\tparent: row.modules.dataTree ? row.modules.dataTree.parent : false,\n\t\t\tchildren:children,\n\t\t};\n\t}\n\n\treinitializeRowChildren(row){\n\t\tvar children = this.getTreeChildren(row, false, true);\n\n\t\tchildren.forEach(function(child){\n\t\t\tchild.reinitialize(true);\n\t\t});\n\t}\n\n\tlayoutRow(row){\n\t\tvar cell = this.elementField ? row.getCell(this.elementField) : row.getCells()[0],\n\t\tel = cell.getElement(),\n\t\tconfig = row.modules.dataTree;\n\n\t\tif(config.branchEl){\n\t\t\tif(config.branchEl.parentNode){\n\t\t\t\tconfig.branchEl.parentNode.removeChild(config.branchEl);\n\t\t\t}\n\t\t\tconfig.branchEl = false;\n\t\t}\n\n\t\tif(config.controlEl){\n\t\t\tif(config.controlEl.parentNode){\n\t\t\t\tconfig.controlEl.parentNode.removeChild(config.controlEl);\n\t\t\t}\n\t\t\tconfig.controlEl = false;\n\t\t}\n\n\t\tthis.generateControlElement(row, el);\n\n\t\trow.getElement().classList.add(\"tabulator-tree-level-\" + config.index);\n\n\t\tif(config.index){\n\t\t\tif(this.branchEl){\n\t\t\t\tconfig.branchEl = this.branchEl.cloneNode(true);\n\t\t\t\tel.insertBefore(config.branchEl, el.firstChild);\n\n\t\t\t\tif(this.table.rtl){\n\t\t\t\t\tconfig.branchEl.style.marginRight = (((config.branchEl.offsetWidth + config.branchEl.style.marginLeft) * (config.index - 1)) + (config.index * this.indent)) + \"px\";\n\t\t\t\t}else{\n\t\t\t\t\tconfig.branchEl.style.marginLeft = (((config.branchEl.offsetWidth + config.branchEl.style.marginRight) * (config.index - 1)) + (config.index * this.indent)) + \"px\";\n\t\t\t\t}\n\t\t\t}else{\n\n\t\t\t\tif(this.table.rtl){\n\t\t\t\t\tel.style.paddingRight = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-right')) + (config.index * this.indent) + \"px\";\n\t\t\t\t}else{\n\t\t\t\t\tel.style.paddingLeft = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-left')) + (config.index * this.indent) + \"px\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgenerateControlElement(row, el){\n\t\tvar config = row.modules.dataTree,\n\t\toldControl = config.controlEl;\n\n\t\tel = el || row.getCells()[0].getElement();\n\n\t\tif(config.children !== false){\n\n\t\t\tif(config.open){\n\t\t\t\tconfig.controlEl = this.collapseEl.cloneNode(true);\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tthis.collapseRow(row);\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconfig.controlEl = this.expandEl.cloneNode(true);\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tthis.expandRow(row);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconfig.controlEl.addEventListener(\"mousedown\", (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\n\t\t\tif(oldControl && oldControl.parentNode === el){\n\t\t\t\toldControl.parentNode.replaceChild(config.controlEl,oldControl);\n\t\t\t}else{\n\t\t\t\tel.insertBefore(config.controlEl, el.firstChild);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetRows(rows){\n\t\tvar output = [];\n\n\t\trows.forEach((row, i) => {\n\t\t\tvar config, children;\n\n\t\t\toutput.push(row);\n\n\t\t\tif(row instanceof Row){\n\n\t\t\t\trow.create();\n\n\t\t\t\tconfig = row.modules.dataTree;\n\n\t\t\t\tif(!config.index && config.children !== false){\n\t\t\t\t\tchildren = this.getChildren(row, false, true);\n\n\t\t\t\t\tchildren.forEach((child) => {\n\t\t\t\t\t\tchild.create();\n\t\t\t\t\t\toutput.push(child);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tgetChildren(row, allChildren, sortOnly){\n\t\tvar config = row.modules.dataTree,\n\t\tchildren = [],\n\t\toutput = [];\n\n\t\tif(config.children !== false && (config.open || allChildren)){\n\t\t\tif(!Array.isArray(config.children)){\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tif(this.table.modExists(\"filter\") && this.table.options.dataTreeFilter){\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\n\t\t\t}else{\n\t\t\t\tchildren = config.children;\n\t\t\t}\n\n\t\t\tif(this.table.modExists(\"sort\") && this.table.options.dataTreeSort){\n\t\t\t\tthis.table.modules.sort.sort(children, sortOnly);\n\t\t\t}\n\n\t\t\tchildren.forEach((child) => {\n\t\t\t\toutput.push(child);\n\n\t\t\t\tvar subChildren = this.getChildren(child, false, true);\n\n\t\t\t\tsubChildren.forEach((sub) => {\n\t\t\t\t\toutput.push(sub);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tgenerateChildren(row){\n\t\tvar children = [];\n\n\t\tvar childArray = row.getData()[this.field];\n\n\t\tif(!Array.isArray(childArray)){\n\t\t\tchildArray = [childArray];\n\t\t}\n\n\t\tchildArray.forEach((childData) => {\n\t\t\tvar childRow = new Row(childData || {}, this.table.rowManager);\n\n\t\t\tchildRow.create();\n\n\t\t\tchildRow.modules.dataTree.index = row.modules.dataTree.index + 1;\n\t\t\tchildRow.modules.dataTree.parent = row;\n\n\t\t\tif(childRow.modules.dataTree.children){\n\t\t\t\tchildRow.modules.dataTree.open = this.startOpen(childRow.getComponent(), childRow.modules.dataTree.index);\n\t\t\t}\n\t\t\tchildren.push(childRow);\n\t\t});\n\n\t\treturn children;\n\t}\n\n\texpandRow(row, silent){\n\t\tvar config = row.modules.dataTree;\n\n\t\tif(config.children !== false){\n\t\t\tconfig.open = true;\n\n\t\t\trow.reinitialize();\n\n\t\t\tthis.refreshData(true);\n\n\t\t\tthis.dispatchExternal(\"dataTreeRowExpanded\", row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\t}\n\n\tcollapseRow(row){\n\t\tvar config = row.modules.dataTree;\n\n\t\tif(config.children !== false){\n\t\t\tconfig.open = false;\n\n\t\t\trow.reinitialize();\n\n\t\t\tthis.refreshData(true);\n\n\t\t\tthis.dispatchExternal(\"dataTreeRowCollapsed\", row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\t}\n\n\ttoggleRow(row){\n\t\tvar config = row.modules.dataTree;\n\n\t\tif(config.children !== false){\n\t\t\tif(config.open){\n\t\t\t\tthis.collapseRow(row);\n\t\t\t}else{\n\t\t\t\tthis.expandRow(row);\n\t\t\t}\n\t\t}\n\t}\n\n\tisRowExpanded(row){\n\t\treturn row.modules.dataTree.open;\n\t}\n\n\tgetTreeParent(row){\n\t\treturn row.modules.dataTree.parent ? row.modules.dataTree.parent.getComponent() : false;\n\t}\n\n\tgetTreeParentRoot(row){\n\t\treturn row.modules.dataTree && row.modules.dataTree.parent ? this.getTreeParentRoot(row.modules.dataTree.parent) : row;\n\t}\n\n\tgetFilteredTreeChildren(row){\n\t\tvar config = row.modules.dataTree,\n\t\toutput = [], children;\n\n\t\tif(config.children){\n\n\t\t\tif(!Array.isArray(config.children)){\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tif(this.table.modExists(\"filter\") && this.table.options.dataTreeFilter){\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\n\t\t\t}else{\n\t\t\t\tchildren = config.children;\n\t\t\t}\n\n\t\t\tchildren.forEach((childRow) => {\n\t\t\t\tif(childRow instanceof Row){\n\t\t\t\t\toutput.push(childRow);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\trowDelete(row){\n\t\tvar parent = row.modules.dataTree.parent,\n\t\tchildIndex;\n\n\t\tif(parent){\n\t\t\tchildIndex = this.findChildIndex(row, parent);\n\n\t\t\tif(childIndex !== false){\n\t\t\t\tparent.data[this.field].splice(childIndex, 1);\n\t\t\t}\n\n\t\t\tif(!parent.data[this.field].length){\n\t\t\t\tdelete parent.data[this.field];\n\t\t\t}\n\n\t\t\tthis.initializeRow(parent);\n\t\t\tthis.layoutRow(parent);\n\t\t}\n\n\t\tthis.refreshData(true);\n\t}\n\n\taddTreeChildRow(row, data, top, index){\n\t\tvar childIndex = false;\n\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\n\t\tif(!Array.isArray(row.data[this.field])){\n\t\t\trow.data[this.field] = [];\n\n\t\t\trow.modules.dataTree.open = this.startOpen(row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\n\t\tif(typeof index !== \"undefined\"){\n\t\t\tchildIndex = this.findChildIndex(index, row);\n\n\t\t\tif(childIndex !== false){\n\t\t\t\trow.data[this.field].splice((top ? childIndex : childIndex + 1), 0, data);\n\t\t\t}\n\t\t}\n\n\t\tif(childIndex === false){\n\t\t\tif(top){\n\t\t\t\trow.data[this.field].unshift(data);\n\t\t\t}else{\n\t\t\t\trow.data[this.field].push(data);\n\t\t\t}\n\t\t}\n\n\t\tthis.initializeRow(row);\n\t\tthis.layoutRow(row);\n\n\t\tthis.refreshData(true);\n\t}\n\n\tfindChildIndex(subject, parent){\n\t\tvar match = false;\n\n\t\tif(typeof subject == \"object\"){\n\n\t\t\tif(subject instanceof Row){\n\t\t\t\t//subject is row element\n\t\t\t\tmatch = subject.data;\n\t\t\t}else if(subject instanceof RowComponent){\n\t\t\t\t//subject is public row component\n\t\t\t\tmatch = subject._getSelf().data;\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\n\t\t\t\tif(parent.modules.dataTree){\n\t\t\t\t\tmatch = parent.modules.dataTree.children.find((childRow) => {\n\t\t\t\t\t\treturn childRow instanceof Row ? childRow.element === subject : false;\n\t\t\t\t\t});\n\n\t\t\t\t\tif(match){\n\t\t\t\t\t\tmatch = match.data;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else if(subject === null){\n\t\t\t\tmatch = false;\n\t\t\t}\n\n\t\t}else if(typeof subject == \"undefined\"){\n\t\t\tmatch = false;\n\t\t}else{\n\t\t\t//subject should be treated as the index of the row\n\t\t\tmatch = parent.data[this.field].find((row) => {\n\t\t\t\treturn row.data[this.table.options.index] == subject;\n\t\t\t});\n\t\t}\n\n\t\tif(match){\n\n\t\t\tif(Array.isArray(parent.data[this.field])){\n\t\t\t\tmatch = parent.data[this.field].indexOf(match);\n\t\t\t}\n\n\t\t\tif(match == -1){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t}\n\n\t\t//catch all for any other type of input\n\n\t\treturn match;\n\t}\n\n\tgetTreeChildren(row, component, recurse){\n\t\tvar config = row.modules.dataTree,\n\t\toutput = [];\n\n\t\tif(config && config.children){\n\n\t\t\tif(!Array.isArray(config.children)){\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tconfig.children.forEach((childRow) => {\n\t\t\t\tif(childRow instanceof Row){\n\t\t\t\t\toutput.push(component ? childRow.getComponent() : childRow);\n\n\t\t\t\t\tif(recurse){\n\t\t\t\t\t\tthis.getTreeChildren(childRow, component, recurse).forEach(child => {\n\t\t\t\t\t\t\toutput.push(child);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tgetChildField(){\n\t\treturn this.field;\n\t}\n\n\tredrawNeeded(data){\n\t\treturn (this.field ? typeof data[this.field] !== \"undefined\" : false) || (this.elementField ? typeof data[this.elementField] !== \"undefined\" : false);\n\t}\n}","export default function(list, options = {}, setFileContents){\n\tvar delimiter = options.delimiter ? options.delimiter : \",\",\n\tfileContents = [],\n\theaders = [];\n\n\tlist.forEach((row) => {\n\t\tvar item = [];\n\n\t\tswitch(row.type){\n\t\t\tcase \"group\":\n\t\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process row groups\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process column calculations\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"header\":\n\t\t\t\trow.columns.forEach((col, i) => {\n\t\t\t\t\tif(col && col.depth === 1){\n\t\t\t\t\t\theaders[i] = typeof col.value == \"undefined\"  || col.value === null ? \"\" : ('\"' + String(col.value).split('\"').join('\"\"') + '\"');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\trow.columns.forEach((col) => {\n\n\t\t\t\t\tif(col){\n\n\t\t\t\t\t\tswitch(typeof col.value){\n\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\tcol.value = col.value !== null ? JSON.stringify(col.value) : \"\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\t\tcol.value = \"\";\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\titem.push('\"' + String(col.value).split('\"').join('\"\"') + '\"');\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfileContents.push(item.join(delimiter));\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(headers.length){\n\t\tfileContents.unshift(headers.join(delimiter));\n\t}\n\n\tfileContents = fileContents.join(\"\\n\");\n\n\tif(options.bom){\n\t\tfileContents = \"\\ufeff\" + fileContents;\n\t}\n\n\tsetFileContents(fileContents, \"text/csv\");\n}\n","export default function(list, options, setFileContents){\n\tvar fileContents = [];\n\n\tlist.forEach((row) => {\n\t\tvar item = {};\n\n\t\tswitch(row.type){\n\t\t\tcase \"header\":\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process row groups\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process column calculations\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\trow.columns.forEach((col) => {\n\t\t\t\t\tif(col){\n\t\t\t\t\t\titem[col.component.getTitleDownload() || col.component.getField()] = col.value;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfileContents.push(item);\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tfileContents = JSON.stringify(fileContents, null, '\\t');\n\n\tsetFileContents(fileContents, \"application/json\");\n}","export default function(list, options = {}, setFileContents){\n\tvar header = [],\n\tbody = [],\n\tautoTableParams = {},\n\trowGroupStyles = options.rowGroupStyles || {\n\t\tfontStyle: \"bold\",\n\t\tfontSize: 12,\n\t\tcellPadding: 6,\n\t\tfillColor: 220,\n\t},\n\trowCalcStyles = options.rowCalcStyles || {\n\t\tfontStyle: \"bold\",\n\t\tfontSize: 10,\n\t\tcellPadding: 4,\n\t\tfillColor: 232,\n\t},\n\tjsPDFParams = options.jsPDF || {},\n\ttitle = options.title ? options.title : \"\";\n\n\tif(!jsPDFParams.orientation){\n\t\tjsPDFParams.orientation = options.orientation || \"landscape\";\n\t}\n\n\tif(!jsPDFParams.unit){\n\t\tjsPDFParams.unit = \"pt\";\n\t}\n\n\t//parse row list\n\tlist.forEach((row) => {\n\t\tswitch(row.type){\n\t\t\tcase \"header\":\n\t\t\t\theader.push(parseRow(row));\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tbody.push(parseRow(row, rowGroupStyles));\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tbody.push(parseRow(row, rowCalcStyles));\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\tbody.push(parseRow(row));\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tfunction parseRow(row, styles){\n\t\tvar rowData = [];\n\n\t\trow.columns.forEach((col) =>{\n\t\t\tvar cell;\n\n\t\t\tif(col){\n\t\t\t\tswitch(typeof col.value){\n\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\tcol.value = col.value !== null ? JSON.stringify(col.value) : \"\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\tcol.value = \"\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcell = {\n\t\t\t\t\tcontent:col.value,\n\t\t\t\t\tcolSpan:col.width,\n\t\t\t\t\trowSpan:col.height,\n\t\t\t\t};\n\n\t\t\t\tif(styles){\n\t\t\t\t\tcell.styles = styles;\n\t\t\t\t}\n\n\t\t\t\trowData.push(cell);\n\t\t\t}\n\t\t});\n\n\t\treturn rowData;\n\t}\n\n\n\t//configure PDF\n\tvar doc = new jspdf.jsPDF(jsPDFParams); //set document to landscape, better for most tables\n\n\tif(options.autoTable){\n\t\tif(typeof options.autoTable === \"function\"){\n\t\t\tautoTableParams = options.autoTable(doc) || {};\n\t\t}else{\n\t\t\tautoTableParams = options.autoTable;\n\t\t}\n\t}\n\n\tif(title){\n\t\tautoTableParams.didDrawPage = function(data) {\n\t\t\tdoc.text(title, 40, 30);\n\t\t};\n\t}\n\n\tautoTableParams.head = header;\n\tautoTableParams.body = body;\n\n\tdoc.autoTable(autoTableParams);\n\n\tif(options.documentProcessing){\n\t\toptions.documentProcessing(doc);\n\t}\n\n\tsetFileContents(doc.output(\"arraybuffer\"), \"application/pdf\");\n}\n","import CoreFeature from '../../../../core/CoreFeature.js';\n\nexport default function(list, options, setFileContents){\n\tvar self = this,\n\tsheetName = options.sheetName || \"Sheet1\",\n\tworkbook = XLSX.utils.book_new(),\n\ttableFeatures = new CoreFeature(this),\n\tcompression =  'compress' in options ? options.compress : true,\n\twriteOptions = options.writeOptions || {bookType:'xlsx', bookSST:true, compression},\n\toutput;\n\n\twriteOptions.type = 'binary';\n\n\tworkbook.SheetNames = [];\n\tworkbook.Sheets = {};\n\n\tfunction generateSheet(){\n\t\tvar rows = [],\n\t\tmerges = [],\n\t\tworksheet = {},\n\t\trange = {s: {c:0, r:0}, e: {c:(list[0] ? list[0].columns.reduce((a, b) => a + (b && b.width ? b.width : 1), 0) : 0), r:list.length }};\n\n\t\t//parse row list\n\t\tlist.forEach((row, i) => {\n\t\t\tvar rowData = [];\n\n\t\t\trow.columns.forEach(function(col, j){\n\n\t\t\t\tif(col){\n\t\t\t\t\trowData.push(!(col.value instanceof Date) && typeof col.value === \"object\" ? JSON.stringify(col.value) : col.value);\n\n\t\t\t\t\tif(col.width > 1 || col.height > -1){\n\t\t\t\t\t\tif(col.height > 1 || col.width > 1){\n\t\t\t\t\t\t\tmerges.push({s:{r:i,c:j},e:{r:i + col.height - 1,c:j + col.width - 1}});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\trowData.push(\"\");\n\t\t\t\t}\n\t\t\t});\n\n\t\t\trows.push(rowData);\n\t\t});\n\n\t\t//convert rows to worksheet\n\t\tXLSX.utils.sheet_add_aoa(worksheet, rows);\n\n\t\tworksheet['!ref'] = XLSX.utils.encode_range(range);\n\n\t\tif(merges.length){\n\t\t\tworksheet[\"!merges\"] = merges;\n\t\t}\n\n\t\treturn worksheet;\n\t}\n\n\tif(options.sheetOnly){\n\t\tsetFileContents(generateSheet());\n\t\treturn;\n\t}\n\n\tif(options.sheets){\n\t\tfor(var sheet in options.sheets){\n\n\t\t\tif(options.sheets[sheet] === true){\n\t\t\t\tworkbook.SheetNames.push(sheet);\n\t\t\t\tworkbook.Sheets[sheet] = generateSheet();\n\t\t\t}else{\n\n\t\t\t\tworkbook.SheetNames.push(sheet);\n\n\t\t\t\ttableFeatures.commsSend(options.sheets[sheet], \"download\", \"intercept\",{\n\t\t\t\t\ttype:\"xlsx\",\n\t\t\t\t\toptions:{sheetOnly:true},\n\t\t\t\t\tactive:self.active,\n\t\t\t\t\tintercept:function(data){\n\t\t\t\t\t\tworkbook.Sheets[sheet] = data;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}else{\n\t\tworkbook.SheetNames.push(sheetName);\n\t\tworkbook.Sheets[sheetName] = generateSheet();\n\t}\n\n\tif(options.documentProcessing){\n\t\tworkbook = options.documentProcessing(workbook);\n\t}\n\n\t//convert workbook to binary array\n\tfunction s2ab(s) {\n\t\tvar buf = new ArrayBuffer(s.length);\n\t\tvar view = new Uint8Array(buf);\n\t\tfor (var i=0; i!=s.length; ++i) view[i] = s.charCodeAt(i) & 0xFF;\n\t\treturn buf;\n\t}\n\n\toutput = XLSX.write(workbook, writeOptions);\n\n\tsetFileContents(s2ab(output), \"application/octet-stream\");\n}\n","export default function(list, options, setFileContents){\n\tif(this.modExists(\"export\", true)){\n\t\tsetFileContents(this.modules.export.generateHTMLTable(list), \"text/html\");\n\t}\n}","export default function (list, options, setFileContents) {\n\tconst fileContents = [];\n\n\tlist.forEach((row) => {\n\t\tconst item = {};\n\n\t\tswitch (row.type) {\n\t\t\tcase \"header\":\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process row groups\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process column calculations\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\trow.columns.forEach((col) => {\n\t\t\t\t\tif (col) {\n\t\t\t\t\t\titem[col.component.getTitleDownload() || col.component.getField()] = col.value;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfileContents.push(JSON.stringify(item));\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tsetFileContents(fileContents.join(\"\\n\"), \"application/x-ndjson\");\n}","import csv from './downloaders/csv.js';\nimport json from './downloaders/json.js';\nimport pdf from './downloaders/pdf.js';\nimport xlsx from './downloaders/xlsx.js';\nimport html from './downloaders/html.js';\nimport jsonLines from './downloaders/jsonLines.js';\n\nexport default {\n\tcsv:csv,\n\tjson:json,\n\tjsonLines:jsonLines,\n\tpdf:pdf,\n\txlsx:xlsx,\n\thtml:html,\n};","import Module from '../../core/Module.js';\n\nimport defaultDownloaders from './defaults/downloaders.js';\n\nexport default class Download extends Module{\n\n\tstatic moduleName = \"download\";\n\n\t//load defaults\n\tstatic downloaders = defaultDownloaders;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.registerTableOption(\"downloadEncoder\", function(data, mimeType){\n\t\t\treturn new Blob([data],{type:mimeType});\n\t\t}); //function to manipulate download data\n\t\t// this.registerTableOption(\"downloadReady\", undefined); //warn of function deprecation\n\t\tthis.registerTableOption(\"downloadConfig\", {}); //download config\n\t\tthis.registerTableOption(\"downloadRowRange\", \"active\"); //restrict download to active rows only\n\n\t\tthis.registerColumnOption(\"download\");\n\t\tthis.registerColumnOption(\"titleDownload\");\n\t}\n\n\tinitialize(){\n\t\tthis.deprecatedOptionsCheck();\n\n\t\tthis.registerTableFunction(\"download\", this.download.bind(this));\n\t\tthis.registerTableFunction(\"downloadToTab\", this.downloadToTab.bind(this));\n\t}\n\n\tdeprecatedOptionsCheck(){\n\t\t// this.deprecationCheck(\"downloadReady\", \"downloadEncoder\");\n\t}\t\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\tdownloadToTab(type, filename, options, active){\n\t\tthis.download(type, filename, options, active, true);\n\t}\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\t//trigger file download\n\tdownload(type, filename, options, range, interceptCallback){\n\t\tvar downloadFunc = false;\n\n\t\tfunction buildLink(data, mime){\n\t\t\tif(interceptCallback){\n\t\t\t\tif(interceptCallback === true){\n\t\t\t\t\tthis.triggerDownload(data, mime, type, filename, true);\n\t\t\t\t}else{\n\t\t\t\t\tinterceptCallback(data);\n\t\t\t\t}\n\n\t\t\t}else{\n\t\t\t\tthis.triggerDownload(data, mime, type, filename);\n\t\t\t}\n\t\t}\n\n\t\tif(typeof type == \"function\"){\n\t\t\tdownloadFunc = type;\n\t\t}else{\n\t\t\tif(Download.downloaders[type]){\n\t\t\t\tdownloadFunc = Download.downloaders[type];\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Download Error - No such download type found: \", type);\n\t\t\t}\n\t\t}\n\n\t\tif(downloadFunc){\n\t\t\tvar list = this.generateExportList(range);\n\n\t\t\tdownloadFunc.call(this.table, list , options || {}, buildLink.bind(this));\n\t\t}\n\t}\n\n\tgenerateExportList(range){\n\t\tvar list = this.table.modules.export.generateExportList(this.table.options.downloadConfig, false, range || this.table.options.downloadRowRange, \"download\");\n\n\t\t//assign group header formatter\n\t\tvar groupHeader = this.table.options.groupHeaderDownload;\n\n\t\tif(groupHeader && !Array.isArray(groupHeader)){\n\t\t\tgroupHeader = [groupHeader];\n\t\t}\n\n\t\tlist.forEach((row) => {\n\t\t\tvar group;\n\n\t\t\tif(row.type === \"group\"){\n\t\t\t\tgroup = row.columns[0];\n\n\t\t\t\tif(groupHeader && groupHeader[row.indent]){\n\t\t\t\t\tgroup.value = groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn list;\n\t}\n\n\ttriggerDownload(data, mime, type, filename, newTab){\n\t\tvar element = document.createElement('a'),\n\t\tblob = this.table.options.downloadEncoder(data, mime);\n\n\t\tif(blob){\n\t\t\tif(newTab){\n\t\t\t\twindow.open(window.URL.createObjectURL(blob));\n\t\t\t}else{\n\t\t\t\tfilename = filename || \"Tabulator.\" + (typeof type === \"function\" ? \"txt\" : type);\n\t\t\t\t\n\t\t\t\tif(navigator.msSaveOrOpenBlob){\n\t\t\t\t\tnavigator.msSaveOrOpenBlob(blob, filename);\n\t\t\t\t}else{\n\t\t\t\t\telement.setAttribute('href', window.URL.createObjectURL(blob));\n\n\t\t\t\t\t//set file title\n\t\t\t\t\telement.setAttribute('download', filename);\n\n\t\t\t\t\t//trigger download\n\t\t\t\t\telement.style.display = 'none';\n\t\t\t\t\tdocument.body.appendChild(element);\n\t\t\t\t\telement.click();\n\n\t\t\t\t\t//remove temporary link element\n\t\t\t\t\tdocument.body.removeChild(element);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.dispatchExternal(\"downloadComplete\");\n\t\t}\n\t}\n\n\tcommsReceived(table, action, data){\n\t\tswitch(action){\n\t\t\tcase \"intercept\":\n\t\t\t\tthis.download(data.type, \"\", data.options, data.active, data.intercept);\n\t\t\t\tbreak;\n\t\t}\n\t}\n}","export default function maskInput(el, options){\n\tvar mask = options.mask,\n\tmaskLetter = typeof options.maskLetterChar !== \"undefined\" ? options.maskLetterChar : \"A\",\n\tmaskNumber = typeof options.maskNumberChar !== \"undefined\" ? options.maskNumberChar : \"9\",\n\tmaskWildcard = typeof options.maskWildcardChar !== \"undefined\" ? options.maskWildcardChar : \"*\";\n\n\tfunction fillSymbols(index){\n\t\tvar symbol = mask[index];\n\t\tif(typeof symbol !== \"undefined\" && symbol !== maskWildcard && symbol !== maskLetter && symbol !== maskNumber){\n\t\t\tel.value = el.value + \"\" + symbol;\n\t\t\tfillSymbols(index+1);\n\t\t}\n\t}\n\n\tel.addEventListener(\"keydown\", (e) => {\n\t\tvar index = el.value.length,\n\t\tchar = e.key;\n\n\t\tif(e.keyCode > 46 && !e.ctrlKey && !e.metaKey){\n\t\t\tif(index >= mask.length){\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\treturn false;\n\t\t\t}else{\n\t\t\t\tswitch(mask[index]){\n\t\t\t\t\tcase maskLetter:\n\t\t\t\t\t\tif(char.toUpperCase() == char.toLowerCase()){\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase maskNumber:\n\t\t\t\t\t\tif(isNaN(char)){\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase maskWildcard:\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif(char !== mask[index]){\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn;\n\t});\n\n\tel.addEventListener(\"keyup\", (e) => {\n\t\tif(e.keyCode > 46){\n\t\t\tif(options.maskAutoFill){\n\t\t\t\tfillSymbols(el.value.length);\n\t\t\t}\n\t\t}\n\t});\n\n\n\tif(!el.placeholder){\n\t\tel.placeholder = mask;\n\t}\n\n\tif(options.maskAutoFill){\n\t\tfillSymbols(el.value.length);\n\t}\n}","import maskInput from '../../inputMask.js';\n\n//input element\nexport default function(cell, onRendered, success, cancel, editorParams){\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\n\tinput.setAttribute(\"type\", editorParams.search ? \"search\" : \"text\");\n\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\tinput.value = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\n\tonRendered(function(){\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction onChange(e){\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\") || input.value !== cellValue){\n\t\t\tif(success(input.value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\n\t//submit new value on blur or change\n\tinput.addEventListener(\"change\", onChange);\n\tinput.addEventListener(\"blur\", onChange);\n\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange(e);\n\t\t\t\tbreak;\n\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(editorParams.mask){\n\t\tmaskInput(input, editorParams);\n\t}\n\n\treturn input;\n}","import maskInput from '../../inputMask.js';\n\n//resizable text area element\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar cellValue = cell.getValue(),\n\tvertNav = editorParams.verticalNavigation || \"hybrid\",\n\tvalue = String(cellValue !== null && typeof cellValue !== \"undefined\"  ? cellValue : \"\"),\n\tinput = document.createElement(\"textarea\"),\n\tscrollHeight = 0;\n\n\t//create and style input\n\tinput.style.display = \"block\";\n\tinput.style.padding = \"2px\";\n\tinput.style.height = \"100%\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\tinput.style.whiteSpace = \"pre-wrap\";\n\tinput.style.resize = \"none\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\tinput.value = value;\n\n\tonRendered(function(){\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\n\t\t\tinput.scrollHeight;\n\t\t\tinput.style.height = input.scrollHeight + \"px\";\n\t\t\tcell.getRow().normalizeHeight();\n\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction onChange(e){\n\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\") || input.value !== cellValue){\n\n\t\t\tif(success(input.value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tcell.getRow().normalizeHeight();\n\t\t\t},300);\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\n\t//submit new value on blur or change\n\tinput.addEventListener(\"change\", onChange);\n\tinput.addEventListener(\"blur\", onChange);\n\n\tinput.addEventListener(\"keyup\", function(){\n\n\t\tinput.style.height = \"\";\n\n\t\tvar heightNow = input.scrollHeight;\n\n\t\tinput.style.height = heightNow + \"px\";\n\n\t\tif(heightNow != scrollHeight){\n\t\t\tscrollHeight = heightNow;\n\t\t\tcell.getRow().normalizeHeight();\n\t\t}\n\t});\n\n\tinput.addEventListener(\"keydown\", function(e){\n\n\t\tswitch(e.keyCode){\n\n\t\t\tcase 13:\n\t\t\t\tif(e.shiftKey && editorParams.shiftEnterSubmit){\n\t\t\t\t\tonChange(e);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && input.selectionStart)){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && input.selectionStart !== input.value.length)){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(editorParams.mask){\n\t\tmaskInput(input, editorParams);\n\t}\n\n\treturn input;\n}","import maskInput from '../../inputMask.js';\n\n//input element with type of number\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar cellValue = cell.getValue(),\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tinput = document.createElement(\"input\");\n\n\tinput.setAttribute(\"type\", \"number\");\n\n\tif(typeof editorParams.max != \"undefined\"){\n\t\tinput.setAttribute(\"max\", editorParams.max);\n\t}\n\n\tif(typeof editorParams.min != \"undefined\"){\n\t\tinput.setAttribute(\"min\", editorParams.min);\n\t}\n\n\tif(typeof editorParams.step != \"undefined\"){\n\t\tinput.setAttribute(\"step\", editorParams.step);\n\t}\n\n\t//create and style input\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\tinput.value = cellValue;\n\n\tvar blurFunc = function(e){\n\t\tonChange();\n\t};\n\n\tonRendered(function () {\n\t\tif(cell.getType() === \"cell\"){\n\t\t\t//submit new value on blur\n\t\t\tinput.removeEventListener(\"blur\", blurFunc);\n\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\n\t\t\t//submit new value on blur\n\t\t\tinput.addEventListener(\"blur\", blurFunc);\n\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction onChange(){\n\t\tvar value = input.value;\n\n\t\tif(!isNaN(value) && value !==\"\"){\n\t\t\tvalue = Number(value);\n\t\t}\n\n\t\tif(value !== cellValue){\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 13:\n\t\t\t// case 9:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(editorParams.mask){\n\t\tmaskInput(input, editorParams);\n\t}\n\n\treturn input;\n}","//input element with type of number\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tinput.setAttribute(\"type\", \"range\");\n\t\n\tif (typeof editorParams.max != \"undefined\") {\n\t\tinput.setAttribute(\"max\", editorParams.max);\n\t}\n\t\n\tif (typeof editorParams.min != \"undefined\") {\n\t\tinput.setAttribute(\"min\", editorParams.min);\n\t}\n\t\n\tif (typeof editorParams.step != \"undefined\") {\n\t\tinput.setAttribute(\"step\", editorParams.step);\n\t}\n\t\n\t//create and style input\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function () {\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value;\n\t\t\n\t\tif(!isNaN(value) && value !==\"\"){\n\t\t\tvalue = Number(value);\n\t\t}\n\t\t\n\t\tif(value != cellValue){\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e){\n\t\tonChange();\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 13:\n\t\t\t// case 9:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}","//input element\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar inputFormat = editorParams.format,\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tDT = inputFormat ? (window.DateTime || luxon.DateTime) : null;\n\t\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tfunction convertDate(value){\n\t\tvar newDatetime;\n\t\t\n\t\tif(DT.isDateTime(value)){\n\t\t\tnewDatetime = value;\n\t\t}else if(inputFormat === \"iso\"){\n\t\t\tnewDatetime = DT.fromISO(String(value));\n\t\t}else{\n\t\t\tnewDatetime = DT.fromFormat(String(value), inputFormat);\n\t\t}\n\t\t\n\t\treturn newDatetime.toFormat(\"yyyy-MM-dd\");\n\t}\n\t\n\tinput.type = \"date\";\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\n\tif(editorParams.max){\n\t\tinput.setAttribute(\"max\", inputFormat ? convertDate(editorParams.max) : editorParams.max);\n\t}\n\n\tif(editorParams.min){\n\t\tinput.setAttribute(\"min\", inputFormat ? convertDate(editorParams.min) : editorParams.min);\n\t}\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\t\n\tif(inputFormat){\n\t\tif(DT){\t\t\n\t\t\tcellValue = convertDate(cellValue);\t\t\t\n\t\t}else{\n\t\t\tconsole.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\");\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function(){\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t\t\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value,\n\t\tluxDate;\n\t\t\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\") || value !== cellValue){\n\t\t\t\n\t\t\tif(value && inputFormat){\n\t\t\t\tluxDate = DT.fromFormat(String(value), \"yyyy-MM-dd\");\n\n\t\t\t\tswitch(inputFormat){\n\t\t\t\t\tcase true:\n\t\t\t\t\t\tvalue = luxDate;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"iso\":\n\t\t\t\t\t\tvalue = luxDate.toISO();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalue = luxDate.toFormat(inputFormat);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e) {\n\t\tif (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\n\t\t\tonChange(); // only on a \"true\" blur; not when focusing browser's date/time picker\n\t\t}\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}\n","//input element\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar inputFormat = editorParams.format,\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tDT = inputFormat ? (window.DateTime || luxon.DateTime) : null, \n\tnewDatetime;\n\t\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tinput.type = \"time\";\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\t\n\tif(inputFormat){\n\t\tif(DT){\n\t\t\tif(DT.isDateTime(cellValue)){\n\t\t\t\tnewDatetime = cellValue;\n\t\t\t}else if(inputFormat === \"iso\"){\n\t\t\t\tnewDatetime = DT.fromISO(String(cellValue));\n\t\t\t}else{\n\t\t\t\tnewDatetime = DT.fromFormat(String(cellValue), inputFormat);\n\t\t\t}\n\t\t\t\n\t\t\tcellValue = newDatetime.toFormat(\"HH:mm\");\n\t\t\t\n\t\t}else{\n\t\t\tconsole.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\");\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function(){\n\t\tif(cell.getType() == \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t\t\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value,\n\t\tluxTime;\n\t\t\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\") || value !== cellValue){\n\t\t\t\n\t\t\tif(value && inputFormat){\n\t\t\t\tluxTime = DT.fromFormat(String(value), \"hh:mm\");\n\n\t\t\t\tswitch(inputFormat){\n\t\t\t\t\tcase true:\n\t\t\t\t\t\tvalue = luxTime;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"iso\":\n\t\t\t\t\t\tvalue = luxTime.toISO();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalue = luxTime.toFormat(inputFormat);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e) {\n\t\tif (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\n\t\t\tonChange(); // only on a \"true\" blur; not when focusing browser's date/time picker\n\t\t}\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}\n","//input element\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar inputFormat = editorParams.format,\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tDT = inputFormat ? (window.DateTime || luxon.DateTime) : null, \n\tnewDatetime;\n\t\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tinput.type = \"datetime-local\";\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\t\n\tif(inputFormat){\n\t\tif(DT){\n\t\t\tif(DT.isDateTime(cellValue)){\n\t\t\t\tnewDatetime = cellValue;\n\t\t\t}else if(inputFormat === \"iso\"){\n\t\t\t\tnewDatetime = DT.fromISO(String(cellValue));\n\t\t\t}else{\n\t\t\t\tnewDatetime = DT.fromFormat(String(cellValue), inputFormat);\n\t\t\t}\n\t\t\t\n\t\t\tcellValue = newDatetime.toFormat(\"yyyy-MM-dd\")  + \"T\" + newDatetime.toFormat(\"HH:mm\");\n\t\t}else{\n\t\t\tconsole.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\");\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function(){\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t\t\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value,\n\t\tluxDateTime;\n\t\t\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\") || value !== cellValue){\n\n\t\t\tif(value && inputFormat){\n\t\t\t\tluxDateTime = DT.fromISO(String(value));\n\n\t\t\t\tswitch(inputFormat){\n\t\t\t\t\tcase true:\n\t\t\t\t\t\tvalue = luxDateTime;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"iso\":\n\t\t\t\t\t\tvalue = luxDateTime.toISO();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalue = luxDateTime.toFormat(inputFormat);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e) {\n\t\tif (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\n\t\t\tonChange(); // only on a \"true\" blur; not when focusing browser's date/time picker\n\t\t}\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}\n","import maskInput from './inputMask.js';\nimport urlBuilder from '../Ajax/defaults/urlGenerator.js';\n\nexport default class Edit{\n\tconstructor(editor, cell, onRendered, success, cancel, editorParams){\n\t\tthis.edit = editor;\n\t\tthis.table = editor.table;\n\t\tthis.cell = cell;\n\t\tthis.params = this._initializeParams(editorParams);\n\t\t\n\t\tthis.data = [];\n\t\tthis.displayItems = [];\n\t\tthis.currentItems = [];\n\t\tthis.focusedItem = null;\n\t\t\n\t\tthis.input = this._createInputElement();\n\t\tthis.listEl = this._createListElement();\n\t\t\n\t\tthis.initialValues = null; \n\t\t\n\t\tthis.isFilter = cell.getType() === \"header\";\n\t\t\n\t\tthis.filterTimeout = null;\n\t\tthis.filtered = false;\n\t\tthis.typing = false;\n\t\t\n\t\tthis.values = []; \n\t\tthis.popup = null;  \n\t\t\n\t\tthis.listIteration = 0;\n\t\t\n\t\tthis.lastAction=\"\";\n\t\tthis.filterTerm=\"\";\n\t\t\n\t\tthis.blurable = true;\n\t\t\n\t\tthis.actions = {\n\t\t\tsuccess:success,\n\t\t\tcancel:cancel\n\t\t};\n\t\t\n\t\tthis._deprecatedOptionsCheck();\n\t\tthis._initializeValue();\n\t\t\n\t\tonRendered(this._onRendered.bind(this));\n\t}\n\t\n\t_deprecatedOptionsCheck(){\n\t\t// if(this.params.listItemFormatter){\n\t\t// \tthis.cell.getTable().deprecationAdvisor.msg(\"The listItemFormatter editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t// }\n\t\t\n\t\t// if(this.params.sortValuesList){\n\t\t// \tthis.cell.getTable().deprecationAdvisor.msg(\"The sortValuesList editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t// }\n\t\t\n\t\t// if(this.params.searchFunc){\n\t\t// \tthis.cell.getTable().deprecationAdvisor.msg(\"The searchFunc editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t// }\n\t\t\n\t\t// if(this.params.searchingPlaceholder){\n\t\t// \tthis.cell.getTable().deprecationAdvisor.msg(\"The searchingPlaceholder editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t// }\n\t}\n\t\n\t_initializeValue(){\n\t\tvar initialValue = this.cell.getValue();\n\t\t\n\t\tif(typeof initialValue === \"undefined\" && typeof this.params.defaultValue !== \"undefined\"){\n\t\t\tinitialValue = this.params.defaultValue;\n\t\t}\n\t\t\n\t\tthis.initialValues = this.params.multiselect ? initialValue : [initialValue];\n\t\t\n\t\tif(this.isFilter){\n\t\t\tthis.input.value = this.initialValues ? this.initialValues.join(\",\") : \"\";\n\t\t\tthis.headerFilterInitialListGen();            \n\t\t}\n\t}\n\t\n\t_onRendered(){\n\t\tvar cellEl = this.cell.getElement();\n\t\t\n\t\tfunction clickStop(e){\n\t\t\te.stopPropagation();\n\t\t}\t\n\t\t\n\t\tif(!this.isFilter){\n\t\t\tthis.input.style.height = \"100%\";\n\t\t\tthis.input.focus({preventScroll: true});\n\t\t}\n\t\t\n\t\t\n\t\tcellEl.addEventListener(\"click\", clickStop);\n\t\t\n\t\tsetTimeout(() => {\n\t\t\tcellEl.removeEventListener(\"click\", clickStop);\n\t\t}, 1000);\n\t\t\n\t\tthis.input.addEventListener(\"mousedown\", this._preventPopupBlur.bind(this));\n\t}\n\t\n\t_createListElement(){\n\t\tvar listEl = document.createElement(\"div\");\n\t\tlistEl.classList.add(\"tabulator-edit-list\");\n\t\t\n\t\tlistEl.addEventListener(\"mousedown\", this._preventBlur.bind(this));\n\t\tlistEl.addEventListener(\"keydown\", this._inputKeyDown.bind(this));\n\t\t\n\t\treturn listEl;\n\t}\n\t\n\t_setListWidth(){\n\t\tvar element = this.isFilter ? this.input : this.cell.getElement();\n\t\t\n\t\tthis.listEl.style.minWidth = element.offsetWidth + \"px\";\n\t\t\n\t\tif(this.params.maxWidth){\n\t\t\tif(this.params.maxWidth === true){\n\t\t\t\tthis.listEl.style.maxWidth = element.offsetWidth + \"px\";\n\t\t\t}else if(typeof this.params.maxWidth === \"number\"){\n\t\t\t\tthis.listEl.style.maxWidth = this.params.maxWidth + \"px\";\n\t\t\t}else{\n\t\t\t\tthis.listEl.style.maxWidth = this.params.maxWidth;\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\t\n\t_createInputElement(){\n\t\tvar attribs = this.params.elementAttributes;\n\t\tvar input = document.createElement(\"input\");\n\t\t\n\t\tinput.setAttribute(\"type\", this.params.clearable ? \"search\" : \"text\");\n\t\t\n\t\tinput.style.padding = \"4px\";\n\t\tinput.style.width = \"100%\";\n\t\tinput.style.boxSizing = \"border-box\";\n\t\t\n\t\tif(!this.params.autocomplete){\n\t\t\tinput.style.cursor = \"default\";\n\t\t\tinput.style.caretColor = \"transparent\";\n\t\t\t// input.readOnly = (this.edit.currentCell != false);\n\t\t}\n\t\t\n\t\tif(attribs && typeof attribs == \"object\"){\n\t\t\tfor (let key in attribs){\n\t\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + attribs[\"+\" + key]);\n\t\t\t\t}else{\n\t\t\t\t\tinput.setAttribute(key, attribs[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(this.params.mask){\n\t\t\tmaskInput(input, this.params);\n\t\t}\n\t\t\n\t\tthis._bindInputEvents(input);\n\t\t\n\t\treturn input;\n\t}\n\t\n\t_initializeParams(params){\n\t\tvar valueKeys = [\"values\", \"valuesURL\", \"valuesLookup\"],\n\t\tvalueCheck;\n\t\t\n\t\tparams = Object.assign({}, params);\n\t\t\n\t\tparams.verticalNavigation = params.verticalNavigation || \"editor\";\n\t\tparams.placeholderLoading = typeof params.placeholderLoading === \"undefined\" ? \"Searching ...\" : params.placeholderLoading;\n\t\tparams.placeholderEmpty = typeof params.placeholderEmpty === \"undefined\" ? \"No Results Found\" : params.placeholderEmpty;\n\t\tparams.filterDelay = typeof params.filterDelay === \"undefined\" ? 300 : params.filterDelay;\n\t\t\n\t\tparams.emptyValue = Object.keys(params).includes(\"emptyValue\") ? params.emptyValue : \"\";\n\t\t\n\t\tvalueCheck = Object.keys(params).filter(key => valueKeys.includes(key)).length;\n\t\t\n\t\tif(!valueCheck){\n\t\t\tconsole.warn(\"list editor config error - either the values, valuesURL, or valuesLookup option must be set\");\n\t\t}else if(valueCheck > 1){\n\t\t\tconsole.warn(\"list editor config error - only one of the values, valuesURL, or valuesLookup options can be set on the same editor\");\n\t\t}\n\t\t\n\t\tif(params.autocomplete){\n\t\t\tif(params.multiselect){\n\t\t\t\tparams.multiselect = false;\n\t\t\t\tconsole.warn(\"list editor config error - multiselect option is not available when autocomplete is enabled\");\n\t\t\t}\n\t\t}else{\n\t\t\tif(params.freetext){\n\t\t\t\tparams.freetext = false;\n\t\t\t\tconsole.warn(\"list editor config error - freetext option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.filterFunc){\n\t\t\t\tparams.filterFunc = false;\n\t\t\t\tconsole.warn(\"list editor config error - filterFunc option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.filterRemote){\n\t\t\t\tparams.filterRemote = false;\n\t\t\t\tconsole.warn(\"list editor config error - filterRemote option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.mask){\n\t\t\t\tparams.mask = false;\n\t\t\t\tconsole.warn(\"list editor config error - mask option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.allowEmpty){\n\t\t\t\tparams.allowEmpty = false;\n\t\t\t\tconsole.warn(\"list editor config error - allowEmpty option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.listOnEmpty){\n\t\t\t\tparams.listOnEmpty = false;\n\t\t\t\tconsole.warn(\"list editor config error - listOnEmpty option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(params.filterRemote && !(typeof params.valuesLookup === \"function\" || params.valuesURL)){\n\t\t\tparams.filterRemote = false;\n\t\t\tconsole.warn(\"list editor config error - filterRemote option should only be used when values list is populated from a remote source\");\n\t\t}\n\t\treturn params;\n\t}\n\t//////////////////////////////////////\n\t////////// Event Handling ////////////\n\t//////////////////////////////////////\n\t\n\t_bindInputEvents(input){\n\t\tinput.addEventListener(\"focus\", this._inputFocus.bind(this));\n\t\tinput.addEventListener(\"click\", this._inputClick.bind(this));\n\t\tinput.addEventListener(\"blur\", this._inputBlur.bind(this));\n\t\tinput.addEventListener(\"keydown\", this._inputKeyDown.bind(this));\n\t\tinput.addEventListener(\"search\", this._inputSearch.bind(this));\n\t\t\n\t\tif(this.params.autocomplete){\n\t\t\tinput.addEventListener(\"keyup\", this._inputKeyUp.bind(this));\n\t\t}\n\t}\n\t\n\t\n\t_inputFocus(e){\n\t\tthis.rebuildOptionsList();\n\t}\n\t\n\t_filter(){\n\t\tif(this.params.filterRemote){\n\t\t\tclearTimeout(this.filterTimeout);\n\t\t\t\n\t\t\tthis.filterTimeout = setTimeout(() => {\n\t\t\t\tthis.rebuildOptionsList();\n\t\t\t}, this.params.filterDelay);\n\t\t}else{\n\t\t\tthis._filterList();\n\t\t}\n\t}\n\t\n\t_inputClick(e){\n\t\te.stopPropagation();\n\t}\n\t\n\t_inputBlur(e){\n\t\tif(this.blurable){\n\t\t\tif(this.popup){\n\t\t\t\tthis.popup.hide();\n\t\t\t}else{\n\t\t\t\tthis._resolveValue(true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_inputSearch(){\n\t\tthis._clearChoices();\n\t}\n\t\n\t_inputKeyDown(e){\n\t\tswitch(e.keyCode){\n\t\t\t\n\t\t\tcase 38: //up arrow\n\t\t\t\tthis._keyUp(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 40: //down arrow\n\t\t\t\tthis._keyDown(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 37: //left arrow\n\t\t\tcase 39: //right arrow\n\t\t\t\tthis._keySide(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 13: //enter\n\t\t\t\tthis._keyEnter();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27: //escape\n\t\t\t\tthis._keyEsc();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 36: //home\n\t\t\tcase 35: //end\n\t\t\t\tthis._keyHomeEnd(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 9: //tab\n\t\t\t\tthis._keyTab(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tthis._keySelectLetter(e);\n\t\t}\n\t}\n\t\n\t_inputKeyUp(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 38: //up arrow\n\t\t\tcase 37: //left arrow\n\t\t\tcase 39: //up arrow\n\t\t\tcase 40: //right arrow\n\t\t\tcase 13: //enter\n\t\t\tcase 27: //escape\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tthis._keyAutoCompLetter(e);\n\t\t}\n\t}\n\t\n\t_preventPopupBlur(){\n\t\tif(this.popup){\n\t\t\tthis.popup.blockHide();\n\t\t}\n\t\t\n\t\tsetTimeout(() =>{\n\t\t\tif(this.popup){\n\t\t\t\tthis.popup.restoreHide();\n\t\t\t}\n\t\t}, 10);\n\t}\n\t\n\t_preventBlur(){\n\t\tthis.blurable = false;\n\t\t\n\t\tsetTimeout(() =>{\n\t\t\tthis.blurable = true;\n\t\t}, 10);\n\t}\n\t\n\t//////////////////////////////////////\n\t//////// Keyboard Navigation /////////\n\t//////////////////////////////////////\n\t\n\t_keyTab(e){\n\t\tif(this.params.autocomplete && this.lastAction === \"typing\"){\n\t\t\tthis._resolveValue(true);\n\t\t}else{\n\t\t\tif(this.focusedItem){\n\t\t\t\tthis._chooseItem(this.focusedItem, true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keyUp(e){\n\t\tvar index = this.displayItems.indexOf(this.focusedItem);\n\t\t\n\t\tif(this.params.verticalNavigation == \"editor\" || (this.params.verticalNavigation == \"hybrid\" && index)){\n\t\t\te.stopImmediatePropagation();\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tif(index > 0){\n\t\t\t\tthis._focusItem(this.displayItems[index - 1]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keyDown(e){\n\t\tvar index = this.displayItems.indexOf(this.focusedItem);\n\t\t\n\t\tif(this.params.verticalNavigation == \"editor\" || (this.params.verticalNavigation == \"hybrid\" && index < this.displayItems.length - 1)){\n\t\t\te.stopImmediatePropagation();\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tif(index < this.displayItems.length - 1){\n\t\t\t\tif(index == -1){\n\t\t\t\t\tthis._focusItem(this.displayItems[0]);\n\t\t\t\t}else{\n\t\t\t\t\tthis._focusItem(this.displayItems[index + 1]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keySide(e){\n\t\tif(!this.params.autocomplete){\n\t\t\te.stopImmediatePropagation();\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t}\n\t}\n\t\n\t_keyEnter(e){\n\t\tif(this.params.autocomplete && this.lastAction === \"typing\"){\n\t\t\tthis._resolveValue(true);\n\t\t}else{\n\t\t\tif(this.focusedItem){\n\t\t\t\tthis._chooseItem(this.focusedItem);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keyEsc(e){\n\t\tthis._cancel();\n\t}\n\t\n\t_keyHomeEnd(e){\n\t\tif(this.params.autocomplete){\n\t\t\t//prevent table navigation while using input element\n\t\t\te.stopImmediatePropagation();\n\t\t}\n\t}\n\t\n\t_keySelectLetter(e){\n\t\tif(!this.params.autocomplete){\n\t\t\t// if(this.edit.currentCell === false){\n\t\t\te.preventDefault();\n\t\t\t// }\n\t\t\t\n\t\t\tif(e.keyCode >= 38 && e.keyCode <= 90){\n\t\t\t\tthis._scrollToValue(e.keyCode);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keyAutoCompLetter(e){\n\t\tthis._filter();\n\t\tthis.lastAction = \"typing\";\n\t\tthis.typing = true;\n\t}\n\t\n\t\n\t_scrollToValue(char){\n\t\tclearTimeout(this.filterTimeout);\n\t\t\n\t\tvar character = String.fromCharCode(char).toLowerCase();\n\t\tthis.filterTerm += character.toLowerCase();\n\t\t\n\t\tvar match = this.displayItems.find((item) => {\n\t\t\treturn typeof item.label !== \"undefined\" && item.label.toLowerCase().startsWith(this.filterTerm);\n\t\t});\n\t\t\n\t\tif(match){\n\t\t\tthis._focusItem(match);\n\t\t}\n\t\t\n\t\tthis.filterTimeout = setTimeout(() => {\n\t\t\tthis.filterTerm = \"\";\n\t\t}, 800);\n\t}\n\t\n\t_focusItem(item){\n\t\tthis.lastAction = \"focus\";\n\t\t\n\t\tif(this.focusedItem && this.focusedItem.element){\n\t\t\tthis.focusedItem.element.classList.remove(\"focused\");\n\t\t}\n\t\t\n\t\tthis.focusedItem = item;\n\t\t\n\t\tif(item && item.element){\n\t\t\titem.element.classList.add(\"focused\");\n\t\t\titem.element.scrollIntoView({behavior: 'smooth', block: 'nearest', inline: 'start'});\n\t\t}\n\t}\n\t\n\t\n\t//////////////////////////////////////\n\t/////// Data List Generation /////////\n\t//////////////////////////////////////\n\theaderFilterInitialListGen(){\n\t\tthis._generateOptions(true);\n\t}\n\t\n\trebuildOptionsList(){\n\t\tthis._generateOptions()\n\t\t\t.then(this._sortOptions.bind(this))\n\t\t\t.then(this._buildList.bind(this))\n\t\t\t.then(this._showList.bind(this))\n\t\t\t.catch((e) => {\n\t\t\t\tif(!Number.isInteger(e)){\n\t\t\t\t\tconsole.error(\"List generation error\", e);\n\t\t\t\t}\n\t\t\t});\n\t}\n\t\n\t_filterList(){\n\t\tthis._buildList(this._filterOptions());\n\t\tthis._showList();\n\t}\n\t\n\t_generateOptions(silent){\n\t\tvar values = [];\n\t\tvar iteration = ++ this.listIteration;\n\t\t\n\t\tthis.filtered = false;\n\t\t\n\t\tif(this.params.values){\n\t\t\tvalues = this.params.values;\n\t\t}else if (this.params.valuesURL){\n\t\t\tvalues = this._ajaxRequest(this.params.valuesURL, this.input.value);\n\t\t}else{\n\t\t\tif(typeof this.params.valuesLookup === \"function\"){\n\t\t\t\tvalues = this.params.valuesLookup(this.cell, this.input.value);\n\t\t\t}else if(this.params.valuesLookup){\n\t\t\t\tvalues = this._uniqueColumnValues(this.params.valuesLookupField);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(values instanceof Promise){\n\t\t\tif(!silent){\n\t\t\t\tthis._addPlaceholder(this.params.placeholderLoading);\n\t\t\t}\n\t\t\t\n\t\t\treturn values.then()\n\t\t\t\t.then((responseValues) => {\n\t\t\t\t\tif(this.listIteration === iteration){\n\t\t\t\t\t\treturn this._parseList(responseValues);\n\t\t\t\t\t}else{\n\t\t\t\t\t\treturn Promise.reject(iteration);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}else{\n\t\t\treturn Promise.resolve(this._parseList(values));\n\t\t}\n\t}\n\t\n\t_addPlaceholder(contents){\n\t\tvar placeholder = document.createElement(\"div\");\n\t\t\n\t\tif(typeof contents === \"function\"){\n\t\t\tcontents = contents(this.cell.getComponent(), this.listEl);\n\t\t}\n\t\t\n\t\tif(contents){\n\t\t\tthis._clearList();\n\t\t\t\n\t\t\tif(contents instanceof HTMLElement){\n\t\t\t\tplaceholder = contents;\n\t\t\t}else{\n\t\t\t\tplaceholder.classList.add(\"tabulator-edit-list-placeholder\");\n\t\t\t\tplaceholder.innerHTML = contents;\n\t\t\t}\n\t\t\t\n\t\t\tthis.listEl.appendChild(placeholder);\n\t\t\t\n\t\t\tthis._showList();\n\t\t}\n\t}\n\t\n\t_ajaxRequest(url, term){\n\t\tvar params = this.params.filterRemote ? {term:term} : {};\n\t\turl = urlBuilder(url, {}, params);\n\t\t\n\t\treturn fetch(url)\n\t\t\t.then((response)=>{\n\t\t\t\tif(response.ok) {\n\t\t\t\t\treturn response.json()\n\t\t\t\t\t\t.catch((error)=>{\n\t\t\t\t\t\t\tconsole.warn(\"List Ajax Load Error - Invalid JSON returned\", error);\n\t\t\t\t\t\t\treturn Promise.reject(error);\n\t\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tconsole.error(\"List Ajax Load Error - Connection Error: \" + response.status, response.statusText);\n\t\t\t\t\treturn Promise.reject(response);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((error)=>{\n\t\t\t\tconsole.error(\"List Ajax Load Error - Connection Error: \", error);\n\t\t\t\treturn Promise.reject(error);\n\t\t\t});\n\t}\n\t\n\t_uniqueColumnValues(field){\n\t\tvar output = {},\n\t\tdata = this.table.getData(this.params.valuesLookup),\n\t\tcolumn;\n\t\t\n\t\tif(field){\n\t\t\tcolumn = this.table.columnManager.getColumnByField(field);\n\t\t}else{\n\t\t\tcolumn = this.cell.getColumn()._getSelf();\n\t\t}\n\t\t\n\t\tif(column){\n\t\t\tdata.forEach((row) => {\n\t\t\t\tvar val = column.getFieldValue(row);\n\t\t\t\t\n\t\t\t\tif(val !== null && typeof val !== \"undefined\" && val !== \"\"){\n\t\t\t\t\toutput[val] = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tconsole.warn(\"unable to find matching column to create select lookup list:\", field);\n\t\t\toutput = [];\n\t\t}\n\t\t\n\t\treturn Object.keys(output);\n\t}\n\t\n\t\n\t_parseList(inputValues){\n\t\tvar data = [];\n\t\t\n\t\tif(!Array.isArray(inputValues)){\n\t\t\tinputValues = Object.entries(inputValues).map(([key, value]) => {\n\t\t\t\treturn {\n\t\t\t\t\tlabel:value,\n\t\t\t\t\tvalue:key,\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t\t\n\t\tinputValues.forEach((value) => {\n\t\t\tif(typeof value !== \"object\"){\n\t\t\t\tvalue = {\n\t\t\t\t\tlabel:value,\n\t\t\t\t\tvalue:value,\n\t\t\t\t};\n\t\t\t}\n\t\t\t\n\t\t\tthis._parseListItem(value, data, 0);\n\t\t});\n\t\t\n\t\tif(!this.currentItems.length && this.params.freetext){\n\t\t\tthis.input.value = this.initialValues;\n\t\t\tthis.typing = true;\n\t\t\tthis.lastAction = \"typing\";\n\t\t}\n\t\t\n\t\tthis.data = data;\n\t\t\n\t\treturn data;    \n\t}\n\t\n\t_parseListItem(option, data, level){\n\t\tvar item = {};\n\t\t\n\t\tif(option.options){\n\t\t\titem = this._parseListGroup(option, level + 1);\n\t\t}else{\n\t\t\titem = {\n\t\t\t\tlabel:option.label,\n\t\t\t\tvalue:option.value,\n\t\t\t\titemParams:option.itemParams,\n\t\t\t\telementAttributes: option.elementAttributes,\n\t\t\t\telement:false,\n\t\t\t\tselected:false,\n\t\t\t\tvisible:true,\n\t\t\t\tlevel:level,\n\t\t\t\toriginal:option,\n\t\t\t};\n\t\t\t\n\t\t\tif(this.initialValues && this.initialValues.indexOf(option.value) > -1){\n\t\t\t\tthis._chooseItem(item, true);\n\t\t\t}\n\t\t}\n\t\t\n\t\tdata.push(item);\n\t}\n\t\n\t_parseListGroup(option, level){\n\t\tvar item = {\n\t\t\tlabel:option.label,\n\t\t\tgroup:true,\n\t\t\titemParams:option.itemParams,\n\t\t\telementAttributes:option.elementAttributes,\n\t\t\telement:false,\n\t\t\tvisible:true,\n\t\t\tlevel:level,\n\t\t\toptions:[],\n\t\t\toriginal:option,\n\t\t};\n\t\t\n\t\toption.options.forEach((child) => {\n\t\t\tthis._parseListItem(child, item.options, level);\n\t\t});\n\t\t\n\t\treturn item;\n\t}\n\t\n\t_sortOptions(options){\n\t\tvar sorter;\n\t\t\n\t\tif(this.params.sort){\n\t\t\tsorter = typeof this.params.sort === \"function\" ? this.params.sort : this._defaultSortFunction.bind(this);\n\t\t\t\n\t\t\tthis._sortGroup(sorter, options);\n\t\t}\n\t\t\n\t\treturn options;\n\t}\n\t\n\t_sortGroup(sorter, options){\n\t\toptions.sort((a,b) => {\n\t\t\treturn sorter(a.label, b.label, a.value, b.value, a.original, b.original);\n\t\t});\n\t\t\n\t\toptions.forEach((option) => {\n\t\t\tif(option.group){\n\t\t\t\tthis._sortGroup(sorter, option.options);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t_defaultSortFunction(as, bs){\n\t\tvar a, b, a1, b1, i= 0, L, rx = /(\\d+)|(\\D+)/g, rd = /\\d/;\n\t\tvar emptyAlign = 0;\n\t\t\n\t\tif(this.params.sort === \"desc\"){\n\t\t\t[as, bs] = [bs, as];\n\t\t}\n\t\t\n\t\t//handle empty values\n\t\tif(!as && as!== 0){\n\t\t\temptyAlign =  !bs && bs!== 0 ? 0 : -1;\n\t\t}else if(!bs && bs!== 0){\n\t\t\temptyAlign =  1;\n\t\t}else{\n\t\t\tif(isFinite(as) && isFinite(bs)) return as - bs;\n\t\t\ta = String(as).toLowerCase();\n\t\t\tb = String(bs).toLowerCase();\n\t\t\tif(a === b) return 0;\n\t\t\tif(!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\n\t\t\ta = a.match(rx);\n\t\t\tb = b.match(rx);\n\t\t\tL = a.length > b.length ? b.length : a.length;\n\t\t\twhile(i < L){\n\t\t\t\ta1= a[i];\n\t\t\t\tb1= b[i++];\n\t\t\t\tif(a1 !== b1){\n\t\t\t\t\tif(isFinite(a1) && isFinite(b1)){\n\t\t\t\t\t\tif(a1.charAt(0) === \"0\") a1 = \".\" + a1;\n\t\t\t\t\t\tif(b1.charAt(0) === \"0\") b1 = \".\" + b1;\n\t\t\t\t\t\treturn a1 - b1;\n\t\t\t\t\t}\n\t\t\t\t\telse return a1 > b1 ? 1 : -1;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn a.length > b.length;\n\t\t}\n\t\t\n\t\treturn emptyAlign;\n\t}\n\t\n\t_filterOptions(){\n\t\tvar filterFunc = this.params.filterFunc || this._defaultFilterFunc,\n\t\tterm = this.input.value;\n\t\t\n\t\tif(term){\n\t\t\tthis.filtered = true;\n\t\t\t\n\t\t\tthis.data.forEach((item) => {\n\t\t\t\tthis._filterItem(filterFunc, term, item);\n\t\t\t});\n\t\t}else{\n\t\t\tthis.filtered = false;\n\t\t}\n\t\t\n\t\treturn this.data;\n\t}\n\t\n\t_filterItem(func, term, item){\n\t\tvar matches = false;\n\t\t\n\t\tif(!item.group){\n\t\t\titem.visible = func(term, item.label, item.value, item.original);\n\t\t}else{\n\t\t\titem.options.forEach((option) => {\n\t\t\t\tif(this._filterItem(func, term, option)){\n\t\t\t\t\tmatches = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\titem.visible = matches;\n\t\t}\n\t\t\n\t\treturn item.visible;\n\t}\n\t\n\t_defaultFilterFunc(term, label, value, item){\n\t\tterm = String(term).toLowerCase();\n\t\t\n\t\tif(label !== null && typeof label !== \"undefined\"){\n\t\t\tif(String(label).toLowerCase().indexOf(term) > -1 || String(value).toLowerCase().indexOf(term) > -1){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\t//////////////////////////////////////\n\t/////////// Display List /////////////\n\t//////////////////////////////////////\n\t\n\t_clearList(){\n\t\twhile(this.listEl.firstChild) this.listEl.removeChild(this.listEl.firstChild);\n\t\t\n\t\tthis.displayItems = [];\n\t}\n\t\n\t_buildList(data){\n\t\tthis._clearList();\n\t\t\n\t\tdata.forEach((option) => {\n\t\t\tthis._buildItem(option);\n\t\t});\n\t\t\n\t\tif(!this.displayItems.length){\n\t\t\tthis._addPlaceholder(this.params.placeholderEmpty);\n\t\t}  \n\t}\n\t\n\t_buildItem(item){\n\t\tvar el = item.element,\n\t\tcontents;\n\t\t\n\t\tif(!this.filtered || item.visible){\n\t\t\t\n\t\t\tif(!el){\n\t\t\t\tel = document.createElement(\"div\");\n\t\t\t\tel.tabIndex = 0;\n\t\t\t\t\n\t\t\t\tcontents = this.params.itemFormatter ? this.params.itemFormatter(item.label, item.value, item.original, el) : item.label;\n\t\t\t\t\n\t\t\t\tif(contents instanceof HTMLElement){\n\t\t\t\t\tel.appendChild(contents);\n\t\t\t\t}else{\n\t\t\t\t\tel.innerHTML = contents;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(item.group){\n\t\t\t\t\tel.classList.add(\"tabulator-edit-list-group\");\n\t\t\t\t}else{\n\t\t\t\t\tel.classList.add(\"tabulator-edit-list-item\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tel.classList.add(\"tabulator-edit-list-group-level-\" + item.level);\n\t\t\t\t\n\t\t\t\tif(item.elementAttributes && typeof item.elementAttributes == \"object\"){\n\t\t\t\t\tfor (let key in item.elementAttributes){\n\t\t\t\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\t\t\tel.setAttribute(key, this.input.getAttribute(key) + item.elementAttributes[\"+\" + key]);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tel.setAttribute(key, item.elementAttributes[key]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(item.group){\n\t\t\t\t\tel.addEventListener(\"click\", this._groupClick.bind(this, item));\n\t\t\t\t}else{\n\t\t\t\t\tel.addEventListener(\"click\", this._itemClick.bind(this, item));\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tel.addEventListener(\"mousedown\", this._preventBlur.bind(this));\n\t\t\t\t\n\t\t\t\titem.element = el;\n\t\t\t}\n\t\t\t\n\t\t\tthis._styleItem(item);\n\t\t\t\n\t\t\tthis.listEl.appendChild(el);\n\t\t\t\n\t\t\tif(item.group){\n\t\t\t\titem.options.forEach((option) => {\n\t\t\t\t\tthis._buildItem(option);\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tthis.displayItems.push(item);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_showList(){\n\t\tvar startVis = this.popup && this.popup.isVisible();\n\t\t\n\t\tif(this.input.parentNode){\n\t\t\tif(this.params.autocomplete && this.input.value === \"\" && !this.params.listOnEmpty){\n\t\t\t\tif(this.popup){\n\t\t\t\t\tthis.popup.hide(true);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tthis._setListWidth();\n\t\t\t\n\t\t\tif(!this.popup){\n\t\t\t\tthis.popup = this.edit.popup(this.listEl);\n\t\t\t}\n\t\t\t\n\t\t\tthis.popup.show(this.cell.getElement(), \"bottom\");\n\t\t\t\n\t\t\tif(!startVis){\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.popup.hideOnBlur(this._resolveValue.bind(this, true));\n\t\t\t\t}, 10);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_styleItem(item){\n\t\tif(item && item.element){\n\t\t\tif(item.selected){\n\t\t\t\titem.element.classList.add(\"active\");\n\t\t\t}else{\n\t\t\t\titem.element.classList.remove(\"active\");\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//////////////////////////////////////\n\t///////// User Interaction ///////////\n\t//////////////////////////////////////\n\t\n\t_itemClick(item, e){\n\t\te.stopPropagation();\n\t\t\n\t\tthis._chooseItem(item);\n\t}\n\t\n\t_groupClick(item, e){\n\t\te.stopPropagation();\n\t}\n\t\n\t\n\t//////////////////////////////////////\n\t////// Current Item Management ///////\n\t//////////////////////////////////////\n\t\n\t_cancel(){\n\t\tthis.popup.hide(true);\n\t\tthis.actions.cancel();\n\t}\n\t\n\t_clearChoices(){\n\t\tthis.typing = true;\n\t\t\n\t\tthis.currentItems.forEach((item) => {\n\t\t\titem.selected = false;\n\t\t\tthis._styleItem(item);\n\t\t});\n\t\t\n\t\tthis.currentItems = [];\n\t\t\n\t\tthis.focusedItem = null;\n\t}\n\t\n\t_chooseItem(item, silent){\n\t\tvar index;\n\t\t\n\t\tthis.typing = false;\n\t\t\n\t\tif(this.params.multiselect){\n\t\t\tindex = this.currentItems.indexOf(item);\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\tthis.currentItems.splice(index, 1);\n\t\t\t\titem.selected = false;\n\t\t\t}else{\n\t\t\t\tthis.currentItems.push(item);\n\t\t\t\titem.selected = true;\n\t\t\t}\n\t\t\t\n\t\t\tthis.input.value = this.currentItems.map(item => item.label).join(\",\");\n\t\t\t\n\t\t\tthis._styleItem(item);\n\t\t\t\n\t\t}else{\n\t\t\tthis.currentItems = [item];\n\t\t\titem.selected = true;\n\t\t\t\n\t\t\tthis.input.value = item.label;\n\t\t\t\n\t\t\tthis._styleItem(item);\n\t\t\t\n\t\t\tif(!silent){\n\t\t\t\tthis._resolveValue();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis._focusItem(item);\n\t}\n\t\n\t_resolveValue(blur){\n\t\tvar output, initialValue;\n\t\t\n\t\tif(this.popup){\n\t\t\tthis.popup.hide(true);\n\t\t}\n\t\t\n\t\tif(this.params.multiselect){\n\t\t\toutput = this.currentItems.map(item => item.value);\n\t\t}else{\n\t\t\tif(blur && this.params.autocomplete && this.typing){\n\t\t\t\tif(this.params.freetext || (this.params.allowEmpty && this.input.value === \"\")){\n\t\t\t\t\toutput = this.input.value;\n\t\t\t\t}else{\n\t\t\t\t\tthis.actions.cancel();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(this.currentItems[0]){\n\t\t\t\t\toutput = this.currentItems[0].value;\n\t\t\t\t}else{\n\t\t\t\t\tinitialValue = Array.isArray(this.initialValues) ? this.initialValues[0] : this.initialValues;\n\t\t\t\t\t\n\t\t\t\t\tif(initialValue === null || typeof initialValue === \"undefined\" || initialValue === \"\"){\n\t\t\t\t\t\toutput = initialValue;\n\t\t\t\t\t}else{\n\t\t\t\t\t\toutput = this.params.emptyValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(output === \"\"){\n\t\t\toutput = this.params.emptyValue;\n\t\t}\n\t\t\n\t\tthis.actions.success(output);\n\t\t\n\t\tif(this.isFilter){\n\t\t\tthis.initialValues = output && !Array.isArray(output) ? [output] : output;\n\t\t\tthis.currentItems = [];\n\t\t}\n\t}\n\t\n}\n","import List from '../../List.js';\n\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar list = new List(this, cell, onRendered, success, cancel, editorParams);\n\n\treturn list.input;\n}","//star rating\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar self = this,\n\telement = cell.getElement(),\n\tvalue = cell.getValue(),\n\tmaxStars = element.getElementsByTagName(\"svg\").length || 5,\n\tsize = element.getElementsByTagName(\"svg\")[0] ? element.getElementsByTagName(\"svg\")[0].getAttribute(\"width\") : 14,\n\tstars = [],\n\tstarsHolder = document.createElement(\"div\"),\n\tstar = document.createElementNS('http://www.w3.org/2000/svg', \"svg\");\n\n\n\t//change star type\n\tfunction starChange(val){\n\t\tstars.forEach(function(star, i){\n\t\t\tif(i < val){\n\t\t\t\tif(self.table.browser == \"ie\"){\n\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-active\");\n\t\t\t\t}else{\n\t\t\t\t\tstar.classList.replace(\"tabulator-star-inactive\", \"tabulator-star-active\");\n\t\t\t\t}\n\n\t\t\t\tstar.innerHTML = '<polygon fill=\"#488CE9\" stroke=\"#014AAE\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\t\t\t}else{\n\t\t\t\tif(self.table.browser == \"ie\"){\n\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-inactive\");\n\t\t\t\t}else{\n\t\t\t\t\tstar.classList.replace(\"tabulator-star-active\", \"tabulator-star-inactive\");\n\t\t\t\t}\n\n\t\t\t\tstar.innerHTML = '<polygon fill=\"#010155\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\t\t\t}\n\t\t});\n\t}\n\n\t//build stars\n\tfunction buildStar(i){\n\n\t\tvar starHolder =  document.createElement(\"span\");\n\t\tvar nextStar = star.cloneNode(true);\n\n\t\tstars.push(nextStar);\n\n\t\tstarHolder.addEventListener(\"mouseenter\", function(e){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t\tstarChange(i);\n\t\t});\n\n\t\tstarHolder.addEventListener(\"mousemove\", function(e){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t});\n\n\t\tstarHolder.addEventListener(\"click\", function(e){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t\tsuccess(i);\n\t\t\telement.blur();\n\t\t});\n\n\t\tstarHolder.appendChild(nextStar);\n\t\tstarsHolder.appendChild(starHolder);\n\n\t}\n\n\t//handle keyboard navigation value change\n\tfunction changeValue(val){\n\t\tvalue = val;\n\t\tstarChange(val);\n\t}\n\n\t//style cell\n\telement.style.whiteSpace = \"nowrap\";\n\telement.style.overflow = \"hidden\";\n\telement.style.textOverflow = \"ellipsis\";\n\n\t//style holding element\n\tstarsHolder.style.verticalAlign = \"middle\";\n\tstarsHolder.style.display = \"inline-block\";\n\tstarsHolder.style.padding = \"4px\";\n\n\t//style star\n\tstar.setAttribute(\"width\", size);\n\tstar.setAttribute(\"height\", size);\n\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\n\tstar.setAttribute(\"xml:space\", \"preserve\");\n\tstar.style.padding = \"0 1px\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tstarsHolder.setAttribute(key, starsHolder.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tstarsHolder.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\t//create correct number of stars\n\tfor(var i=1;i<= maxStars;i++){\n\t\tbuildStar(i);\n\t}\n\n\t//ensure value does not exceed number of stars\n\tvalue = Math.min(parseInt(value), maxStars);\n\n\t// set initial styling of stars\n\tstarChange(value);\n\n\tstarsHolder.addEventListener(\"mousemove\", function(e){\n\t\tstarChange(0);\n\t});\n\n\tstarsHolder.addEventListener(\"click\", function(e){\n\t\tsuccess(0);\n\t});\n\n\telement.addEventListener(\"blur\", function(e){\n\t\tcancel();\n\t});\n\n\t//allow key based navigation\n\telement.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 39: //right arrow\n\t\t\t\tchangeValue(value + 1);\n\t\t\t\tbreak;\n\n\t\t\tcase 37: //left arrow\n\t\t\t\tchangeValue(value - 1);\n\t\t\t\tbreak;\n\n\t\t\tcase 13: //enter\n\t\t\t\tsuccess(value);\n\t\t\t\tbreak;\n\n\t\t\tcase 27: //escape\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\treturn starsHolder;\n}","//draggable progress bar\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar element = cell.getElement(),\n\tmax = typeof editorParams.max === \"undefined\" ? ((element.getElementsByTagName(\"div\")[0] && element.getElementsByTagName(\"div\")[0].getAttribute(\"max\")) || 100) : editorParams.max,\n\tmin = typeof editorParams.min === \"undefined\" ? ((element.getElementsByTagName(\"div\")[0] && element.getElementsByTagName(\"div\")[0].getAttribute(\"min\")) || 0) : editorParams.min,\n\tpercent = (max - min) / 100,\n\tvalue = cell.getValue() || 0,\n\thandle = document.createElement(\"div\"),\n\tbar = document.createElement(\"div\"),\n\tmouseDrag, mouseDragWidth;\n\n\t//set new value\n\tfunction updateValue(){\n\t\tvar style = window.getComputedStyle(element, null);\n\n\t\tvar calcVal = (percent * Math.round(bar.offsetWidth / ((element.clientWidth - parseInt(style.getPropertyValue(\"padding-left\")) - parseInt(style.getPropertyValue(\"padding-right\")))/100))) + min;\n\t\tsuccess(calcVal);\n\t\telement.setAttribute(\"aria-valuenow\", calcVal);\n\t\telement.setAttribute(\"aria-label\", value);\n\t}\n\n\t//style handle\n\thandle.style.position = \"absolute\";\n\thandle.style.right = \"0\";\n\thandle.style.top = \"0\";\n\thandle.style.bottom = \"0\";\n\thandle.style.width = \"5px\";\n\thandle.classList.add(\"tabulator-progress-handle\");\n\n\t//style bar\n\tbar.style.display = \"inline-block\";\n\tbar.style.position = \"relative\";\n\t// bar.style.top = \"8px\";\n\t// bar.style.bottom = \"8px\";\n\t// bar.style.left = \"4px\";\n\t// bar.style.marginRight = \"4px\";\n\tbar.style.height = \"100%\";\n\tbar.style.backgroundColor = \"#488CE9\";\n\tbar.style.maxWidth = \"100%\";\n\tbar.style.minWidth = \"0%\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tbar.setAttribute(key, bar.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tbar.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\t//style cell\n\telement.style.padding = \"4px 4px\";\n\n\t//make sure value is in range\n\tvalue = Math.min(parseFloat(value), max);\n\tvalue = Math.max(parseFloat(value), min);\n\n\t//workout percentage\n\tvalue = Math.round((value - min) / percent);\n\t// bar.style.right = value + \"%\";\n\tbar.style.width = value + \"%\";\n\n\telement.setAttribute(\"aria-valuemin\", min);\n\telement.setAttribute(\"aria-valuemax\", max);\n\n\tbar.appendChild(handle);\n\n\thandle.addEventListener(\"mousedown\", function(e){\n\t\tmouseDrag = e.screenX;\n\t\tmouseDragWidth = bar.offsetWidth;\n\t});\n\n\thandle.addEventListener(\"mouseover\", function(){\n\t\thandle.style.cursor = \"ew-resize\";\n\t});\n\n\telement.addEventListener(\"mousemove\", function(e){\n\t\tif(mouseDrag){\n\t\t\tbar.style.width = (mouseDragWidth + e.screenX - mouseDrag) + \"px\";\n\t\t}\n\t});\n\n\telement.addEventListener(\"mouseup\", function(e){\n\t\tif(mouseDrag){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\n\t\t\tmouseDrag = false;\n\t\t\tmouseDragWidth = false;\n\n\t\t\tupdateValue();\n\t\t}\n\t});\n\n\t//allow key based navigation\n\telement.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 39: //right arrow\n\t\t\t\te.preventDefault();\n\t\t\t\tbar.style.width = (bar.clientWidth + element.clientWidth/100) + \"px\";\n\t\t\t\tbreak;\n\n\t\t\tcase 37: //left arrow\n\t\t\t\te.preventDefault();\n\t\t\t\tbar.style.width = (bar.clientWidth - element.clientWidth/100) + \"px\";\n\t\t\t\tbreak;\n\n\t\t\tcase 9: //tab\n\t\t\tcase 13: //enter\n\t\t\t\tupdateValue();\n\t\t\t\tbreak;\n\n\t\t\tcase 27: //escape\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t}\n\t});\n\n\telement.addEventListener(\"blur\", function(){\n\t\tcancel();\n\t});\n\n\treturn bar;\n}","//checkbox\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar value = cell.getValue(),\n\tinput = document.createElement(\"input\"),\n\ttristate = editorParams.tristate,\n\tindetermValue = typeof editorParams.indeterminateValue === \"undefined\" ? null : editorParams.indeterminateValue,\n\tindetermState = false,\n\ttrueValueSet = Object.keys(editorParams).includes(\"trueValue\"),\n\tfalseValueSet = Object.keys(editorParams).includes(\"falseValue\");\n\t\n\tinput.setAttribute(\"type\", \"checkbox\");\n\tinput.style.marginTop = \"5px\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tinput.value = value;\n\t\n\tif(tristate && (typeof value === \"undefined\" || value === indetermValue || value === \"\")){\n\t\tindetermState = true;\n\t\tinput.indeterminate = true;\n\t}\n\t\n\tif(this.table.browser != \"firefox\" && this.table.browser != \"safari\"){ //prevent blur issue on mac firefox\n\t\tonRendered(function(){\n\t\t\tif(cell.getType() === \"cell\"){\n\t\t\t\tinput.focus({preventScroll: true});\n\t\t\t}\n\t\t});\n\t}\n\t\n\tinput.checked = trueValueSet ? value === editorParams.trueValue : (value === true || value === \"true\" || value === \"True\" || value === 1);\n\t\n\tfunction setValue(blur){\n\t\tvar checkedValue = input.checked;\n\t\t\n\t\tif(trueValueSet && checkedValue){\n\t\t\tcheckedValue = editorParams.trueValue;\n\t\t}else if(falseValueSet && !checkedValue){\n\t\t\tcheckedValue = editorParams.falseValue;\n\t\t}\n\t\t\n\t\tif(tristate){\n\t\t\tif(!blur){\n\t\t\t\tif(input.checked && !indetermState){\n\t\t\t\t\tinput.checked = false;\n\t\t\t\t\tinput.indeterminate = true;\n\t\t\t\t\tindetermState = true;\n\t\t\t\t\treturn indetermValue;\n\t\t\t\t}else{\n\t\t\t\t\tindetermState = false;\n\t\t\t\t\treturn checkedValue;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(indetermState){\n\t\t\t\t\treturn indetermValue;\n\t\t\t\t}else{\n\t\t\t\t\treturn checkedValue;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\treturn checkedValue;\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"change\", function(e){\n\t\tsuccess(setValue());\n\t});\n\n\tinput.addEventListener(\"blur\", function(e){\n\t\tsuccess(setValue(true));\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tif(e.keyCode == 13){\n\t\t\tsuccess(setValue());\n\t\t}\n\t\tif(e.keyCode == 27){\n\t\t\tcancel();\n\t\t}\n\t});\n\t\n\treturn input;\n}","import input from './editors/input.js';\nimport textarea from './editors/textarea.js';\nimport number from './editors/number.js';\nimport range from './editors/range.js';\nimport date from './editors/date.js';\nimport time from './editors/time.js';\nimport datetime from './editors/datetime.js';\nimport list from './editors/list.js';\nimport star from './editors/star.js';\nimport progress from './editors/progress.js';\nimport tickCross from './editors/tickCross.js';\n\nexport default {\n\tinput:input,\n\ttextarea:textarea,\n\tnumber:number,\n\trange:range,\n\tdate:date,\n\ttime:time,\n\tdatetime:datetime,\n\tlist:list,\n\tstar:star,\n\tprogress:progress,\n\ttickCross:tickCross,\n};","import Module from '../../core/Module.js';\nimport Helpers from '../../core/tools/Helpers.js';\n\nimport defaultEditors from './defaults/editors.js';\n\nexport default class Edit extends Module{\n\n\tstatic moduleName = \"edit\";\n\n\t//load defaults\n\tstatic editors = defaultEditors;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.currentCell = false; //hold currently editing cell\n\t\tthis.mouseClick = false; //hold mousedown state to prevent click binding being overridden by editor opening\n\t\tthis.recursionBlock = false; //prevent focus recursion\n\t\tthis.invalidEdit = false;\n\t\tthis.editedCells = [];\n\t\tthis.convertEmptyValues = false;\n\t\t\n\t\tthis.editors = Edit.editors;\n\t\n\t\tthis.registerTableOption(\"editTriggerEvent\", \"focus\");\n\t\tthis.registerTableOption(\"editorEmptyValue\");\n\t\tthis.registerTableOption(\"editorEmptyValueFunc\", this.emptyValueCheck.bind(this));\n\n\t\tthis.registerColumnOption(\"editable\");\n\t\tthis.registerColumnOption(\"editor\");\n\t\tthis.registerColumnOption(\"editorParams\");\n\t\tthis.registerColumnOption(\"editorEmptyValue\");\n\t\tthis.registerColumnOption(\"editorEmptyValueFunc\");\n\t\t\n\t\tthis.registerColumnOption(\"cellEditing\");\n\t\tthis.registerColumnOption(\"cellEdited\");\n\t\tthis.registerColumnOption(\"cellEditCancelled\");\n\t\t\n\t\tthis.registerTableFunction(\"getEditedCells\", this.getEditedCells.bind(this));\n\t\tthis.registerTableFunction(\"clearCellEdited\", this.clearCellEdited.bind(this));\n\t\tthis.registerTableFunction(\"navigatePrev\", this.navigatePrev.bind(this));\n\t\tthis.registerTableFunction(\"navigateNext\", this.navigateNext.bind(this));\n\t\tthis.registerTableFunction(\"navigateLeft\", this.navigateLeft.bind(this));\n\t\tthis.registerTableFunction(\"navigateRight\", this.navigateRight.bind(this));\n\t\tthis.registerTableFunction(\"navigateUp\", this.navigateUp.bind(this));\n\t\tthis.registerTableFunction(\"navigateDown\", this.navigateDown.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"cell\", \"isEdited\", this.cellIsEdited.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"clearEdited\", this.clearEdited.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"edit\", this.editCell.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"cancelEdit\", this.cellCancelEdit.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"cell\", \"navigatePrev\", this.navigatePrev.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateNext\", this.navigateNext.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateLeft\", this.navigateLeft.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateRight\", this.navigateRight.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateUp\", this.navigateUp.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateDown\", this.navigateDown.bind(this));\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-init\", this.bindEditor.bind(this));\n\t\tthis.subscribe(\"cell-delete\", this.clearEdited.bind(this));\n\t\tthis.subscribe(\"cell-value-changed\", this.updateCellClass.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumnCheck.bind(this));\n\t\tthis.subscribe(\"column-delete\", this.columnDeleteCheck.bind(this));\n\t\tthis.subscribe(\"row-deleting\", this.rowDeleteCheck.bind(this));\n\t\tthis.subscribe(\"row-layout\", this.rowEditableCheck.bind(this));\n\t\tthis.subscribe(\"data-refreshing\", this.cancelEdit.bind(this));\n\t\tthis.subscribe(\"clipboard-paste\", this.pasteBlocker.bind(this));\n\t\t\n\t\tthis.subscribe(\"keybinding-nav-prev\", this.navigatePrev.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-next\", this.keybindingNavigateNext.bind(this));\n\t\t\n\t\t// this.subscribe(\"keybinding-nav-left\", this.navigateLeft.bind(this, undefined));\n\t\t// this.subscribe(\"keybinding-nav-right\", this.navigateRight.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-up\", this.navigateUp.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-down\", this.navigateDown.bind(this, undefined));\n\n\t\tif(Object.keys(this.table.options).includes(\"editorEmptyValue\")){\n\t\t\tthis.convertEmptyValues = true;\n\t\t}\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t///////// Paste Negation //////////\n\t///////////////////////////////////\n\t\n\tpasteBlocker(e){\n\t\tif(this.currentCell){\n\t\t\treturn true;\n\t\t}\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t////// Keybinding Functions ///////\n\t///////////////////////////////////\n\t\n\tkeybindingNavigateNext(e){\n\t\tvar cell = this.currentCell,\n\t\tnewRow = this.options(\"tabEndNewRow\");\n\n\t\tif(cell){\n\t\t\tif(!this.navigateNext(cell, e)){\n\t\t\t\tif(newRow){\n\t\t\t\t\tcell.getElement().firstChild.blur();\n\t\t\t\t\t\n\t\t\t\t\tif(!this.invalidEdit){\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(newRow === true){\n\t\t\t\t\t\t\tnewRow = this.table.addRow({});\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(typeof newRow == \"function\"){\n\t\t\t\t\t\t\t\tnewRow = this.table.addRow(newRow(cell.row.getComponent()));\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tnewRow = this.table.addRow(Object.assign({}, newRow));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tnewRow.then(() => {\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tcell.getComponent().navigateNext();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Cell Functions //////////\n\t///////////////////////////////////\n\t\n\tcellIsEdited(cell){\n\t\treturn !! cell.modules.edit && cell.modules.edit.edited;\n\t}\n\t\n\tcellCancelEdit(cell){\n\t\tif(cell === this.currentCell){\n\t\t\tthis.table.modules.edit.cancelEdit();\n\t\t}else{\n\t\t\tconsole.warn(\"Cancel Editor Error - This cell is not currently being edited \");\n\t\t}\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\tupdateCellClass(cell){\n\t\tif(this.allowEdit(cell)) {\n\t\t\tcell.getElement().classList.add(\"tabulator-editable\");\n\t\t}\n\t\telse {\n\t\t\tcell.getElement().classList.remove(\"tabulator-editable\");\n\t\t}\n\t}\n\t\n\tclearCellEdited(cells){\n\t\tif(!cells){\n\t\t\tcells = this.table.modules.edit.getEditedCells();\n\t\t}\n\t\t\n\t\tif(!Array.isArray(cells)){\n\t\t\tcells = [cells];\n\t\t}\n\t\t\n\t\tcells.forEach((cell) => {\n\t\t\tthis.table.modules.edit.clearEdited(cell._getSelf());\n\t\t});\n\t}\n\t\n\tnavigatePrev(cell = this.currentCell, e){\n\t\tvar nextCell, prevRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tnextCell = this.navigateLeft();\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\tprevRow = this.table.rowManager.prevDisplayRow(cell.row, true);\n\t\t\t\t\n\t\t\t\tif(prevRow){\n\t\t\t\t\tnextCell = this.findPrevEditableCell(prevRow, prevRow.cells.length);\n\t\t\t\t\t\n\t\t\t\t\tif(nextCell){\n\t\t\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateNext(cell = this.currentCell, e){\n\t\tvar nextCell, nextRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tnextCell = this.navigateRight();\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\tnextRow = this.table.rowManager.nextDisplayRow(cell.row, true);\n\t\t\t\t\n\t\t\t\tif(nextRow){\n\t\t\t\t\tnextCell = this.findNextEditableCell(nextRow, -1);\n\t\t\t\t\t\n\t\t\t\t\tif(nextCell){\n\t\t\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateLeft(cell = this.currentCell, e){\n\t\tvar index, nextCell;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextCell = this.findPrevEditableCell(cell.row, index);\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateRight(cell = this.currentCell, e){\n\t\tvar index, nextCell;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextCell = this.findNextEditableCell(cell.row, index);\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateUp(cell = this.currentCell, e){\n\t\tvar index, nextRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextRow = this.table.rowManager.prevDisplayRow(cell.row, true);\n\t\t\t\n\t\t\tif(nextRow){\n\t\t\t\tnextRow.cells[index].getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateDown(cell = this.currentCell, e){\n\t\tvar index, nextRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextRow = this.table.rowManager.nextDisplayRow(cell.row, true);\n\t\t\t\n\t\t\tif(nextRow){\n\t\t\t\tnextRow.cells[index].getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tfindNextEditableCell(row, index){\n\t\tvar nextCell = false;\n\t\t\n\t\tif(index < row.cells.length-1){\n\t\t\tfor(var i = index+1; i < row.cells.length; i++){\n\t\t\t\tlet cell = row.cells[i];\n\t\t\t\t\n\t\t\t\tif(cell.column.modules.edit && Helpers.elVisible(cell.getElement())){\n\t\t\t\t\tlet allowEdit = this.allowEdit(cell);\n\t\t\t\t\t\n\t\t\t\t\tif(allowEdit){\n\t\t\t\t\t\tnextCell = cell;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn nextCell;\n\t}\n\t\n\tfindPrevEditableCell(row, index){\n\t\tvar prevCell = false;\n\t\t\n\t\tif(index > 0){\n\t\t\tfor(var i = index-1; i >= 0; i--){\n\t\t\t\tlet cell = row.cells[i];\n\t\t\t\t\n\t\t\t\tif(cell.column.modules.edit && Helpers.elVisible(cell.getElement())){\n\t\t\t\t\tlet allowEdit = this.allowEdit(cell);\n\t\t\t\t\t\n\t\t\t\t\tif(allowEdit){\n\t\t\t\t\t\tprevCell = cell;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn prevCell;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tinitializeColumnCheck(column){\n\t\tif(typeof column.definition.editor !== \"undefined\"){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\t\n\tcolumnDeleteCheck(column){\n\t\tif(this.currentCell && this.currentCell.column === column){\n\t\t\tthis.cancelEdit();\n\t\t}\n\t}\n\t\n\trowDeleteCheck(row){\n\t\tif(this.currentCell && this.currentCell.row === row){\n\t\t\tthis.cancelEdit();\n\t\t}\n\t}\n\t\n\trowEditableCheck(row){\n\t\trow.getCells().forEach((cell) => {\n\t\t\tif(cell.column.modules.edit && typeof cell.column.modules.edit.check === \"function\"){\n\t\t\t\tthis.updateCellClass(cell);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//initialize column editor\n\tinitializeColumn(column){\n\t\tvar convertEmpty = Object.keys(column.definition).includes(\"editorEmptyValue\");\n\n\t\tvar config = {\n\t\t\teditor:false,\n\t\t\tblocked:false,\n\t\t\tcheck:column.definition.editable,\n\t\t\tparams:column.definition.editorParams || {},\n\t\t\tconvertEmptyValues:convertEmpty,\n\t\t\teditorEmptyValue:column.definition.editorEmptyValue,\n\t\t\teditorEmptyValueFunc:column.definition.editorEmptyValueFunc,\n\t\t};\n\t\t\n\t\t//set column editor\n\t\tswitch(typeof column.definition.editor){\n\t\t\tcase \"string\":\n\t\t\t\tif(this.editors[column.definition.editor]){\n\t\t\t\t\tconfig.editor = this.editors[column.definition.editor];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Editor Error - No such editor found: \", column.definition.editor);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t\tconfig.editor = column.definition.editor;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"boolean\":\n\t\t\t\tif(column.definition.editor === true){\n\t\t\t\t\tif(typeof column.definition.formatter !== \"function\"){\n\t\t\t\t\t\tif(this.editors[column.definition.formatter]){\n\t\t\t\t\t\t\tconfig.editor = this.editors[column.definition.formatter];\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tconfig.editor = this.editors[\"input\"];\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Editor Error - Cannot auto lookup editor for a custom formatter: \", column.definition.formatter);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\tif(config.editor){\n\t\t\tcolumn.modules.edit = config;\n\t\t}\n\t}\n\t\n\tgetCurrentCell(){\n\t\treturn this.currentCell ? this.currentCell.getComponent() : false;\n\t}\n\t\n\tclearEditor(cancel){\n\t\tvar cell = this.currentCell,\n\t\tcellEl;\n\t\t\n\t\tthis.invalidEdit = false;\n\t\t\n\t\tif(cell){\n\t\t\tthis.currentCell = false;\n\t\t\t\n\t\t\tcellEl = cell.getElement();\n\t\t\t\n\t\t\tthis.dispatch(\"edit-editor-clear\", cell, cancel);\n\t\t\t\n\t\t\tcellEl.classList.remove(\"tabulator-editing\");\n\t\t\t\n\t\t\twhile(cellEl.firstChild) cellEl.removeChild(cellEl.firstChild);\n\t\t\t\n\t\t\tcell.row.getElement().classList.remove(\"tabulator-editing\");\n\t\t\t\n\t\t\tcell.table.element.classList.remove(\"tabulator-editing\");\n\t\t}\n\t}\n\t\n\tcancelEdit(){\n\t\tif(this.currentCell){\n\t\t\tvar cell = this.currentCell;\n\t\t\tvar component = this.currentCell.getComponent();\n\t\t\t\n\t\t\tthis.clearEditor(true);\n\t\t\tcell.setValueActual(cell.getValue());\n\t\t\tcell.cellRendered();\n\t\t\t\n\t\t\tif(cell.column.definition.editor == \"textarea\" || cell.column.definition.variableHeight){\n\t\t\t\tcell.row.normalizeHeight(true);\n\t\t\t}\n\t\t\t\n\t\t\tif(cell.column.definition.cellEditCancelled){\n\t\t\t\tcell.column.definition.cellEditCancelled.call(this.table, component);\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"edit-cancelled\", cell);\n\t\t\tthis.dispatchExternal(\"cellEditCancelled\", component);\n\t\t}\n\t}\n\t\n\t//return a formatted value for a cell\n\tbindEditor(cell){\n\t\tif(cell.column.modules.edit){\n\t\t\tvar self = this,\n\t\t\telement = cell.getElement(true);\n\t\t\t\n\t\t\tthis.updateCellClass(cell);\n\t\t\telement.setAttribute(\"tabindex\", 0);\n\t\t\t\n\t\t\telement.addEventListener(\"mousedown\", function(e){\n\t\t\t\tif (e.button === 2) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}else{\n\t\t\t\t\tself.mouseClick = true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(this.options(\"editTriggerEvent\") === \"dblclick\"){\n\t\t\t\telement.addEventListener(\"dblclick\", function(e){\n\t\t\t\t\tif(!element.classList.contains(\"tabulator-editing\")){\n\t\t\t\t\t\telement.focus({preventScroll: true});\n\t\t\t\t\t\tself.edit(cell, e, false);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tif(this.options(\"editTriggerEvent\") === \"focus\" || this.options(\"editTriggerEvent\") === \"click\"){\n\t\t\t\telement.addEventListener(\"click\", function(e){\n\t\t\t\t\tif(!element.classList.contains(\"tabulator-editing\")){\n\t\t\t\t\t\telement.focus({preventScroll: true});\n\t\t\t\t\t\tself.edit(cell, e, false);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tif(this.options(\"editTriggerEvent\") === \"focus\"){\n\t\t\t\telement.addEventListener(\"focus\", function(e){\n\t\t\t\t\tif(!self.recursionBlock){\n\t\t\t\t\t\tself.edit(cell, e, false);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfocusCellNoEvent(cell, block){\n\t\tthis.recursionBlock = true;\n\t\t\n\t\tif(!(block && this.table.browser === \"ie\")){\n\t\t\tcell.getElement().focus({preventScroll: true});\n\t\t}\n\t\t\n\t\tthis.recursionBlock = false;\n\t}\n\t\n\teditCell(cell, forceEdit){\n\t\tthis.focusCellNoEvent(cell);\n\t\tthis.edit(cell, false, forceEdit);\n\t}\n\t\n\tfocusScrollAdjust(cell){\n\t\tif(this.table.rowManager.getRenderMode() == \"virtual\"){\n\t\t\tvar topEdge = this.table.rowManager.element.scrollTop,\n\t\t\tbottomEdge = this.table.rowManager.element.clientHeight + this.table.rowManager.element.scrollTop,\n\t\t\trowEl = cell.row.getElement();\n\t\t\t\n\t\t\tif(rowEl.offsetTop < topEdge){\n\t\t\t\tthis.table.rowManager.element.scrollTop -= (topEdge - rowEl.offsetTop);\n\t\t\t}else{\n\t\t\t\tif(rowEl.offsetTop + rowEl.offsetHeight  > bottomEdge){\n\t\t\t\t\tthis.table.rowManager.element.scrollTop += (rowEl.offsetTop + rowEl.offsetHeight - bottomEdge);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar leftEdge = this.table.rowManager.element.scrollLeft,\n\t\t\trightEdge = this.table.rowManager.element.clientWidth + this.table.rowManager.element.scrollLeft,\n\t\t\tcellEl = cell.getElement();\n\t\t\t\n\t\t\tif(this.table.modExists(\"frozenColumns\")){\n\t\t\t\tleftEdge += parseInt(this.table.modules.frozenColumns.leftMargin || 0);\n\t\t\t\trightEdge -= parseInt(this.table.modules.frozenColumns.rightMargin || 0);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.renderHorizontal === \"virtual\"){\n\t\t\t\tleftEdge -= parseInt(this.table.columnManager.renderer.vDomPadLeft);\n\t\t\t\trightEdge -= parseInt(this.table.columnManager.renderer.vDomPadLeft);\n\t\t\t}\n\t\t\t\n\t\t\tif(cellEl.offsetLeft < leftEdge){\n\t\t\t\tthis.table.rowManager.element.scrollLeft -= (leftEdge - cellEl.offsetLeft);\n\t\t\t}else{\n\t\t\t\tif(cellEl.offsetLeft + cellEl.offsetWidth  > rightEdge){\n\t\t\t\t\tthis.table.rowManager.element.scrollLeft += (cellEl.offsetLeft + cellEl.offsetWidth - rightEdge);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tallowEdit(cell) {\n\t\tvar check = cell.column.modules.edit ? true : false;\n\t\t\n\t\tif(cell.column.modules.edit){\n\t\t\tswitch(typeof cell.column.modules.edit.check){\n\t\t\t\tcase \"function\":\n\t\t\t\t\tif(cell.row.initialized){\n\t\t\t\t\t\tcheck = cell.column.modules.edit.check(cell.getComponent());\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"string\":\n\t\t\t\t\tcheck = !!cell.row.data[cell.column.modules.edit.check];\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tcheck = cell.column.modules.edit.check;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn check;\n\t}\n\t\n\tedit(cell, e, forceEdit){\n\t\tvar self = this,\n\t\tallowEdit = true,\n\t\trendered = function(){},\n\t\telement = cell.getElement(),\n\t\teditFinished = false,\n\t\tcellEditor, component, params;\n\n\t\t//prevent editing if another cell is refusing to leave focus (eg. validation fail)\n\t\t\n\t\tif(this.currentCell){\n\t\t\tif(!this.invalidEdit && this.currentCell !== cell){\n\t\t\t\tthis.cancelEdit();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t//handle successful value change\n\t\tfunction success(value){\n\t\t\tif(self.currentCell === cell && !editFinished){\n\t\t\t\tvar valid = self.chain(\"edit-success\", [cell, value], true, true);\n\n\t\t\t\tif(valid === true || self.table.options.validationMode === \"highlight\"){\n\n\t\t\t\t\teditFinished = true;\n\n\t\t\t\t\tself.clearEditor();\n\t\t\t\t\t\n\t\t\t\t\tif(!cell.modules.edit){\n\t\t\t\t\t\tcell.modules.edit = {};\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tcell.modules.edit.edited = true;\n\t\t\t\t\t\n\t\t\t\t\tif(self.editedCells.indexOf(cell) == -1){\n\t\t\t\t\t\tself.editedCells.push(cell);\n\t\t\t\t\t}\n\n\t\t\t\t\tvalue = self.transformEmptyValues(value, cell);\n\t\t\t\t\t\n\t\t\t\t\tcell.setValue(value, true);\n\n\t\t\t\t\treturn valid === true;\n\t\t\t\t}else{\n\t\t\t\t\teditFinished = true;\n\t\t\t\t\tself.invalidEdit = true;\n\t\t\t\t\tself.focusCellNoEvent(cell, true);\n\t\t\t\t\trendered();\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\teditFinished = false;\n\t\t\t\t\t}, 10);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\t// console.warn(\"Edit Success Error - cannot call success on a cell that is no longer being edited\");\n\t\t\t}\n\t\t}\n\t\t\n\t\t//handle aborted edit\n\t\tfunction cancel(){\n\t\t\t// editFinished = true;\n\n\t\t\tif(self.currentCell === cell && !editFinished){\n\t\t\t\tself.cancelEdit();\n\t\t\t}else{\n\t\t\t\t// console.warn(\"Edit Success Error - cannot call cancel on a cell that is no longer being edited\");\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction onRendered(callback){\n\t\t\trendered = callback;\n\t\t}\n\t\t\n\t\tif(!cell.column.modules.edit.blocked){\n\t\t\tif(e){\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t\t\n\t\t\tallowEdit = this.allowEdit(cell);\n\t\t\t\n\t\t\tif(allowEdit || forceEdit){\n\t\t\t\tself.cancelEdit();\n\t\t\t\t\n\t\t\t\tself.currentCell = cell;\n\t\t\t\t\n\t\t\t\tthis.focusScrollAdjust(cell);\n\t\t\t\t\n\t\t\t\tcomponent = cell.getComponent();\n\t\t\t\t\n\t\t\t\tif(this.mouseClick){\n\t\t\t\t\tthis.mouseClick = false;\n\t\t\t\t\t\n\t\t\t\t\tif(cell.column.definition.cellClick){\n\t\t\t\t\t\tcell.column.definition.cellClick.call(this.table, e, component);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(cell.column.definition.cellEditing){\n\t\t\t\t\tcell.column.definition.cellEditing.call(this.table, component);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"cell-editing\", cell);\n\t\t\t\tthis.dispatchExternal(\"cellEditing\", component);\n\t\t\t\t\n\t\t\t\tparams = typeof cell.column.modules.edit.params === \"function\" ? cell.column.modules.edit.params(component) : cell.column.modules.edit.params;\n\t\t\t\t\n\t\t\t\tcellEditor = cell.column.modules.edit.editor.call(self, component, onRendered, success, cancel, params);\n\t\t\t\t\n\t\t\t\t//if editor returned, add to DOM, if false, abort edit\n\t\t\t\tif(this.currentCell && cellEditor !== false){\n\t\t\t\t\tif(cellEditor instanceof Node){\n\t\t\t\t\t\telement.classList.add(\"tabulator-editing\");\n\t\t\t\t\t\tcell.row.getElement().classList.add(\"tabulator-editing\");\n\t\t\t\t\t\tcell.table.element.classList.add(\"tabulator-editing\");\n\t\t\t\t\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\t\t\t\t\telement.appendChild(cellEditor);\n\t\t\t\t\t\t\n\t\t\t\t\t\t//trigger onRendered Callback\n\t\t\t\t\t\trendered();\n\t\t\t\t\t\t\n\t\t\t\t\t\t//prevent editing from triggering rowClick event\n\t\t\t\t\t\tvar children = element.children;\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\t\t\tchildren[i].addEventListener(\"click\", function(e){\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Edit Error - Editor should return an instance of Node, the editor returned:\", cellEditor);\n\t\t\t\t\t\tthis.blur(element);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.blur(element);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\tthis.mouseClick = false;\n\t\t\t\tthis.blur(element);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else{\n\t\t\tthis.mouseClick = false;\n\t\t\tthis.blur(element);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\temptyValueCheck(value){\n\t\treturn value === \"\" || value === null || typeof value === \"undefined\";\n\t}\n\n\ttransformEmptyValues(value, cell){\n\t\tvar mod = cell.column.modules.edit, \n\t\tconvert = mod.convertEmptyValues || this.convertEmptyValues,\n\t\tcheckFunc;\n\t\t\n\t\tif(convert){\n\t\t\tcheckFunc = mod.editorEmptyValueFunc || this.options(\"editorEmptyValueFunc\");\n\n\t\t\tif(checkFunc && checkFunc(value)){\n\t\t\t\tvalue = mod.convertEmptyValues ? mod.editorEmptyValue : this.options(\"editorEmptyValue\");\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn value;\n\t}\n\t\n\tblur(element){\n\t\tif(!this.confirm(\"edit-blur\", [element]) ){\n\t\t\telement.blur();\n\t\t}\n\t}\n\t\n\tgetEditedCells(){\n\t\tvar output = [];\n\t\t\n\t\tthis.editedCells.forEach((cell) => {\n\t\t\toutput.push(cell.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tclearEdited(cell){\n\t\tvar editIndex;\n\t\t\n\t\tif(cell.modules.edit && cell.modules.edit.edited){\n\t\t\tcell.modules.edit.edited = false;\n\t\t\t\n\t\t\tthis.dispatch(\"edit-edited-clear\", cell);\n\t\t}\n\t\t\n\t\teditIndex = this.editedCells.indexOf(cell);\n\t\t\n\t\tif(editIndex > -1){\n\t\t\tthis.editedCells.splice(editIndex, 1);\n\t\t}\n\t}\n}","export default class ExportRow{\n\tconstructor(type, columns, component, indent){\n\t\tthis.type = type;\n\t\tthis.columns = columns;\n\t\tthis.component = component || false;\n\t\tthis.indent = indent || 0;\n\t}\n}","export default class ExportColumn{\n\tconstructor(value, component, width, height, depth){\n\t\tthis.value = value;\n\t\tthis.component = component || false;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.depth = depth;\n\t}\n}","export default {\r\n\r\n};","export default {\r\n\tvisible:function(){\r\n\t\treturn this.rowManager.getVisibleRows(false, true);\r\n\t},\r\n\tall:function(){\r\n\t\treturn this.rowManager.rows;\r\n\t},\r\n\tselected:function(){\r\n\t\treturn this.modules.selectRow.selectedRows;\r\n\t},\r\n\tactive:function(){\r\n\t\tif(this.options.pagination){\r\n\t\t\treturn this.rowManager.getDisplayRows(this.rowManager.displayRows.length - 2);\r\n\t\t}else{\r\n\t\t\treturn this.rowManager.getDisplayRows();\r\n\t\t}\r\n\t},\r\n};","import Module from '../../core/Module.js';\n\nimport ExportRow from './ExportRow.js';\nimport ExportColumn from './ExportColumn.js';\n\nimport columnLookups from './defaults/columnLookups.js';\nimport rowLookups from './defaults/rowLookups.js';\n\nexport default class Export extends Module{\n\n\tstatic moduleName = \"export\";\n\n\tstatic columnLookups = columnLookups;\n\tstatic rowLookups = rowLookups;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.config = {};\n\t\tthis.cloneTableStyle = true;\n\t\tthis.colVisProp = \"\";\n\t\tthis.colVisPropAttach = \"\";\n\t\t\n\t\tthis.registerTableOption(\"htmlOutputConfig\", false); //html output config\n\t\t\n\t\tthis.registerColumnOption(\"htmlOutput\");\n\t\tthis.registerColumnOption(\"titleHtmlOutput\");\n\t}\n\t\n\tinitialize(){\n\t\tthis.registerTableFunction(\"getHtml\", this.getHtml.bind(this));\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tgenerateExportList(config, style, range, colVisProp){\n\t\tvar headers, body, columns, colLookup;\n\n\t\tthis.cloneTableStyle = style;\n\t\tthis.config = config || {};\n\t\tthis.colVisProp = colVisProp;\n\t\tthis.colVisPropAttach = this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1);\n\n\t\tcolLookup = Export.columnLookups[range];\n\n\t\tif(colLookup){\n\t\t\tcolumns = colLookup.call(this.table);\n\t\t\tcolumns = columns.filter(col => this.columnVisCheck(col));\n\t\t}\n\n\t\theaders = this.config.columnHeaders !== false ? this.headersToExportRows(this.generateColumnGroupHeaders(columns)) : [];\n\n\t\tif(columns){\n\t\t\tcolumns = columns.map(col => col.getComponent());\n\t\t}\n\t\t\n\t\tbody = this.bodyToExportRows(this.rowLookup(range), columns);\n\n\t\treturn headers.concat(body);\n\t}\n\t\n\tgenerateTable(config, style, range, colVisProp){\n\t\tvar list = this.generateExportList(config, style, range, colVisProp);\n\t\t\n\t\treturn this.generateTableElement(list);\n\t}\n\t\n\trowLookup(range){\n\t\tvar rows = [], \n\t\trowLookup;\n\t\t\n\t\tif(typeof range == \"function\"){\n\t\t\trange.call(this.table).forEach((row) =>{\n\t\t\t\trow = this.table.rowManager.findRow(row);\n\t\t\t\t\n\t\t\t\tif(row){\n\t\t\t\t\trows.push(row);\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\trowLookup = Export.rowLookups[range] || Export.rowLookups[\"active\"];\n\n\t\t\trows = rowLookup.call(this.table);\n\t\t}\n\t\t\n\t\treturn Object.assign([], rows);\n\t}\n\t\n\tgenerateColumnGroupHeaders(columns){\n\t\tvar output = [];\n\t\t\n\t\tif (!columns) {\n\t\t\tcolumns = this.config.columnGroups !== false ? this.table.columnManager.columns : this.table.columnManager.columnsByIndex;\n\t\t}\n\t\t\n\t\tcolumns.forEach((column) => {\n\t\t\tvar colData = this.processColumnGroup(column);\n\t\t\t\n\t\t\tif(colData){\n\t\t\t\toutput.push(colData);\n\t\t\t}\n\t\t});\n\n\n\n\t\treturn output;\n\t}\n\t\n\tprocessColumnGroup(column){\n\t\tvar subGroups = column.columns,\n\t\tmaxDepth = 0,\n\t\ttitle = column.definition[\"title\" + (this.colVisPropAttach)] || column.definition.title;\n\t\t\n\t\tvar groupData = {\n\t\t\ttitle:title,\n\t\t\tcolumn:column,\n\t\t\tdepth:1,\n\t\t};\n\t\t\n\t\tif(subGroups.length){\n\t\t\tgroupData.subGroups = [];\n\t\t\tgroupData.width = 0;\n\t\t\t\n\t\t\tsubGroups.forEach((subGroup) => {\n\t\t\t\tvar subGroupData = this.processColumnGroup(subGroup);\n\t\t\t\t\n\t\t\t\tif(subGroupData){\n\t\t\t\t\tgroupData.width += subGroupData.width;\n\t\t\t\t\tgroupData.subGroups.push(subGroupData);\n\t\t\t\t\t\n\t\t\t\t\tif(subGroupData.depth > maxDepth){\n\t\t\t\t\t\tmaxDepth = subGroupData.depth;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tgroupData.depth += maxDepth;\n\t\t\t\n\t\t\tif(!groupData.width){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else{\n\t\t\tif(this.columnVisCheck(column)){\n\t\t\t\tgroupData.width = 1;\n\t\t\t}else{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn groupData;\n\t}\n\t\n\tcolumnVisCheck(column){\n\t\tvar visProp = column.definition[this.colVisProp];\n\n\t\tif(this.config.rowHeaders === false && column.isRowHeader){\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tif(typeof visProp === \"function\"){\n\t\t\tvisProp = visProp.call(this.table, column.getComponent());\n\t\t}\n\n\t\tif(visProp === false || visProp === true){\n\t\t\treturn visProp;\n\t\t}\n\n\t\treturn column.visible && column.field;\n\t}\n\t\n\theadersToExportRows(columns){\n\t\tvar headers = [],\n\t\theaderDepth = 0,\n\t\texportRows = [];\n\t\t\n\t\tfunction parseColumnGroup(column, level){\n\t\t\t\n\t\t\tvar depth = headerDepth - level;\n\t\t\t\n\t\t\tif(typeof headers[level] === \"undefined\"){\n\t\t\t\theaders[level] = [];\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.height = column.subGroups ? 1 : (depth - column.depth) + 1;\n\t\t\t\n\t\t\theaders[level].push(column);\n\t\t\t\n\t\t\tif(column.height > 1){\n\t\t\t\tfor(let i = 1; i < column.height; i ++){\n\t\t\t\t\t\n\t\t\t\t\tif(typeof headers[level + i] === \"undefined\"){\n\t\t\t\t\t\theaders[level + i] = [];\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\theaders[level + i].push(false);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(column.width > 1){\n\t\t\t\tfor(let i = 1; i < column.width; i ++){\n\t\t\t\t\theaders[level].push(false);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(column.subGroups){\n\t\t\t\tcolumn.subGroups.forEach(function(subGroup){\n\t\t\t\t\tparseColumnGroup(subGroup, level+1);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\t\t//calculate maximum header depth\n\t\tcolumns.forEach(function(column){\n\t\t\tif(column.depth > headerDepth){\n\t\t\t\theaderDepth = column.depth;\n\t\t\t}\n\t\t});\n\t\t\n\t\tcolumns.forEach(function(column){\n\t\t\tparseColumnGroup(column,0);\n\t\t});\n\t\t\n\t\theaders.forEach((header) => {\n\t\t\tvar columns = [];\n\t\t\t\n\t\t\theader.forEach((col) => {\n\t\t\t\tif(col){\n\t\t\t\t\tlet title = typeof col.title === \"undefined\" ? \"\" : col.title;\n\t\t\t\t\tcolumns.push(new ExportColumn(title, col.column.getComponent(), col.width, col.height, col.depth));\n\t\t\t\t}else{\n\t\t\t\t\tcolumns.push(null);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\texportRows.push(new ExportRow(\"header\", columns));\n\t\t});\n\t\t\n\t\treturn exportRows;\n\t}\n\t\n\tbodyToExportRows(rows, columns = []){\n\t\tvar exportRows = [];\n\t\t\n\t\tif (columns.length === 0) {\n\t\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\t\tif (this.columnVisCheck(column)) {\n\t\t\t\t\tcolumns.push(column.getComponent());\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\tif(this.config.columnCalcs !== false && this.table.modExists(\"columnCalcs\")){\n\t\t\tif(this.table.modules.columnCalcs.topInitialized){\n\t\t\t\trows.unshift(this.table.modules.columnCalcs.topRow);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.modules.columnCalcs.botInitialized){\n\t\t\t\trows.push(this.table.modules.columnCalcs.botRow);\n\t\t\t}\n\t\t}\n\n\t\trows = rows.filter((row) => {\n\t\t\tswitch(row.type){\n\t\t\t\tcase \"group\":\n\t\t\t\t\treturn this.config.rowGroups !== false;\n\t\t\t\t\n\t\t\t\tcase \"calc\":\n\t\t\t\t\treturn this.config.columnCalcs !== false;\n\t\t\t\t\n\t\t\t\tcase \"row\":\n\t\t\t\t\treturn !(this.table.options.dataTree && this.config.dataTree === false && row.modules.dataTree.parent);\n\t\t\t}\n\t\t\t\n\t\t\treturn true;\n\t\t});\n\t\t\n\t\trows.forEach((row, i) => {\n\t\t\tvar rowData = row.getData(this.colVisProp);\n\t\t\tvar exportCols = [];\n\t\t\tvar indent = 0;\n\t\t\t\n\t\t\tswitch(row.type){\n\t\t\t\tcase \"group\":\n\t\t\t\t\tindent = row.level;\n\t\t\t\t\texportCols.push(new ExportColumn(row.key, row.getComponent(), columns.length, 1));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"calc\" :\n\t\t\t\tcase \"row\" :\n\t\t\t\t\tcolumns.forEach((col) => {\n\t\t\t\t\t\texportCols.push(new ExportColumn(col._column.getFieldValue(rowData), col, 1, 1));\n\t\t\t\t\t});\n\t\t\t\t\n\t\t\t\t\tif(this.table.options.dataTree && this.config.dataTree !== false){\n\t\t\t\t\t\tindent = row.modules.dataTree.index;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\texportRows.push(new ExportRow(row.type, exportCols, row.getComponent(), indent));\n\t\t});\n\t\t\n\t\treturn exportRows;\n\t}\n\t\n\tgenerateTableElement(list){\n\t\tvar table = document.createElement(\"table\"),\n\t\theaderEl = document.createElement(\"thead\"),\n\t\tbodyEl = document.createElement(\"tbody\"),\n\t\tstyles = this.lookupTableStyles(),\n\t\trowFormatter = this.table.options[\"rowFormatter\" + (this.colVisPropAttach)],\n\t\tsetup = {};\n\t\t\n\t\tsetup.rowFormatter = rowFormatter !== null ? rowFormatter : this.table.options.rowFormatter;\n\t\t\n\t\tif(this.table.options.dataTree &&this.config.dataTree !== false && this.table.modExists(\"columnCalcs\")){\n\t\t\tsetup.treeElementField = this.table.modules.dataTree.elementField;\n\t\t}\n\t\t\n\t\t//assign group header formatter\n\t\tsetup.groupHeader = this.table.options[\"groupHeader\" + (this.colVisPropAttach)];\n\t\t\n\t\tif(setup.groupHeader && !Array.isArray(setup.groupHeader)){\n\t\t\tsetup.groupHeader = [setup.groupHeader];\n\t\t}\n\t\t\n\t\ttable.classList.add(\"tabulator-print-table\");\n\t\t\n\t\tthis.mapElementStyles(this.table.columnManager.getHeadersElement(), headerEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\n\t\tif(list.length > 1000){\n\t\t\tconsole.warn(\"It may take a long time to render an HTML table with more than 1000 rows\");\n\t\t}\n\t\t\n\t\tlist.forEach((row, i) => {\n\t\t\tlet rowEl;\n\t\t\t\n\t\t\tswitch(row.type){\n\t\t\t\tcase \"header\":\n\t\t\t\t\theaderEl.appendChild(this.generateHeaderElement(row, setup, styles));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"group\":\n\t\t\t\t\tbodyEl.appendChild(this.generateGroupElement(row, setup, styles));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"calc\":\n\t\t\t\t\tbodyEl.appendChild(this.generateCalcElement(row, setup, styles));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"row\":\n\t\t\t\t\trowEl = this.generateRowElement(row, setup, styles);\n\t\t\t\t\n\t\t\t\t\tthis.mapElementStyles(((i % 2) && styles.evenRow) ? styles.evenRow : styles.oddRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\t\t\t\t\tbodyEl.appendChild(rowEl);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(headerEl.innerHTML){\n\t\t\ttable.appendChild(headerEl);\n\t\t}\n\t\t\n\t\ttable.appendChild(bodyEl);\n\t\t\n\t\t\n\t\tthis.mapElementStyles(this.table.element, table, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\"]);\n\t\treturn table;\n\t}\n\t\n\tlookupTableStyles(){\n\t\tvar styles = {};\n\t\t\n\t\t//lookup row styles\n\t\tif(this.cloneTableStyle && window.getComputedStyle){\n\t\t\tstyles.oddRow = this.table.element.querySelector(\".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tstyles.evenRow = this.table.element.querySelector(\".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tstyles.calcRow = this.table.element.querySelector(\".tabulator-row.tabulator-calcs\");\n\t\t\tstyles.firstRow = this.table.element.querySelector(\".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tstyles.firstGroup = this.table.element.getElementsByClassName(\"tabulator-group\")[0];\n\t\t\t\n\t\t\tif(styles.firstRow){\n\t\t\t\tstyles.styleCells = styles.firstRow.getElementsByClassName(\"tabulator-cell\");\n\t\t\t\tstyles.styleRowHeader = styles.firstRow.getElementsByClassName(\"tabulator-row-header\")[0];\n\t\t\t\tstyles.firstCell = styles.styleCells[0];\n\t\t\t\tstyles.lastCell = styles.styleCells[styles.styleCells.length - 1];\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn styles;\n\t}\n\t\n\tgenerateHeaderElement(row, setup, styles){\n\t\tvar rowEl = document.createElement(\"tr\");\n\t\t\n\t\trow.columns.forEach((column) => {\n\t\t\tif(column){\n\t\t\t\tvar cellEl = document.createElement(\"th\");\n\t\t\t\tvar classNames = column.component._column.definition.cssClass ? column.component._column.definition.cssClass.split(\" \") : [];\n\t\t\t\t\n\t\t\t\tcellEl.colSpan = column.width;\n\t\t\t\tcellEl.rowSpan = column.height;\n\t\t\t\t\n\t\t\t\tcellEl.innerHTML = column.value;\n\t\t\t\t\n\t\t\t\tif(this.cloneTableStyle){\n\t\t\t\t\tcellEl.style.boxSizing = \"border-box\";\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tclassNames.forEach(function(className) {\n\t\t\t\t\tcellEl.classList.add(className);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"text-align\", \"border-left\", \"border-right\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\t\t\t\tthis.mapElementStyles(column.component._column.contentElement, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n\t\t\n\t\t\t\tif(column.component._column.visible){\n\t\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"width\"]);\n\t\t\t\t}else{\n\t\t\t\t\tif(column.component._column.definition.width){\n\t\t\t\t\t\tcellEl.style.width = column.component._column.definition.width + \"px\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(column.component._column.parent && column.component._column.parent.isGroup){\n\t\t\t\t\tthis.mapElementStyles(column.component._column.parent.groupElement, cellEl, [\"border-top\"]);\n\t\t\t\t}else{\n\t\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"border-top\"]);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(column.component._column.isGroup){\n\t\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"border-bottom\"]);\n\t\t\t\t}else{\n\t\t\t\t\tthis.mapElementStyles(this.table.columnManager.getElement(), cellEl, [\"border-bottom\"]);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trowEl.appendChild(cellEl);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateGroupElement(row, setup, styles){\n\t\t\n\t\tvar rowEl = document.createElement(\"tr\"),\n\t\tcellEl = document.createElement(\"td\"),\n\t\tgroup = row.columns[0];\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-row\");\n\t\t\n\t\tif(setup.groupHeader && setup.groupHeader[row.indent]){\n\t\t\tgroup.value = setup.groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t}else{\n\t\t\tif(setup.groupHeader !== false){\n\t\t\t\tgroup.value = row.component._group.generator(group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t\t}\n\t\t}\n\t\t\n\t\tcellEl.colSpan = group.width;\n\t\tcellEl.innerHTML = group.value;\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-group\");\n\t\trowEl.classList.add(\"tabulator-group-level-\" + row.indent);\n\t\t\n\t\tif(group.component.isVisible()){\n\t\t\trowEl.classList.add(\"tabulator-group-visible\");\n\t\t}\n\t\t\n\t\tthis.mapElementStyles(styles.firstGroup, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\t\tthis.mapElementStyles(styles.firstGroup, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n\t\t\n\t\trowEl.appendChild(cellEl);\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateCalcElement(row, setup, styles){\n\t\tvar rowEl = this.generateRowElement(row, setup, styles);\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-calcs\");\n\t\tthis.mapElementStyles(styles.calcRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateRowElement(row, setup, styles){\n\t\tvar rowEl = document.createElement(\"tr\");\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-row\");\n\t\t\n\t\trow.columns.forEach((col, i) => {\n\t\t\tif(col){\n\t\t\t\tvar cellEl = document.createElement(\"td\"),\n\t\t\t\tcolumn = col.component._column,\n\t\t\t\ttable =  this.table,\n\t\t\t\tindex = table.columnManager.findColumnIndex(column),\n\t\t\t\tvalue = col.value,\n\t\t\t\tcellStyle, styleProps;\n\t\t\t\t\n\t\t\t\tvar cellWrapper = {\n\t\t\t\t\tmodules:{},\n\t\t\t\t\tgetValue:function(){\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t},\n\t\t\t\t\tgetField:function(){\n\t\t\t\t\t\treturn column.definition.field;\n\t\t\t\t\t},\n\t\t\t\t\tgetElement:function(){\n\t\t\t\t\t\treturn cellEl;\n\t\t\t\t\t},\n\t\t\t\t\tgetType:function(){\n\t\t\t\t\t\treturn \"cell\";\n\t\t\t\t\t},\n\t\t\t\t\tgetColumn:function(){\n\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t},\n\t\t\t\t\tgetData:function(){\n\t\t\t\t\t\treturn row.component.getData();\n\t\t\t\t\t},\n\t\t\t\t\tgetRow:function(){\n\t\t\t\t\t\treturn row.component;\n\t\t\t\t\t},\n\t\t\t\t\tgetTable:function(){\n\t\t\t\t\t\treturn table;\n\t\t\t\t\t},\n\t\t\t\t\tgetComponent:function(){\n\t\t\t\t\t\treturn cellWrapper;\n\t\t\t\t\t},\n\t\t\t\t\tcolumn:column,\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tvar classNames = column.definition.cssClass ? column.definition.cssClass.split(\" \") : [];\n\t\t\t\t\n\t\t\t\tclassNames.forEach(function(className) {\n\t\t\t\t\tcellEl.classList.add(className);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif(this.table.modExists(\"format\") && this.config.formatCells !== false){\n\t\t\t\t\tvalue = this.table.modules.format.formatExportValue(cellWrapper, this.colVisProp);\n\t\t\t\t}else{\n\t\t\t\t\tswitch(typeof value){\n\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\tvalue = value !== null ? JSON.stringify(value) : \"\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\n\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(value instanceof Node){\n\t\t\t\t\tcellEl.appendChild(value);\n\t\t\t\t}else{\n\t\t\t\t\tcellEl.innerHTML = value;\n\t\t\t\t}\n\n\t\t\t\tstyleProps = [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"text-align\"];\n\n\t\t\t\tif(column.isRowHeader){\n\t\t\t\t\tcellStyle = styles.styleRowHeader;\n\t\t\t\t\tstyleProps.push(\"background-color\");\n\t\t\t\t}else{\n\t\t\t\t\tcellStyle = styles.styleCells && styles.styleCells[index] ? styles.styleCells[index] : styles.firstCell;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(cellStyle){\n\t\t\t\t\tthis.mapElementStyles(cellStyle, cellEl, styleProps);\n\t\t\t\t\t\n\t\t\t\t\tif(column.definition.align){\n\t\t\t\t\t\tcellEl.style.textAlign = column.definition.align;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(this.table.options.dataTree && this.config.dataTree !== false){\n\t\t\t\t\tif((setup.treeElementField && setup.treeElementField == column.field) || (!setup.treeElementField && i == 0)){\n\t\t\t\t\t\tif(row.component._row.modules.dataTree.controlEl){\n\t\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.controlEl.cloneNode(true), cellEl.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(row.component._row.modules.dataTree.branchEl){\n\t\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.branchEl.cloneNode(true), cellEl.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trowEl.appendChild(cellEl);\n\t\t\t\t\n\t\t\t\tif(cellWrapper.modules.format && cellWrapper.modules.format.renderedCallback){\n\t\t\t\t\tcellWrapper.modules.format.renderedCallback();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(setup.rowFormatter && row.type === \"row\" && this.config.formatCells !== false){\n\t\t\tlet formatComponent = Object.assign(row.component);\n\n\t\t\tformatComponent.getElement = function(){return rowEl;};\n\n\t\t\tsetup.rowFormatter(row.component);\n\t\t}\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateHTMLTable(list){\n\t\tvar holder = document.createElement(\"div\");\n\t\t\n\t\tholder.appendChild(this.generateTableElement(list));\n\t\t\n\t\treturn holder.innerHTML;\n\t}\n\t\n\tgetHtml(visible, style, config, colVisProp){\n\t\tvar list = this.generateExportList(config || this.table.options.htmlOutputConfig, style, visible, colVisProp || \"htmlOutput\");\n\t\t\n\t\treturn this.generateHTMLTable(list);\n\t}\n\t\n\tmapElementStyles(from, to, props){\n\t\tif(this.cloneTableStyle && from && to){\n\t\t\t\n\t\t\tvar lookup = {\n\t\t\t\t\"background-color\" : \"backgroundColor\",\n\t\t\t\t\"color\" : \"fontColor\",\n\t\t\t\t\"width\" : \"width\",\n\t\t\t\t\"font-weight\" : \"fontWeight\",\n\t\t\t\t\"font-family\" : \"fontFamily\",\n\t\t\t\t\"font-size\" : \"fontSize\",\n\t\t\t\t\"text-align\" : \"textAlign\",\n\t\t\t\t\"border-top\" : \"borderTop\",\n\t\t\t\t\"border-left\" : \"borderLeft\",\n\t\t\t\t\"border-right\" : \"borderRight\",\n\t\t\t\t\"border-bottom\" : \"borderBottom\",\n\t\t\t\t\"padding-top\" : \"paddingTop\",\n\t\t\t\t\"padding-left\" : \"paddingLeft\",\n\t\t\t\t\"padding-right\" : \"paddingRight\",\n\t\t\t\t\"padding-bottom\" : \"paddingBottom\",\n\t\t\t};\n\t\t\t\n\t\t\tif(window.getComputedStyle){\n\t\t\t\tvar fromStyle = window.getComputedStyle(from);\n\n\t\t\t\tprops.forEach(function(prop){\n\t\t\t\t\tif(!to.style[lookup[prop]]){\n\t\t\t\t\t\tto.style[lookup[prop]] = fromStyle.getPropertyValue(prop);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n","export default {\n\n\t//equal to\n\t\"=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal == filterVal ? true : false;\n\t},\n\n\t//less than\n\t\"<\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal < filterVal ? true : false;\n\t},\n\n\t//less than or equal to\n\t\"<=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal <= filterVal ? true : false;\n\t},\n\n\t//greater than\n\t\">\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal > filterVal ? true : false;\n\t},\n\n\t//greater than or equal to\n\t\">=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal >= filterVal ? true : false;\n\t},\n\n\t//not equal to\n\t\"!=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal != filterVal ? true : false;\n\t},\n\n\t\"regex\":function(filterVal, rowVal, rowData, filterParams){\n\n\t\tif(typeof filterVal == \"string\"){\n\t\t\tfilterVal = new RegExp(filterVal);\n\t\t}\n\n\t\treturn filterVal.test(rowVal);\n\t},\n\n\t//contains the string\n\t\"like\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\n\t\t\treturn rowVal === filterVal ? true : false;\n\t\t}else{\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\n\t\t\t\treturn String(rowVal).toLowerCase().indexOf(filterVal.toLowerCase()) > -1;\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t//contains the keywords\n\t\"keywords\":function(filterVal, rowVal, rowData, filterParams){\n\t\tvar keywords = filterVal.toLowerCase().split(typeof filterParams.separator === \"undefined\" ? \" \" : filterParams.separator),\n\t\tvalue = String(rowVal === null || typeof rowVal === \"undefined\" ? \"\" : rowVal).toLowerCase(),\n\t\tmatches = [];\n\n\t\tkeywords.forEach((keyword) =>{\n\t\t\tif(value.includes(keyword)){\n\t\t\t\tmatches.push(true);\n\t\t\t}\n\t\t});\n\n\t\treturn filterParams.matchAll ? matches.length === keywords.length : !!matches.length;\n\t},\n\n\t//starts with the string\n\t\"starts\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\n\t\t\treturn rowVal === filterVal ? true : false;\n\t\t}else{\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\n\t\t\t\treturn String(rowVal).toLowerCase().startsWith(filterVal.toLowerCase());\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t//ends with the string\n\t\"ends\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\n\t\t\treturn rowVal === filterVal ? true : false;\n\t\t}else{\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\n\t\t\t\treturn String(rowVal).toLowerCase().endsWith(filterVal.toLowerCase());\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t//in array\n\t\"in\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(Array.isArray(filterVal)){\n\t\t\treturn filterVal.length ? filterVal.indexOf(rowVal) > -1 : true;\n\t\t}else{\n\t\t\tconsole.warn(\"Filter Error - filter value is not an array:\", filterVal);\n\t\t\treturn false;\n\t\t}\n\t},\n};","import Module from '../../core/Module.js';\n\nimport defaultFilters from './defaults/filters.js';\n\nexport default class Filter extends Module{\n\n\tstatic moduleName = \"filter\";\n\n\t//load defaults\n\tstatic filters = defaultFilters;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.filterList = []; //hold filter list\n\t\tthis.headerFilters = {}; //hold column filters\n\t\tthis.headerFilterColumns = []; //hold columns that use header filters\n\n\t\tthis.prevHeaderFilterChangeCheck = \"\";\n\t\tthis.prevHeaderFilterChangeCheck = \"{}\";\n\n\t\tthis.changed = false; //has filtering changed since last render\n\t\tthis.tableInitialized = false;\n\n\t\tthis.registerTableOption(\"filterMode\", \"local\"); //local or remote filtering\n\n\t\tthis.registerTableOption(\"initialFilter\", false); //initial filtering criteria\n\t\tthis.registerTableOption(\"initialHeaderFilter\", false); //initial header filtering criteria\n\t\tthis.registerTableOption(\"headerFilterLiveFilterDelay\", 300); //delay before updating column after user types in header filter\n\t\tthis.registerTableOption(\"placeholderHeaderFilter\", false); //placeholder when header filter is empty\n\n\t\tthis.registerColumnOption(\"headerFilter\");\n\t\tthis.registerColumnOption(\"headerFilterPlaceholder\");\n\t\tthis.registerColumnOption(\"headerFilterParams\");\n\t\tthis.registerColumnOption(\"headerFilterEmptyCheck\");\n\t\tthis.registerColumnOption(\"headerFilterFunc\");\n\t\tthis.registerColumnOption(\"headerFilterFuncParams\");\n\t\tthis.registerColumnOption(\"headerFilterLiveFilter\");\n\n\t\tthis.registerTableFunction(\"searchRows\", this.searchRows.bind(this));\n\t\tthis.registerTableFunction(\"searchData\", this.searchData.bind(this));\n\n\t\tthis.registerTableFunction(\"setFilter\", this.userSetFilter.bind(this));\n\t\tthis.registerTableFunction(\"refreshFilter\", this.userRefreshFilter.bind(this));\n\t\tthis.registerTableFunction(\"addFilter\", this.userAddFilter.bind(this));\n\t\tthis.registerTableFunction(\"getFilters\", this.getFilters.bind(this));\n\t\tthis.registerTableFunction(\"setHeaderFilterFocus\", this.userSetHeaderFilterFocus.bind(this));\n\t\tthis.registerTableFunction(\"getHeaderFilterValue\", this.userGetHeaderFilterValue.bind(this));\n\t\tthis.registerTableFunction(\"setHeaderFilterValue\", this.userSetHeaderFilterValue.bind(this));\n\t\tthis.registerTableFunction(\"getHeaderFilters\", this.getHeaderFilters.bind(this));\n\t\tthis.registerTableFunction(\"removeFilter\", this.userRemoveFilter.bind(this));\n\t\tthis.registerTableFunction(\"clearFilter\", this.userClearFilter.bind(this));\n\t\tthis.registerTableFunction(\"clearHeaderFilter\", this.userClearHeaderFilter.bind(this));\n\n\t\tthis.registerComponentFunction(\"column\", \"headerFilterFocus\", this.setHeaderFilterFocus.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"reloadHeaderFilter\", this.reloadHeaderFilter.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"getHeaderFilterValue\", this.getHeaderFilterValue.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"setHeaderFilterValue\", this.setHeaderFilterValue.bind(this));\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"column-init\", this.initializeColumnHeaderFilter.bind(this));\n\t\tthis.subscribe(\"column-width-fit-before\", this.hideHeaderFilterElements.bind(this));\n\t\tthis.subscribe(\"column-width-fit-after\", this.showHeaderFilterElements.bind(this));\n\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this));\n\t\tthis.subscribe(\"placeholder\", this.generatePlaceholder.bind(this));\n\n\t\tif(this.table.options.filterMode === \"remote\"){\n\t\t\tthis.subscribe(\"data-params\", this.remoteFilterParams.bind(this));\n\t\t}\n\n\t\tthis.registerDataHandler(this.filter.bind(this), 10);\n\t}\n\n\ttableBuilt(){\n\t\tif(this.table.options.initialFilter){\n\t\t\tthis.setFilter(this.table.options.initialFilter);\n\t\t}\n\n\t\tif(this.table.options.initialHeaderFilter){\n\t\t\tthis.table.options.initialHeaderFilter.forEach((item) => {\n\n\t\t\t\tvar column = this.table.columnManager.findColumn(item.field);\n\n\t\t\t\tif(column){\n\t\t\t\t\tthis.setHeaderFilterValue(column, item.value);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", item.field);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.tableInitialized = true;\n\t}\n\n\tremoteFilterParams(data, config, silent, params){\n\t\tparams.filter = this.getFilters(true, true);\n\t\treturn params;\n\t}\n\n\tgeneratePlaceholder(text){\n\t\tif(this.table.options.placeholderHeaderFilter && Object.keys(this.headerFilters).length){\n\t\t\treturn this.table.options.placeholderHeaderFilter;\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\t//set standard filters\n\tuserSetFilter(field, type, value, params){\n\t\tthis.setFilter(field, type, value, params);\n\t\tthis.refreshFilter();\n\t}\n\n\t//set standard filters\n\tuserRefreshFilter(){\n\t\tthis.refreshFilter();\n\t}\n\n\t//add filter to array\n\tuserAddFilter(field, type, value, params){\n\t\tthis.addFilter(field, type, value, params);\n\t\tthis.refreshFilter();\n\t}\n\n\tuserSetHeaderFilterFocus(field){\n\t\tvar column = this.table.columnManager.findColumn(field);\n\n\t\tif(column){\n\t\t\tthis.setHeaderFilterFocus(column);\n\t\t}else{\n\t\t\tconsole.warn(\"Column Filter Focus Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tuserGetHeaderFilterValue(field) {\n\t\tvar column = this.table.columnManager.findColumn(field);\n\n\t\tif(column){\n\t\t\treturn this.getHeaderFilterValue(column);\n\t\t}else{\n\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\n\t\t}\n\t}\n\n\tuserSetHeaderFilterValue(field, value){\n\t\tvar column = this.table.columnManager.findColumn(field);\n\n\t\tif(column){\n\t\t\tthis.setHeaderFilterValue(column, value);\n\t\t}else{\n\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//remove filter from array\n\tuserRemoveFilter(field, type, value){\n\t\tthis.removeFilter(field, type, value);\n\t\tthis.refreshFilter();\n\t}\n\n\t//clear filters\n\tuserClearFilter(all){\n\t\tthis.clearFilter(all);\n\t\tthis.refreshFilter();\n\t}\n\n\t//clear header filters\n\tuserClearHeaderFilter(){\n\t\tthis.clearHeaderFilter();\n\t\tthis.refreshFilter();\n\t}\n\n\n\t//search for specific row components\n\tsearchRows(field, type, value){\n\t\treturn this.search(\"rows\", field, type, value);\n\t}\n\n\t//search for specific data\n\tsearchData(field, type, value){\n\t\treturn this.search(\"data\", field, type, value);\n\t}\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\tinitializeColumnHeaderFilter(column){\n\t\tvar def = column.definition;\n\n\t\tif(def.headerFilter){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\n\t//initialize column header filter\n\tinitializeColumn(column, value){\n\t\tvar self = this,\n\t\tfield = column.getField();\n\n\t\t//handle successfully value change\n\t\tfunction success(value){\n\t\t\tvar filterType = (column.modules.filter.tagType == \"input\" && column.modules.filter.attrType == \"text\") || column.modules.filter.tagType == \"textarea\" ? \"partial\" : \"match\",\n\t\t\ttype = \"\",\n\t\t\tfilterChangeCheck = \"\",\n\t\t\tfilterFunc;\n\n\t\t\tif(typeof column.modules.filter.prevSuccess === \"undefined\" || column.modules.filter.prevSuccess !== value){\n\n\t\t\t\tcolumn.modules.filter.prevSuccess = value;\n\n\t\t\t\tif(!column.modules.filter.emptyFunc(value)){\n\t\t\t\t\tcolumn.modules.filter.value = value;\n\n\t\t\t\t\tswitch(typeof column.definition.headerFilterFunc){\n\t\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\t\tif(Filter.filters[column.definition.headerFilterFunc]){\n\t\t\t\t\t\t\t\ttype = column.definition.headerFilterFunc;\n\t\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\n\t\t\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n\n\t\t\t\t\t\t\t\t\treturn Filter.filters[column.definition.headerFilterFunc](value, fieldVal, data, params);\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tconsole.warn(\"Header Filter Error - Matching filter function not found: \", column.definition.headerFilterFunc);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"function\":\n\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\n\t\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n\n\t\t\t\t\t\t\t\treturn column.definition.headerFilterFunc(value, fieldVal, data, params);\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\ttype = filterFunc;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(!filterFunc){\n\t\t\t\t\t\tswitch(filterType){\n\t\t\t\t\t\t\tcase \"partial\":\n\t\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\t\tvar colVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\t\tif(typeof colVal !== 'undefined' && colVal !== null){\n\t\t\t\t\t\t\t\t\t\treturn String(colVal).toLowerCase().indexOf(String(value).toLowerCase()) > -1;\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\ttype = \"like\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\t\treturn column.getFieldValue(data) == value;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\ttype = \"=\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tself.headerFilters[field] = {value:value, func:filterFunc, type:type};\n\t\t\t\t}else{\n\t\t\t\t\tdelete self.headerFilters[field];\n\t\t\t\t}\n\n\t\t\t\tcolumn.modules.filter.value = value;\n\n\t\t\t\tfilterChangeCheck = JSON.stringify(self.headerFilters);\n\n\t\t\t\tif(self.prevHeaderFilterChangeCheck !== filterChangeCheck){\n\t\t\t\t\tself.prevHeaderFilterChangeCheck = filterChangeCheck;\n\n\t\t\t\t\tself.trackChanges();\n\t\t\t\t\tself.refreshFilter();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\tcolumn.modules.filter = {\n\t\t\tsuccess:success,\n\t\t\tattrType:false,\n\t\t\ttagType:false,\n\t\t\temptyFunc:false,\n\t\t};\n\n\t\tthis.generateHeaderFilterElement(column);\n\t}\n\n\tgenerateHeaderFilterElement(column, initialValue, reinitialize){\n\t\tvar self = this,\n\t\tsuccess = column.modules.filter.success,\n\t\tfield = column.getField(),\n\t\tfilterElement, editor, editorElement, cellWrapper, typingTimer, searchTrigger, params, onRenderedCallback;\n\n\t\tcolumn.modules.filter.value = initialValue;\n\n\t\t//handle aborted edit\n\t\tfunction cancel(){}\n\n\t\tfunction onRendered(callback){\n\t\t\tonRenderedCallback = callback;\n\t\t}\n\n\t\tif(column.modules.filter.headerElement && column.modules.filter.headerElement.parentNode){\n\t\t\tcolumn.contentElement.removeChild(column.modules.filter.headerElement.parentNode);\n\t\t}\n\n\t\tif(field){\n\n\t\t\t//set empty value function\n\t\t\tcolumn.modules.filter.emptyFunc = column.definition.headerFilterEmptyCheck || function(value){\n\t\t\t\treturn !value && value !== 0;\n\t\t\t};\n\n\t\t\tfilterElement = document.createElement(\"div\");\n\t\t\tfilterElement.classList.add(\"tabulator-header-filter\");\n\n\t\t\t//set column editor\n\t\t\tswitch(typeof column.definition.headerFilter){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(self.table.modules.edit.editors[column.definition.headerFilter]){\n\t\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.headerFilter];\n\n\t\t\t\t\t\tif((column.definition.headerFilter === \"tick\" || column.definition.headerFilter === \"tickCross\") && !column.definition.headerFilterEmptyCheck){\n\t\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function(value){\n\t\t\t\t\t\t\t\treturn value !== true && value !== false;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Filter Error - Cannot build header filter, No such editor found: \", column.definition.editor);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\teditor = column.definition.headerFilter;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tif(column.modules.edit && column.modules.edit.editor){\n\t\t\t\t\t\teditor = column.modules.edit.editor;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(column.definition.formatter && self.table.modules.edit.editors[column.definition.formatter]){\n\t\t\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.formatter];\n\n\t\t\t\t\t\t\tif((column.definition.formatter === \"tick\" || column.definition.formatter === \"tickCross\") && !column.definition.headerFilterEmptyCheck){\n\t\t\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function(value){\n\t\t\t\t\t\t\t\t\treturn value !== true && value !== false;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\teditor = self.table.modules.edit.editors[\"input\"];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif(editor){\n\n\t\t\t\tcellWrapper = {\n\t\t\t\t\tgetValue:function(){\n\t\t\t\t\t\treturn typeof initialValue !== \"undefined\" ? initialValue : \"\";\n\t\t\t\t\t},\n\t\t\t\t\tgetField:function(){\n\t\t\t\t\t\treturn column.definition.field;\n\t\t\t\t\t},\n\t\t\t\t\tgetElement:function(){\n\t\t\t\t\t\treturn filterElement;\n\t\t\t\t\t},\n\t\t\t\t\tgetColumn:function(){\n\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t},\n\t\t\t\t\tgetTable:() => {\n\t\t\t\t\t\treturn this.table;\n\t\t\t\t\t},\n\t\t\t\t\tgetType:() => {\n\t\t\t\t\t\treturn \"header\";\n\t\t\t\t\t},\n\t\t\t\t\tgetRow:function(){\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tnormalizeHeight:function(){\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tparams = column.definition.headerFilterParams || {};\n\n\t\t\t\tparams = typeof params === \"function\" ? params.call(self.table, cellWrapper) : params;\n\n\t\t\t\teditorElement = editor.call(this.table.modules.edit, cellWrapper, onRendered, success, cancel, params);\n\n\t\t\t\tif(!editorElement){\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor returned a value of false\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif(!(editorElement instanceof Node)){\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor should return an instance of Node, the editor returned:\", editorElement);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//set Placeholder Text\n\t\t\t\tself.langBind(\"headerFilters|columns|\" + column.definition.field, function(value){\n\t\t\t\t\teditorElement.setAttribute(\"placeholder\", typeof value !== \"undefined\" && value ? value : (column.definition.headerFilterPlaceholder || self.langText(\"headerFilters|default\")));\n\t\t\t\t});\n\n\t\t\t\t//focus on element on click\n\t\t\t\teditorElement.addEventListener(\"click\", function(e){\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\teditorElement.focus();\n\t\t\t\t});\n\n\t\t\t\teditorElement.addEventListener(\"focus\", (e) => {\n\t\t\t\t\tvar left = this.table.columnManager.contentsElement.scrollLeft;\n\n\t\t\t\t\tvar headerPos = this.table.rowManager.element.scrollLeft;\n\n\t\t\t\t\tif(left !== headerPos){\n\t\t\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\t\t\tthis.table.columnManager.scrollHorizontal(left);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t//live update filters as user types\n\t\t\t\ttypingTimer = false;\n\n\t\t\t\tsearchTrigger = function(e){\n\t\t\t\t\tif(typingTimer){\n\t\t\t\t\t\tclearTimeout(typingTimer);\n\t\t\t\t\t}\n\n\t\t\t\t\ttypingTimer = setTimeout(function(){\n\t\t\t\t\t\tsuccess(editorElement.value);\n\t\t\t\t\t},self.table.options.headerFilterLiveFilterDelay);\n\t\t\t\t};\n\n\t\t\t\tcolumn.modules.filter.headerElement = editorElement;\n\t\t\t\tcolumn.modules.filter.attrType = editorElement.hasAttribute(\"type\") ? editorElement.getAttribute(\"type\").toLowerCase() : \"\" ;\n\t\t\t\tcolumn.modules.filter.tagType = editorElement.tagName.toLowerCase();\n\n\t\t\t\tif(column.definition.headerFilterLiveFilter !== false){\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t!(\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === 'autocomplete' ||\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === 'tickCross' ||\n\t\t\t\t\t\t\t((column.definition.editor === 'autocomplete' ||\n\t\t\t\t\t\t\t\tcolumn.definition.editor === 'tickCross') &&\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === true)\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\teditorElement.addEventListener(\"keyup\", searchTrigger);\n\t\t\t\t\t\teditorElement.addEventListener(\"search\", searchTrigger);\n\n\n\t\t\t\t\t\t//update number filtered columns on change\n\t\t\t\t\t\tif(column.modules.filter.attrType == \"number\"){\n\t\t\t\t\t\t\teditorElement.addEventListener(\"change\", function(e){\n\t\t\t\t\t\t\t\tsuccess(editorElement.value);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//change text inputs to search inputs to allow for clearing of field\n\t\t\t\t\t\tif(column.modules.filter.attrType == \"text\" && this.table.browser !== \"ie\"){\n\t\t\t\t\t\t\teditorElement.setAttribute(\"type\", \"search\");\n\t\t\t\t\t\t// editorElement.off(\"change blur\"); //prevent blur from triggering filter and preventing selection click\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//prevent input and select elements from propagating click to column sorters etc\n\t\t\t\t\tif(column.modules.filter.tagType == \"input\" || column.modules.filter.tagType == \"select\" || column.modules.filter.tagType == \"textarea\"){\n\t\t\t\t\t\teditorElement.addEventListener(\"mousedown\",function(e){\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfilterElement.appendChild(editorElement);\n\n\t\t\t\tcolumn.contentElement.appendChild(filterElement);\n\n\t\t\t\tif(!reinitialize){\n\t\t\t\t\tself.headerFilterColumns.push(column);\n\t\t\t\t}\n\n\t\t\t\tif(onRenderedCallback){\n\t\t\t\t\tonRenderedCallback();\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Filter Error - Cannot add header filter, column has no field set:\", column.definition.title);\n\t\t}\n\t}\n\n\t//hide all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n\thideHeaderFilterElements(){\n\t\tthis.headerFilterColumns.forEach(function(column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = 'none';\n\t\t\t}\n\t\t});\n\t}\n\n\t//show all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n\tshowHeaderFilterElements(){\n\t\tthis.headerFilterColumns.forEach(function(column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = '';\n\t\t\t}\n\t\t});\n\t}\n\n\t//programmatically set focus of header filter\n\tsetHeaderFilterFocus(column){\n\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\tcolumn.modules.filter.headerElement.focus();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Filter Focus Error - No header filter set on column:\", column.getField());\n\t\t}\n\t}\n\n\t//programmatically get value of header filter\n\tgetHeaderFilterValue(column){\n\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\treturn column.modules.filter.value;\n\t\t} else {\n\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t}\n\t}\n\n\t//programmatically set value of header filter\n\tsetHeaderFilterValue(column, value){\n\t\tif (column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tthis.generateHeaderFilterElement(column, value, true);\n\t\t\t\tcolumn.modules.filter.success(value);\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t\t}\n\t\t}\n\t}\n\n\treloadHeaderFilter(column){\n\t\tif (column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tthis.generateHeaderFilterElement(column, column.modules.filter.value, true);\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t\t}\n\t\t}\n\t}\n\n\trefreshFilter(){\n\t\tif(this.tableInitialized){\n\t\t\tif(this.table.options.filterMode === \"remote\"){\n\t\t\t\tthis.reloadData(null, false, false);\n\t\t\t}else{\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\n\t\t//TODO - Persist left position of row manager\n\t\t// left = this.scrollLeft;\n\t\t// this.scrollHorizontal(left);\n\t}\n\n\t//check if the filters has changed since last use\n\ttrackChanges(){\n\t\tthis.changed = true;\n\t\tthis.dispatch(\"filter-changed\");\n\t}\n\n\t//check if the filters has changed since last use\n\thasChanged(){\n\t\tvar changed = this.changed;\n\t\tthis.changed = false;\n\t\treturn changed;\n\t}\n\n\t//set standard filters\n\tsetFilter(field, type, value, params){\n\t\tthis.filterList = [];\n\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value, params:params}];\n\t\t}\n\n\t\tthis.addFilter(field);\n\t}\n\n\t//add filter to array\n\taddFilter(field, type, value, params){\n\t\tvar changed = false;\n\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value, params:params}];\n\t\t}\n\n\t\tfield.forEach((filter) => {\n\t\t\tfilter = this.findFilter(filter);\n\n\t\t\tif(filter){\n\t\t\t\tthis.filterList.push(filter);\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t});\n\n\t\tif(changed){\n\t\t\tthis.trackChanges();\n\t\t}\n\t}\n\n\tfindFilter(filter){\n\t\tvar column;\n\n\t\tif(Array.isArray(filter)){\n\t\t\treturn this.findSubFilters(filter);\n\t\t}\n\n\t\tvar filterFunc = false;\n\n\t\tif(typeof filter.field == \"function\"){\n\t\t\tfilterFunc = function(data){\n\t\t\t\treturn filter.field(data, filter.type || {});// pass params to custom filter function\n\t\t\t};\n\t\t}else{\n\n\t\t\tif(Filter.filters[filter.type]){\n\n\t\t\t\tcolumn = this.table.columnManager.getColumnByField(filter.field);\n\n\t\t\t\tif(column){\n\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\treturn Filter.filters[filter.type](filter.value, column.getFieldValue(data), data, filter.params || {});\n\t\t\t\t\t};\n\t\t\t\t}else{\n\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\treturn Filter.filters[filter.type](filter.value, data[filter.field], data, filter.params || {});\n\t\t\t\t\t};\n\t\t\t\t}\n\n\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Filter Error - No such filter type found, ignoring: \", filter.type);\n\t\t\t}\n\t\t}\n\n\t\tfilter.func = filterFunc;\n\n\t\treturn filter.func ? filter : false;\n\t}\n\n\tfindSubFilters(filters){\n\t\tvar output = [];\n\n\t\tfilters.forEach((filter) => {\n\t\t\tfilter = this.findFilter(filter);\n\n\t\t\tif(filter){\n\t\t\t\toutput.push(filter);\n\t\t\t}\n\t\t});\n\n\t\treturn output.length ? output : false;\n\t}\n\n\t//get all filters\n\tgetFilters(all, ajax){\n\t\tvar output = [];\n\n\t\tif(all){\n\t\t\toutput = this.getHeaderFilters();\n\t\t}\n\n\t\tif(ajax){\n\t\t\toutput.forEach(function(item){\n\t\t\t\tif(typeof item.type == \"function\"){\n\t\t\t\t\titem.type = \"function\";\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\toutput = output.concat(this.filtersToArray(this.filterList, ajax));\n\n\t\treturn output;\n\t}\n\n\t//filter to Object\n\tfiltersToArray(filterList, ajax){\n\t\tvar output = [];\n\n\t\tfilterList.forEach((filter) => {\n\t\t\tvar item;\n\n\t\t\tif(Array.isArray(filter)){\n\t\t\t\toutput.push(this.filtersToArray(filter, ajax));\n\t\t\t}else{\n\t\t\t\titem = {field:filter.field, type:filter.type, value:filter.value};\n\n\t\t\t\tif(ajax){\n\t\t\t\t\tif(typeof item.type == \"function\"){\n\t\t\t\t\t\titem.type = \"function\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\toutput.push(item);\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\t//get all filters\n\tgetHeaderFilters(){\n\t\tvar output = [];\n\n\t\tfor(var key in this.headerFilters){\n\t\t\toutput.push({field:key, type:this.headerFilters[key].type, value:this.headerFilters[key].value});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\t//remove filter from array\n\tremoveFilter(field, type, value){\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value}];\n\t\t}\n\n\t\tfield.forEach((filter) => {\n\t\t\tvar index = -1;\n\n\t\t\tif(typeof filter.field == \"object\"){\n\t\t\t\tindex = this.filterList.findIndex((element) => {\n\t\t\t\t\treturn filter === element;\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tindex = this.filterList.findIndex((element) => {\n\t\t\t\t\treturn filter.field === element.field && filter.type === element.type  && filter.value === element.value;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(index > -1){\n\t\t\t\tthis.filterList.splice(index, 1);\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Filter Error - No matching filter type found, ignoring: \", filter.type);\n\t\t\t}\n\t\t});\n\n\t\tthis.trackChanges();\n\t}\n\n\t//clear filters\n\tclearFilter(all){\n\t\tthis.filterList = [];\n\n\t\tif(all){\n\t\t\tthis.clearHeaderFilter();\n\t\t}\n\n\t\tthis.trackChanges();\n\t}\n\n\t//clear header filters\n\tclearHeaderFilter(){\n\t\tthis.headerFilters = {};\n\t\tthis.prevHeaderFilterChangeCheck = \"{}\";\n\n\t\tthis.headerFilterColumns.forEach((column) => {\n\t\t\tif(typeof column.modules.filter.value !== \"undefined\"){\n\t\t\t\tdelete column.modules.filter.value;\n\t\t\t}\n\t\t\tcolumn.modules.filter.prevSuccess = undefined;\n\t\t\tthis.reloadHeaderFilter(column);\n\t\t});\n\n\t\tthis.trackChanges();\n\t}\n\n\t//search data and return matching rows\n\tsearch (searchType, field, type, value){\n\t\tvar activeRows = [],\n\t\tfilterList = [];\n\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value}];\n\t\t}\n\n\t\tfield.forEach((filter) => {\n\t\t\tfilter = this.findFilter(filter);\n\n\t\t\tif(filter){\n\t\t\t\tfilterList.push(filter);\n\t\t\t}\n\t\t});\n\n\t\tthis.table.rowManager.rows.forEach((row) => {\n\t\t\tvar match = true;\n\n\t\t\tfilterList.forEach((filter) => {\n\t\t\t\tif(!this.filterRecurse(filter, row.getData())){\n\t\t\t\t\tmatch = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(match){\n\t\t\t\tactiveRows.push(searchType === \"data\" ? row.getData(\"data\") : row.getComponent());\n\t\t\t}\n\n\t\t});\n\n\t\treturn activeRows;\n\t}\n\n\t//filter row array\n\tfilter(rowList, filters){\n\t\tvar activeRows = [],\n\t\tactiveRowComponents = [];\n\n\t\tif(this.subscribedExternal(\"dataFiltering\")){\n\t\t\tthis.dispatchExternal(\"dataFiltering\", this.getFilters(true));\n\t\t}\n\n\t\tif(this.table.options.filterMode !== \"remote\" && (this.filterList.length || Object.keys(this.headerFilters).length)){\n\n\t\t\trowList.forEach((row) => {\n\t\t\t\tif(this.filterRow(row)){\n\t\t\t\t\tactiveRows.push(row);\n\t\t\t\t}\n\t\t\t});\n\n\t\t}else{\n\t\t\tactiveRows = rowList.slice(0);\n\t\t}\n\n\t\tif(this.subscribedExternal(\"dataFiltered\")){\n\n\t\t\tactiveRows.forEach((row) => {\n\t\t\t\tactiveRowComponents.push(row.getComponent());\n\t\t\t});\n\n\t\t\tthis.dispatchExternal(\"dataFiltered\", this.getFilters(true), activeRowComponents);\n\t\t}\n\n\t\treturn activeRows;\n\t}\n\n\t//filter individual row\n\tfilterRow(row, filters){\n\t\tvar match = true,\n\t\tdata = row.getData();\n\n\t\tthis.filterList.forEach((filter) => {\n\t\t\tif(!this.filterRecurse(filter, data)){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t});\n\n\n\t\tfor(var field in this.headerFilters){\n\t\t\tif(!this.headerFilters[field].func(data)){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t}\n\n\t\treturn match;\n\t}\n\n\tfilterRecurse(filter, data){\n\t\tvar match = false;\n\n\t\tif(Array.isArray(filter)){\n\t\t\tfilter.forEach((subFilter) => {\n\t\t\t\tif(this.filterRecurse(subFilter, data)){\n\t\t\t\t\tmatch = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tmatch = filter.func(data);\n\t\t}\n\n\t\treturn match;\n\t}\n}","export default function(cell, formatterParams, onRendered){\n\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n}","export default function(cell, formatterParams, onRendered){\n\treturn cell.getValue();\n}","export default function(cell, formatterParams, onRendered){\n\tcell.getElement().style.whiteSpace = \"pre-wrap\";\n\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n}","export default function(cell, formatterParams, onRendered){\n\tvar floatVal = parseFloat(cell.getValue()),\n\tsign = \"\",\n\tnumber, integer, decimal, rgx, value;\n\n\tvar decimalSym = formatterParams.decimal || \".\";\n\tvar thousandSym = formatterParams.thousand || \",\";\n\tvar negativeSign = formatterParams.negativeSign || \"-\";\n\tvar symbol = formatterParams.symbol || \"\";\n\tvar after = !!formatterParams.symbolAfter;\n\tvar precision = typeof formatterParams.precision !== \"undefined\" ? formatterParams.precision : 2;\n\n\tif(isNaN(floatVal)){\n\t\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n\t}\n\n\tif(floatVal < 0){\n\t\tfloatVal = Math.abs(floatVal);\n\t\tsign = negativeSign;\n\t}\n\n\tnumber = precision !== false ? floatVal.toFixed(precision) : floatVal;\n\tnumber = String(number).split(\".\");\n\n\tinteger = number[0];\n\tdecimal = number.length > 1 ? decimalSym + number[1] : \"\";\n\n\tif (formatterParams.thousand !== false) {\n\t\trgx = /(\\d+)(\\d{3})/;\n\n\t\twhile (rgx.test(integer)){\n\t\t\tinteger = integer.replace(rgx, \"$1\" + thousandSym + \"$2\");\n\t\t}\n\t}\n\n\tvalue = integer + decimal;\n\t\n\tif(sign === true){\n\t\tvalue = \"(\" + value  + \")\";\n\t\treturn after ? value + symbol : symbol + value;\n\t}else{\n\t\treturn after ? sign + value + symbol : sign + symbol + value;\n\t}\n}","import Helpers from '../../../../core/tools/Helpers.js';\n\n\nexport default function(cell, formatterParams, onRendered){\n\tvar value = cell.getValue(),\n\turlPrefix = formatterParams.urlPrefix || \"\",\n\tdownload = formatterParams.download,\n\tlabel = value,\n\tel = document.createElement(\"a\"),\n\tdata;\n\n\tfunction labelTraverse(path, data){\n\t\tvar item = path.shift(),\n\t\tvalue = data[item];\n\t\t\n\t\tif(path.length && typeof value === \"object\"){\n\t\t\treturn labelTraverse(path, value);\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tif(formatterParams.labelField){\n\t\tdata = cell.getData();\n\t\tlabel = labelTraverse(formatterParams.labelField.split(this.table.options.nestedFieldSeparator), data);\n\t}\n\n\tif(formatterParams.label){\n\t\tswitch(typeof formatterParams.label){\n\t\t\tcase \"string\":\n\t\t\t\tlabel = formatterParams.label;\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tlabel = formatterParams.label(cell);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tif(label){\n\t\tif(formatterParams.urlField){\n\t\t\tdata = cell.getData();\n\n\t\t\tvalue = Helpers.retrieveNestedData(this.table.options.nestedFieldSeparator, formatterParams.urlField, data);\n\t\t}\n\n\t\tif(formatterParams.url){\n\t\t\tswitch(typeof formatterParams.url){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tvalue = formatterParams.url;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tvalue = formatterParams.url(cell);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tel.setAttribute(\"href\", urlPrefix + value);\n\n\t\tif(formatterParams.target){\n\t\t\tel.setAttribute(\"target\", formatterParams.target);\n\t\t}\n\n\t\tif(formatterParams.download){\n\n\t\t\tif(typeof download == \"function\"){\n\t\t\t\tdownload = download(cell);\n\t\t\t}else{\n\t\t\t\tdownload = download === true ? \"\" : download;\n\t\t\t}\n\n\t\t\tel.setAttribute(\"download\", download);\n\t\t}\n\n\t\tel.innerHTML = this.emptyToSpace(this.sanitizeHTML(label));\n\n\t\treturn el;\n\t}else{\n\t\treturn \"&nbsp;\";\n\t}\n}","export default function(cell, formatterParams, onRendered){\n\tvar el = document.createElement(\"img\"),\n\tsrc = cell.getValue();\n\n\tif(formatterParams.urlPrefix){\n\t\tsrc = formatterParams.urlPrefix + cell.getValue();\n\t}\n\n\tif(formatterParams.urlSuffix){\n\t\tsrc = src + formatterParams.urlSuffix;\n\t}\n\n\tel.setAttribute(\"src\", src);\n\n\tswitch(typeof formatterParams.height){\n\t\tcase \"number\":\n\t\t\tel.style.height = formatterParams.height + \"px\";\n\t\t\tbreak;\n\n\t\tcase \"string\":\n\t\t\tel.style.height = formatterParams.height;\n\t\t\tbreak;\n\t}\n\n\tswitch(typeof formatterParams.width){\n\t\tcase \"number\":\n\t\t\tel.style.width = formatterParams.width + \"px\";\n\t\t\tbreak;\n\n\t\tcase \"string\":\n\t\t\tel.style.width = formatterParams.width;\n\t\t\tbreak;\n\t}\n\n\tel.addEventListener(\"load\", function(){\n\t\tcell.getRow().normalizeHeight();\n\t});\n\n\treturn el;\n}","export default function(cell, formatterParams, onRendered){\n\tvar value = cell.getValue(),\n\telement = cell.getElement(),\n\tempty = formatterParams.allowEmpty,\n\ttruthy = formatterParams.allowTruthy,\n\ttrueValueSet = Object.keys(formatterParams).includes(\"trueValue\"),\n\ttick = typeof formatterParams.tickElement !== \"undefined\" ? formatterParams.tickElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>',\n\tcross = typeof formatterParams.crossElement !== \"undefined\" ? formatterParams.crossElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\"  viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n\n\tif((trueValueSet && value === formatterParams.trueValue) || (!trueValueSet && ((truthy && value) || (value === true || value === \"true\" || value === \"True\" || value === 1 || value === \"1\")))){\n\t\telement.setAttribute(\"aria-checked\", true);\n\t\treturn tick || \"\";\n\t}else{\n\t\tif(empty && (value === \"null\" || value === \"\" || value === null || typeof value === \"undefined\")){\n\t\t\telement.setAttribute(\"aria-checked\", \"mixed\");\n\t\t\treturn \"\";\n\t\t}else{\n\t\t\telement.setAttribute(\"aria-checked\", false);\n\t\t\treturn cross || \"\";\n\t\t}\n\t}\n}","export default function(cell, formatterParams, onRendered){\n\tvar DT = window.DateTime || luxon.DateTime;\n\tvar inputFormat = formatterParams.inputFormat || \"yyyy-MM-dd HH:mm:ss\";\n\tvar\toutputFormat = formatterParams.outputFormat || \"dd/MM/yyyy HH:mm:ss\";\n\tvar\tinvalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n\tvar value = cell.getValue();\n\n\tif(typeof DT != \"undefined\"){\n\t\tvar newDatetime;\n\n\t\tif(DT.isDateTime(value)){\n\t\t\tnewDatetime = value;\n\t\t}else if(inputFormat === \"iso\"){\n\t\t\tnewDatetime = DT.fromISO(String(value));\n\t\t}else{\n\t\t\tnewDatetime = DT.fromFormat(String(value), inputFormat);\n\t\t}\n\n\t\tif(newDatetime.isValid){\n\t\t\tif(formatterParams.timezone){\n\t\t\t\tnewDatetime = newDatetime.setZone(formatterParams.timezone);\n\t\t\t}\n\n\t\t\treturn newDatetime.toFormat(outputFormat);\n\t\t}else{\n\t\t\tif(invalid === true || !value){\n\t\t\t\treturn value;\n\t\t\t}else if(typeof invalid === \"function\"){\n\t\t\t\treturn invalid(value);\n\t\t\t}else{\n\t\t\t\treturn invalid;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tconsole.error(\"Format Error - 'datetime' formatter is dependant on luxon.js\");\n\t}\n}","export default function (cell, formatterParams, onRendered) {\n\tvar DT = window.DateTime || luxon.DateTime;\n\tvar inputFormat = formatterParams.inputFormat || \"yyyy-MM-dd HH:mm:ss\";\n\tvar invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n\tvar suffix = typeof formatterParams.suffix !== \"undefined\" ? formatterParams.suffix : false;\n\tvar unit = typeof formatterParams.unit !== \"undefined\" ? formatterParams.unit : \"days\";\n\tvar humanize = typeof formatterParams.humanize !== \"undefined\" ? formatterParams.humanize : false;\n\tvar date = typeof formatterParams.date !== \"undefined\" ? formatterParams.date : DT.now();\n\tvar value = cell.getValue();\n\n\tif(typeof DT != \"undefined\"){\n\t\tvar newDatetime;\n\n\t\tif(DT.isDateTime(value)){\n\t\t\tnewDatetime = value;\n\t\t}else if(inputFormat === \"iso\"){\n\t\t\tnewDatetime = DT.fromISO(String(value));\n\t\t}else{\n\t\t\tnewDatetime = DT.fromFormat(String(value), inputFormat);\n\t\t}\n\n\t\tif (newDatetime.isValid){\n\t\t\tif(humanize){\n\t\t\t\treturn newDatetime.diff(date, unit).toHuman()  + (suffix ? \" \" + suffix : \"\");\n\t\t\t}else{\n\t\t\t\treturn parseInt(newDatetime.diff(date, unit)[unit]) + (suffix ? \" \" + suffix : \"\");\n\t\t\t}\n\t\t} else {\n\n\t\t\tif (invalid === true) {\n\t\t\t\treturn value;\n\t\t\t} else if (typeof invalid === \"function\") {\n\t\t\t\treturn invalid(value);\n\t\t\t} else {\n\t\t\t\treturn invalid;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tconsole.error(\"Format Error - 'datetimediff' formatter is dependant on luxon.js\");\n\t}\n}","export default function (cell, formatterParams, onRendered) {\n\tvar value = cell.getValue();\n\n\tif (typeof formatterParams[value] === \"undefined\") {\n\t\tconsole.warn('Missing display value for ' + value);\n\t\treturn value;\n\t}\n\n\treturn formatterParams[value];\n}","export default function(cell, formatterParams, onRendered){\n\tvar value = cell.getValue(),\n\telement = cell.getElement(),\n\tmaxStars = formatterParams && formatterParams.stars ? formatterParams.stars : 5,\n\tstars = document.createElement(\"span\"),\n\tstar = document.createElementNS('http://www.w3.org/2000/svg', \"svg\"),\n\tstarActive = '<polygon fill=\"#FFEA00\" stroke=\"#C1AB60\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>',\n\tstarInactive = '<polygon fill=\"#D2D2D2\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\n\t//style stars holder\n\tstars.style.verticalAlign = \"middle\";\n\n\t//style star\n\tstar.setAttribute(\"width\", \"14\");\n\tstar.setAttribute(\"height\", \"14\");\n\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\n\tstar.setAttribute(\"xml:space\", \"preserve\");\n\tstar.style.padding = \"0 1px\";\n\n\tvalue = value && !isNaN(value) ? parseInt(value) : 0;\n\n\tvalue = Math.max(0, Math.min(value, maxStars));\n\n\tfor(var i=1;i<= maxStars;i++){\n\t\tvar nextStar = star.cloneNode(true);\n\t\tnextStar.innerHTML = i <= value ? starActive : starInactive;\n\n\t\tstars.appendChild(nextStar);\n\t}\n\n\telement.style.whiteSpace = \"nowrap\";\n\telement.style.overflow = \"hidden\";\n\telement.style.textOverflow = \"ellipsis\";\n\n\telement.setAttribute(\"aria-label\", value);\n\n\treturn stars;\n}","export default function(cell, formatterParams, onRendered){\n\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\n\tel = document.createElement(\"span\"),\n\tmax = formatterParams && formatterParams.max ? formatterParams.max : 100,\n\tmin = formatterParams && formatterParams.min ? formatterParams.min : 0,\n\tcolors = formatterParams && typeof formatterParams.color !== \"undefined\" ? formatterParams.color : [\"red\", \"orange\", \"green\"],\n\tcolor = \"#666666\",\n\tpercent, percentValue;\n\n\tif(isNaN(value) || typeof cell.getValue() === \"undefined\"){\n\t\treturn;\n\t}\n\n\tel.classList.add(\"tabulator-traffic-light\");\n\n\t//make sure value is in range\n\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\n\n\t//workout percentage\n\tpercent = (max - min) / 100;\n\tpercentValue = Math.round((percentValue - min) / percent);\n\n\t//set color\n\tswitch(typeof colors){\n\t\tcase \"string\":\n\t\t\tcolor = colors;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tcolor = colors(value);\n\t\t\tbreak;\n\t\tcase \"object\":\n\t\t\tif(Array.isArray(colors)){\n\t\t\t\tvar unit = 100 / colors.length;\n\t\t\t\tvar index = Math.floor(percentValue / unit);\n\n\t\t\t\tindex = Math.min(index, colors.length - 1);\n\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\tcolor = colors[index];\n\t\t\t\tbreak;\n\t\t\t}\n\t}\n\n\tel.style.backgroundColor = color;\n\n\treturn el;\n}","import CellComponent from '../../../../core/cell/CellComponent.js';\n\nexport default function(cell, formatterParams = {}, onRendered){ //progress bar\n\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\n\telement = cell.getElement(),\n\tmax = formatterParams.max ? formatterParams.max : 100,\n\tmin = formatterParams.min ? formatterParams.min : 0,\n\tlegendAlign = formatterParams.legendAlign ? formatterParams.legendAlign : \"center\",\n\tpercent, percentValue, color, legend, legendColor;\n\n\t//make sure value is in range\n\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\n\n\t//workout percentage\n\tpercent = (max - min) / 100;\n\tpercentValue = Math.round((percentValue - min) / percent);\n\n\t//set bar color\n\tswitch(typeof formatterParams.color){\n\t\tcase \"string\":\n\t\t\tcolor = formatterParams.color;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tcolor = formatterParams.color(value);\n\t\t\tbreak;\n\t\tcase \"object\":\n\t\t\tif(Array.isArray(formatterParams.color)){\n\t\t\t\tlet unit = 100 / formatterParams.color.length;\n\t\t\t\tlet index = Math.floor(percentValue / unit);\n\n\t\t\t\tindex = Math.min(index, formatterParams.color.length - 1);\n\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\tcolor = formatterParams.color[index];\n\t\t\t\tbreak;\n\t\t\t}\n\t\tdefault:\n\t\t\tcolor = \"#2DC214\";\n\t}\n\n\t//generate legend\n\tswitch(typeof formatterParams.legend){\n\t\tcase \"string\":\n\t\t\tlegend = formatterParams.legend;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tlegend = formatterParams.legend(value);\n\t\t\tbreak;\n\t\tcase \"boolean\":\n\t\t\tlegend = value;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tlegend = false;\n\t}\n\n\t//set legend color\n\tswitch(typeof formatterParams.legendColor){\n\t\tcase \"string\":\n\t\t\tlegendColor = formatterParams.legendColor;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tlegendColor = formatterParams.legendColor(value);\n\t\t\tbreak;\n\t\tcase \"object\":\n\t\t\tif(Array.isArray(formatterParams.legendColor)){\n\t\t\t\tlet unit = 100 / formatterParams.legendColor.length;\n\t\t\t\tlet index = Math.floor(percentValue / unit);\n\n\t\t\t\tindex = Math.min(index, formatterParams.legendColor.length - 1);\n\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\tlegendColor = formatterParams.legendColor[index];\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tlegendColor = \"#000\";\n\t}\n\n\telement.style.minWidth = \"30px\";\n\telement.style.position = \"relative\";\n\n\telement.setAttribute(\"aria-label\", percentValue);\n\n\tvar barEl = document.createElement(\"div\");\n\tbarEl.style.display = \"inline-block\";\n\tbarEl.style.width = percentValue + \"%\";\n\tbarEl.style.backgroundColor = color;\n\tbarEl.style.height = \"100%\";\n\n\tbarEl.setAttribute('data-max', max);\n\tbarEl.setAttribute('data-min', min);\n\n\tvar barContainer = document.createElement(\"div\");\n\tbarContainer.style.position = \"relative\";\n\tbarContainer.style.width = \"100%\";\n\tbarContainer.style.height = \"100%\";\n\n\tif(legend){\n\t\tvar legendEl = document.createElement(\"div\");\n\t\tlegendEl.style.position = \"absolute\";\n\t\tlegendEl.style.top = 0;\n\t\tlegendEl.style.left = 0;\n\t\tlegendEl.style.textAlign = legendAlign;\n\t\tlegendEl.style.width = \"100%\";\n\t\tlegendEl.style.color = legendColor;\n\t\tlegendEl.innerHTML = legend;\n\t}\n\n\tonRendered(function(){\n\n\t\t//handle custom element needed if formatter is to be included in printed/downloaded output\n\t\tif(!(cell instanceof CellComponent)){\n\t\t\tvar holderEl = document.createElement(\"div\");\n\t\t\tholderEl.style.position = \"absolute\";\n\t\t\tholderEl.style.top = \"4px\";\n\t\t\tholderEl.style.bottom = \"4px\";\n\t\t\tholderEl.style.left = \"4px\";\n\t\t\tholderEl.style.right = \"4px\";\n\n\t\t\telement.appendChild(holderEl);\n\n\t\t\telement = holderEl;\n\t\t}\n\n\t\telement.appendChild(barContainer);\n\t\tbarContainer.appendChild(barEl);\n\n\t\tif(legend){\n\t\t\tbarContainer.appendChild(legendEl);\n\t\t}\n\t});\n\n\treturn \"\";\n}","export default function(cell, formatterParams, onRendered){\n\tcell.getElement().style.backgroundColor = this.sanitizeHTML(cell.getValue());\n\treturn \"\";\n}","export default function(cell, formatterParams, onRendered){\n\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>';\n}","export default function(cell, formatterParams, onRendered){\n\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n}","export default function(cell, formatterParams, onRendered){\r\n\tvar value = cell.getValue(),\r\n\tsize = formatterParams.size ||15,\r\n\tsizePx = size + \"px\",\r\n\tcontainEl, switchEl,\r\n\tonValue = formatterParams.hasOwnProperty(\"onValue\") ? formatterParams.onValue : true,\r\n\toffValue = formatterParams.hasOwnProperty(\"offValue\") ? formatterParams.offValue : false,\r\n\r\n\r\n\tstate = formatterParams.onTruthy ? value : value === onValue;\r\n\r\n\t\r\n\tcontainEl = document.createElement(\"div\");\r\n\tcontainEl.classList.add(\"tabulator-toggle\");\r\n\r\n\tif(state){\r\n\t\tcontainEl.classList.add(\"tabulator-toggle-on\");\r\n\t\tcontainEl.style.flexDirection = \"row-reverse\";\r\n\r\n\t\tif(formatterParams.onColor){\r\n\t\t\tcontainEl.style.background = formatterParams.onColor;\r\n\t\t}\r\n\t}else{\r\n\t\tif(formatterParams.offColor){\r\n\t\t\tcontainEl.style.background = formatterParams.offColor;\r\n\t\t}\r\n\t}\r\n\r\n\tcontainEl.style.width = (2.5 * size) + \"px\";\r\n\tcontainEl.style.borderRadius = sizePx;\r\n\r\n\tif(formatterParams.clickable){\r\n\t\tcontainEl.addEventListener(\"click\", (e) => {\r\n\t\t\tcell.setValue(state ? offValue : onValue);\r\n\t\t});\r\n\t}\r\n\r\n\tswitchEl = document.createElement(\"div\");\r\n\tswitchEl.classList.add(\"tabulator-toggle-switch\");\r\n\r\n\tswitchEl.style.height = sizePx;\r\n\tswitchEl.style.width = sizePx;\r\n\tswitchEl.style.borderRadius = sizePx;\r\n\t\r\n\tcontainEl.appendChild(switchEl);\r\n\t\r\n\treturn containEl;\r\n}","export default function(cell, formatterParams, onRendered){\n\tvar content = document.createElement(\"span\");\n\tvar row = cell.getRow();\n\tvar table = cell.getTable();\n\n\trow.watchPosition((position) => {\n\t\tif (formatterParams.relativeToPage) {\n\t\t\tposition += table.modules.page.getPageSize() * (table.modules.page.getPage() - 1);\n\t\t}\n\t\tcontent.innerText = position;\n\t});\n\t\n\treturn content;\n}\n","export default function(cell, formatterParams, onRendered){\n\tcell.getElement().classList.add(\"tabulator-row-handle\");\n\treturn \"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>\";\n}","import plaintext from './formatters/plaintext.js';\nimport html from './formatters/html.js';\nimport textarea from './formatters/textarea.js';\nimport money from './formatters/money.js';\nimport link from './formatters/link.js';\nimport image from './formatters/image.js';\nimport tickCross from './formatters/tickCross.js';\nimport datetime from './formatters/datetime.js';\nimport datetimediff from './formatters/datetimediff.js';\nimport lookup from './formatters/lookup.js';\nimport star from './formatters/star.js';\nimport traffic from './formatters/traffic.js';\nimport progress from './formatters/progress.js';\nimport color from './formatters/color.js';\nimport buttonTick from './formatters/buttonTick.js';\nimport buttonCross from './formatters/buttonCross.js';\nimport toggle from './formatters/toggle.js';\nimport rownum from './formatters/rownum.js';\nimport handle from './formatters/handle.js';\n\nexport default {\n\tplaintext:plaintext,\n\thtml:html,\n\ttextarea:textarea,\n\tmoney:money,\n\tlink:link,\n\timage:image,\n\ttickCross:tickCross,\n\tdatetime:datetime,\n\tdatetimediff:datetimediff,\n\tlookup:lookup,\n\tstar:star,\n\ttraffic:traffic,\n\tprogress:progress,\n\tcolor:color,\n\tbuttonTick:buttonTick,\n\tbuttonCross:buttonCross,\n\ttoggle:toggle,\n\trownum:rownum,\n\thandle:handle,\n};","import Module from '../../core/Module.js';\n\nimport defaultFormatters from './defaults/formatters.js';\n\nexport default class Format extends Module{\n\n\tstatic moduleName = \"format\";\n\n\t//load defaults\n\tstatic formatters = defaultFormatters;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.registerColumnOption(\"formatter\");\n\t\tthis.registerColumnOption(\"formatterParams\");\n\t\t\n\t\tthis.registerColumnOption(\"formatterPrint\");\n\t\tthis.registerColumnOption(\"formatterPrintParams\");\n\t\tthis.registerColumnOption(\"formatterClipboard\");\n\t\tthis.registerColumnOption(\"formatterClipboardParams\");\n\t\tthis.registerColumnOption(\"formatterHtmlOutput\");\n\t\tthis.registerColumnOption(\"formatterHtmlOutputParams\");\n\t\tthis.registerColumnOption(\"titleFormatter\");\n\t\tthis.registerColumnOption(\"titleFormatterParams\");\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-format\", this.formatValue.bind(this));\n\t\tthis.subscribe(\"cell-rendered\", this.cellRendered.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"column-format\", this.formatHeader.bind(this));\n\t}\n\t\n\t//initialize column formatter\n\tinitializeColumn(column){\n\t\tcolumn.modules.format = this.lookupFormatter(column, \"\");\n\t\t\n\t\tif(typeof column.definition.formatterPrint !== \"undefined\"){\n\t\t\tcolumn.modules.format.print = this.lookupFormatter(column, \"Print\");\n\t\t}\n\t\t\n\t\tif(typeof column.definition.formatterClipboard !== \"undefined\"){\n\t\t\tcolumn.modules.format.clipboard = this.lookupFormatter(column, \"Clipboard\");\n\t\t}\n\t\t\n\t\tif(typeof column.definition.formatterHtmlOutput !== \"undefined\"){\n\t\t\tcolumn.modules.format.htmlOutput = this.lookupFormatter(column, \"HtmlOutput\");\n\t\t}\n\t}\n\t\n\tlookupFormatter(column, type){\n\t\tvar config = {params:column.definition[\"formatter\" + type + \"Params\"] || {}},\n\t\tformatter = column.definition[\"formatter\" + type];\n\t\t\n\t\t//set column formatter\n\t\tswitch(typeof formatter){\n\t\t\tcase \"string\":\n\t\t\t\tif(Format.formatters[formatter]){\n\t\t\t\t\tconfig.formatter = Format.formatters[formatter];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\n\t\t\t\t\tconfig.formatter = Format.formatters.plaintext;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t\tconfig.formatter = formatter;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tconfig.formatter = Format.formatters.plaintext;\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\treturn config;\n\t}\n\t\n\tcellRendered(cell){\n\t\tif(cell.modules.format && cell.modules.format.renderedCallback && !cell.modules.format.rendered){\n\t\t\tcell.modules.format.renderedCallback();\n\t\t\tcell.modules.format.rendered = true;\n\t\t}\n\t}\n\t\n\t//return a formatted value for a column header\n\tformatHeader(column, title, el){\n\t\tvar formatter, params, onRendered, mockCell;\n\t\t\n\t\tif(column.definition.titleFormatter){\n\t\t\tformatter = this.getFormatter(column.definition.titleFormatter);\n\t\t\t\n\t\t\tonRendered = (callback) => {\n\t\t\t\tcolumn.titleFormatterRendered = callback;\n\t\t\t};\n\t\t\t\n\t\t\tmockCell = {\n\t\t\t\tgetValue:function(){\n\t\t\t\t\treturn title;\n\t\t\t\t},\n\t\t\t\tgetElement:function(){\n\t\t\t\t\treturn el;\n\t\t\t\t},\n\t\t\t\tgetType:function(){\n\t\t\t\t\treturn \"header\";\n\t\t\t\t},\n\t\t\t\tgetColumn:function(){\n\t\t\t\t\treturn column.getComponent();\n\t\t\t\t},\n\t\t\t\tgetTable:() => {\n\t\t\t\t\treturn this.table;\n\t\t\t\t}\n\t\t\t};\n\t\t\t\n\t\t\tparams = column.definition.titleFormatterParams || {};\n\t\t\t\n\t\t\tparams = typeof params === \"function\" ? params() : params;\n\t\t\t\n\t\t\treturn formatter.call(this, mockCell, params, onRendered);\n\t\t}else{\n\t\t\treturn title;\n\t\t}\n\t}\n\t\n\t\n\t//return a formatted value for a cell\n\tformatValue(cell){\n\t\tvar component = cell.getComponent(),\n\t\tparams = typeof cell.column.modules.format.params === \"function\" ? cell.column.modules.format.params(component) : cell.column.modules.format.params;\n\t\t\n\t\tfunction onRendered(callback){\n\t\t\tif(!cell.modules.format){\n\t\t\t\tcell.modules.format = {};\n\t\t\t}\n\t\t\t\n\t\t\tcell.modules.format.renderedCallback = callback;\n\t\t\tcell.modules.format.rendered = false;\n\t\t}\n\t\t\n\t\treturn cell.column.modules.format.formatter.call(this, component, params, onRendered);\n\t}\n\t\n\tformatExportValue(cell, type){\n\t\tvar formatter = cell.column.modules.format[type],\n\t\tparams;\n\t\t\n\t\tif(formatter){\n\t\t\tparams = typeof formatter.params === \"function\" ? formatter.params(cell.getComponent()) : formatter.params;\n\t\t\t\n\t\t\tfunction onRendered(callback){\n\t\t\t\tif(!cell.modules.format){\n\t\t\t\t\tcell.modules.format = {};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcell.modules.format.renderedCallback = callback;\n\t\t\t\tcell.modules.format.rendered = false;\n\t\t\t}\n\t\t\t\n\t\t\treturn formatter.formatter.call(this, cell.getComponent(), params, onRendered);\n\t\t\t\n\t\t}else{\n\t\t\treturn this.formatValue(cell);\n\t\t}\n\t}\n\t\n\tsanitizeHTML(value){\n\t\tif(value){\n\t\t\tvar entityMap = {\n\t\t\t\t'&': '&amp;',\n\t\t\t\t'<': '&lt;',\n\t\t\t\t'>': '&gt;',\n\t\t\t\t'\"': '&quot;',\n\t\t\t\t\"'\": '&#39;',\n\t\t\t\t'/': '&#x2F;',\n\t\t\t\t'`': '&#x60;',\n\t\t\t\t'=': '&#x3D;'\n\t\t\t};\n\t\t\t\n\t\t\treturn String(value).replace(/[&<>\"'`=/]/g, function (s) {\n\t\t\t\treturn entityMap[s];\n\t\t\t});\n\t\t}else{\n\t\t\treturn value;\n\t\t}\n\t}\n\t\n\temptyToSpace(value){\n\t\treturn value === null || typeof value === \"undefined\" || value === \"\" ? \"&nbsp;\" : value;\n\t}\n\t\n\t//get formatter for cell\n\tgetFormatter(formatter){\n\t\tswitch(typeof formatter){\n\t\t\tcase \"string\":\n\t\t\t\tif(Format.formatters[formatter]){\n\t\t\t\t\tformatter = Format.formatters[formatter];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\n\t\t\t\t\tformatter = Format.formatters.plaintext;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t//Custom formatter Function, do nothing\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tformatter = Format.formatters.plaintext;\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\treturn formatter;\n\t}\n}","import Module from '../../core/Module.js';\n\nexport default class FrozenColumns extends Module{\n\n\tstatic moduleName = \"frozenColumns\";\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.leftColumns = [];\n\t\tthis.rightColumns = [];\n\t\tthis.initializationMode = \"left\";\n\t\tthis.active = false;\n\t\tthis.blocked = true;\n\t\t\n\t\tthis.registerColumnOption(\"frozen\");\n\t}\n\t\n\t//reset initial state\n\treset(){\n\t\tthis.initializationMode = \"left\";\n\t\tthis.leftColumns = [];\n\t\tthis.rightColumns = [];\n\t\tthis.active = false;\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-layout\", this.layoutCell.bind(this));\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"column-width\", this.layout.bind(this));\n\t\tthis.subscribe(\"row-layout-after\", this.layoutRow.bind(this));\n\t\tthis.subscribe(\"table-layout\", this.layout.bind(this));\n\t\tthis.subscribe(\"columns-loading\", this.reset.bind(this));\n\t\t\n\t\tthis.subscribe(\"column-add\", this.reinitializeColumns.bind(this));\n\t\tthis.subscribe(\"column-deleted\", this.reinitializeColumns.bind(this));\n\t\tthis.subscribe(\"column-hide\", this.reinitializeColumns.bind(this));\n\t\tthis.subscribe(\"column-show\", this.reinitializeColumns.bind(this));\n\t\tthis.subscribe(\"columns-loaded\", this.reinitializeColumns.bind(this));\n\t\t\n\t\tthis.subscribe(\"table-redraw\", this.layout.bind(this));\n\t\tthis.subscribe(\"layout-refreshing\", this.blockLayout.bind(this));\n\t\tthis.subscribe(\"layout-refreshed\", this.unblockLayout.bind(this));\n\t\tthis.subscribe(\"scrollbar-vertical\", this.adjustForScrollbar.bind(this));\n\t}\n\t\n\tblockLayout(){\n\t\tthis.blocked = true;\n\t}\n\t\n\tunblockLayout(){\n\t\tthis.blocked = false;\n\t}\n\t\n\tlayoutCell(cell){\n\t\tthis.layoutElement(cell.element, cell.column);\n\t}\n\t\n\treinitializeColumns(){\n\t\tthis.reset();\n\t\t\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tthis.initializeColumn(column);\n\t\t});\n\n\t\tthis.layout();\n\t}\n\t\n\t//initialize specific column\n\tinitializeColumn(column){\n\t\tvar config = {margin:0, edge:false};\n\t\t\n\t\tif(!column.isGroup){\t\t\t\n\t\t\tif(this.frozenCheck(column)){\n\t\t\t\tconfig.position = this.initializationMode;\n\t\t\t\t\n\t\t\t\tif(this.initializationMode == \"left\"){\n\t\t\t\t\tthis.leftColumns.push(column);\n\t\t\t\t}else{\n\t\t\t\t\tthis.rightColumns.unshift(column);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.active = true;\n\t\t\t\t\n\t\t\t\tcolumn.modules.frozen = config;\n\t\t\t}else{\n\t\t\t\tthis.initializationMode = \"right\";\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfrozenCheck(column){\n\t\tif(column.parent.isGroup && column.definition.frozen){\n\t\t\tconsole.warn(\"Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups\");\n\t\t}\n\t\t\n\t\tif(column.parent.isGroup){\n\t\t\treturn this.frozenCheck(column.parent);\n\t\t}else{\n\t\t\treturn column.definition.frozen;\n\t\t}\n\t}\n\t\n\t//layout calculation rows\n\tlayoutCalcRows(){\n\t\tif(this.table.modExists(\"columnCalcs\")){\n\t\t\tif(this.table.modules.columnCalcs.topInitialized && this.table.modules.columnCalcs.topRow){\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.topRow);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.modules.columnCalcs.botInitialized && this.table.modules.columnCalcs.botRow){\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.botRow);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.modExists(\"groupRows\")){\n\t\t\t\tthis.layoutGroupCalcs(this.table.modules.groupRows.getGroups());\n\t\t\t}\n\t\t}\n\t}\n\t\n\tlayoutGroupCalcs(groups){\n\t\tgroups.forEach((group) => {\n\t\t\tif(group.calcs.top){\n\t\t\t\tthis.layoutRow(group.calcs.top);\n\t\t\t}\n\t\t\t\n\t\t\tif(group.calcs.bottom){\n\t\t\t\tthis.layoutRow(group.calcs.bottom);\n\t\t\t}\n\t\t\t\n\t\t\tif(group.groupList && group.groupList.length){\n\t\t\t\tthis.layoutGroupCalcs(group.groupList);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//calculate column positions and layout headers\n\tlayoutColumnPosition(allCells){\n\t\tvar leftParents = [];\n\t\t\n\t\tvar leftMargin = 0;\n\t\tvar rightMargin = 0;\n\t\t\n\t\tthis.leftColumns.forEach((column, i) => {\t\n\t\t\tcolumn.modules.frozen.marginValue = leftMargin;\n\t\t\tcolumn.modules.frozen.margin = column.modules.frozen.marginValue + \"px\";\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\tleftMargin += column.getWidth();\n\t\t\t}\n\t\t\t\n\t\t\tif(i == this.leftColumns.length - 1){\n\t\t\t\tcolumn.modules.frozen.edge = true;\n\t\t\t}else{\n\t\t\t\tcolumn.modules.frozen.edge = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(column.parent.isGroup){\n\t\t\t\tvar parentEl = this.getColGroupParentElement(column);\n\t\t\t\tif(!leftParents.includes(parentEl)){\n\t\t\t\t\tthis.layoutElement(parentEl, column);\n\t\t\t\t\tleftParents.push(parentEl);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tparentEl.classList.toggle(\"tabulator-frozen-left\",  column.modules.frozen.edge && column.modules.frozen.position === \"left\");\n\t\t\t\tparentEl.classList.toggle(\"tabulator-frozen-right\", column.modules.frozen.edge && column.modules.frozen.position === \"right\");\n\t\t\t}else{\n\t\t\t\tthis.layoutElement(column.getElement(), column);\n\t\t\t}\n\t\t\t\n\t\t\tif(allCells){\n\t\t\t\tcolumn.cells.forEach((cell) => {\n\t\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.rightColumns.forEach((column, i) => {\n\t\t\t\n\t\t\tcolumn.modules.frozen.marginValue = rightMargin;\n\t\t\tcolumn.modules.frozen.margin = column.modules.frozen.marginValue + \"px\";\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\trightMargin += column.getWidth();\n\t\t\t}\n\t\t\t\n\t\t\tif(i == this.rightColumns.length - 1){\n\t\t\t\tcolumn.modules.frozen.edge = true;\n\t\t\t}else{\n\t\t\t\tcolumn.modules.frozen.edge = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(column.parent.isGroup){\n\t\t\t\tthis.layoutElement(this.getColGroupParentElement(column), column);\n\t\t\t}else{\n\t\t\t\tthis.layoutElement(column.getElement(), column);\n\t\t\t}\n\t\t\t\n\t\t\tif(allCells){\n\t\t\t\tcolumn.cells.forEach((cell) => {\n\t\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\t\n\tgetColGroupParentElement(column){\n\t\treturn column.parent.isGroup ? this.getColGroupParentElement(column.parent) : column.getElement();\n\t}\n\t\n\t//layout columns appropriately\n\tlayout(){\t\n\t\tif(this.active && !this.blocked){\n\t\t\t//calculate left columns\n\t\t\tthis.layoutColumnPosition();\n\t\t\t\n\t\t\tthis.reinitializeRows();\n\t\t\t\n\t\t\tthis.layoutCalcRows();\n\t\t}\n\t}\n\t\n\treinitializeRows(){\n\t\tvar visibleRows = this.table.rowManager.getVisibleRows(true);\n\t\tvar otherRows = this.table.rowManager.getRows().filter(row => !visibleRows.includes(row));\n\t\t\n\t\totherRows.forEach((row) =>{\n\t\t\trow.deinitialize();\n\t\t});\n\t\t\n\t\tvisibleRows.forEach((row) =>{\n\t\t\tif(row.type === \"row\"){\n\t\t\t\tthis.layoutRow(row);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tlayoutRow(row){\n\t\tif(this.table.options.layout === \"fitDataFill\" && this.rightColumns.length){\n\t\t\tthis.table.rowManager.getTableElement().style.minWidth = \"calc(100% - \" + this.rightMargin + \")\";\n\t\t}\n\t\t\n\t\tthis.leftColumns.forEach((column) => {\n\t\t\tvar cell = row.getCell(column);\n\t\t\t\n\t\t\tif(cell){\n\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.rightColumns.forEach((column) => {\n\t\t\tvar cell = row.getCell(column);\n\t\t\t\n\t\t\tif(cell){\n\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tlayoutElement(element, column){\n\t\tvar position;\n\t\t\n\t\tif(column.modules.frozen && element){\n\t\t\telement.style.position = \"sticky\";\n\n\t\t\tif(this.table.rtl){\n\t\t\t\tposition = column.modules.frozen.position === \"left\" ? \"right\" : \"left\";\n\t\t\t}else{\n\t\t\t\tposition = column.modules.frozen.position;\n\t\t\t}\n\t\t\n\t\t\telement.style[position] = column.modules.frozen.margin;\n\n\t\t\telement.classList.add(\"tabulator-frozen\");\n\t\t\t\n\t\t\telement.classList.toggle(\"tabulator-frozen-left\",  column.modules.frozen.edge && column.modules.frozen.position === \"left\");\n\t\t\telement.classList.toggle(\"tabulator-frozen-right\", column.modules.frozen.edge && column.modules.frozen.position === \"right\");\n\t\t}\n\t}\n\n\tadjustForScrollbar(width){\n\t\tif(this.rightColumns.length){\n\t\t\tthis.table.columnManager.getContentsElement().style.width = \"calc(100% - \" + width + \"px)\";\n\t\t}\n\t}\n\n\tgetFrozenColumns(){\n\t\treturn this.leftColumns.concat(this.rightColumns);\n\t}\n\t\n\t_calcSpace(columns, index){\n\t\tvar width = 0;\n\t\t\n\t\tfor (let i = 0; i < index; i++){\n\t\t\tif(columns[i].visible){\n\t\t\t\twidth += columns[i].getWidth();\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn width;\n\t}\n}","import Module from '../../core/Module.js';\n\nexport default class FrozenRows extends Module{\n\n\tstatic moduleName = \"frozenRows\";\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.topElement = document.createElement(\"div\");\n\t\tthis.rows = [];\n\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"freeze\", this.freezeRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"unfreeze\", this.unfreezeRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"isFrozen\", this.isRowFrozen.bind(this));\n\n\t\t//register table options\n\t\tthis.registerTableOption(\"frozenRowsField\", \"id\"); //field to choose frozen rows by\n\t\tthis.registerTableOption(\"frozenRows\", false); //holder for frozen row identifiers\n\t}\n\n\tinitialize(){\n\t\tvar\tfragment = document.createDocumentFragment();\n\t\t\n\t\tthis.rows = [];\n\n\t\tthis.topElement.classList.add(\"tabulator-frozen-rows-holder\");\n\t\t\n\t\tfragment.appendChild(document.createElement(\"br\"));\n\t\tfragment.appendChild(this.topElement);\n\n\t\t// this.table.columnManager.element.append(this.topElement);\n\t\tthis.table.columnManager.getContentsElement().insertBefore(fragment, this.table.columnManager.headersElement.nextSibling);\n\n\t\tthis.subscribe(\"row-deleting\", this.detachRow.bind(this));\n\t\tthis.subscribe(\"rows-visible\", this.visibleRows.bind(this));\n\n\t\tthis.registerDisplayHandler(this.getRows.bind(this), 10);\n\n\t\tif(this.table.options.frozenRows){\n\t\t\tthis.subscribe(\"data-processed\", this.initializeRows.bind(this));\n\t\t\tthis.subscribe(\"row-added\", this.initializeRow.bind(this));\n\t\t\tthis.subscribe(\"table-redrawing\", this.resizeHolderWidth.bind(this));\n\t\t\tthis.subscribe(\"column-resized\", this.resizeHolderWidth.bind(this));\n\t\t\tthis.subscribe(\"column-show\", this.resizeHolderWidth.bind(this));\n\t\t\tthis.subscribe(\"column-hide\", this.resizeHolderWidth.bind(this));\n\t\t}\n\n\t\tthis.resizeHolderWidth();\n\t}\n\n\tresizeHolderWidth(){\n\t\tthis.topElement.style.minWidth = this.table.columnManager.headersElement.offsetWidth + \"px\";\n\t}\n\n\tinitializeRows(){\n\t\tthis.table.rowManager.getRows().forEach((row) => {\n\t\t\tthis.initializeRow(row);\n\t\t});\n\t}\n\n\tinitializeRow(row){\n\t\tvar frozenRows = this.table.options.frozenRows,\n\t\trowType = typeof frozenRows;\n\n\t\tif(rowType === \"number\"){\n\t\t\tif(row.getPosition() && (row.getPosition() + this.rows.length) <= frozenRows){\n\t\t\t\tthis.freezeRow(row);\n\t\t\t}\n\t\t}else if(rowType === \"function\"){\n\t\t\tif(frozenRows.call(this.table, row.getComponent())){\n\t\t\t\tthis.freezeRow(row);\n\t\t\t}\n\t\t}else if(Array.isArray(frozenRows)){\n\t\t\tif(frozenRows.includes(row.data[this.options(\"frozenRowsField\")])){\n\t\t\t\tthis.freezeRow(row);\n\t\t\t}\n\t\t}\n\t}\n\n\tisRowFrozen(row){\n\t\tvar index = this.rows.indexOf(row);\n\t\treturn index > -1;\n\t}\n\n\tisFrozen(){\n\t\treturn !!this.rows.length;\n\t}\n\n\tvisibleRows(viewable, rows){\n\t\tthis.rows.forEach((row) => {\n\t\t\trows.push(row);\n\t\t});\n\n\t\treturn rows;\n\t}\n\n\t//filter frozen rows out of display data\n\tgetRows(rows){\n\t\tvar output = rows.slice(0);\n\n\t\tthis.rows.forEach(function(row){\n\t\t\tvar index = output.indexOf(row);\n\n\t\t\tif(index > -1){\n\t\t\t\toutput.splice(index, 1);\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tfreezeRow(row){\n\t\tif(!row.modules.frozen){\n\t\t\trow.modules.frozen = true;\n\t\t\tthis.topElement.appendChild(row.getElement());\n\t\t\trow.initialize();\n\t\t\trow.normalizeHeight();\n\t\t\n\t\t\tthis.rows.push(row);\n\n\t\t\tthis.refreshData(false, \"display\");\n\n\t\t\tthis.table.rowManager.adjustTableSize();\n\n\t\t\tthis.styleRows();\n\n\t\t}else{\n\t\t\tconsole.warn(\"Freeze Error - Row is already frozen\");\n\t\t}\n\t}\n\n\tunfreezeRow(row){\n\t\tif(row.modules.frozen){\n\n\t\t\trow.modules.frozen = false;\n\n\t\t\tthis.detachRow(row);\n\n\t\t\tthis.table.rowManager.adjustTableSize();\n\n\t\t\tthis.refreshData(false, \"display\");\n\n\t\t\tif(this.rows.length){\n\t\t\t\tthis.styleRows();\n\t\t\t}\n\n\t\t}else{\n\t\t\tconsole.warn(\"Freeze Error - Row is already unfrozen\");\n\t\t}\n\t}\n\n\tdetachRow(row){\n\t\tvar index = this.rows.indexOf(row);\n\n\t\tif(index > -1){\n\t\t\tvar rowEl = row.getElement();\n\n\t\t\tif(rowEl.parentNode){\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t}\n\n\t\t\tthis.rows.splice(index, 1);\n\t\t}\n\t}\n\n\tstyleRows(row){\n\t\tthis.rows.forEach((row, i) => {\n\t\t\tthis.table.rowManager.styleRow(row, i);\n\t\t});\n\t}\n}","//public group object\nexport default class GroupComponent {\n\tconstructor (group){\n\t\tthis._group = group;\n\t\tthis.type = \"GroupComponent\";\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._group.groupManager.table.componentFunctionBinder.handle(\"group\", target._group, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetKey(){\n\t\treturn this._group.key;\n\t}\n\n\tgetField(){\n\t\treturn this._group.field;\n\t}\n\n\tgetElement(){\n\t\treturn this._group.element;\n\t}\n\n\tgetRows(){\n\t\treturn this._group.getRows(true);\n\t}\n\n\tgetSubGroups(){\n\t\treturn this._group.getSubGroups(true);\n\t}\n\n\tgetParentGroup(){\n\t\treturn this._group.parent ? this._group.parent.getComponent() : false;\n\t}\n\n\tisVisible(){\n\t\treturn this._group.visible;\n\t}\n\n\tshow(){\n\t\tthis._group.show();\n\t}\n\n\thide(){\n\t\tthis._group.hide();\n\t}\n\n\ttoggle(){\n\t\tthis._group.toggleVisibility();\n\t}\n\n\tscrollTo(position, ifVisible){\n\t\treturn this._group.groupManager.table.rowManager.scrollToRow(this._group, position, ifVisible);\n\t}\n\n\t_getSelf(){\n\t\treturn this._group;\n\t}\n\n\tgetTable(){\n\t\treturn this._group.groupManager.table;\n\t}\n}","import Helpers from '../../core/tools/Helpers.js';\nimport GroupComponent from './GroupComponent.js';\n\n//Group functions\nexport default class Group{\n\t\n\tconstructor(groupManager, parent, level, key, field, generator, oldGroup){\n\t\tthis.groupManager = groupManager;\n\t\tthis.parent = parent;\n\t\tthis.key = key;\n\t\tthis.level = level;\n\t\tthis.field = field;\n\t\tthis.hasSubGroups = level < (groupManager.groupIDLookups.length - 1);\n\t\tthis.addRow = this.hasSubGroups ? this._addRowToGroup : this._addRow;\n\t\tthis.type = \"group\"; //type of element\n\t\tthis.old = oldGroup;\n\t\tthis.rows = [];\n\t\tthis.groups = [];\n\t\tthis.groupList = [];\n\t\tthis.generator = generator;\n\t\tthis.element = false;\n\t\tthis.elementContents = false;\n\t\tthis.height = 0;\n\t\tthis.outerHeight = 0;\n\t\tthis.initialized = false;\n\t\tthis.calcs = {};\n\t\tthis.initialized = false;\n\t\tthis.modules = {};\n\t\tthis.arrowElement = false;\n\t\t\n\t\tthis.visible = oldGroup ? oldGroup.visible : (typeof groupManager.startOpen[level] !== \"undefined\" ? groupManager.startOpen[level] : groupManager.startOpen[0]);\n\t\t\n\t\tthis.component = null;\n\t\t\n\t\tthis.createElements();\n\t\tthis.addBindings();\n\t\t\n\t\tthis.createValueGroups();\n\t}\n\t\n\twipe(elementsOnly){\n\t\tif(!elementsOnly){\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\t\tgroup.wipe();\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tthis.rows.forEach((row) => {\n\t\t\t\t\tif(row.modules){\n\t\t\t\t\t\tdelete row.modules.group;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.element = false;\n\t\tthis.arrowElement = false;\n\t\tthis.elementContents = false;\n\t}\n\t\n\tcreateElements(){\n\t\tvar arrow = document.createElement(\"div\");\n\t\tarrow.classList.add(\"tabulator-arrow\");\n\t\t\n\t\tthis.element = document.createElement(\"div\");\n\t\tthis.element.classList.add(\"tabulator-row\");\n\t\tthis.element.classList.add(\"tabulator-group\");\n\t\tthis.element.classList.add(\"tabulator-group-level-\" + this.level);\n\t\tthis.element.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\tthis.arrowElement = document.createElement(\"div\");\n\t\tthis.arrowElement.classList.add(\"tabulator-group-toggle\");\n\t\tthis.arrowElement.appendChild(arrow);\n\t\t\n\t\t//setup movable rows\n\t\tif(this.groupManager.table.options.movableRows !== false && this.groupManager.table.modExists(\"moveRow\")){\n\t\t\tthis.groupManager.table.modules.moveRow.initializeGroupHeader(this);\n\t\t}\n\t}\n\t\n\tcreateValueGroups(){\n\t\tvar level = this.level + 1;\n\t\tif(this.groupManager.allowedValues && this.groupManager.allowedValues[level]){\n\t\t\tthis.groupManager.allowedValues[level].forEach((value) => {\n\t\t\t\tthis._createGroup(value, level);\n\t\t\t});\n\t\t}\n\t}\n\t\n\taddBindings(){\n\t\tvar toggleElement;\n\t\t\n\t\tif(this.groupManager.table.options.groupToggleElement){\n\t\t\ttoggleElement = this.groupManager.table.options.groupToggleElement == \"arrow\" ? this.arrowElement : this.element;\n\t\t\t\n\t\t\ttoggleElement.addEventListener(\"click\", (e) => {\n\t\t\t\tif(this.groupManager.table.options.groupToggleElement === \"arrow\"){\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t}\n\n\t\t\t\t//allow click event to propagate before toggling visibility\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.toggleVisibility();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\t\n\t_createGroup(groupID, level){\n\t\tvar groupKey = level + \"_\" + groupID;\n\t\tvar group = new Group(this.groupManager, this, level, groupID,  this.groupManager.groupIDLookups[level].field, this.groupManager.headerGenerator[level] || this.groupManager.headerGenerator[0], this.old ? this.old.groups[groupKey] : false);\n\t\t\n\t\tthis.groups[groupKey] = group;\n\t\tthis.groupList.push(group);\n\t}\n\t\n\t_addRowToGroup(row){\n\t\t\n\t\tvar level = this.level + 1;\n\t\t\n\t\tif(this.hasSubGroups){\n\t\t\tvar groupID = this.groupManager.groupIDLookups[level].func(row.getData()),\n\t\t\tgroupKey = level + \"_\" + groupID;\n\t\t\t\n\t\t\tif(this.groupManager.allowedValues && this.groupManager.allowedValues[level]){\n\t\t\t\tif(this.groups[groupKey]){\n\t\t\t\t\tthis.groups[groupKey].addRow(row);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(!this.groups[groupKey]){\n\t\t\t\t\tthis._createGroup(groupID, level);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.groups[groupKey].addRow(row);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_addRow(row){\n\t\tthis.rows.push(row);\n\t\trow.modules.group = this;\n\t}\n\t\n\tinsertRow(row, to, after){\n\t\tvar data = this.conformRowData({});\n\t\t\n\t\trow.updateData(data);\n\t\t\n\t\tvar toIndex = this.rows.indexOf(to);\n\t\t\n\t\tif(toIndex > -1){\n\t\t\tif(after){\n\t\t\t\tthis.rows.splice(toIndex+1, 0, row);\n\t\t\t}else{\n\t\t\t\tthis.rows.splice(toIndex, 0, row);\n\t\t\t}\n\t\t}else{\n\t\t\tif(after){\n\t\t\t\tthis.rows.push(row);\n\t\t\t}else{\n\t\t\t\tthis.rows.unshift(row);\n\t\t\t}\n\t\t}\n\t\t\n\t\trow.modules.group = this;\n\t\t\n\t\t// this.generateGroupHeaderContents();\n\t\t\n\t\tif(this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\"){\n\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\n\t\t}\n\t\t\n\t\tthis.groupManager.updateGroupRows(true);\n\t}\n\t\n\tscrollHeader(left){\n\t\tif(this.arrowElement){\n\t\t\tthis.arrowElement.style.marginLeft = left;\n\t\t\t\n\t\t\tthis.groupList.forEach(function(child){\n\t\t\t\tchild.scrollHeader(left);\n\t\t\t});\n\t\t}\n\t}\n\t\n\tgetRowIndex(row){}\n\t\n\t//update row data to match grouping constraints\n\tconformRowData(data){\n\t\tif(this.field){\n\t\t\tdata[this.field] = this.key;\n\t\t}else{\n\t\t\tconsole.warn(\"Data Conforming Error - Cannot conform row data to match new group as groupBy is a function\");\n\t\t}\n\t\t\n\t\tif(this.parent){\n\t\t\tdata = this.parent.conformRowData(data);\n\t\t}\n\t\t\n\t\treturn data;\n\t}\n\t\n\tremoveRow(row){\n\t\tvar index = this.rows.indexOf(row);\n\t\tvar el = row.getElement();\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.rows.splice(index, 1);\n\t\t}\n\t\t\n\t\tif(!this.groupManager.table.options.groupValues && !this.rows.length){\n\t\t\tif(this.parent){\n\t\t\t\tthis.parent.removeGroup(this);\n\t\t\t}else{\n\t\t\t\tthis.groupManager.removeGroup(this);\n\t\t\t}\t\t\n\t\t\t\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tif(el.parentNode){\n\t\t\t\tel.parentNode.removeChild(el);\n\t\t\t}\n\t\t\t\n\t\t\tif(!this.groupManager.blockRedraw){\n\t\t\t\tthis.generateGroupHeaderContents();\n\t\t\t\t\n\t\t\t\tif(this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\"){\n\t\t\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t}\n\t\n\tremoveGroup(group){\n\t\tvar groupKey = group.level + \"_\" + group.key,\n\t\tindex;\n\t\t\n\t\tif(this.groups[groupKey]){\n\t\t\tdelete this.groups[groupKey];\n\t\t\t\n\t\t\tindex = this.groupList.indexOf(group);\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\tthis.groupList.splice(index, 1);\n\t\t\t}\n\t\t\t\n\t\t\tif(!this.groupList.length){\n\t\t\t\tif(this.parent){\n\t\t\t\t\tthis.parent.removeGroup(this);\n\t\t\t\t}else{\n\t\t\t\t\tthis.groupManager.removeGroup(this);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tgetHeadersAndRows(){\n\t\tvar output = [];\n\t\t\n\t\toutput.push(this);\n\t\t\n\t\tthis._visSet();\n\t\t\n\t\t\n\t\tif(this.calcs.top){\n\t\t\tthis.calcs.top.detachElement();\n\t\t\tthis.calcs.top.deleteCells();\n\t\t}\n\t\t\n\t\tif(this.calcs.bottom){\n\t\t\tthis.calcs.bottom.detachElement();\n\t\t\tthis.calcs.bottom.deleteCells();\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\tif(this.visible){\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\t\toutput = output.concat(group.getHeadersAndRows());\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tif(this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasTopCalcs()){\n\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n\t\t\t\t\toutput.push(this.calcs.top);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\toutput = output.concat(this.rows);\n\t\t\t\t\n\t\t\t\tif(this.groupManager.table.options.columnCalcs != \"table\" &&  this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){\n\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n\t\t\t\t\toutput.push(this.calcs.bottom);\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif(!this.groupList.length && this.groupManager.table.options.columnCalcs != \"table\"){\n\t\t\t\t\n\t\t\t\tif(this.groupManager.table.modExists(\"columnCalcs\")){\n\t\t\t\t\tif(this.groupManager.table.modules.columnCalcs.hasTopCalcs()){\n\t\t\t\t\t\tif(this.groupManager.table.options.groupClosedShowCalcs){\n\t\t\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n\t\t\t\t\t\t\toutput.push(this.calcs.top);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.groupManager.table.options.groupClosedShowCalcs){\n\t\t\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n\t\t\t\t\t\t\toutput.push(this.calcs.bottom);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetData(visible, transform){\n\t\tvar output = [];\n\t\t\n\t\tthis._visSet();\n\t\t\n\t\tif(!visible || (visible && this.visible)){\n\t\t\tthis.rows.forEach((row) => {\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetRowCount(){\n\t\tvar count = 0;\n\t\t\n\t\tif(this.groupList.length){\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\tcount += group.getRowCount();\n\t\t\t});\n\t\t}else{\n\t\t\tcount = this.rows.length;\n\t\t}\n\t\treturn count;\n\t}\n\n\t\n\ttoggleVisibility(){\n\t\tif(this.visible){\n\t\t\tthis.hide();\n\t\t}else{\n\t\t\tthis.show();\n\t\t}\n\t}\n\t\n\thide(){\n\t\tthis.visible = false;\n\t\t\n\t\tif(this.groupManager.table.rowManager.getRenderMode() == \"basic\" && !this.groupManager.table.options.pagination){\n\t\t\t\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\n\t\t\t\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\t\t\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\n\t\t\t\t\t\n\t\t\t\t\trows.forEach((row) => {\n\t\t\t\t\t\trow.detachElement();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.rows.forEach((row) => {\n\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t\t\n\t\t}else{\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}\n\t\t\n\t\tthis.groupManager.table.externalEvents.dispatch(\"groupVisibilityChanged\", this.getComponent(), false);\n\t}\n\t\n\tshow(){\n\t\tthis.visible = true;\n\t\t\n\t\tif(this.groupManager.table.rowManager.getRenderMode() == \"basic\" && !this.groupManager.table.options.pagination){\n\t\t\t\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\n\t\t\t\n\t\t\tvar prev = this.generateElement();\n\t\t\t\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\n\t\t\t\t\t\n\t\t\t\t\trows.forEach((row) => {\n\t\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\n\t\t\t\t\t\trow.initialize();\n\t\t\t\t\t\tprev = rowEl;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.rows.forEach((row) => {\n\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\n\t\t\t\t\trow.initialize();\n\t\t\t\t\tprev = rowEl;\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}else{\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}\n\t\t\n\t\tthis.groupManager.table.externalEvents.dispatch(\"groupVisibilityChanged\", this.getComponent(), true);\n\t}\n\t\n\t_visSet(){\n\t\tvar data = [];\n\t\t\n\t\tif(typeof this.visible == \"function\"){\n\t\t\t\n\t\t\tthis.rows.forEach(function(row){\n\t\t\t\tdata.push(row.getData());\n\t\t\t});\n\t\t\t\n\t\t\tthis.visible = this.visible(this.key, this.getRowCount(), data, this.getComponent());\n\t\t}\n\t}\n\t\n\tgetRowGroup(row){\n\t\tvar match = false;\n\t\tif(this.groupList.length){\n\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\tvar result = group.getRowGroup(row);\n\t\t\t\t\n\t\t\t\tif(result){\n\t\t\t\t\tmatch = result;\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tif(this.rows.find(function(item){\n\t\t\t\treturn item === row;\n\t\t\t})){\n\t\t\t\tmatch = this;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn match;\n\t}\n\t\n\tgetSubGroups(component){\n\t\tvar output = [];\n\t\t\n\t\tthis.groupList.forEach(function(child){\n\t\t\toutput.push(component ? child.getComponent() : child);\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetRows(component, includeChildren){\n\t\tvar output = [];\n\t\t\n\t\tif(includeChildren && this.groupList.length){\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\toutput = output.concat(group.getRows(component, includeChildren));\n\t\t\t});\n\t\t}else{\n\t\t\tthis.rows.forEach(function(row){\n\t\t\t\toutput.push(component ? row.getComponent() : row);\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgenerateGroupHeaderContents(){\n\t\tvar data = [];\n\t\t\n\t\tvar rows = this.getRows(false, true);\n\t\t\n\t\trows.forEach(function(row){\n\t\t\tdata.push(row.getData());\n\t\t});\n\t\t\n\t\tthis.elementContents = this.generator(this.key, this.getRowCount(), data, this.getComponent());\n\t\t\n\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\t\t\n\t\tif(typeof this.elementContents === \"string\"){\n\t\t\tthis.element.innerHTML = this.elementContents;\n\t\t}else{\n\t\t\tthis.element.appendChild(this.elementContents);\n\t\t}\n\t\t\n\t\tthis.element.insertBefore(this.arrowElement, this.element.firstChild);\n\t}\n\t\n\tgetPath(path = []) {\n\t\tpath.unshift(this.key);\n\t\tif(this.parent) {\n\t\t\tthis.parent.getPath(path);\n\t\t}\n\t\treturn path;\n\t}\n\t\n\t////////////// Standard Row Functions //////////////\n\t\n\tgetElement(){\n\t\treturn this.elementContents ? this.element : this.generateElement();\n\t}\n\t\n\tgenerateElement(){\n\t\tthis.addBindings = false;\n\t\t\n\t\tthis._visSet();\n\t\t\n\t\tif(this.visible){\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\n\t\t}else{\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\n\t\t}\n\t\t\n\t\tfor(var i = 0; i < this.element.childNodes.length; ++i){\n\t\t\tthis.element.childNodes[i].parentNode.removeChild(this.element.childNodes[i]);\n\t\t}\n\t\t\n\t\tthis.generateGroupHeaderContents();\n\t\t\n\t\t// this.addBindings();\n\t\t\n\t\treturn this.element;\n\t}\n\t\n\tdetachElement(){\n\t\tif (this.element && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\t}\n\t\n\t//normalize the height of elements in the row\n\tnormalizeHeight(){\n\t\tthis.setHeight(this.element.clientHeight);\n\t}\n\t\n\tinitialize(force){\n\t\tif(!this.initialized || force){\n\t\t\tthis.normalizeHeight();\n\t\t\tthis.initialized = true;\n\t\t}\n\t}\n\t\n\treinitialize(){\n\t\tthis.initialized = false;\n\t\tthis.height = 0;\n\t\t\n\t\tif(Helpers.elVisible(this.element)){\n\t\t\tthis.initialize(true);\n\t\t}\n\t}\n\t\n\tsetHeight(height){\n\t\tif(this.height != height){\n\t\t\tthis.height = height;\n\t\t\tthis.outerHeight = this.element.offsetHeight;\n\t\t}\n\t}\n\t\n\t//return rows outer height\n\tgetHeight(){\n\t\treturn this.outerHeight;\n\t}\n\t\n\tgetGroup(){\n\t\treturn this;\n\t}\n\t\n\treinitializeHeight(){}\n\t\n\tcalcHeight(){}\n\t\n\tsetCellHeight(){}\n\t\n\tclearCellHeight(){}\n\t\n\tdeinitializeHeight(){}\n\n\trendered(){}\n\t\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new GroupComponent(this);\n\t\t}\n\t\t\n\t\treturn this.component;\n\t}\n}","import Module from '../../core/Module.js';\n\nimport Group from './Group.js';\n\nexport default class GroupRows extends Module{\n\n\tstatic moduleName = \"groupRows\";\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.groupIDLookups = false; //enable table grouping and set field to group by\n\t\tthis.startOpen = [function(){return false;}]; //starting state of group\n\t\tthis.headerGenerator = [function(){return \"\";}];\n\t\tthis.groupList = []; //ordered list of groups\n\t\tthis.allowedValues = false;\n\t\tthis.groups = {}; //hold row groups\n\t\t\n\t\tthis.displayHandler = this.getRows.bind(this);\n\n\t\tthis.blockRedraw = false;\n\t\t\n\t\t//register table options\n\t\tthis.registerTableOption(\"groupBy\", false); //enable table grouping and set field to group by\n\t\tthis.registerTableOption(\"groupStartOpen\", true); //starting state of group\n\t\tthis.registerTableOption(\"groupValues\", false);\n\t\tthis.registerTableOption(\"groupUpdateOnCellEdit\", false);\n\t\tthis.registerTableOption(\"groupHeader\", false); //header generation function\n\t\tthis.registerTableOption(\"groupHeaderPrint\", null);\n\t\tthis.registerTableOption(\"groupHeaderClipboard\", null);\n\t\tthis.registerTableOption(\"groupHeaderHtmlOutput\", null);\n\t\tthis.registerTableOption(\"groupHeaderDownload\", null);\n\t\tthis.registerTableOption(\"groupToggleElement\", \"arrow\");\n\t\tthis.registerTableOption(\"groupClosedShowCalcs\", false);\n\t\t\n\t\t//register table functions\n\t\tthis.registerTableFunction(\"setGroupBy\", this.setGroupBy.bind(this));\n\t\tthis.registerTableFunction(\"setGroupValues\", this.setGroupValues.bind(this));\n\t\tthis.registerTableFunction(\"setGroupStartOpen\", this.setGroupStartOpen.bind(this));\n\t\tthis.registerTableFunction(\"setGroupHeader\", this.setGroupHeader.bind(this));\n\t\tthis.registerTableFunction(\"getGroups\", this.userGetGroups.bind(this));\n\t\tthis.registerTableFunction(\"getGroupedData\", this.userGetGroupedData.bind(this));\n\t\t\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"getGroup\", this.rowGetGroup.bind(this));\n\t}\n\t\n\t//initialize group configuration\n\tinitialize(){\n\t\tthis.subscribe(\"table-destroy\", this._blockRedrawing.bind(this));\n\t\tthis.subscribe(\"rows-wipe\", this._blockRedrawing.bind(this));\n\t\tthis.subscribe(\"rows-wiped\", this._restore_redrawing.bind(this));\n\n\t\tif(this.table.options.groupBy){\n\t\t\tif(this.table.options.groupUpdateOnCellEdit){\n\t\t\t\tthis.subscribe(\"cell-value-updated\", this.cellUpdated.bind(this));\n\t\t\t\tthis.subscribe(\"row-data-changed\", this.reassignRowToGroup.bind(this), 0);\n\t\t\t}\n\t\t\t\n\t\t\tthis.subscribe(\"table-built\", this.configureGroupSetup.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"row-deleting\", this.rowDeleting.bind(this));\n\t\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHeaders.bind(this));\n\t\t\tthis.subscribe(\"rows-wipe\", this.wipe.bind(this));\n\t\t\tthis.subscribe(\"rows-added\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"row-moving\", this.rowMoving.bind(this));\n\t\t\tthis.subscribe(\"row-adding-index\", this.rowAddingIndex.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"rows-sample\", this.rowSample.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"render-virtual-fill\", this.virtualRenderFill.bind(this));\n\t\t\t\n\t\t\tthis.registerDisplayHandler(this.displayHandler, 20);\n\t\t\t\n\t\t\tthis.initialized = true;\n\t\t}\n\t}\n\t\n\t_blockRedrawing(){\n\t\tthis.blockRedraw = true;\n\t}\n\n\t_restore_redrawing(){\n\t\tthis.blockRedraw = false;\n\t}\n\n\tconfigureGroupSetup(){\n\t\tif(this.table.options.groupBy){\n\t\t\tvar groupBy = this.table.options.groupBy,\n\t\t\tstartOpen = this.table.options.groupStartOpen,\n\t\t\tgroupHeader = this.table.options.groupHeader;\n\t\t\t\n\t\t\tthis.allowedValues = this.table.options.groupValues;\n\t\t\t\n\t\t\tif(Array.isArray(groupBy) && Array.isArray(groupHeader) && groupBy.length > groupHeader.length){\n\t\t\t\tconsole.warn(\"Error creating group headers, groupHeader array is shorter than groupBy array\");\n\t\t\t}\n\t\t\t\n\t\t\tthis.headerGenerator = [function(){return \"\";}];\n\t\t\tthis.startOpen = [function(){return false;}]; //starting state of group\n\t\t\t\n\t\t\tthis.langBind(\"groups|item\", (langValue, lang) => {\n\t\t\t\tthis.headerGenerator[0] = (value, count, data) => { //header layout function\n\t\t\t\t\treturn (typeof value === \"undefined\" ? \"\" : value) + \"<span>(\" + count + \" \" + ((count === 1) ? langValue : lang.groups.items) + \")</span>\";\n\t\t\t\t};\n\t\t\t});\n\t\t\t\n\t\t\tthis.groupIDLookups = [];\n\t\t\t\n\t\t\tif(groupBy){\n\t\t\t\tif(this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"table\" && this.table.options.columnCalcs != \"both\"){\n\t\t\t\t\tthis.table.modules.columnCalcs.removeCalcs();\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"group\"){\n\t\t\t\t\t\n\t\t\t\t\tvar cols = this.table.columnManager.getRealColumns();\n\t\t\t\t\t\n\t\t\t\t\tcols.forEach((col) => {\n\t\t\t\t\t\tif(col.definition.topCalc){\n\t\t\t\t\t\t\tthis.table.modules.columnCalcs.initializeTopRow();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(col.definition.bottomCalc){\n\t\t\t\t\t\t\tthis.table.modules.columnCalcs.initializeBottomRow();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(!Array.isArray(groupBy)){\n\t\t\t\tgroupBy = [groupBy];\n\t\t\t}\n\t\t\t\n\t\t\tgroupBy.forEach((group, i) => {\n\t\t\t\tvar lookupFunc, column;\n\t\t\t\t\n\t\t\t\tif(typeof group == \"function\"){\n\t\t\t\t\tlookupFunc = group;\n\t\t\t\t}else{\n\t\t\t\t\tcolumn = this.table.columnManager.getColumnByField(group);\n\t\t\t\t\t\n\t\t\t\t\tif(column){\n\t\t\t\t\t\tlookupFunc = function(data){\n\t\t\t\t\t\t\treturn column.getFieldValue(data);\n\t\t\t\t\t\t};\n\t\t\t\t\t}else{\n\t\t\t\t\t\tlookupFunc = function(data){\n\t\t\t\t\t\t\treturn data[group];\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.groupIDLookups.push({\n\t\t\t\t\tfield: typeof group === \"function\" ? false : group,\n\t\t\t\t\tfunc:lookupFunc,\n\t\t\t\t\tvalues:this.allowedValues ? this.allowedValues[i] : false,\n\t\t\t\t});\n\t\t\t});\n\t\t\t\n\t\t\tif(startOpen){\n\t\t\t\tif(!Array.isArray(startOpen)){\n\t\t\t\t\tstartOpen = [startOpen];\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tstartOpen.forEach((level) => {\n\t\t\t\t\tlevel = typeof level == \"function\" ? level : function(){return true;};\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.startOpen = startOpen;\n\t\t\t}\n\t\t\t\n\t\t\tif(groupHeader){\n\t\t\t\tthis.headerGenerator = Array.isArray(groupHeader) ? groupHeader : [groupHeader];\n\t\t\t}\n\t\t}else{\n\t\t\tthis.groupList = [];\n\t\t\tthis.groups = {};\n\t\t}\n\t}\n\t\n\trowSample(rows, prevValue){\n\t\tif(this.table.options.groupBy){\n\t\t\tvar group = this.getGroups(false)[0];\n\t\t\t\n\t\t\tprevValue.push(group.getRows(false)[0]);\n\t\t}\n\t\t\n\t\treturn prevValue;\n\t}\n\t\n\tvirtualRenderFill(){\n\t\tvar el = this.table.rowManager.tableElement;\n\t\tvar rows = this.table.rowManager.getVisibleRows();\n\t\t\n\t\tif(this.table.options.groupBy){\n\t\t\trows = rows.filter((row) => {\n\t\t\t\treturn row.type !== \"group\";\n\t\t\t});\n\t\t\t\n\t\t\tel.style.minWidth = !rows.length ? this.table.columnManager.getWidth() + \"px\" : \"\";\n\t\t}else{\n\t\t\treturn rows;\n\t\t}\n\t}\n\t\n\trowAddingIndex(row, index, top){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.assignRowToGroup(row);\n\t\t\t\n\t\t\tvar groupRows = row.modules.group.rows;\n\t\t\t\n\t\t\tif(groupRows.length > 1){\n\t\t\t\tif(!index || (index && groupRows.indexOf(index) == -1)){\n\t\t\t\t\tif(top){\n\t\t\t\t\t\tif(groupRows[0] !== row){\n\t\t\t\t\t\t\tindex = groupRows[0];\n\t\t\t\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(groupRows[groupRows.length -1] !== row){\n\t\t\t\t\t\t\tindex = groupRows[groupRows.length -1];\n\t\t\t\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn index;\n\t\t}\n\t}\n\t\n\ttrackChanges(){\n\t\tthis.dispatch(\"group-changed\");\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\tsetGroupBy(groups){\n\t\tthis.table.options.groupBy = groups;\n\t\t\n\t\tif(!this.initialized){\n\t\t\tthis.initialize();\n\t\t}\n\t\t\n\t\tthis.configureGroupSetup();\n\n\t\tif(!groups && this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs === true){\n\t\t\tthis.table.modules.columnCalcs.reinitializeCalcs();\n\t\t}\n\t\t\n\t\tthis.refreshData();\n\t\t\n\t\tthis.trackChanges();\n\t}\n\t\n\tsetGroupValues(groupValues){\n\t\tthis.table.options.groupValues = groupValues;\n\t\tthis.configureGroupSetup();\n\t\tthis.refreshData();\n\t\t\n\t\tthis.trackChanges();\n\t}\n\t\n\tsetGroupStartOpen(values){\n\t\tthis.table.options.groupStartOpen = values;\n\t\tthis.configureGroupSetup();\n\t\t\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.refreshData();\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t}else{\n\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n\t\t}\n\t}\n\t\n\tsetGroupHeader(values){\n\t\tthis.table.options.groupHeader = values;\n\t\tthis.configureGroupSetup();\n\t\t\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.refreshData();\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t}else{\n\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n\t\t}\n\t}\n\t\n\tuserGetGroups(values){\n\t\treturn this.getGroups(true);\n\t}\n\t\n\t// get grouped table data in the same format as getData()\n\tuserGetGroupedData(){\n\t\treturn this.table.options.groupBy ? this.getGroupedData() : this.getData();\n\t}\n\t\n\t\n\t///////////////////////////////////////\n\t///////// Component Functions /////////\n\t///////////////////////////////////////\n\t\n\trowGetGroup(row){\n\t\treturn row.modules.group ? row.modules.group.getComponent() : false;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\trowMoving(from, to, after){\n\t\tif(this.table.options.groupBy){\n\t\t\tif(!after && to instanceof Group){\n\t\t\t\tto = this.table.rowManager.prevDisplayRow(from) || to;\n\t\t\t}\n\t\t\t\n\t\t\tvar toGroup = to instanceof Group ? to : to.modules.group;\n\t\t\tvar fromGroup = from instanceof Group ? from : from.modules.group;\n\t\t\t\n\t\t\tif(toGroup === fromGroup){\n\t\t\t\tthis.table.rowManager.moveRowInArray(toGroup.rows, from, to, after);\n\t\t\t}else{\n\t\t\t\tif(fromGroup){\n\t\t\t\t\tfromGroup.removeRow(from);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttoGroup.insertRow(from, to, after);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t\n\trowDeleting(row){\n\t\t//remove from group\n\t\tif(this.table.options.groupBy && row.modules.group){\n\t\t\trow.modules.group.removeRow(row);\n\t\t}\n\t}\n\t\n\trowsUpdated(row){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.updateGroupRows(true);\n\t\t}\t\n\t}\n\t\n\tcellUpdated(cell){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.reassignRowToGroup(cell.row);\n\t\t}\n\t}\n\t\n\t//return appropriate rows with group headers\n\tgetRows(rows){\n\t\tif(this.table.options.groupBy && this.groupIDLookups.length){\n\t\t\t\n\t\t\tthis.dispatchExternal(\"dataGrouping\");\n\t\t\t\n\t\t\tthis.generateGroups(rows);\n\t\t\t\n\t\t\tif(this.subscribedExternal(\"dataGrouped\")){\n\t\t\t\tthis.dispatchExternal(\"dataGrouped\", this.getGroups(true));\n\t\t\t}\n\t\t\t\n\t\t\treturn this.updateGroupRows();\n\t\t\t\n\t\t}else{\n\t\t\treturn rows.slice(0);\n\t\t}\n\t}\n\t\n\tgetGroups(component){\n\t\tvar groupComponents = [];\n\t\t\n\t\tthis.groupList.forEach(function(group){\n\t\t\tgroupComponents.push(component ? group.getComponent() : group);\n\t\t});\n\t\t\n\t\treturn groupComponents;\n\t}\n\t\n\tgetChildGroups(group){\n\t\tvar groupComponents = [];\n\t\t\n\t\tif(!group){\n\t\t\tgroup = this;\n\t\t}\n\t\t\n\t\tgroup.groupList.forEach((child) => {\n\t\t\tif(child.groupList.length){\n\t\t\t\tgroupComponents = groupComponents.concat(this.getChildGroups(child));\n\t\t\t}else{\n\t\t\t\tgroupComponents.push(child);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn groupComponents;\n\t}\n\t\n\twipe(){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\tgroup.wipe();\n\t\t\t});\n\t\t\t\n\t\t\tthis.groupList = [];\n\t\t\tthis.groups = {};\n\t\t}\n\t}\n\t\n\tpullGroupListData(groupList) {\n\t\tvar groupListData = [];\n\t\t\n\t\tgroupList.forEach((group) => {\n\t\t\tvar groupHeader = {};\n\t\t\tgroupHeader.level = 0;\n\t\t\tgroupHeader.rowCount = 0;\n\t\t\tgroupHeader.headerContent = \"\";\n\t\t\tvar childData = [];\n\t\t\t\n\t\t\tif (group.hasSubGroups) {\n\t\t\t\tchildData = this.pullGroupListData(group.groupList);\n\t\t\t\t\n\t\t\t\tgroupHeader.level = group.level;\n\t\t\t\tgroupHeader.rowCount = childData.length - group.groupList.length; // data length minus number of sub-headers\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, groupHeader.rowCount, group.rows, group);\n\t\t\t\t\n\t\t\t\tgroupListData.push(groupHeader);\n\t\t\t\tgroupListData = groupListData.concat(childData);\n\t\t\t}\n\t\t\t\n\t\t\telse {\n\t\t\t\tgroupHeader.level = group.level;\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, group.rows.length, group.rows, group);\n\t\t\t\tgroupHeader.rowCount = group.getRows().length;\n\t\t\t\t\n\t\t\t\tgroupListData.push(groupHeader);\n\t\t\t\t\n\t\t\t\tgroup.getRows().forEach((row) => {\n\t\t\t\t\tgroupListData.push(row.getData(\"data\"));\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn groupListData;\n\t}\n\t\n\tgetGroupedData(){\n\t\t\n\t\treturn this.pullGroupListData(this.groupList);\n\t}\n\t\n\tgetRowGroup(row){\n\t\tvar match = false;\n\t\t\n\t\tif(this.options(\"dataTree\")){\n\t\t\trow = this.table.modules.dataTree.getTreeParentRoot(row);\n\t\t}\n\t\t\n\t\tthis.groupList.forEach((group) => {\n\t\t\tvar result = group.getRowGroup(row);\n\t\t\t\n\t\t\tif(result){\n\t\t\t\tmatch = result;\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn match;\n\t}\n\t\n\tcountGroups(){\n\t\treturn this.groupList.length;\n\t}\n\t\n\tgenerateGroups(rows){\n\t\tvar oldGroups = this.groups;\n\t\t\n\t\tthis.groups = {};\n\t\tthis.groupList = [];\n\t\t\n\t\tif(this.allowedValues && this.allowedValues[0]){\n\t\t\tthis.allowedValues[0].forEach((value) => {\n\t\t\t\tthis.createGroup(value, 0, oldGroups);\n\t\t\t});\n\t\t\t\n\t\t\trows.forEach((row) => {\n\t\t\t\tthis.assignRowToExistingGroup(row, oldGroups);\n\t\t\t});\n\t\t}else{\n\t\t\trows.forEach((row) => {\n\t\t\t\tthis.assignRowToGroup(row, oldGroups);\n\t\t\t});\n\t\t}\n\t\t\n\t\tObject.values(oldGroups).forEach((group) => {\n\t\t\tgroup.wipe(true);\n\t\t});\t\n\t}\n\t\n\t\n\tcreateGroup(groupID, level, oldGroups){\n\t\tvar groupKey = level + \"_\" + groupID,\n\t\tgroup;\n\t\t\n\t\toldGroups = oldGroups || [];\n\t\t\n\t\tgroup = new Group(this, false, level, groupID, this.groupIDLookups[0].field, this.headerGenerator[0], oldGroups[groupKey]);\n\t\t\n\t\tthis.groups[groupKey] = group;\n\t\tthis.groupList.push(group);\n\t}\n\t\n\tassignRowToExistingGroup(row, oldGroups){\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\n\t\tgroupKey = \"0_\" + groupID;\n\t\t\n\t\tif(this.groups[groupKey]){\n\t\t\tthis.groups[groupKey].addRow(row);\n\t\t}\n\t}\n\t\n\tassignRowToGroup(row, oldGroups){\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\n\t\tnewGroupNeeded = !this.groups[\"0_\" + groupID];\n\t\t\n\t\tif(newGroupNeeded){\n\t\t\tthis.createGroup(groupID, 0, oldGroups);\n\t\t}\n\t\t\n\t\tthis.groups[\"0_\" + groupID].addRow(row);\n\t\t\n\t\treturn !newGroupNeeded;\n\t}\n\t\n\treassignRowToGroup(row){\n\t\tif(row.type === \"row\"){\n\t\t\tvar oldRowGroup = row.modules.group,\n\t\t\toldGroupPath = oldRowGroup.getPath(),\n\t\t\tnewGroupPath = this.getExpectedPath(row),\n\t\t\tsamePath;\n\t\t\t\n\t\t\t// figure out if new group path is the same as old group path\n\t\t\tsamePath = (oldGroupPath.length == newGroupPath.length) && oldGroupPath.every((element, index) => {\n\t\t\t\treturn element === newGroupPath[index];\n\t\t\t});\n\t\t\t\n\t\t\t// refresh if they new path and old path aren't the same (aka the row's groupings have changed)\n\t\t\tif(!samePath) {\n\t\t\t\toldRowGroup.removeRow(row);\n\t\t\t\tthis.assignRowToGroup(row, this.groups);\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tgetExpectedPath(row) {\n\t\tvar groupPath = [], rowData = row.getData();\n\t\t\n\t\tthis.groupIDLookups.forEach((groupId) => {\n\t\t\tgroupPath.push(groupId.func(rowData));\n\t\t});\n\t\t\n\t\treturn groupPath;\n\t}\n\t\n\tupdateGroupRows(force){\n\t\tvar output = [];\n\n\t\tif(!this.blockRedraw){\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\toutput = output.concat(group.getHeadersAndRows());\n\t\t\t});\n\t\t\t\n\t\t\tif(force){\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tscrollHeaders(left){\n\t\tif(this.table.options.groupBy){\n\t\t\tif(this.table.options.renderHorizontal === \"virtual\"){\n\t\t\t\tleft -= this.table.columnManager.renderer.vDomPadLeft;\n\t\t\t}\n\t\t\t\n\t\t\tleft = left + \"px\";\n\t\t\t\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\tgroup.scrollHeader(left);\n\t\t\t});\n\t\t}\n\t}\n\t\n\tremoveGroup(group){\n\t\tvar groupKey = group.level + \"_\" + group.key,\n\t\tindex;\n\t\t\n\t\tif(this.groups[groupKey]){\n\t\t\tdelete this.groups[groupKey];\n\t\t\t\n\t\t\tindex = this.groupList.indexOf(group);\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\tthis.groupList.splice(index, 1);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcheckBasicModeGroupHeaderWidth(){\n\t\tvar element = this.table.rowManager.tableElement,\n\t\tonlyGroupHeaders = true;\n\t\t\n\t\tthis.table.rowManager.getDisplayRows().forEach((row, index) =>{\n\t\t\tthis.table.rowManager.styleRow(row, index);\n\t\t\telement.appendChild(row.getElement());\n\t\t\trow.initialize(true);\n\t\t\t\n\t\t\tif(row.type !== \"group\"){\n\t\t\t\tonlyGroupHeaders = false;\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(onlyGroupHeaders){\n\t\t\telement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n\t\t}else{\n\t\t\telement.style.minWidth = \"\";\n\t\t}\n\t}\n\t\n}","export default {\n\tcellEdit: function(action){\n\t\taction.component.setValueProcessData(action.data.oldValue);\n\t\taction.component.cellRendered();\n\t},\n\n\trowAdd: function(action){\n\t\taction.component.deleteActual();\n\n\t\tthis.table.rowManager.checkPlaceholder();\n\t},\n\n\trowDelete: function(action){\n\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\n\t\t}\n\n\t\tthis._rebindRow(action.component, newRow);\n\n\t\tthis.table.rowManager.checkPlaceholder();\n\t},\n\n\trowMove: function(action){\n\t\tvar after = (action.data.posFrom  - action.data.posTo) > 0;\n\n\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.getRowFromPosition(action.data.posFrom), after);\n\n\t\tthis.table.rowManager.regenerateRowPositions();\n\t\tthis.table.rowManager.reRenderInPosition();\n\t},\n};","export default {\n\tcellEdit: function(action){\n\t\taction.component.setValueProcessData(action.data.newValue);\n\t\taction.component.cellRendered();\n\t},\n\n\trowAdd: function(action){\n\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\n\t\t}\n\n\t\tthis._rebindRow(action.component, newRow);\n\n\t\tthis.table.rowManager.checkPlaceholder();\n\t},\n\n\trowDelete:function(action){\n\t\taction.component.deleteActual();\n\n\t\tthis.table.rowManager.checkPlaceholder();\n\t},\n\n\trowMove: function(action){\n\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.getRowFromPosition(action.data.posTo), action.data.after);\n\t\t\n\t\tthis.table.rowManager.regenerateRowPositions();\n\t\tthis.table.rowManager.reRenderInPosition();\n\t},\n};","export default {\r\n\tundo:[\"ctrl + 90\", \"meta + 90\"],\r\n\tredo:[\"ctrl + 89\", \"meta + 89\"],\r\n};\r\n","export default {\r\n\tundo:function(e){\r\n\t\tvar cell = false;\r\n\t\tif(this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")){\r\n\r\n\t\t\tcell = this.table.modules.edit.currentCell;\r\n\r\n\t\t\tif(!cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.table.modules.history.undo();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tredo:function(e){\r\n\t\tvar cell = false;\r\n\t\tif(this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")){\r\n\r\n\t\t\tcell = this.table.modules.edit.currentCell;\r\n\r\n\t\t\tif(!cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.table.modules.history.redo();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n};\r\n","import bindings from './keybindings/bindings.js';\r\nimport actions from './keybindings/actions.js';\r\n\r\nexport default {\r\n\tkeybindings:{\r\n\t\tbindings:bindings,\r\n\t\tactions:actions\r\n\t},\r\n};","import Module from '../../core/Module.js';\nimport Row from '../../core/row/Row.js';\nimport Cell from '../../core/cell/Cell.js';\n\nimport defaultUndoers from './defaults/undoers.js';\nimport defaultRedoers from './defaults/redoers.js';\nimport extensions from './extensions/extensions.js';\n\nexport default class History extends Module{\n\n\tstatic moduleName = \"history\";\n\tstatic moduleExtensions = extensions;\n\n\t//load defaults\n\tstatic undoers = defaultUndoers;\n\tstatic redoers = defaultRedoers;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.history = [];\n\t\tthis.index = -1;\n\n\t\tthis.registerTableOption(\"history\", false); //enable edit history\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.history){\n\t\t\tthis.subscribe(\"cell-value-updated\", this.cellUpdated.bind(this));\n\t\t\tthis.subscribe(\"cell-delete\", this.clearComponentHistory.bind(this));\n\t\t\tthis.subscribe(\"row-delete\", this.rowDeleted.bind(this));\n\t\t\tthis.subscribe(\"rows-wipe\", this.clear.bind(this));\n\t\t\tthis.subscribe(\"row-added\", this.rowAdded.bind(this));\n\t\t\tthis.subscribe(\"row-move\", this.rowMoved.bind(this));\n\t\t}\n\n\t\tthis.registerTableFunction(\"undo\", this.undo.bind(this));\n\t\tthis.registerTableFunction(\"redo\", this.redo.bind(this));\n\t\tthis.registerTableFunction(\"getHistoryUndoSize\", this.getHistoryUndoSize.bind(this));\n\t\tthis.registerTableFunction(\"getHistoryRedoSize\", this.getHistoryRedoSize.bind(this));\n\t\tthis.registerTableFunction(\"clearHistory\", this.clear.bind(this));\n\t}\n\n\trowMoved(from, to, after){\n\t\tthis.action(\"rowMove\", from, {posFrom:from.getPosition(), posTo:to.getPosition(), to:to, after:after});\n\t}\n\n\trowAdded(row, data, pos, index){\n\t\tthis.action(\"rowAdd\", row, {data:data, pos:pos, index:index});\n\t}\n\n\trowDeleted(row){\n\t\tvar index, rows;\n\n\t\tif(this.table.options.groupBy){\n\n\t\t\trows = row.getComponent().getGroup()._getSelf().rows;\n\t\t\tindex = rows.indexOf(row);\n\n\t\t\tif(index){\n\t\t\t\tindex = rows[index-1];\n\t\t\t}\n\t\t}else{\n\t\t\tindex = row.table.rowManager.getRowIndex(row);\n\n\t\t\tif(index){\n\t\t\t\tindex = row.table.rowManager.rows[index-1];\n\t\t\t}\n\t\t}\n\n\t\tthis.action(\"rowDelete\", row, {data:row.getData(), pos:!index, index:index});\n\t}\n\n\tcellUpdated(cell){\n\t\tthis.action(\"cellEdit\", cell, {oldValue:cell.oldValue, newValue:cell.value});\n\t}\n\n\tclear(){\n\t\tthis.history = [];\n\t\tthis.index = -1;\n\t}\n\n\taction(type, component, data){\n\t\tthis.history = this.history.slice(0, this.index + 1);\n\n\t\tthis.history.push({\n\t\t\ttype:type,\n\t\t\tcomponent:component,\n\t\t\tdata:data,\n\t\t});\n\n\t\tthis.index ++;\n\t}\n\n\tgetHistoryUndoSize(){\n\t\treturn this.index + 1;\n\t}\n\n\tgetHistoryRedoSize(){\n\t\treturn this.history.length - (this.index + 1);\n\t}\n\n\tclearComponentHistory(component){\n\t\tvar index = this.history.findIndex(function(item){\n\t\t\treturn item.component === component;\n\t\t});\n\n\t\tif(index > -1){\n\t\t\tthis.history.splice(index, 1);\n\t\t\tif(index <= this.index){\n\t\t\t\tthis.index--;\n\t\t\t}\n\n\t\t\tthis.clearComponentHistory(component);\n\t\t}\n\t}\n\n\tundo(){\n\t\tif(this.index > -1){\n\t\t\tlet action = this.history[this.index];\n\n\t\t\tHistory.undoers[action.type].call(this, action);\n\n\t\t\tthis.index--;\n\n\t\t\tthis.dispatchExternal(\"historyUndo\", action.type, action.component.getComponent(), action.data);\n\n\t\t\treturn true;\n\t\t}else{\n\t\t\tconsole.warn(this.options(\"history\") ? \"History Undo Error - No more history to undo\" : \"History module not enabled\");\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tredo(){\n\t\tif(this.history.length-1 > this.index){\n\n\t\t\tthis.index++;\n\n\t\t\tlet action = this.history[this.index];\n\n\t\t\tHistory.redoers[action.type].call(this, action);\n\n\t\t\tthis.dispatchExternal(\"historyRedo\", action.type, action.component.getComponent(), action.data);\n\n\t\t\treturn true;\n\t\t}else{\n\t\t\tconsole.warn(this.options(\"history\") ? \"History Redo Error - No more history to redo\" : \"History module not enabled\");\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//rebind rows to new element after deletion\n\t_rebindRow(oldRow, newRow){\n\t\tthis.history.forEach(function(action){\n\t\t\tif(action.component instanceof Row){\n\t\t\t\tif(action.component === oldRow){\n\t\t\t\t\taction.component = newRow;\n\t\t\t\t}\n\t\t\t}else if(action.component instanceof Cell){\n\t\t\t\tif(action.component.row === oldRow){\n\t\t\t\t\tvar field = action.component.column.getField();\n\n\t\t\t\t\tif(field){\n\t\t\t\t\t\taction.component = newRow.getCell(field);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}","import Module from '../../core/Module.js';\n\nexport default class HtmlTableImport extends Module{\n\n\tstatic moduleName = \"htmlTableImport\";\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.fieldIndex = [];\n\t\tthis.hasIndex = false;\n\t}\n\n\tinitialize(){\n\t\tthis.tableElementCheck();\n\t}\n\n\ttableElementCheck(){\n\t\tif(this.table.originalElement && this.table.originalElement.tagName === \"TABLE\"){\n\t\t\tif(this.table.originalElement.childNodes.length){\n\t\t\t\tthis.parseTable();\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Unable to parse data from empty table tag, Tabulator should be initialized on a div tag unless importing data from a table element.\");\n\t\t\t}\n\t\t}\n\t}\n\n\tparseTable(){\n\t\tvar element = this.table.originalElement,\n\t\toptions = this.table.options,\n\t\theaders = element.getElementsByTagName(\"th\"),\n\t\trows = element.getElementsByTagName(\"tbody\")[0],\n\t\tdata = [];\n\n\t\tthis.hasIndex = false;\n\n\t\tthis.dispatchExternal(\"htmlImporting\");\n\n\t\trows = rows ? rows.getElementsByTagName(\"tr\") : [];\n\n\t\t//check for Tabulator inline options\n\t\tthis._extractOptions(element, options);\n\n\t\tif(headers.length){\n\t\t\tthis._extractHeaders(headers, rows);\n\t\t}else{\n\t\t\tthis._generateBlankHeaders(headers, rows);\n\t\t}\n\n\t\t//iterate through table rows and build data set\n\t\tfor(var index = 0; index < rows.length; index++){\n\t\t\tvar row = rows[index],\n\t\t\tcells = row.getElementsByTagName(\"td\"),\n\t\t\titem = {};\n\n\t\t\t//create index if the don't exist in table\n\t\t\tif(!this.hasIndex){\n\t\t\t\titem[options.index] = index;\n\t\t\t}\n\n\t\t\tfor(var i = 0; i < cells.length; i++){\n\t\t\t\tvar cell = cells[i];\n\t\t\t\tif(typeof this.fieldIndex[i] !== \"undefined\"){\n\t\t\t\t\titem[this.fieldIndex[i]] = cell.innerHTML;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//add row data to item\n\t\t\tdata.push(item);\n\t\t}\n\n\t\toptions.data = data;\n\n\t\tthis.dispatchExternal(\"htmlImported\");\n\t}\n\n\t//extract tabulator attribute options\n\t_extractOptions(element, options, defaultOptions){\n\t\tvar attributes = element.attributes;\n\t\tvar optionsArr = defaultOptions ? Object.keys(defaultOptions) : Object.keys(options);\n\t\tvar optionsList = {};\n\n\t\toptionsArr.forEach((item) => {\n\t\t\toptionsList[item.toLowerCase()] = item;\n\t\t});\n\n\t\tfor(var index in attributes){\n\t\t\tvar attrib = attributes[index];\n\t\t\tvar name;\n\n\t\t\tif(attrib && typeof attrib == \"object\" && attrib.name && attrib.name.indexOf(\"tabulator-\") === 0){\n\t\t\t\tname = attrib.name.replace(\"tabulator-\", \"\");\n\n\t\t\t\tif(typeof optionsList[name] !== \"undefined\"){\n\t\t\t\t\toptions[optionsList[name]] = this._attribValue(attrib.value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//get value of attribute\n\t_attribValue(value){\n\t\tif(value === \"true\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tif(value === \"false\"){\n\t\t\treturn false;\n\t\t}\n\n\t\treturn value;\n\t}\n\n\t//find column if it has already been defined\n\t_findCol(title){\n\t\tvar match = this.table.options.columns.find((column) => {\n\t\t\treturn column.title === title;\n\t\t});\n\n\t\treturn match || false;\n\t}\n\n\t//extract column from headers\n\t_extractHeaders(headers, rows){\n\t\tfor(var index = 0; index < headers.length; index++){\n\t\t\tvar header = headers[index],\n\t\t\texists = false,\n\t\t\tcol = this._findCol(header.textContent),\n\t\t\twidth;\n\n\t\t\tif(col){\n\t\t\t\texists = true;\n\t\t\t}else{\n\t\t\t\tcol = {title:header.textContent.trim()};\n\t\t\t}\n\n\t\t\tif(!col.field) {\n\t\t\t\tcol.field = header.textContent.trim().toLowerCase().replaceAll(\" \", \"_\");\n\t\t\t}\n\n\t\t\twidth = header.getAttribute(\"width\");\n\n\t\t\tif(width && !col.width)\t{\n\t\t\t\tcol.width = width;\n\t\t\t}\n\n\t\t\t//check for Tabulator inline options\n\t\t\tthis._extractOptions(header, col, this.table.columnManager.optionsList.registeredDefaults);\n\n\t\t\tthis.fieldIndex[index] = col.field;\n\n\t\t\tif(col.field == this.table.options.index){\n\t\t\t\tthis.hasIndex = true;\n\t\t\t}\n\n\t\t\tif(!exists){\n\t\t\t\tthis.table.options.columns.push(col);\n\t\t\t}\n\n\t\t}\n\t}\n\n\t//generate blank headers\n\t_generateBlankHeaders(headers, rows){\n\t\tfor(var index = 0; index < headers.length; index++){\n\t\t\tvar header = headers[index],\n\t\t\tcol = {title:\"\", field:\"col\" + index};\n\n\t\t\tthis.fieldIndex[index] = col.field;\n\n\t\t\tvar width = header.getAttribute(\"width\");\n\n\t\t\tif(width){\n\t\t\t\tcol.width = width;\n\t\t\t}\n\n\t\t\tthis.table.options.columns.push(col);\n\t\t}\n\t}\n}","export default function(input){\n\tvar data = [],\n\trow = 0, \n\tcol = 0,\n\tinQuote = false;\n    \n\t//Iterate over each character\n\tfor (let index = 0; index < input.length; index++) {\n\t\tlet char = input[index], \n\t\tnextChar = input[index+1];      \n        \n\t\t//Initialize empty row\n\t\tif(!data[row]){\n\t\t\tdata[row] = [];\n\t\t}\n\n\t\t//Initialize empty column\n\t\tif(!data[row][col]){\n\t\t\tdata[row][col] = \"\";\n\t\t}\n        \n\t\t//Handle quotation mark inside string\n\t\tif (char == '\"' && inQuote && nextChar == '\"') { \n\t\t\tdata[row][col] += char; \n\t\t\tindex++;\n\t\t\tcontinue; \n\t\t}\n        \n\t\t//Begin / End Quote\n\t\tif (char == '\"') { \n\t\t\tinQuote = !inQuote;\n\t\t\tcontinue;\n\t\t}\n        \n\t\t//Next column (if not in quote)\n\t\tif (char == ',' && !inQuote) { \n\t\t\tcol++;\n\t\t\tcontinue; \n\t\t}\n        \n\t\t//New row if new line and not in quote (CRLF) \n\t\tif (char == '\\r' && nextChar == '\\n' && !inQuote) { \n\t\t\tcol = 0; \n\t\t\trow++; \n\t\t\tindex++; \n\t\t\tcontinue; \n\t\t}\n        \n\t\t//New row if new line and not in quote (CR or LF) \n\t\tif ((char == '\\r' || char == '\\n') && !inQuote) { \n\t\t\tcol = 0;\n\t\t\trow++;\n\t\t\tcontinue; \n\t\t}\n\n\t\t//Normal Character, append to column\n\t\tdata[row][col] += char;\n\t}\n\n\treturn data;\n}","export default function(input){\n\ttry {\n\t\treturn JSON.parse(input);\n\t} catch(e) {\n\t\tconsole.warn(\"JSON Import Error - File contents is invalid JSON\", e);\n\t\treturn Promise.reject();\n\t}\n}","export default function (input){\n\treturn input;\n}","export default function(input, floop){\r\n\tvar workbook2 = XLSX.read(input);\r\n\tvar sheet = workbook2.Sheets[workbook2.SheetNames[0]];\r\n\t\r\n\treturn XLSX.utils.sheet_to_json(sheet, {});\r\n}","import csv from './importers/csv.js';\nimport json from './importers/json.js';\nimport array from './importers/array.js';\nimport xlsx from './importers/xlsx.js';\n\nexport default {\n\tcsv:csv,\n\tjson:json,\n\tarray:array,\n\txlsx:xlsx,\n};","import Module from '../../core/Module.js';\n\nimport defaultImporters from './defaults/importers.js';\n\nexport default class Import extends Module{\n\n\tstatic moduleName = \"import\";\n\n\t//load defaults\n\tstatic importers = defaultImporters;\n    \n\tconstructor(table){\n\t\tsuper(table);\n        \n\t\tthis.registerTableOption(\"importFormat\");\n\t\tthis.registerTableOption(\"importReader\", \"text\");\n\t}\n    \n\tinitialize(){\n\t\tthis.registerTableFunction(\"import\", this.importFromFile.bind(this));\n\n\t\tif(this.table.options.importFormat){\n\t\t\tthis.subscribe(\"data-loading\", this.loadDataCheck.bind(this), 10);\n\t\t\tthis.subscribe(\"data-load\", this.loadData.bind(this), 10);\n\t\t}\n\t}\n\n\tloadDataCheck(data){\n\t\treturn this.table.options.importFormat && (typeof data === \"string\" || (Array.isArray(data) && data.length && Array.isArray(data)));\n\t}\n\n\tloadData(data, params, config, silent, previousData){\n\t\treturn this.importData(this.lookupImporter(), data)\n\t\t\t.then(this.structureData.bind(this))\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.error(\"Import Error:\", err || \"Unable to import data\");\n\t\t\t\treturn Promise.reject(err);\n\t\t\t});\n\t}\n\n\tlookupImporter(importFormat){\n\t\tvar importer;\n        \n\t\tif(!importFormat){\n\t\t\timportFormat = this.table.options.importFormat;\n\t\t}\n        \n\t\tif(typeof importFormat === \"string\"){\n\t\t\timporter = Import.importers[importFormat];\n\t\t}else{\n\t\t\timporter = importFormat;\n\t\t}\n\n\t\tif(!importer){\n\t\t\tconsole.error(\"Import Error - Importer not found:\", importFormat);\n\t\t}\n        \n\t\treturn importer;\n\t}\n    \n\timportFromFile(importFormat, extension, importReader){\n\t\tvar importer = this.lookupImporter(importFormat);\n        \n\t\tif(importer){\n\t\t\treturn this.pickFile(extension, importReader)\n\t\t\t\t.then(this.importData.bind(this, importer))\n\t\t\t\t.then(this.structureData.bind(this))\n\t\t\t\t.then(this.setData.bind(this))\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tthis.dispatch(\"import-error\", err);\n\t\t\t\t\tthis.dispatchExternal(\"importError\", err);\n\n\t\t\t\t\tconsole.error(\"Import Error:\", err || \"Unable to import file\");\n\t\t\t\t\treturn Promise.reject(err);\n\t\t\t\t});\n\t\t}\n\t}\n    \n\tpickFile(extensions, importReader){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar input = document.createElement(\"input\");\n\t\t\tinput.type = \"file\";\n\t\t\tinput.accept = extensions;\n            \n\t\t\tinput.addEventListener(\"change\", (e) => {\n\t\t\t\tvar file = input.files[0],\n\t\t\t\treader = new FileReader();\n\n\t\t\t\tthis.dispatch(\"import-importing\", input.files);\n\t\t\t\tthis.dispatchExternal(\"importImporting\", input.files);\n                \n\t\t\t\tswitch(importReader || this.table.options.importReader){\n\t\t\t\t\tcase \"buffer\":\n\t\t\t\t\t\treader.readAsArrayBuffer(file);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"binary\":\n\t\t\t\t\t\treader.readAsBinaryString(file);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"url\":\n\t\t\t\t\t\treader.readAsDataURL(file);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"text\":\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treader.readAsText(file);\n\t\t\t\t}\n                  \n\t\t\t\treader.onload = (e) => {\n\t\t\t\t\tresolve(reader.result);\n\t\t\t\t};\n                \n\t\t\t\treader.onerror = (e) => {\n\t\t\t\t\tconsole.warn(\"File Load Error - Unable to read file\");\n\t\t\t\t\treject();\n\t\t\t\t};\n\t\t\t});\n\t\t\t\n\t\t\tthis.dispatch(\"import-choose\");\n\t\t\tthis.dispatchExternal(\"importChoose\");\n\t\t\tinput.click();\n\t\t});\n\t}\n    \n\timportData(importer, fileContents){\n\t\tvar data = importer.call(this.table, fileContents);\n        \n\t\tif(data instanceof Promise){\n\t\t\treturn data;\n\t\t}else{\n\t\t\treturn data ? Promise.resolve(data) : Promise.reject();\n\t\t}\n\t}\n\n\tstructureData(parsedData){\n\t\tvar data = [];\n        \n\t\tif(Array.isArray(parsedData) && parsedData.length && Array.isArray(parsedData[0])){\n\t\t\tif(this.table.options.autoColumns){\n\t\t\t\tdata = this.structureArrayToObject(parsedData);\n\t\t\t}else{\n\t\t\t\tdata = this.structureArrayToColumns(parsedData);\n\t\t\t}\n\n\t\t\treturn data;\n\t\t}else{\n\t\t\treturn parsedData;\n\t\t}\n\t}\n\n\tstructureArrayToObject(parsedData){\n\t\tvar columns = parsedData.shift();\n\n\t\tvar data = parsedData.map((values) => {\n\t\t\tvar row = {};\n\n\t\t\tcolumns.forEach((key, i) => {\n\t\t\t\trow[key] = values[i];\n\t\t\t});\n\n\t\t\treturn row;\n\t\t});\n\n\t\treturn data;\n\t}\n\n\tstructureArrayToColumns(parsedData){\n\t\tvar data = [],\n\t\tcolumns = this.table.getColumns();\n\n\t\t//remove first row if it is the column names\n\t\tif(columns[0] && parsedData[0][0]){\n\t\t\tif(columns[0].getDefinition().title === parsedData[0][0]){\n\t\t\t\tparsedData.shift();\n\t\t\t}\n\t\t}\n        \n\t\t//convert row arrays to objects\n\t\tparsedData.forEach((rowData) => {\n\t\t\tvar row = {};\n\n\t\t\trowData.forEach((value, index) => {\n\t\t\t\tvar column = columns[index];\n\n\t\t\t\tif(column){\n\t\t\t\t\trow[column.getField()] = value;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tdata.push(row);\n\t\t});\n\n\t\treturn data;\n\t}\n    \n\tsetData(data){\n\t\tthis.dispatch(\"import-imported\", data);\n\t\tthis.dispatchExternal(\"importImported\", data);\n\t\t\n\t\treturn this.table.setData(data);\n\t}\n}","import Module from '../../core/Module.js';\n\nimport Cell from '../../core/cell/Cell.js';\nimport Column from '../../core/column/Column.js';\n\nexport default class Interaction extends Module{\n\n\tstatic moduleName = \"interaction\";\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.eventMap = {\n\t\t\t//row events\n\t\t\trowClick:\"row-click\",\n\t\t\trowDblClick:\"row-dblclick\",\n\t\t\trowContext:\"row-contextmenu\",\n\t\t\trowMouseEnter:\"row-mouseenter\",\n\t\t\trowMouseLeave:\"row-mouseleave\",\n\t\t\trowMouseOver:\"row-mouseover\",\n\t\t\trowMouseOut:\"row-mouseout\",\n\t\t\trowMouseMove:\"row-mousemove\",\n\t\t\trowMouseDown:\"row-mousedown\",\n\t\t\trowMouseUp:\"row-mouseup\",\n\t\t\trowTap:\"row\",\n\t\t\trowDblTap:\"row\",\n\t\t\trowTapHold:\"row\",\n\n\t\t\t//cell events\n\t\t\tcellClick:\"cell-click\",\n\t\t\tcellDblClick:\"cell-dblclick\",\n\t\t\tcellContext:\"cell-contextmenu\",\n\t\t\tcellMouseEnter:\"cell-mouseenter\",\n\t\t\tcellMouseLeave:\"cell-mouseleave\",\n\t\t\tcellMouseOver:\"cell-mouseover\",\n\t\t\tcellMouseOut:\"cell-mouseout\",\n\t\t\tcellMouseMove:\"cell-mousemove\",\n\t\t\tcellMouseDown:\"cell-mousedown\",\n\t\t\tcellMouseUp:\"cell-mouseup\",\n\t\t\tcellTap:\"cell\",\n\t\t\tcellDblTap:\"cell\",\n\t\t\tcellTapHold:\"cell\",\n\n\t\t\t//column header events\n\t\t\theaderClick:\"column-click\",\n\t\t\theaderDblClick:\"column-dblclick\",\n\t\t\theaderContext:\"column-contextmenu\",\n\t\t\theaderMouseEnter:\"column-mouseenter\",\n\t\t\theaderMouseLeave:\"column-mouseleave\",\n\t\t\theaderMouseOver:\"column-mouseover\",\n\t\t\theaderMouseOut:\"column-mouseout\",\n\t\t\theaderMouseMove:\"column-mousemove\",\n\t\t\theaderMouseDown:\"column-mousedown\",\n\t\t\theaderMouseUp:\"column-mouseup\",\n\t\t\theaderTap:\"column\",\n\t\t\theaderDblTap:\"column\",\n\t\t\theaderTapHold:\"column\",\n\n\t\t\t//group header\n\t\t\tgroupClick:\"group-click\",\n\t\t\tgroupDblClick:\"group-dblclick\",\n\t\t\tgroupContext:\"group-contextmenu\",\n\t\t\tgroupMouseEnter:\"group-mouseenter\",\n\t\t\tgroupMouseLeave:\"group-mouseleave\",\n\t\t\tgroupMouseOver:\"group-mouseover\",\n\t\t\tgroupMouseOut:\"group-mouseout\",\n\t\t\tgroupMouseMove:\"group-mousemove\",\n\t\t\tgroupMouseDown:\"group-mousedown\",\n\t\t\tgroupMouseUp:\"group-mouseup\",\n\t\t\tgroupTap:\"group\",\n\t\t\tgroupDblTap:\"group\",\n\t\t\tgroupTapHold:\"group\",\n\t\t};\n\n\t\tthis.subscribers = {};\n\n\t\tthis.touchSubscribers = {};\n\n\t\tthis.columnSubscribers = {};\n\n\t\tthis.touchWatchers = {\n\t\t\trow:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t},\n\t\t\tcell:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t},\n\t\t\tcolumn:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t},\n\t\t\tgroup:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t}\n\t\t};\n\n\t\tthis.registerColumnOption(\"headerClick\");\n\t\tthis.registerColumnOption(\"headerDblClick\");\n\t\tthis.registerColumnOption(\"headerContext\");\n\t\tthis.registerColumnOption(\"headerMouseEnter\");\n\t\tthis.registerColumnOption(\"headerMouseLeave\");\n\t\tthis.registerColumnOption(\"headerMouseOver\");\n\t\tthis.registerColumnOption(\"headerMouseOut\");\n\t\tthis.registerColumnOption(\"headerMouseMove\");\n\t\tthis.registerColumnOption(\"headerMouseDown\");\n\t\tthis.registerColumnOption(\"headerMouseUp\");\n\t\tthis.registerColumnOption(\"headerTap\");\n\t\tthis.registerColumnOption(\"headerDblTap\");\n\t\tthis.registerColumnOption(\"headerTapHold\");\n\n\t\tthis.registerColumnOption(\"cellClick\");\n\t\tthis.registerColumnOption(\"cellDblClick\");\n\t\tthis.registerColumnOption(\"cellContext\");\n\t\tthis.registerColumnOption(\"cellMouseEnter\");\n\t\tthis.registerColumnOption(\"cellMouseLeave\");\n\t\tthis.registerColumnOption(\"cellMouseOver\");\n\t\tthis.registerColumnOption(\"cellMouseOut\");\n\t\tthis.registerColumnOption(\"cellMouseMove\");\n\t\tthis.registerColumnOption(\"cellMouseDown\");\n\t\tthis.registerColumnOption(\"cellMouseUp\");\n\t\tthis.registerColumnOption(\"cellTap\");\n\t\tthis.registerColumnOption(\"cellDblTap\");\n\t\tthis.registerColumnOption(\"cellTapHold\");\n\n\t}\n\n\tinitialize(){\n\t\tthis.initializeExternalEvents();\n\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"cell-dblclick\", this.cellContentsSelectionFixer.bind(this));\n\t\tthis.subscribe(\"scroll-horizontal\", this.clearTouchWatchers.bind(this));\n\t\tthis.subscribe(\"scroll-vertical\", this.clearTouchWatchers.bind(this));\n\t}\n\n\tclearTouchWatchers(){\n\t\tvar types = Object.values(this.touchWatchers);\n\n\t\ttypes.forEach((type) => {\n\t\t\tfor(let key in type){\n\t\t\t\ttype[key] = null;\n\t\t\t}\n\t\t});\n\t}\n\t\t\n\tcellContentsSelectionFixer(e, cell){\n\t\tvar range;\n\n\t\tif(this.table.modExists(\"edit\")){\n\t\t\tif (this.table.modules.edit.currentCell === cell){\n\t\t\t\treturn; //prevent instant selection of editor content\n\t\t\t}\n\t\t}\n\n\t\te.preventDefault();\n\n\t\ttry{\n\t\t\tif (document.selection) { // IE\n\t\t\t\trange = document.body.createTextRange();\n\t\t\t\trange.moveToElementText(cell.getElement());\n\t\t\t\trange.select();\n\t\t\t} else if (window.getSelection) {\n\t\t\t\trange = document.createRange();\n\t\t\t\trange.selectNode(cell.getElement());\n\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\twindow.getSelection().addRange(range);\n\t\t\t}\n\t\t}catch(e){}\n\t}\n\n\tinitializeExternalEvents(){\n\t\tfor(let key in this.eventMap){\n\t\t\tthis.subscriptionChangeExternal(key, this.subscriptionChanged.bind(this, key));\n\t\t}\n\t}\n\n\tsubscriptionChanged(key, added){\n\t\tif(added){\n\t\t\tif(!this.subscribers[key]){\n\t\t\t\tif(this.eventMap[key].includes(\"-\")){\n\t\t\t\t\tthis.subscribers[key] = this.handle.bind(this, key);\n\t\t\t\t\tthis.subscribe(this.eventMap[key], this.subscribers[key]);\n\t\t\t\t}else{\n\t\t\t\t\tthis.subscribeTouchEvents(key);\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif(this.eventMap[key].includes(\"-\")){\n\t\t\t\tif(this.subscribers[key] && !this.columnSubscribers[key]  && !this.subscribedExternal(key)){\n\t\t\t\t\tthis.unsubscribe(this.eventMap[key], this.subscribers[key]);\n\t\t\t\t\tdelete this.subscribers[key];\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.unsubscribeTouchEvents(key);\n\t\t\t}\n\t\t}\n\t}\n\n\n\tsubscribeTouchEvents(key){\n\t\tvar type = this.eventMap[key];\n\n\t\tif(!this.touchSubscribers[type + \"-touchstart\"]){\n\t\t\tthis.touchSubscribers[type + \"-touchstart\"] = this.handleTouch.bind(this, type, \"start\");\n\t\t\tthis.touchSubscribers[type + \"-touchend\"] = this.handleTouch.bind(this, type, \"end\");\n\n\t\t\tthis.subscribe(type + \"-touchstart\", this.touchSubscribers[type + \"-touchstart\"]);\n\t\t\tthis.subscribe(type + \"-touchend\", this.touchSubscribers[type + \"-touchend\"]);\n\t\t}\n\n\t\tthis.subscribers[key] = true;\n\t}\n\n\tunsubscribeTouchEvents(key){\n\t\tvar noTouch = true,\n\t\ttype = this.eventMap[key];\n\n\t\tif(this.subscribers[key] && !this.subscribedExternal(key)){\n\t\t\tdelete this.subscribers[key];\n\n\t\t\tfor(let i in this.eventMap){\n\t\t\t\tif(this.eventMap[i] === type){\n\t\t\t\t\tif(this.subscribers[i]){\n\t\t\t\t\t\tnoTouch = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(noTouch){\n\t\t\t\tthis.unsubscribe(type + \"-touchstart\", this.touchSubscribers[type + \"-touchstart\"]);\n\t\t\t\tthis.unsubscribe(type + \"-touchend\", this.touchSubscribers[type + \"-touchend\"]);\n\n\t\t\t\tdelete this.touchSubscribers[type + \"-touchstart\"];\n\t\t\t\tdelete this.touchSubscribers[type + \"-touchend\"];\n\t\t\t}\n\t\t}\n\t}\n\n\tinitializeColumn(column){\n\t\tvar def = column.definition;\n\n\t\tfor(let key in this.eventMap){\n\t\t\tif(def[key]){\n\t\t\t\tthis.subscriptionChanged(key, true);\n\n\t\t\t\tif(!this.columnSubscribers[key]){\n\t\t\t\t\tthis.columnSubscribers[key] = [];\n\t\t\t\t}\n\n\t\t\t\tthis.columnSubscribers[key].push(column);\n\t\t\t}\n\t\t}\n\t}\n\n\thandle(action, e, component){\n\t\tthis.dispatchEvent(action, e, component);\n\t}\n\n\thandleTouch(type, action, e, component){\n\t\tvar watchers = this.touchWatchers[type];\n\n\t\tif(type === \"column\"){\n\t\t\ttype = \"header\";\n\t\t}\n\n\t\tswitch(action){\n\t\t\tcase \"start\":\n\t\t\t\twatchers.tap = true;\n\n\t\t\t\tclearTimeout(watchers.tapHold);\n\n\t\t\t\twatchers.tapHold = setTimeout(() => {\n\t\t\t\t\tclearTimeout(watchers.tapHold);\n\t\t\t\t\twatchers.tapHold = null;\n\n\t\t\t\t\twatchers.tap = null;\n\t\t\t\t\tclearTimeout(watchers.tapDbl);\n\t\t\t\t\twatchers.tapDbl = null;\n\n\t\t\t\t\tthis.dispatchEvent(type + \"TapHold\", e,  component);\n\t\t\t\t}, 1000);\n\t\t\t\tbreak;\n\n\t\t\tcase \"end\":\n\t\t\t\tif(watchers.tap){\n\n\t\t\t\t\twatchers.tap = null;\n\t\t\t\t\tthis.dispatchEvent(type + \"Tap\", e,  component);\n\t\t\t\t}\n\n\t\t\t\tif(watchers.tapDbl){\n\t\t\t\t\tclearTimeout(watchers.tapDbl);\n\t\t\t\t\twatchers.tapDbl = null;\n\n\t\t\t\t\tthis.dispatchEvent(type + \"DblTap\", e,  component);\n\t\t\t\t}else{\n\t\t\t\t\twatchers.tapDbl = setTimeout(() => {\n\t\t\t\t\t\tclearTimeout(watchers.tapDbl);\n\t\t\t\t\t\twatchers.tapDbl = null;\n\t\t\t\t\t}, 300);\n\t\t\t\t}\n\n\t\t\t\tclearTimeout(watchers.tapHold);\n\t\t\t\twatchers.tapHold = null;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tdispatchEvent(action, e, component){\n\t\tvar componentObj = component.getComponent(),\n\t\tcallback;\n\n\t\tif(this.columnSubscribers[action]){\n\n\t\t\tif(component instanceof Cell){\n\t\t\t\tcallback = component.column.definition[action];\n\t\t\t}else if(component instanceof Column){\n\t\t\t\tcallback = component.definition[action];\n\t\t\t}\n\n\t\t\tif(callback){\n\t\t\t\tcallback(e, componentObj);\n\t\t\t}\n\t\t}\n\n\t\tthis.dispatchExternal(action, e, componentObj);\n\t}\n}","export default {\n\tnavPrev:\"shift + 9\",\n\tnavNext:9,\n\tnavUp:38,\n\tnavDown:40,\n\tnavLeft:37,\n\tnavRight:39,\n\tscrollPageUp:33,\n\tscrollPageDown:34,\n\tscrollToStart:36,\n\tscrollToEnd:35,\n};\n","export default {\n\tkeyBlock:function(e){\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t},\n\n\tscrollPageUp:function(e){\n\t\tvar rowManager = this.table.rowManager,\n\t\tnewPos = rowManager.scrollTop - rowManager.element.clientHeight;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\tif(newPos >= 0){\n\t\t\t\trowManager.element.scrollTop = newPos;\n\t\t\t}else{\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n\t\t\t}\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\n\tscrollPageDown:function(e){\n\t\tvar rowManager = this.table.rowManager,\n\t\tnewPos = rowManager.scrollTop + rowManager.element.clientHeight,\n\t\tscrollMax = rowManager.element.scrollHeight;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\tif(newPos <= scrollMax){\n\t\t\t\trowManager.element.scrollTop = newPos;\n\t\t\t}else{\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n\t\t\t}\n\t\t}\n\n\t\tthis.table.element.focus();\n\n\t},\n\n\tscrollToStart:function(e){\n\t\tvar rowManager = this.table.rowManager;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\n\tscrollToEnd:function(e){\n\t\tvar rowManager = this.table.rowManager;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\n\tnavPrev:function(e){\n\t\tthis.dispatch(\"keybinding-nav-prev\", e);\n\t},\n\n\tnavNext:function(e){\n\t\tthis.dispatch(\"keybinding-nav-next\", e);\n\t},\n\n\tnavLeft:function(e){\n\t\tthis.dispatch(\"keybinding-nav-left\", e);\n\t},\n\n\tnavRight:function(e){\n\t\tthis.dispatch(\"keybinding-nav-right\", e);\n\t},\n\n\tnavUp:function(e){\n\t\tthis.dispatch(\"keybinding-nav-up\", e);\n\t},\n\n\tnavDown:function(e){\n\t\tthis.dispatch(\"keybinding-nav-down\", e);\n\t},\n};\n","import Module from '../../core/Module.js';\n\nimport defaultBindings from './defaults/bindings.js';\nimport defaultActions from './defaults/actions.js';\n\nexport default class Keybindings extends Module{\n\n\tstatic moduleName = \"keybindings\";\n\n\t//load defaults\n\tstatic bindings = defaultBindings;\n\tstatic actions = defaultActions;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.watchKeys = null;\n\t\tthis.pressedKeys = null;\n\t\tthis.keyupBinding = false;\n\t\tthis.keydownBinding = false;\n\n\t\tthis.registerTableOption(\"keybindings\", {}); //array for keybindings\n\t\tthis.registerTableOption(\"tabEndNewRow\", false); //create new row when tab to end of table\n\t}\n\n\tinitialize(){\n\t\tvar bindings = this.table.options.keybindings,\n\t\tmergedBindings = {};\n\n\t\tthis.watchKeys = {};\n\t\tthis.pressedKeys = [];\n\n\t\tif(bindings !== false){\n\t\t\tObject.assign(mergedBindings, Keybindings.bindings);\n\t\t\tObject.assign(mergedBindings, bindings);\n\n\t\t\tthis.mapBindings(mergedBindings);\n\t\t\tthis.bindEvents();\n\t\t}\n\n\t\tthis.subscribe(\"table-destroy\", this.clearBindings.bind(this));\n\t}\n\n\tmapBindings(bindings){\n\t\tfor(let key in bindings){\n\t\t\tif(Keybindings.actions[key]){\n\t\t\t\tif(bindings[key]){\n\t\t\t\t\tif(typeof bindings[key] !== \"object\"){\n\t\t\t\t\t\tbindings[key] = [bindings[key]];\n\t\t\t\t\t}\n\n\t\t\t\t\tbindings[key].forEach((binding) => {\n\t\t\t\t\t\tvar bindingList = Array.isArray(binding) ?  binding : [binding];\n\t\t\t\t\t\t\n\t\t\t\t\t\tbindingList.forEach((item) => {\n\t\t\t\t\t\t\tthis.mapBinding(key, item);\n\t\t\t\t\t\t});\t\t\t\t\t\t\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Key Binding Error - no such action:\", key);\n\t\t\t}\n\t\t}\n\t}\n\n\tmapBinding(action, symbolsList){\n\t\tvar binding = {\n\t\t\taction: Keybindings.actions[action],\n\t\t\tkeys: [],\n\t\t\tctrl: false,\n\t\t\tshift: false,\n\t\t\tmeta: false,\n\t\t};\n\n\t\tvar symbols = symbolsList.toString().toLowerCase().split(\" \").join(\"\").split(\"+\");\n\n\t\tsymbols.forEach((symbol) => {\n\t\t\tswitch(symbol){\n\t\t\t\tcase \"ctrl\":\n\t\t\t\t\tbinding.ctrl = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"shift\":\n\t\t\t\t\tbinding.shift = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"meta\":\n\t\t\t\t\tbinding.meta = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tsymbol = isNaN(symbol) ? symbol.toUpperCase().charCodeAt(0) : parseInt(symbol);\n\t\t\t\t\tbinding.keys.push(symbol);\n\n\t\t\t\t\tif(!this.watchKeys[symbol]){\n\t\t\t\t\t\tthis.watchKeys[symbol] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.watchKeys[symbol].push(binding);\n\t\t\t}\n\t\t});\n\t}\n\n\tbindEvents(){\n\t\tvar self = this;\n\n\t\tthis.keyupBinding = function(e){\n\t\t\tvar code = e.keyCode;\n\t\t\tvar bindings = self.watchKeys[code];\n\n\t\t\tif(bindings){\n\n\t\t\t\tself.pressedKeys.push(code);\n\n\t\t\t\tbindings.forEach(function(binding){\n\t\t\t\t\tself.checkBinding(e, binding);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tthis.keydownBinding = function(e){\n\t\t\tvar code = e.keyCode;\n\t\t\tvar bindings = self.watchKeys[code];\n\n\t\t\tif(bindings){\n\n\t\t\t\tvar index = self.pressedKeys.indexOf(code);\n\n\t\t\t\tif(index > -1){\n\t\t\t\t\tself.pressedKeys.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.table.element.addEventListener(\"keydown\", this.keyupBinding);\n\n\t\tthis.table.element.addEventListener(\"keyup\", this.keydownBinding);\n\t}\n\n\tclearBindings(){\n\t\tif(this.keyupBinding){\n\t\t\tthis.table.element.removeEventListener(\"keydown\", this.keyupBinding);\n\t\t}\n\n\t\tif(this.keydownBinding){\n\t\t\tthis.table.element.removeEventListener(\"keyup\", this.keydownBinding);\n\t\t}\n\t}\n\n\tcheckBinding(e, binding){\n\t\tvar match = true;\n\n\t\tif(e.ctrlKey == binding.ctrl && e.shiftKey == binding.shift && e.metaKey == binding.meta){\n\t\t\tbinding.keys.forEach((key) => {\n\t\t\t\tvar index = this.pressedKeys.indexOf(key);\n\n\t\t\t\tif(index == -1){\n\t\t\t\t\tmatch = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(match){\n\t\t\t\tbinding.action.call(this, e);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n}","import Module from '../../core/Module.js';\n\nexport default class Menu extends Module{\n\n\tstatic moduleName = \"menu\";\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.menuContainer = null;\n\t\tthis.nestedMenuBlock = false;\n\t\t\n\t\tthis.currentComponent = null;\n\t\tthis.rootPopup = null;\n\t\t\n\t\tthis.columnSubscribers = {};\n\t\t\n\t\t// this.registerTableOption(\"menuContainer\", undefined); //deprecated\n\t\t\n\t\tthis.registerTableOption(\"rowContextMenu\", false);\n\t\tthis.registerTableOption(\"rowClickMenu\", false);\n\t\tthis.registerTableOption(\"rowDblClickMenu\", false);\n\t\tthis.registerTableOption(\"groupContextMenu\", false);\n\t\tthis.registerTableOption(\"groupClickMenu\", false);\n\t\tthis.registerTableOption(\"groupDblClickMenu\", false);\n\t\t\n\t\tthis.registerColumnOption(\"headerContextMenu\");\n\t\tthis.registerColumnOption(\"headerClickMenu\");\n\t\tthis.registerColumnOption(\"headerDblClickMenu\");\n\t\tthis.registerColumnOption(\"headerMenu\");\n\t\tthis.registerColumnOption(\"headerMenuIcon\");\n\t\tthis.registerColumnOption(\"contextMenu\");\n\t\tthis.registerColumnOption(\"clickMenu\");\n\t\tthis.registerColumnOption(\"dblClickMenu\");\n\t\t\n\t}\n\t\n\tinitialize(){\n\t\tthis.deprecatedOptionsCheck();\n\t\tthis.initializeRowWatchers();\n\t\tthis.initializeGroupWatchers();\n\t\t\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\t\n\tdeprecatedOptionsCheck(){\n\t\t// if(!this.deprecationCheck(\"menuContainer\", \"popupContainer\")){\n\t\t// \tthis.table.options.popupContainer = this.table.options.menuContainer;\n\t\t// }\n\t}\t\n\t\n\tinitializeRowWatchers(){\n\t\tif(this.table.options.rowContextMenu){\n\t\t\tthis.subscribe(\"row-contextmenu\", this.loadMenuEvent.bind(this, this.table.options.rowContextMenu));\n\t\t\tthis.table.on(\"rowTapHold\", this.loadMenuEvent.bind(this, this.table.options.rowContextMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.rowClickMenu){\n\t\t\tthis.subscribe(\"row-click\", this.loadMenuEvent.bind(this, this.table.options.rowClickMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.rowDblClickMenu){\n\t\t\tthis.subscribe(\"row-dblclick\", this.loadMenuEvent.bind(this, this.table.options.rowDblClickMenu));\n\t\t}\n\t}\n\t\n\tinitializeGroupWatchers(){\n\t\tif(this.table.options.groupContextMenu){\n\t\t\tthis.subscribe(\"group-contextmenu\", this.loadMenuEvent.bind(this, this.table.options.groupContextMenu));\n\t\t\tthis.table.on(\"groupTapHold\", this.loadMenuEvent.bind(this, this.table.options.groupContextMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.groupClickMenu){\n\t\t\tthis.subscribe(\"group-click\", this.loadMenuEvent.bind(this, this.table.options.groupClickMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.groupDblClickMenu){\n\t\t\tthis.subscribe(\"group-dblclick\", this.loadMenuEvent.bind(this, this.table.options.groupDblClickMenu));\n\t\t}\n\t}\n\n\tinitializeColumn(column){\n\t\tvar\tdef = column.definition;\n\t\t\n\t\t//handle column events\n\t\tif(def.headerContextMenu && !this.columnSubscribers.headerContextMenu){\n\t\t\tthis.columnSubscribers.headerContextMenu = this.loadMenuTableColumnEvent.bind(this, \"headerContextMenu\");\n\t\t\tthis.subscribe(\"column-contextmenu\", this.columnSubscribers.headerContextMenu);\n\t\t\tthis.table.on(\"headerTapHold\", this.loadMenuTableColumnEvent.bind(this, \"headerContextMenu\"));\n\t\t}\n\t\t\n\t\tif(def.headerClickMenu && !this.columnSubscribers.headerClickMenu){\n\t\t\tthis.columnSubscribers.headerClickMenu = this.loadMenuTableColumnEvent.bind(this, \"headerClickMenu\");\n\t\t\tthis.subscribe(\"column-click\", this.columnSubscribers.headerClickMenu);\n\t\t}\n\t\t\n\t\tif(def.headerDblClickMenu && !this.columnSubscribers.headerDblClickMenu){\n\t\t\tthis.columnSubscribers.headerDblClickMenu = this.loadMenuTableColumnEvent.bind(this, \"headerDblClickMenu\");\n\t\t\tthis.subscribe(\"column-dblclick\", this.columnSubscribers.headerDblClickMenu);\n\t\t}\n\t\t\n\t\tif(def.headerMenu){\n\t\t\tthis.initializeColumnHeaderMenu(column);\n\t\t}\n\t\t\n\t\t//handle cell events\n\t\tif(def.contextMenu && !this.columnSubscribers.contextMenu){\n\t\t\tthis.columnSubscribers.contextMenu = this.loadMenuTableCellEvent.bind(this, \"contextMenu\");\n\t\t\tthis.subscribe(\"cell-contextmenu\", this.columnSubscribers.contextMenu);\n\t\t\tthis.table.on(\"cellTapHold\", this.loadMenuTableCellEvent.bind(this, \"contextMenu\"));\n\t\t}\n\t\t\n\t\tif(def.clickMenu && !this.columnSubscribers.clickMenu){\n\t\t\tthis.columnSubscribers.clickMenu = this.loadMenuTableCellEvent.bind(this, \"clickMenu\");\n\t\t\tthis.subscribe(\"cell-click\", this.columnSubscribers.clickMenu);\n\t\t}\n\t\t\n\t\tif(def.dblClickMenu && !this.columnSubscribers.dblClickMenu){\n\t\t\tthis.columnSubscribers.dblClickMenu = this.loadMenuTableCellEvent.bind(this, \"dblClickMenu\");\n\t\t\tthis.subscribe(\"cell-dblclick\", this.columnSubscribers.dblClickMenu);\n\t\t}\n\t}\n\t\n\tinitializeColumnHeaderMenu(column){\n\t\tvar icon = column.definition.headerMenuIcon,\n\t\theaderMenuEl;\n\t\t\n\t\theaderMenuEl = document.createElement(\"span\");\n\t\theaderMenuEl.classList.add(\"tabulator-header-popup-button\");\n\t\t\n\t\tif(icon){\n\t\t\tif(typeof icon === \"function\"){\n\t\t\t\ticon = icon(column.getComponent());\n\t\t\t}\n\t\t\t\n\t\t\tif(icon instanceof HTMLElement){\n\t\t\t\theaderMenuEl.appendChild(icon);\n\t\t\t}else{\n\t\t\t\theaderMenuEl.innerHTML = icon;\n\t\t\t}\n\t\t}else{\n\t\t\theaderMenuEl.innerHTML = \"&vellip;\";\n\t\t}\n\t\t\n\t\theaderMenuEl.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tthis.loadMenuEvent(column.definition.headerMenu, e, column);\n\t\t});\n\t\t\n\t\tcolumn.titleElement.insertBefore(headerMenuEl, column.titleElement.firstChild);\n\t}\n\t\n\tloadMenuTableCellEvent(option, e, cell){\n\t\tif(cell._cell){\n\t\t\tcell = cell._cell;\n\t\t}\n\t\t\n\t\tif(cell.column.definition[option]){\n\t\t\tthis.loadMenuEvent(cell.column.definition[option], e, cell);\n\t\t}\n\t}\n\t\n\tloadMenuTableColumnEvent(option, e, column){\n\t\tif(column._column){\n\t\t\tcolumn = column._column;\n\t\t}\n\t\t\n\t\tif(column.definition[option]){\n\t\t\tthis.loadMenuEvent(column.definition[option], e, column);\n\t\t}\n\t}\n\t\n\tloadMenuEvent(menu, e, component){\n\t\tif(component._group){\n\t\t\tcomponent = component._group;\n\t\t}else if(component._row){\n\t\t\tcomponent = component._row;\n\t\t}\n\t\t\n\t\tmenu = typeof menu == \"function\" ? menu.call(this.table, e, component.getComponent()) : menu;\n\t\t\n\t\tthis.loadMenu(e, component, menu);\n\t}\n\t\n\tloadMenu(e, component, menu, parentEl, parentPopup){\n\t\tvar touch = !(e instanceof MouseEvent),\t\t\n\t\tmenuEl = document.createElement(\"div\"),\n\t\tpopup;\n\t\t\n\t\tmenuEl.classList.add(\"tabulator-menu\");\n\t\t\n\t\tif(!touch){\n\t\t\te.preventDefault();\n\t\t}\n\t\t\n\t\t//abort if no menu set\n\t\tif(!menu || !menu.length){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif(!parentEl){\n\t\t\tif(this.nestedMenuBlock){\n\t\t\t\t//abort if child menu already open\n\t\t\t\tif(this.rootPopup){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.nestedMenuBlock = setTimeout(() => {\n\t\t\t\t\tthis.nestedMenuBlock = false;\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.rootPopup){\n\t\t\t\tthis.rootPopup.hide();\t\n\t\t\t}\n\t\t\t\n\t\t\tthis.rootPopup = popup = this.popup(menuEl);\n\t\t\t\n\t\t}else{\n\t\t\tpopup = parentPopup.child(menuEl);\n\t\t}\n\t\t\n\t\tmenu.forEach((item) => {\n\t\t\tvar itemEl = document.createElement(\"div\"),\n\t\t\tlabel = item.label,\n\t\t\tdisabled = item.disabled;\n\t\t\t\n\t\t\tif(item.separator){\n\t\t\t\titemEl.classList.add(\"tabulator-menu-separator\");\n\t\t\t}else{\n\t\t\t\titemEl.classList.add(\"tabulator-menu-item\");\n\t\t\t\t\n\t\t\t\tif(typeof label == \"function\"){\n\t\t\t\t\tlabel = label.call(this.table, component.getComponent());\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(label instanceof Node){\n\t\t\t\t\titemEl.appendChild(label);\n\t\t\t\t}else{\n\t\t\t\t\titemEl.innerHTML = label;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(typeof disabled == \"function\"){\n\t\t\t\t\tdisabled = disabled.call(this.table, component.getComponent());\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(disabled){\n\t\t\t\t\titemEl.classList.add(\"tabulator-menu-item-disabled\");\n\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tif(item.menu && item.menu.length){\n\t\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\tthis.loadMenu(e, component, item.menu, itemEl, popup);\n\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(item.action){\n\t\t\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\t\t\titem.action(e, component.getComponent());\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(item.menu && item.menu.length){\n\t\t\t\t\titemEl.classList.add(\"tabulator-menu-item-submenu\");\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tmenuEl.appendChild(itemEl);\n\t\t});\n\t\t\n\t\tmenuEl.addEventListener(\"click\", (e) => {\n\t\t\tif(this.rootPopup){\n\t\t\t\tthis.rootPopup.hide();\n\t\t\t}\n\t\t});\n\t\t\n\t\tpopup.show(parentEl || e);\n\t\t\n\t\tif(popup === this.rootPopup){\n\t\t\tthis.rootPopup.hideOnBlur(() => {\n\t\t\t\tthis.rootPopup = null;\n\t\t\t\t\n\t\t\t\tif(this.currentComponent){\n\t\t\t\t\tthis.dispatch(\"menu-closed\", menu, popup);\n\t\t\t\t\tthis.dispatchExternal(\"menuClosed\", this.currentComponent.getComponent());\n\t\t\t\t\tthis.currentComponent = null;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tthis.currentComponent = component;\n\t\t\t\n\t\t\tthis.dispatch(\"menu-opened\", menu, popup);\n\t\t\tthis.dispatchExternal(\"menuOpened\", component.getComponent());\n\t\t}\n\t}\n}\n","import Module from '../../core/Module.js';\nimport Helpers from '../../core/tools/Helpers.js';\n\nexport default class MoveColumns extends Module{\n\n\tstatic moduleName = \"moveColumn\";\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.placeholderElement = this.createPlaceholderElement();\n\t\tthis.hoverElement = false; //floating column header element\n\t\tthis.checkTimeout = false; //click check timeout holder\n\t\tthis.checkPeriod = 250; //period to wait on mousedown to consider this a move and not a click\n\t\tthis.moving = false; //currently moving column\n\t\tthis.toCol = false; //destination column\n\t\tthis.toColAfter = false; //position of moving column relative to the destination column\n\t\tthis.startX = 0; //starting position within header element\n\t\tthis.autoScrollMargin = 40; //auto scroll on edge when within margin\n\t\tthis.autoScrollStep = 5; //auto scroll distance in pixels\n\t\tthis.autoScrollTimeout = false; //auto scroll timeout\n\t\tthis.touchMove = false;\n\t\t\n\t\tthis.moveHover = this.moveHover.bind(this);\n\t\tthis.endMove = this.endMove.bind(this);\n\t\t\n\t\tthis.registerTableOption(\"movableColumns\", false); //enable movable columns\n\t}\n\t\n\tcreatePlaceholderElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-col\");\n\t\tel.classList.add(\"tabulator-col-placeholder\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.movableColumns){\n\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\t\tthis.subscribe(\"alert-show\", this.abortMove.bind(this));\n\t\t}\n\t}\n\n\tabortMove(){\n\t\tclearTimeout(this.checkTimeout);\n\t}\n\t\n\tinitializeColumn(column){\n\t\tvar self = this,\n\t\tconfig = {},\n\t\tcolEl;\n\n\t\tif(!column.modules.frozen && !column.isGroup && !column.isRowHeader){\n\t\t\tcolEl = column.getElement();\n\t\t\t\n\t\t\tconfig.mousemove = function(e){\n\t\t\t\tif(column.parent === self.moving.parent){\n\t\t\t\t\tif((((self.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(colEl).left) + self.table.columnManager.contentsElement.scrollLeft) > (column.getWidth() / 2)){\n\t\t\t\t\t\tif(self.toCol !== column || !self.toColAfter){\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl.nextSibling);\n\t\t\t\t\t\t\tself.moveColumn(column, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(self.toCol !== column || self.toColAfter){\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl);\n\t\t\t\t\t\t\tself.moveColumn(column, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(self);\n\t\t\t\n\t\t\tcolEl.addEventListener(\"mousedown\", function(e){\n\t\t\t\tself.touchMove = false;\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\n\t\t\t\t\t\tself.startMove(e, column);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tcolEl.addEventListener(\"mouseup\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tif(self.checkTimeout){\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tself.bindTouchEvents(column);\n\t\t}\n\t\t\n\t\tcolumn.modules.moveColumn = config;\n\t}\n\t\n\tbindTouchEvents(column){\n\t\tvar colEl = column.getElement(),\n\t\tstartXMove = false, //shifting center position of the cell\n\t\tnextCol, prevCol, nextColWidth, prevColWidth, nextColWidthLast, prevColWidthLast;\n\t\t\n\t\tcolEl.addEventListener(\"touchstart\", (e) => {\n\t\t\tthis.checkTimeout = setTimeout(() => {\n\t\t\t\tthis.touchMove = true;\n\t\t\t\tnextCol = column.nextColumn();\n\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth()/2 : 0;\n\t\t\t\tprevCol = column.prevColumn();\n\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth()/2 : 0;\n\t\t\t\tnextColWidthLast = 0;\n\t\t\t\tprevColWidthLast = 0;\n\t\t\t\tstartXMove = false;\n\t\t\t\t\n\t\t\t\tthis.startMove(e, column);\n\t\t\t}, this.checkPeriod);\n\t\t}, {passive: true});\n\t\t\n\t\tcolEl.addEventListener(\"touchmove\", (e) => {\n\t\t\tvar diff, moveToCol;\n\t\t\t\n\t\t\tif(this.moving){\n\t\t\t\tthis.moveHover(e);\n\t\t\t\t\n\t\t\t\tif(!startXMove){\n\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tdiff = e.touches[0].pageX - startXMove;\n\t\t\t\t\n\t\t\t\tif(diff > 0){\n\t\t\t\t\tif(nextCol && diff - nextColWidthLast > nextColWidth){\n\t\t\t\t\t\tmoveToCol = nextCol;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(moveToCol !== column){\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement().nextSibling);\n\t\t\t\t\t\t\tthis.moveColumn(moveToCol, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif(prevCol && -diff - prevColWidthLast >  prevColWidth){\n\t\t\t\t\t\tmoveToCol = prevCol;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(moveToCol !== column){\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement());\n\t\t\t\t\t\t\tthis.moveColumn(moveToCol, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(moveToCol){\n\t\t\t\t\tnextCol = moveToCol.nextColumn();\n\t\t\t\t\tnextColWidthLast = nextColWidth;\n\t\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\n\t\t\t\t\tprevCol = moveToCol.prevColumn();\n\t\t\t\t\tprevColWidthLast = prevColWidth;\n\t\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {passive: true});\n\t\t\n\t\tcolEl.addEventListener(\"touchend\", (e) => {\n\t\t\tif(this.checkTimeout){\n\t\t\t\tclearTimeout(this.checkTimeout);\n\t\t\t}\n\t\t\tif(this.moving){\n\t\t\t\tthis.endMove(e);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tstartMove(e, column){\n\t\tvar element = column.getElement(),\n\t\theaderElement = this.table.columnManager.getContentsElement(),\n\t\theadersElement = this.table.columnManager.getHeadersElement();\n\t\t\n\t\tthis.moving = column;\n\t\tthis.startX = (this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(element).left;\n\t\t\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\n\t\t\n\t\t//create placeholder\n\t\tthis.placeholderElement.style.width = column.getWidth() + \"px\";\n\t\tthis.placeholderElement.style.height = column.getHeight() + \"px\";\n\t\t\n\t\telement.parentNode.insertBefore(this.placeholderElement, element);\n\t\telement.parentNode.removeChild(element);\n\t\t\n\t\t//create hover element\n\t\tthis.hoverElement = element.cloneNode(true);\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\n\t\t\n\t\theaderElement.appendChild(this.hoverElement);\n\t\t\n\t\tthis.hoverElement.style.left = \"0\";\n\t\tthis.hoverElement.style.bottom = (headerElement.clientHeight - headersElement.offsetHeight) + \"px\";\n\t\t\n\t\tif(!this.touchMove){\n\t\t\tthis._bindMouseMove();\n\t\t\t\n\t\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\n\t\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\n\t\t}\n\t\t\n\t\tthis.moveHover(e);\n\t}\n\t\n\t_bindMouseMove(){\n\t\tthis.table.columnManager.columnsByIndex.forEach(function(column){\n\t\t\tif(column.modules.moveColumn.mousemove){\n\t\t\t\tcolumn.getElement().addEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t_unbindMouseMove(){\n\t\tthis.table.columnManager.columnsByIndex.forEach(function(column){\n\t\t\tif(column.modules.moveColumn.mousemove){\n\t\t\t\tcolumn.getElement().removeEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tmoveColumn(column, after){\n\t\tvar movingCells = this.moving.getCells();\n\t\t\n\t\tthis.toCol = column;\n\t\tthis.toColAfter = after;\n\t\t\n\t\tif(after){\n\t\t\tcolumn.getCells().forEach(function(cell, i){\n\t\t\t\tvar cellEl = cell.getElement(true);\n\t\t\t\t\n\t\t\t\tif(cellEl.parentNode && movingCells[i]){\n\t\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl.nextSibling);\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tcolumn.getCells().forEach(function(cell, i){\n\t\t\t\tvar cellEl = cell.getElement(true);\n\t\t\t\t\n\t\t\t\tif(cellEl.parentNode && movingCells[i]){\n\t\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\tendMove(e){\n\t\tif(e.which === 1 || this.touchMove){\n\t\t\tthis._unbindMouseMove();\n\t\t\t\n\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\n\t\t\t\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\n\t\t\t\n\t\t\tif(this.toCol){\n\t\t\t\tthis.table.columnManager.moveColumnActual(this.moving, this.toCol, this.toColAfter);\n\t\t\t}\n\t\t\t\n\t\t\tthis.moving = false;\n\t\t\tthis.toCol = false;\n\t\t\tthis.toColAfter = false;\n\t\t\t\n\t\t\tif(!this.touchMove){\n\t\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\n\t\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tmoveHover(e){\n\t\tvar columnHolder = this.table.columnManager.getContentsElement(),\n\t\tscrollLeft = columnHolder.scrollLeft,\n\t\txPos = ((this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(columnHolder).left) + scrollLeft,\n\t\tscrollPos;\n\t\t\n\t\tthis.hoverElement.style.left = (xPos - this.startX) + \"px\";\n\t\t\n\t\tif(xPos - scrollLeft < this.autoScrollMargin){\n\t\t\tif(!this.autoScrollTimeout){\n\t\t\t\tthis.autoScrollTimeout = setTimeout(() => {\n\t\t\t\t\tscrollPos = Math.max(0,scrollLeft-5);\n\t\t\t\t\tthis.table.rowManager.getElement().scrollLeft = scrollPos;\n\t\t\t\t\tthis.autoScrollTimeout = false;\n\t\t\t\t}, 1);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(scrollLeft + columnHolder.clientWidth - xPos < this.autoScrollMargin){\n\t\t\tif(!this.autoScrollTimeout){\n\t\t\t\tthis.autoScrollTimeout = setTimeout(() => {\n\t\t\t\t\tscrollPos = Math.min(columnHolder.clientWidth, scrollLeft+5);\n\t\t\t\t\tthis.table.rowManager.getElement().scrollLeft = scrollPos;\n\t\t\t\t\tthis.autoScrollTimeout = false;\n\t\t\t\t}, 1);\n\t\t\t}\n\t\t}\n\t}\n}","export default {\r\n\tdelete:function(fromRow, toRow, toTable){\r\n\t\tfromRow.delete();\r\n\t}\r\n};","export default{\r\n\tinsert:function(fromRow, toRow, fromTable){\r\n\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\r\n\t\treturn true;\r\n\t},\r\n\r\n\tadd:function(fromRow, toRow, fromTable){\r\n\t\tthis.table.addRow(fromRow.getData());\r\n\t\treturn true;\r\n\t},\r\n\r\n\tupdate:function(fromRow, toRow, fromTable){\r\n\t\tif(toRow){\r\n\t\t\ttoRow.update(fromRow.getData());\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n\treplace:function(fromRow, toRow, fromTable){\r\n\t\tif(toRow){\r\n\t\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\r\n\t\t\ttoRow.delete();\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n};","import Module from '../../core/Module.js';\nimport Helpers from '../../core/tools/Helpers.js';\n\nimport defaultSenders from './defaults/senders.js';\nimport defaultReceivers from './defaults/receivers.js';\n\nexport default class MoveRows extends Module{\n\n\tstatic moduleName = \"moveRow\";\n\n\t//load defaults\n\tstatic senders = defaultSenders;\n\tstatic receivers = defaultReceivers;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.placeholderElement = this.createPlaceholderElement();\n\t\tthis.hoverElement = false; //floating row header element\n\t\tthis.checkTimeout = false; //click check timeout holder\n\t\tthis.checkPeriod = 150; //period to wait on mousedown to consider this a move and not a click\n\t\tthis.moving = false; //currently moving row\n\t\tthis.toRow = false; //destination row\n\t\tthis.toRowAfter = false; //position of moving row relative to the destination row\n\t\tthis.hasHandle = false; //row has handle instead of fully movable row\n\t\tthis.startY = 0; //starting Y position within header element\n\t\tthis.startX = 0; //starting X position within header element\n\n\t\tthis.moveHover = this.moveHover.bind(this);\n\t\tthis.endMove = this.endMove.bind(this);\n\t\tthis.tableRowDropEvent = false;\n\n\t\tthis.touchMove = false;\n\n\t\tthis.connection = false;\n\t\tthis.connectionSelectorsTables = false;\n\t\tthis.connectionSelectorsElements = false;\n\t\tthis.connectionElements = [];\n\t\tthis.connections = [];\n\n\t\tthis.connectedTable = false;\n\t\tthis.connectedRow = false;\n\n\t\tthis.registerTableOption(\"movableRows\", false); //enable movable rows\n\t\tthis.registerTableOption(\"movableRowsConnectedTables\", false); //tables for movable rows to be connected to\n\t\tthis.registerTableOption(\"movableRowsConnectedElements\", false); //other elements for movable rows to be connected to\n\t\tthis.registerTableOption(\"movableRowsSender\", false);\n\t\tthis.registerTableOption(\"movableRowsReceiver\", \"insert\");\n\n\t\tthis.registerColumnOption(\"rowHandle\");\n\t}\n\n\tcreatePlaceholderElement(){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-row\");\n\t\tel.classList.add(\"tabulator-row-placeholder\");\n\n\t\treturn el;\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.movableRows){\n\t\t\tthis.connectionSelectorsTables = this.table.options.movableRowsConnectedTables;\n\t\t\tthis.connectionSelectorsElements = this.table.options.movableRowsConnectedElements;\n\n\t\t\tthis.connection = this.connectionSelectorsTables || this.connectionSelectorsElements;\n\n\t\t\tthis.subscribe(\"cell-init\", this.initializeCell.bind(this));\n\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t}\n\t}\n\n\tinitializeGroupHeader(group){\n\t\tvar self = this,\n\t\tconfig = {};\n\n\t\t//inter table drag drop\n\t\tconfig.mouseup = function(e){\n\t\t\tself.tableRowDrop(e, group);\n\t\t}.bind(self);\n\n\t\t//same table drag drop\n\t\tconfig.mousemove = function(e){\n\t\t\tvar rowEl;\n\n\t\t\tif(((e.pageY - Helpers.elOffset(group.element).top) + self.table.rowManager.element.scrollTop) > (group.getHeight() / 2)){\n\t\t\t\tif(self.toRow !== group || !self.toRowAfter){\n\t\t\t\t\trowEl = group.getElement();\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n\t\t\t\t\tself.moveRow(group, true);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(self.toRow !== group || self.toRowAfter){\n\t\t\t\t\trowEl = group.getElement();\n\t\t\t\t\tif(rowEl.previousSibling){\n\t\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n\t\t\t\t\t\tself.moveRow(group, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(self);\n\n\t\tgroup.modules.moveRow = config;\n\t}\n\n\tinitializeRow(row){\n\t\tvar self = this,\n\t\tconfig = {},\n\t\trowEl;\n\n\t\t//inter table drag drop\n\t\tconfig.mouseup = function(e){\n\t\t\tself.tableRowDrop(e, row);\n\t\t}.bind(self);\n\n\t\t//same table drag drop\n\t\tconfig.mousemove = function(e){\n\t\t\tvar rowEl = row.getElement();\n\n\t\t\tif(((e.pageY - Helpers.elOffset(rowEl).top) + self.table.rowManager.element.scrollTop) > (row.getHeight() / 2)){\n\t\t\t\tif(self.toRow !== row || !self.toRowAfter){\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n\t\t\t\t\tself.moveRow(row, true);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(self.toRow !== row || self.toRowAfter){\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n\t\t\t\t\tself.moveRow(row, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(self);\n\n\n\t\tif(!this.hasHandle){\n\n\t\t\trowEl = row.getElement();\n\n\t\t\trowEl.addEventListener(\"mousedown\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\n\t\t\t\t\t\tself.startMove(e, row);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\trowEl.addEventListener(\"mouseup\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tif(self.checkTimeout){\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.bindTouchEvents(row, row.getElement());\n\t\t}\n\n\t\trow.modules.moveRow = config;\n\t}\n\n\tinitializeColumn(column){\n\t\tif(column.definition.rowHandle && this.table.options.movableRows !== false){\n\t\t\tthis.hasHandle = true;\n\t\t}\n\t}\n\n\tinitializeCell(cell){\n\t\tif(cell.column.definition.rowHandle && this.table.options.movableRows !== false){\n\t\t\tvar self = this,\n\t\t\tcellEl = cell.getElement(true);\n\n\t\t\tcellEl.addEventListener(\"mousedown\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\n\t\t\t\t\t\tself.startMove(e, cell.row);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tcellEl.addEventListener(\"mouseup\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tif(self.checkTimeout){\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.bindTouchEvents(cell.row, cellEl);\n\t\t}\n\t}\n\n\tbindTouchEvents(row, element){\n\t\tvar startYMove = false, //shifting center position of the cell\n\t\tnextRow, prevRow, nextRowHeight, prevRowHeight, nextRowHeightLast, prevRowHeightLast;\n\n\t\telement.addEventListener(\"touchstart\", (e) => {\n\t\t\tthis.checkTimeout = setTimeout(() => {\n\t\t\t\tthis.touchMove = true;\n\t\t\t\tnextRow = row.nextRow();\n\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight()/2 : 0;\n\t\t\t\tprevRow = row.prevRow();\n\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight()/2 : 0;\n\t\t\t\tnextRowHeightLast = 0;\n\t\t\t\tprevRowHeightLast = 0;\n\t\t\t\tstartYMove = false;\n\n\t\t\t\tthis.startMove(e, row);\n\t\t\t}, this.checkPeriod);\n\t\t}, {passive: true});\n\t\tthis.moving, this.toRow, this.toRowAfter;\n\t\telement.addEventListener(\"touchmove\", (e) => {\n\n\t\t\tvar diff, moveToRow;\n\n\t\t\tif(this.moving){\n\t\t\t\te.preventDefault();\n\n\t\t\t\tthis.moveHover(e);\n\n\t\t\t\tif(!startYMove){\n\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t}\n\n\t\t\t\tdiff = e.touches[0].pageY - startYMove;\n\n\t\t\t\tif(diff > 0){\n\t\t\t\t\tif(nextRow && diff - nextRowHeightLast > nextRowHeight){\n\t\t\t\t\t\tmoveToRow = nextRow;\n\n\t\t\t\t\t\tif(moveToRow !== row){\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement().nextSibling);\n\t\t\t\t\t\t\tthis.moveRow(moveToRow, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif(prevRow && -diff - prevRowHeightLast >  prevRowHeight){\n\t\t\t\t\t\tmoveToRow = prevRow;\n\n\t\t\t\t\t\tif(moveToRow !== row){\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement());\n\t\t\t\t\t\t\tthis.moveRow(moveToRow, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(moveToRow){\n\t\t\t\t\tnextRow = moveToRow.nextRow();\n\t\t\t\t\tnextRowHeightLast = nextRowHeight;\n\t\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\n\t\t\t\t\tprevRow = moveToRow.prevRow();\n\t\t\t\t\tprevRowHeightLast = prevRowHeight;\n\t\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\telement.addEventListener(\"touchend\", (e) => {\n\t\t\tif(this.checkTimeout){\n\t\t\t\tclearTimeout(this.checkTimeout);\n\t\t\t}\n\t\t\tif(this.moving){\n\t\t\t\tthis.endMove(e);\n\t\t\t\tthis.touchMove = false;\n\t\t\t}\n\t\t});\n\t}\n\n\t_bindMouseMove(){\n\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\n\t\t\tif((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow && row.modules.moveRow.mousemove){\n\t\t\t\trow.getElement().addEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\n\t_unbindMouseMove(){\n\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\n\t\t\tif((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow && row.modules.moveRow.mousemove){\n\t\t\t\trow.getElement().removeEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\n\tstartMove(e, row){\n\t\tvar element = row.getElement();\n\n\t\tthis.setStartPosition(e, row);\n\n\t\tthis.moving = row;\n\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\n\n\t\t//create placeholder\n\t\tthis.placeholderElement.style.width = row.getWidth() + \"px\";\n\t\tthis.placeholderElement.style.height = row.getHeight() + \"px\";\n\n\t\tif(!this.connection){\n\t\t\telement.parentNode.insertBefore(this.placeholderElement, element);\n\t\t\telement.parentNode.removeChild(element);\n\t\t}else{\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-sending\");\n\t\t\tthis.connectToTables(row);\n\t\t}\n\n\t\t//create hover element\n\t\tthis.hoverElement = element.cloneNode(true);\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\n\n\t\tif(this.connection){\n\t\t\tdocument.body.appendChild(this.hoverElement);\n\t\t\tthis.hoverElement.style.left = \"0\";\n\t\t\tthis.hoverElement.style.top = \"0\";\n\t\t\tthis.hoverElement.style.width = this.table.element.clientWidth + \"px\";\n\t\t\tthis.hoverElement.style.whiteSpace = \"nowrap\";\n\t\t\tthis.hoverElement.style.overflow = \"hidden\";\n\t\t\tthis.hoverElement.style.pointerEvents = \"none\";\n\t\t}else{\n\t\t\tthis.table.rowManager.getTableElement().appendChild(this.hoverElement);\n\n\t\t\tthis.hoverElement.style.left = \"0\";\n\t\t\tthis.hoverElement.style.top = \"0\";\n\n\t\t\tthis._bindMouseMove();\n\t\t}\n\n\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\n\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\n\n\t\tthis.dispatchExternal(\"rowMoving\", row.getComponent());\n\n\t\tthis.moveHover(e);\n\t}\n\n\tsetStartPosition(e, row){\n\t\tvar pageX = this.touchMove ? e.touches[0].pageX : e.pageX,\n\t\tpageY = this.touchMove ? e.touches[0].pageY : e.pageY,\n\t\telement, position;\n\n\t\telement = row.getElement();\n\t\tif(this.connection){\n\t\t\tposition = element.getBoundingClientRect();\n\n\t\t\tthis.startX = position.left - pageX + window.pageXOffset;\n\t\t\tthis.startY = position.top - pageY + window.pageYOffset;\n\t\t}else{\n\t\t\tthis.startY = (pageY - element.getBoundingClientRect().top);\n\t\t}\n\t}\n\n\tendMove(e){\n\t\tif(!e || e.which === 1 || this.touchMove){\n\t\t\tthis._unbindMouseMove();\n\n\t\t\tif(!this.connection){\n\t\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n\t\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\n\t\t\t}\n\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\n\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\t\tif(this.toRow){\n\t\t\t\tthis.table.rowManager.moveRow(this.moving, this.toRow, this.toRowAfter);\n\t\t\t}else{\n\t\t\t\tthis.dispatchExternal(\"rowMoveCancelled\", this.moving.getComponent());\n\t\t\t}\n\n\t\t\tthis.moving = false;\n\t\t\tthis.toRow = false;\n\t\t\tthis.toRowAfter = false;\n\n\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\n\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\n\n\t\t\tif(this.connection){\n\t\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-sending\");\n\t\t\t\tthis.disconnectFromTables();\n\t\t\t}\n\t\t}\n\t}\n\n\tmoveRow(row, after){\n\t\tthis.toRow = row;\n\t\tthis.toRowAfter = after;\n\t}\n\n\tmoveHover(e){\n\t\tif(this.connection){\n\t\t\tthis.moveHoverConnections.call(this, e);\n\t\t}else{\n\t\t\tthis.moveHoverTable.call(this, e);\n\t\t}\n\t}\n\n\tmoveHoverTable(e){\n\t\tvar rowHolder = this.table.rowManager.getElement(),\n\t\tscrollTop = rowHolder.scrollTop,\n\t\tyPos = ((this.touchMove ? e.touches[0].pageY : e.pageY) - rowHolder.getBoundingClientRect().top) + scrollTop;\n\t\t\n\t\tthis.hoverElement.style.top = Math.min(yPos - this.startY, this.table.rowManager.element.scrollHeight - this.hoverElement.offsetHeight) + \"px\";\n\t}\n\n\tmoveHoverConnections(e){\n\t\tthis.hoverElement.style.left = (this.startX + (this.touchMove ? e.touches[0].pageX : e.pageX)) + \"px\";\n\t\tthis.hoverElement.style.top = (this.startY + (this.touchMove ? e.touches[0].pageY : e.pageY)) + \"px\";\n\t}\n\n\telementRowDrop(e, element, row){\n\t\tthis.dispatchExternal(\"movableRowsElementDrop\", e, element, row ? row.getComponent() : false);\n\t}\n\n\t//establish connection with other tables\n\tconnectToTables(row){\n\t\tvar connectionTables;\n\n\t\tif(this.connectionSelectorsTables){\n\t\t\tconnectionTables = this.commsConnections(this.connectionSelectorsTables);\n\n\t\t\tthis.dispatchExternal(\"movableRowsSendingStart\", connectionTables);\n\n\t\t\tthis.commsSend(this.connectionSelectorsTables, \"moveRow\", \"connect\", {\n\t\t\t\trow:row,\n\t\t\t});\n\t\t}\n\n\t\tif(this.connectionSelectorsElements){\n\n\t\t\tthis.connectionElements = [];\n\n\t\t\tif(!Array.isArray(this.connectionSelectorsElements)){\n\t\t\t\tthis.connectionSelectorsElements = [this.connectionSelectorsElements];\n\t\t\t}\n\n\t\t\tthis.connectionSelectorsElements.forEach((query) => {\n\t\t\t\tif(typeof query === \"string\"){\n\t\t\t\t\tthis.connectionElements = this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(query)));\n\t\t\t\t}else{\n\t\t\t\t\tthis.connectionElements.push(query);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.connectionElements.forEach((element) => {\n\t\t\t\tvar dropEvent = (e) => {\n\t\t\t\t\tthis.elementRowDrop(e, element, this.moving);\n\t\t\t\t};\n\n\t\t\t\telement.addEventListener(\"mouseup\", dropEvent);\n\t\t\t\telement.tabulatorElementDropEvent = dropEvent;\n\n\t\t\t\telement.classList.add(\"tabulator-movingrow-receiving\");\n\t\t\t});\n\t\t}\n\t}\n\n\t//disconnect from other tables\n\tdisconnectFromTables(){\n\t\tvar connectionTables;\n\n\t\tif(this.connectionSelectorsTables){\n\t\t\tconnectionTables = this.commsConnections(this.connectionSelectorsTables);\n\n\t\t\tthis.dispatchExternal(\"movableRowsSendingStop\", connectionTables);\n\n\t\t\tthis.commsSend(this.connectionSelectorsTables, \"moveRow\", \"disconnect\");\n\t\t}\n\n\t\tthis.connectionElements.forEach((element) => {\n\t\t\telement.classList.remove(\"tabulator-movingrow-receiving\");\n\t\t\telement.removeEventListener(\"mouseup\", element.tabulatorElementDropEvent);\n\t\t\tdelete element.tabulatorElementDropEvent;\n\t\t});\n\t}\n\n\t//accept incomming connection\n\tconnect(table, row){\n\t\tif(!this.connectedTable){\n\t\t\tthis.connectedTable = table;\n\t\t\tthis.connectedRow = row;\n\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-receiving\");\n\n\t\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\n\t\t\t\tif(row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup){\n\t\t\t\t\trow.getElement().addEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.tableRowDropEvent = this.tableRowDrop.bind(this);\n\n\t\t\tthis.table.element.addEventListener(\"mouseup\", this.tableRowDropEvent);\n\n\t\t\tthis.dispatchExternal(\"movableRowsReceivingStart\", row, table);\n\n\t\t\treturn true;\n\t\t}else{\n\t\t\tconsole.warn(\"Move Row Error - Table cannot accept connection, already connected to table:\", this.connectedTable);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//close incoming connection\n\tdisconnect(table){\n\t\tif(table === this.connectedTable){\n\t\t\tthis.connectedTable = false;\n\t\t\tthis.connectedRow = false;\n\n\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-receiving\");\n\n\t\t\tthis.table.rowManager.getDisplayRows().forEach((row) =>{\n\t\t\t\tif(row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup){\n\t\t\t\t\trow.getElement().removeEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.table.element.removeEventListener(\"mouseup\", this.tableRowDropEvent);\n\n\t\t\tthis.dispatchExternal(\"movableRowsReceivingStop\", table);\n\t\t}else{\n\t\t\tconsole.warn(\"Move Row Error - trying to disconnect from non connected table\");\n\t\t}\n\t}\n\n\tdropComplete(table, row, success){\n\t\tvar sender = false;\n\n\t\tif(success){\n\n\t\t\tswitch(typeof this.table.options.movableRowsSender){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tsender = MoveRows.senders[this.table.options.movableRowsSender];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tsender = this.table.options.movableRowsSender;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif(sender){\n\t\t\t\tsender.call(this, this.moving ? this.moving.getComponent() : undefined, row ? row.getComponent() : undefined, table);\n\t\t\t}else{\n\t\t\t\tif(this.table.options.movableRowsSender){\n\t\t\t\t\tconsole.warn(\"Mover Row Error - no matching sender found:\", this.table.options.movableRowsSender);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.dispatchExternal(\"movableRowsSent\", this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n\t\t}else{\n\t\t\tthis.dispatchExternal(\"movableRowsSentFailed\", this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n\t\t}\n\n\t\tthis.endMove();\n\t}\n\n\ttableRowDrop(e, row){\n\t\tvar receiver = false,\n\t\tsuccess = false;\n\n\t\te.stopImmediatePropagation();\n\n\t\tswitch(typeof this.table.options.movableRowsReceiver){\n\t\t\tcase \"string\":\n\t\t\t\treceiver = MoveRows.receivers[this.table.options.movableRowsReceiver];\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\treceiver = this.table.options.movableRowsReceiver;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(receiver){\n\t\t\tsuccess = receiver.call(this, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t}else{\n\t\t\tconsole.warn(\"Mover Row Error - no matching receiver found:\", this.table.options.movableRowsReceiver);\n\t\t}\n\n\t\tif(success){\n\t\t\tthis.dispatchExternal(\"movableRowsReceived\", this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t}else{\n\t\t\tthis.dispatchExternal(\"movableRowsReceivedFailed\", this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t}\n\n\t\tthis.commsSend(this.connectedTable, \"moveRow\", \"dropcomplete\", {\n\t\t\trow:row,\n\t\t\tsuccess:success,\n\t\t});\n\t}\n\n\tcommsReceived(table, action, data){\n\t\tswitch(action){\n\t\t\tcase \"connect\":\n\t\t\t\treturn this.connect(table, data.row);\n\n\t\t\tcase \"disconnect\":\n\t\t\t\treturn this.disconnect(table);\n\n\t\t\tcase \"dropcomplete\":\n\t\t\t\treturn this.dropComplete(table, data.row, data.success);\n\t\t}\n\t}\n}","export default {};","import Module from '../../core/Module.js';\n\nimport defaultMutators from './defaults/mutators.js';\n\nexport default class Mutator extends Module{\n\n\tstatic moduleName = \"mutator\";\n\n\t//load defaults\n\tstatic mutators = defaultMutators;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.allowedTypes = [\"\", \"data\", \"edit\", \"clipboard\"]; //list of mutation types\n\t\tthis.enabled = true;\n\n\t\tthis.registerColumnOption(\"mutator\");\n\t\tthis.registerColumnOption(\"mutatorParams\");\n\t\tthis.registerColumnOption(\"mutatorData\");\n\t\tthis.registerColumnOption(\"mutatorDataParams\");\n\t\tthis.registerColumnOption(\"mutatorEdit\");\n\t\tthis.registerColumnOption(\"mutatorEditParams\");\n\t\tthis.registerColumnOption(\"mutatorClipboard\");\n\t\tthis.registerColumnOption(\"mutatorClipboardParams\");\n\t\tthis.registerColumnOption(\"mutateLink\");\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"cell-value-changing\", this.transformCell.bind(this));\n\t\tthis.subscribe(\"cell-value-changed\", this.mutateLink.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"row-data-init-before\", this.rowDataChanged.bind(this));\n\t\tthis.subscribe(\"row-data-changing\", this.rowDataChanged.bind(this));\n\t}\n\n\trowDataChanged(row, tempData, updatedData){\n\t\treturn this.transformRow(tempData, \"data\", updatedData);\n\t}\n\n\t//initialize column mutator\n\tinitializeColumn(column){\n\t\tvar match = false,\n\t\tconfig = {};\n\n\t\tthis.allowedTypes.forEach((type) => {\n\t\t\tvar key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\t\tmutator;\n\n\t\t\tif(column.definition[key]){\n\t\t\t\tmutator = this.lookupMutator(column.definition[key]);\n\n\t\t\t\tif(mutator){\n\t\t\t\t\tmatch = true;\n\n\t\t\t\t\tconfig[key] = {\n\t\t\t\t\t\tmutator:mutator,\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {},\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(match){\n\t\t\tcolumn.modules.mutate = config;\n\t\t}\n\t}\n\n\tlookupMutator(value){\n\t\tvar mutator = false;\n\n\t\t//set column mutator\n\t\tswitch(typeof value){\n\t\t\tcase \"string\":\n\t\t\t\tif(Mutator.mutators[value]){\n\t\t\t\t\tmutator = Mutator.mutators[value];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Mutator Error - No such mutator found, ignoring: \", value);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tmutator = value;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn mutator;\n\t}\n\n\t//apply mutator to row\n\ttransformRow(data, type, updatedData){\n\t\tvar key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\tvalue;\n\n\t\tif(this.enabled){\n\n\t\t\tthis.table.columnManager.traverse((column) => {\n\t\t\t\tvar mutator, params, component;\n\n\t\t\t\tif(column.modules.mutate){\n\t\t\t\t\tmutator = column.modules.mutate[key] || column.modules.mutate.mutator || false;\n\n\t\t\t\t\tif(mutator){\n\t\t\t\t\t\tvalue = column.getFieldValue(typeof updatedData !== \"undefined\" ? updatedData : data);\n\n\t\t\t\t\t\tif((type == \"data\" && !updatedData)|| typeof value !== \"undefined\"){\n\t\t\t\t\t\t\tcomponent = column.getComponent();\n\t\t\t\t\t\t\tparams = typeof mutator.params === \"function\" ? mutator.params(value, data, type, component) : mutator.params;\n\t\t\t\t\t\t\tcolumn.setFieldValue(data, mutator.mutator(value, data, type, params, component));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t//apply mutator to new cell value\n\ttransformCell(cell, value){\n\t\tif(cell.column.modules.mutate){\n\t\t\tvar mutator = cell.column.modules.mutate.mutatorEdit || cell.column.modules.mutate.mutator || false,\n\t\t\ttempData = {};\n\n\t\t\tif(mutator){\n\t\t\t\ttempData = Object.assign(tempData, cell.row.getData());\n\t\t\t\tcell.column.setFieldValue(tempData, value);\n\t\t\t\treturn mutator.mutator(value, tempData, \"edit\", mutator.params, cell.getComponent());\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tmutateLink(cell){\n\t\tvar links = cell.column.definition.mutateLink;\n\n\t\tif(links){\n\t\t\tif(!Array.isArray(links)){\n\t\t\t\tlinks = [links];\n\t\t\t}\n\n\t\t\tlinks.forEach((link) => {\n\t\t\t\tvar linkCell = cell.row.getCell(link);\n\n\t\t\t\tif(linkCell){\n\t\t\t\t\tlinkCell.setValue(linkCell.getValue(), true, true);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tenable(){\n\t\tthis.enabled = true;\n\t}\n\n\tdisable(){\n\t\tthis.enabled = false;\n\t}\n}","export default function(pageSize, currentRow, currentPage, totalRows, totalPages){\n\tvar el = document.createElement(\"span\"),\n\tshowingEl = document.createElement(\"span\"),\n\tvalueEl = document.createElement(\"span\"),\n\tofEl = document.createElement(\"span\"),\n\ttotalEl = document.createElement(\"span\"),\n\trowsEl = document.createElement(\"span\");\n\n\tthis.table.modules.localize.langBind(\"pagination|counter|showing\", (value) => {\n\t\tshowingEl.innerHTML = value;\n\t});\n\n\tthis.table.modules.localize.langBind(\"pagination|counter|of\", (value) => {\n\t\tofEl.innerHTML = value;\n\t});\n\n\tthis.table.modules.localize.langBind(\"pagination|counter|rows\", (value) => {\n\t\trowsEl.innerHTML = value;\n\t});\n\n\tif(totalRows){\n\t\tvalueEl.innerHTML = \" \" + currentRow + \"-\" + Math.min((currentRow + pageSize - 1), totalRows) + \" \";\n\t\t\n\t\ttotalEl.innerHTML = \" \" + totalRows + \" \";\n\t\t\n\t\tel.appendChild(showingEl);\n\t\tel.appendChild(valueEl);\n\t\tel.appendChild(ofEl);\n\t\tel.appendChild(totalEl);\n\t\tel.appendChild(rowsEl);\n\t}else{\n\t\tvalueEl.innerHTML = \" 0 \";\n\n\t\tel.appendChild(showingEl);\n\t\tel.appendChild(valueEl);\n\t\tel.appendChild(rowsEl);\n\t}\n\t\n\treturn el;\n}","export default function(pageSize, currentRow, currentPage, totalRows, totalPages){\n\n\tvar el = document.createElement(\"span\"),\n\tshowingEl = document.createElement(\"span\"),\n\tvalueEl = document.createElement(\"span\"),\n\tofEl = document.createElement(\"span\"),\n\ttotalEl = document.createElement(\"span\"),\n\trowsEl = document.createElement(\"span\");\n\t\n\tthis.table.modules.localize.langBind(\"pagination|counter|showing\", (value) => {\n\t\tshowingEl.innerHTML = value;\n\t});\n\t\n\tvalueEl.innerHTML = \" \" + currentPage + \" \";\n\t\n\tthis.table.modules.localize.langBind(\"pagination|counter|of\", (value) => {\n\t\tofEl.innerHTML = value;\n\t});\n\t\n\ttotalEl.innerHTML = \" \" + totalPages + \" \";\n\t\n\tthis.table.modules.localize.langBind(\"pagination|counter|pages\", (value) => {\n\t\trowsEl.innerHTML = value;\n\t});\n\t\n\tel.appendChild(showingEl);\n\tel.appendChild(valueEl);\n\tel.appendChild(ofEl);\n\tel.appendChild(totalEl);\n\tel.appendChild(rowsEl);\n\t\n\treturn el;\n}","import rows from './pageCounters/rows.js';\nimport pages from './pageCounters/pages.js';\n\n\nexport default {\n\trows:rows,\n\tpages:pages,\n};","import Module from '../../core/Module.js';\n\nimport defaultPageCounters from './defaults/pageCounters.js';\n\nexport default class Page extends Module{\n\n\tstatic moduleName = \"page\";\n\n\t//load defaults\n\tstatic pageCounters = defaultPageCounters;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.mode = \"local\";\n\t\tthis.progressiveLoad = false;\n\t\t\n\t\tthis.element = null;\n\t\tthis.pageCounterElement = null;\n\t\tthis.pageCounter = null;\n\t\t\n\t\tthis.size = 0;\n\t\tthis.page = 1;\n\t\tthis.count = 5;\n\t\tthis.max = 1;\n\n\t\tthis.remoteRowCountEstimate = null;\n\t\t\n\t\tthis.initialLoad = true;\n\t\tthis.dataChanging = false; //flag to check if data is being changed by this module\n\t\t\n\t\tthis.pageSizes = [];\n\t\t\n\t\tthis.registerTableOption(\"pagination\", false); //set pagination type\n\t\tthis.registerTableOption(\"paginationMode\", \"local\"); //local or remote pagination\n\t\tthis.registerTableOption(\"paginationSize\", false); //set number of rows to a page\n\t\tthis.registerTableOption(\"paginationInitialPage\", 1); //initial page to show on load\n\t\tthis.registerTableOption(\"paginationCounter\", false);  // set pagination counter\n\t\tthis.registerTableOption(\"paginationCounterElement\", false);  // set pagination counter\n\t\tthis.registerTableOption(\"paginationButtonCount\", 5);  // set count of page button\n\t\tthis.registerTableOption(\"paginationSizeSelector\", false); //add pagination size selector element\n\t\tthis.registerTableOption(\"paginationElement\", false); //element to hold pagination numbers\n\t\t// this.registerTableOption(\"paginationDataSent\", {}); //pagination data sent to the server\n\t\t// this.registerTableOption(\"paginationDataReceived\", {}); //pagination data received from the server\n\t\tthis.registerTableOption(\"paginationAddRow\", \"page\"); //add rows on table or page\n\t\t\n\t\tthis.registerTableOption(\"progressiveLoad\", false); //progressive loading\n\t\tthis.registerTableOption(\"progressiveLoadDelay\", 0); //delay between requests\n\t\tthis.registerTableOption(\"progressiveLoadScrollMargin\", 0); //margin before scroll begins\n\t\t\n\t\tthis.registerTableFunction(\"setMaxPage\", this.setMaxPage.bind(this));\n\t\tthis.registerTableFunction(\"setPage\", this.setPage.bind(this));\n\t\tthis.registerTableFunction(\"setPageToRow\", this.userSetPageToRow.bind(this));\n\t\tthis.registerTableFunction(\"setPageSize\", this.userSetPageSize.bind(this));\n\t\tthis.registerTableFunction(\"getPageSize\", this.getPageSize.bind(this));\n\t\tthis.registerTableFunction(\"previousPage\", this.previousPage.bind(this));\n\t\tthis.registerTableFunction(\"nextPage\", this.nextPage.bind(this));\n\t\tthis.registerTableFunction(\"getPage\", this.getPage.bind(this));\n\t\tthis.registerTableFunction(\"getPageMax\", this.getPageMax.bind(this));\n\t\t\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"pageTo\", this.setPageToRow.bind(this));\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.pagination){\n\t\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"row-added\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"data-processed\", this.initialLoadComplete.bind(this));\n\t\t\tthis.subscribe(\"table-built\", this.calculatePageSizes.bind(this));\n\t\t\tthis.subscribe(\"footer-redraw\", this.footerRedraw.bind(this));\n\n\t\t\tif(this.table.options.paginationAddRow == \"page\"){\n\t\t\t\tthis.subscribe(\"row-adding-position\", this.rowAddingPosition.bind(this));\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.paginationMode === \"remote\"){\n\t\t\t\tthis.subscribe(\"data-params\", this.remotePageParams.bind(this));\n\t\t\t\tthis.subscribe(\"data-loaded\", this._parseRemoteData.bind(this));\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.progressiveLoad){\n\t\t\t\tconsole.error(\"Progressive Load Error - Pagination and progressive load cannot be used at the same time\");\n\t\t\t}\n\t\t\t\n\t\t\tthis.registerDisplayHandler(this.restOnRenderBefore.bind(this), 40);\n\t\t\tthis.registerDisplayHandler(this.getRows.bind(this), 50);\n\t\t\t\n\t\t\tthis.createElements();\n\t\t\tthis.initializePageCounter();\n\t\t\tthis.initializePaginator();\n\t\t}else if(this.table.options.progressiveLoad){\n\t\t\tthis.subscribe(\"data-params\", this.remotePageParams.bind(this));\n\t\t\tthis.subscribe(\"data-loaded\", this._parseRemoteData.bind(this));\n\t\t\tthis.subscribe(\"table-built\", this.calculatePageSizes.bind(this));\n\t\t\tthis.subscribe(\"data-processed\", this.initialLoadComplete.bind(this));\n\t\t\t\n\t\t\tthis.initializeProgressive(this.table.options.progressiveLoad);\n\t\t\t\n\t\t\tif(this.table.options.progressiveLoad === \"scroll\"){\n\t\t\t\tthis.subscribe(\"scroll-vertical\", this.scrollVertical.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\t\n\trowAddingPosition(row, top){\n\t\tvar rowManager = this.table.rowManager,\n\t\tdisplayRows = rowManager.getDisplayRows(),\n\t\tindex;\n\t\t\n\t\tif(top){\n\t\t\tif(displayRows.length){\n\t\t\t\tindex = displayRows[0];\n\t\t\t}else{\n\t\t\t\tif(rowManager.activeRows.length){\n\t\t\t\t\tindex = rowManager.activeRows[rowManager.activeRows.length-1];\n\t\t\t\t\ttop = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif(displayRows.length){\n\t\t\t\tindex = displayRows[displayRows.length - 1];\n\t\t\t\ttop = displayRows.length < this.size ? false : true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn {index, top};\n\t}\n\t\n\tcalculatePageSizes(){\n\t\tvar testElRow, testElCell;\n\t\t\n\t\tif(this.table.options.paginationSize){\n\t\t\tthis.size = this.table.options.paginationSize;\n\t\t}else{\n\t\t\ttestElRow = document.createElement(\"div\");\n\t\t\ttestElRow.classList.add(\"tabulator-row\");\n\t\t\ttestElRow.style.visibility = \"hidden\";\n\t\t\t\n\t\t\ttestElCell = document.createElement(\"div\");\n\t\t\ttestElCell.classList.add(\"tabulator-cell\");\n\t\t\ttestElCell.innerHTML = \"Page Row Test\";\n\t\t\t\n\t\t\ttestElRow.appendChild(testElCell);\n\t\t\t\n\t\t\tthis.table.rowManager.getTableElement().appendChild(testElRow);\n\t\t\t\n\t\t\tthis.size = Math.floor(this.table.rowManager.getElement().clientHeight / testElRow.offsetHeight);\n\t\t\t\n\t\t\tthis.table.rowManager.getTableElement().removeChild(testElRow);\n\t\t}\n\n\t\tthis.dispatchExternal(\"pageSizeChanged\", this.size);\n\t\t\n\t\tthis.generatePageSizeSelectList();\n\t}\n\t\n\tinitialLoadComplete(){\n\t\tthis.initialLoad = false;\n\t}\n\t\n\tremotePageParams(data, config, silent, params){\n\t\tif(!this.initialLoad){\n\t\t\tif((this.progressiveLoad && !silent) || (!this.progressiveLoad && !this.dataChanging)){\n\t\t\t\tthis.reset(true);\n\t\t\t}\n\t\t}\n\t\t\n\t\t//configure request params\n\t\tparams.page = this.page;\n\t\t\n\t\t//set page size if defined\n\t\tif(this.size){\n\t\t\tparams.size = this.size;\n\t\t}\n\t\t\n\t\treturn params;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\tuserSetPageToRow(row){\n\t\tif(this.table.options.pagination){\n\t\t\trow = this.table.rowManager.findRow(row);\n\t\t\t\n\t\t\tif(row){\n\t\t\t\treturn this.setPageToRow(row);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn Promise.reject();\n\t}\n\t\n\tuserSetPageSize(size){\n\t\tif(this.table.options.pagination){\n\t\t\tthis.setPageSize(size);\n\t\t\treturn this.setPage(1);\n\t\t}else{\n\t\t\treturn false;\n\t\t}\n\t}\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tscrollVertical(top, dir){\n\t\tvar element, diff, margin;\n\t\tif(!dir && !this.table.dataLoader.loading){\n\t\t\telement = this.table.rowManager.getElement();\n\t\t\tdiff = element.scrollHeight - element.clientHeight - top;\n\t\t\tmargin = this.table.options.progressiveLoadScrollMargin || (element.clientHeight * 2);\n\t\t\t\n\t\t\tif(diff < margin){\n\t\t\t\tthis.nextPage()\n\t\t\t\t\t.catch(() => {}); //consume the exception thrown when on the last page\n\t\t\t}\n\t\t}\n\t}\n\t\n\trestOnRenderBefore(rows, renderInPosition){\n\t\tif(!renderInPosition){\n\t\t\tif(this.mode === \"local\"){\n\t\t\t\tthis.reset();\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\trowsUpdated(){\n\t\tthis.refreshData(true, \"all\");\n\t}\n\t\n\tcreateElements(){\n\t\tvar button;\n\t\t\n\t\tthis.element = document.createElement(\"span\");\n\t\tthis.element.classList.add(\"tabulator-paginator\");\n\t\t\n\t\tthis.pagesElement = document.createElement(\"span\");\n\t\tthis.pagesElement.classList.add(\"tabulator-pages\");\n\t\t\n\t\tbutton = document.createElement(\"button\");\n\t\tbutton.classList.add(\"tabulator-page\");\n\t\tbutton.setAttribute(\"type\", \"button\");\n\t\tbutton.setAttribute(\"role\", \"button\");\n\t\tbutton.setAttribute(\"aria-label\", \"\");\n\t\tbutton.setAttribute(\"title\", \"\");\n\t\t\n\t\tthis.firstBut = button.cloneNode(true);\n\t\tthis.firstBut.setAttribute(\"data-page\", \"first\");\n\t\t\n\t\tthis.prevBut = button.cloneNode(true);\n\t\tthis.prevBut.setAttribute(\"data-page\", \"prev\");\n\t\t\n\t\tthis.nextBut = button.cloneNode(true);\n\t\tthis.nextBut.setAttribute(\"data-page\", \"next\");\n\t\t\n\t\tthis.lastBut = button.cloneNode(true);\n\t\tthis.lastBut.setAttribute(\"data-page\", \"last\");\n\t\t\n\t\tif(this.table.options.paginationSizeSelector){\n\t\t\tthis.pageSizeSelect = document.createElement(\"select\");\n\t\t\tthis.pageSizeSelect.classList.add(\"tabulator-page-size\");\n\t\t}\n\t}\n\t\n\tgeneratePageSizeSelectList(){\n\t\tvar pageSizes = [];\n\t\t\n\t\tif(this.pageSizeSelect){\n\t\t\t\n\t\t\tif(Array.isArray(this.table.options.paginationSizeSelector)){\n\t\t\t\tpageSizes = this.table.options.paginationSizeSelector;\n\t\t\t\tthis.pageSizes = pageSizes;\n\t\t\t\t\n\t\t\t\tif(this.pageSizes.indexOf(this.size) == -1){\n\t\t\t\t\tpageSizes.unshift(this.size);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\t\n\t\t\t\tif(this.pageSizes.indexOf(this.size) == -1){\n\t\t\t\t\tpageSizes = [];\n\t\t\t\t\t\n\t\t\t\t\tfor (let i = 1; i < 5; i++){\n\t\t\t\t\t\tpageSizes.push(this.size * i);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.pageSizes = pageSizes;\n\t\t\t\t}else{\n\t\t\t\t\tpageSizes = this.pageSizes;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\twhile(this.pageSizeSelect.firstChild) this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);\n\t\t\t\n\t\t\tpageSizes.forEach((item) => {\n\t\t\t\tvar itemEl = document.createElement(\"option\");\n\t\t\t\titemEl.value = item;\n\t\t\t\t\n\t\t\t\tif(item === true){\n\t\t\t\t\tthis.langBind(\"pagination|all\", function(value){\n\t\t\t\t\t\titemEl.innerHTML = value;\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\titemEl.innerHTML = item;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tthis.pageSizeSelect.appendChild(itemEl);\n\t\t\t});\n\t\t\t\n\t\t\tthis.pageSizeSelect.value = this.size;\n\t\t}\n\t}\n\t\n\tinitializePageCounter(){\n\t\tvar counter = this.table.options.paginationCounter,\n\t\tpageCounter = null;\n\t\t\n\t\tif(counter){\n\t\t\tif(typeof counter === \"function\"){\n\t\t\t\tpageCounter = counter;\n\t\t\t}else{\n\t\t\t\tpageCounter = Page.pageCounters[counter];\n\t\t\t}\n\t\t\t\n\t\t\tif(pageCounter){\n\t\t\t\tthis.pageCounter = pageCounter;\n\t\t\t\t\n\t\t\t\tthis.pageCounterElement = document.createElement(\"span\");\n\t\t\t\tthis.pageCounterElement.classList.add(\"tabulator-page-counter\");\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Pagination Error - No such page counter found: \", counter);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//setup pagination\n\tinitializePaginator(hidden){\n\t\tvar pageSelectLabel, paginationCounterHolder;\n\t\t\n\t\tif(!hidden){\n\t\t\t//build pagination element\n\t\t\t\n\t\t\t//bind localizations\n\t\t\tthis.langBind(\"pagination|first\", (value) => {\n\t\t\t\tthis.firstBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|first_title\", (value) => {\n\t\t\t\tthis.firstBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.firstBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|prev\", (value) => {\n\t\t\t\tthis.prevBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|prev_title\", (value) => {\n\t\t\t\tthis.prevBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.prevBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|next\", (value) => {\n\t\t\t\tthis.nextBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|next_title\", (value) => {\n\t\t\t\tthis.nextBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.nextBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|last\", (value) => {\n\t\t\t\tthis.lastBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|last_title\", (value) => {\n\t\t\t\tthis.lastBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.lastBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\t//click bindings\n\t\t\tthis.firstBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.setPage(1);\n\t\t\t});\n\t\t\t\n\t\t\tthis.prevBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.previousPage();\n\t\t\t});\n\t\t\t\n\t\t\tthis.nextBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.nextPage();\n\t\t\t});\n\t\t\t\n\t\t\tthis.lastBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.setPage(this.max);\n\t\t\t});\n\t\t\t\n\t\t\tif(this.table.options.paginationElement){\n\t\t\t\tthis.element = this.table.options.paginationElement;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.pageSizeSelect){\n\t\t\t\tpageSelectLabel = document.createElement(\"label\");\n\t\t\t\t\n\t\t\t\tthis.langBind(\"pagination|page_size\", (value) => {\n\t\t\t\t\tthis.pageSizeSelect.setAttribute(\"aria-label\", value);\n\t\t\t\t\tthis.pageSizeSelect.setAttribute(\"title\", value);\n\t\t\t\t\tpageSelectLabel.innerHTML = value;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.element.appendChild(pageSelectLabel);\n\t\t\t\tthis.element.appendChild(this.pageSizeSelect);\n\t\t\t\t\n\t\t\t\tthis.pageSizeSelect.addEventListener(\"change\", (e) => {\n\t\t\t\t\tthis.setPageSize(this.pageSizeSelect.value == \"true\" ? true : this.pageSizeSelect.value);\n\t\t\t\t\tthis.setPage(1);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t//append to DOM\n\t\t\tthis.element.appendChild(this.firstBut);\n\t\t\tthis.element.appendChild(this.prevBut);\n\t\t\tthis.element.appendChild(this.pagesElement);\n\t\t\tthis.element.appendChild(this.nextBut);\n\t\t\tthis.element.appendChild(this.lastBut);\n\t\t\t\n\t\t\tif(!this.table.options.paginationElement){\n\t\t\t\tif(this.table.options.paginationCounter){\n\n\t\t\t\t\tpaginationCounterHolder; \n\n\t\t\t\t\tif(this.table.options.paginationCounterElement){\n\t\t\t\t\t\tif(this.table.options.paginationCounterElement instanceof HTMLElement){\n\t\t\t\t\t\t\tthis.table.options.paginationCounterElement.appendChild(this.pageCounterElement);\n\t\t\t\t\t\t}else if(typeof this.table.options.paginationCounterElement === \"string\"){\n\t\t\t\t\t\t\tpaginationCounterHolder = document.querySelector(this.table.options.paginationCounterElement);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(paginationCounterHolder){\n\t\t\t\t\t\t\t\tpaginationCounterHolder.appendChild(this.pageCounterElement);\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tconsole.warn(\"Pagination Error - Unable to find element matching paginationCounterElement selector:\", this.table.options.paginationCounterElement);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.footerAppend(this.pageCounterElement);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.footerAppend(this.element);\n\t\t\t}\n\t\t\t\n\t\t\tthis.page = this.table.options.paginationInitialPage;\n\t\t\tthis.count = this.table.options.paginationButtonCount;\n\t\t}\n\t\t\n\t\t//set default values\n\t\tthis.mode = this.table.options.paginationMode;\n\t}\n\t\n\tinitializeProgressive(mode){\n\t\tthis.initializePaginator(true);\n\t\tthis.mode = \"progressive_\" + mode;\n\t\tthis.progressiveLoad = true;\n\t}\n\t\n\ttrackChanges(){\n\t\tthis.dispatch(\"page-changed\");\n\t}\n\t\n\t//calculate maximum page from number of rows\n\tsetMaxRows(rowCount){\n\t\tif(!rowCount){\n\t\t\tthis.max = 1;\n\t\t}else{\n\t\t\tthis.max = this.size === true ?  1 : Math.ceil(rowCount/this.size);\n\t\t}\n\t\t\n\t\tif(this.page > this.max){\n\t\t\tthis.page = this.max;\n\t\t}\n\t}\n\t\n\t//reset to first page without triggering action\n\treset(force){\n\t\tif(!this.initialLoad){\n\t\t\tif(this.mode == \"local\" || force){\n\t\t\t\tthis.page = 1;\n\t\t\t\tthis.trackChanges();\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//set the maximum page\n\tsetMaxPage(max){\n\t\t\n\t\tmax = parseInt(max);\n\t\t\n\t\tthis.max = max || 1;\n\t\t\n\t\tif(this.page > this.max){\n\t\t\tthis.page = this.max;\n\t\t\tthis.trigger();\n\t\t}\n\t}\n\t\n\t//set current page number\n\tsetPage(page){\n\t\tswitch(page){\n\t\t\tcase \"first\":\n\t\t\t\treturn this.setPage(1);\n\t\n\t\t\tcase \"prev\":\n\t\t\t\treturn this.previousPage();\n\t\t\t\n\t\t\tcase \"next\":\n\t\t\t\treturn this.nextPage();\n\t\t\t\n\t\t\tcase \"last\":\n\t\t\t\treturn this.setPage(this.max);\n\t\t}\n\t\t\n\t\tpage = parseInt(page);\n\t\t\n\t\tif((page > 0 && page <= this.max) || this.mode !== \"local\"){\n\t\t\tthis.page = page;\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t\t\n\t\t\treturn this.trigger();\n\t\t}else{\n\t\t\tconsole.warn(\"Pagination Error - Requested page is out of range of 1 - \" + this.max + \":\", page);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tsetPageToRow(row){\n\t\tvar rows = this.displayRows(-1);\n\t\tvar index = rows.indexOf(row);\n\t\n\t\tif(index > -1){\n\t\t\tvar page = this.size === true ? 1 : Math.ceil((index + 1) / this.size);\n\t\t\t\n\t\t\treturn this.setPage(page);\n\t\t}else{\n\t\t\tconsole.warn(\"Pagination Error - Requested row is not visible\");\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tsetPageSize(size){\n\t\tif(size !== true){\n\t\t\tsize = parseInt(size);\n\t\t}\n\n\t\tif(size > 0){\n\t\t\tthis.size = size;\n\t\t\tthis.dispatchExternal(\"pageSizeChanged\", size);\n\t\t}\n\t\t\n\t\tif(this.pageSizeSelect){\n\t\t\t// this.pageSizeSelect.value = size;\n\t\t\tthis.generatePageSizeSelectList();\n\t\t}\n\t\t\n\t\tthis.trackChanges();\n\t}\n\t\n\t_setPageCounter(totalRows, size, currentRow){\n\t\tvar content;\n\t\t\n\t\tif(this.pageCounter){\n\n\t\t\tif(this.mode === \"remote\"){\n\t\t\t\tsize = this.size;\n\t\t\t\tcurrentRow = ((this.page - 1) * this.size) + 1;\n\t\t\t\ttotalRows = this.remoteRowCountEstimate;\n\t\t\t}\n\n\t\t\tcontent = this.pageCounter.call(this, size, currentRow, this.page, totalRows, this.max);\n\t\t\t\n\t\t\tswitch(typeof content){\n\t\t\t\tcase \"object\":\n\t\t\t\t\tif(content instanceof Node){\n\t\t\t\t\t\n\t\t\t\t\t\t//clear previous cell contents\n\t\t\t\t\t\twhile(this.pageCounterElement.firstChild) this.pageCounterElement.removeChild(this.pageCounterElement.firstChild);\n\t\t\t\t\t\n\t\t\t\t\t\tthis.pageCounterElement.appendChild(content);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.pageCounterElement.innerHTML = \"\";\n\t\t\t\t\t\n\t\t\t\t\t\tif(content != null){\n\t\t\t\t\t\t\tconsole.warn(\"Page Counter Error - Page Counter has returned a type of object, the only valid page counter object return is an instance of Node, the page counter returned:\", content);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"undefined\":\n\t\t\t\t\tthis.pageCounterElement.innerHTML = \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.pageCounterElement.innerHTML = content;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//setup the pagination buttons\n\t_setPageButtons(){\n\t\tlet leftSize = Math.floor((this.count-1) / 2);\n\t\tlet rightSize = Math.ceil((this.count-1) / 2);\n\t\tlet min = this.max - this.page + leftSize + 1 < this.count ? this.max-this.count+1: Math.max(this.page-leftSize,1);\n\t\tlet max = this.page <= rightSize? Math.min(this.count, this.max) :Math.min(this.page+rightSize, this.max);\n\t\t\n\t\twhile(this.pagesElement.firstChild) this.pagesElement.removeChild(this.pagesElement.firstChild);\n\t\t\n\t\tif(this.page == 1){\n\t\t\tthis.firstBut.disabled = true;\n\t\t\tthis.prevBut.disabled = true;\n\t\t}else{\n\t\t\tthis.firstBut.disabled = false;\n\t\t\tthis.prevBut.disabled = false;\n\t\t}\n\t\t\n\t\tif(this.page == this.max){\n\t\t\tthis.lastBut.disabled = true;\n\t\t\tthis.nextBut.disabled = true;\n\t\t}else{\n\t\t\tthis.lastBut.disabled = false;\n\t\t\tthis.nextBut.disabled = false;\n\t\t}\n\t\t\n\t\tfor(let i = min; i <= max; i++){\n\t\t\tif(i>0 && i <= this.max){\n\t\t\t\tthis.pagesElement.appendChild(this._generatePageButton(i));\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.footerRedraw();\n\t}\n\t\n\t_generatePageButton(page){\n\t\tvar button = document.createElement(\"button\");\n\t\t\n\t\tbutton.classList.add(\"tabulator-page\");\n\t\tif(page == this.page){\n\t\t\tbutton.classList.add(\"active\");\n\t\t}\n\t\t\n\t\tbutton.setAttribute(\"type\", \"button\");\n\t\tbutton.setAttribute(\"role\", \"button\");\n\t\t\n\t\tthis.langBind(\"pagination|page_title\", (value) => {\n\t\t\tbutton.setAttribute(\"aria-label\", value + \" \" + page);\n\t\t\tbutton.setAttribute(\"title\", value + \" \" + page);\n\t\t});\n\t\t\n\t\tbutton.setAttribute(\"data-page\", page);\n\t\tbutton.textContent = page;\n\t\t\n\t\tbutton.addEventListener(\"click\", (e) => {\n\t\t\tthis.setPage(page);\n\t\t});\n\t\t\n\t\treturn button;\n\t}\n\t\n\t//previous page\n\tpreviousPage(){\n\t\tif(this.page > 1){\n\t\t\tthis.page--;\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t\t\n\t\t\treturn this.trigger();\n\t\t\t\n\t\t}else{\n\t\t\tconsole.warn(\"Pagination Error - Previous page would be less than page 1:\", 0);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\t//next page\n\tnextPage(){\n\t\tif(this.page < this.max){\n\t\t\tthis.page++;\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t\t\n\t\t\treturn this.trigger();\n\t\t\t\n\t\t}else{\n\t\t\tif(!this.progressiveLoad){\n\t\t\t\tconsole.warn(\"Pagination Error - Next page would be greater than maximum page of \" + this.max + \":\", this.max + 1);\n\t\t\t}\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\t//return current page number\n\tgetPage(){\n\t\treturn this.page;\n\t}\n\t\n\t//return max page number\n\tgetPageMax(){\n\t\treturn this.max;\n\t}\n\t\n\tgetPageSize(size){\n\t\treturn this.size;\n\t}\n\t\n\tgetMode(){\n\t\treturn this.mode;\n\t}\n\t\n\t//return appropriate rows for current page\n\tgetRows(data){\n\t\tvar actualRowPageSize = 0,\n\t\toutput, start, end, actualStartRow;\n\n\t\tvar actualRows = data.filter((row) => {\n\t\t\treturn row.type === \"row\";\n\t\t});\n\t\t\n\t\tif(this.mode == \"local\"){\n\t\t\toutput = [];\n\t\t\t\n\t\t\tthis.setMaxRows(data.length);\n\t\t\t\n\t\t\tif(this.size === true){\n\t\t\t\tstart = 0;\n\t\t\t\tend = data.length;\n\t\t\t}else{\n\t\t\t\tstart = this.size * (this.page - 1);\n\t\t\t\tend = start + parseInt(this.size);\n\t\t\t}\n\t\t\t\n\t\t\tthis._setPageButtons();\n\t\t\t\n\t\t\tfor(let i = start; i < end; i++){\n\t\t\t\tlet row = data[i];\n\n\t\t\t\tif(row){\n\t\t\t\t\toutput.push(row);\n\n\t\t\t\t\tif(row.type === \"row\"){\n\t\t\t\t\t\tif(!actualStartRow){\n\t\t\t\t\t\t\tactualStartRow = row;\n\t\t\t\t\t\t}\t\n\n\t\t\t\t\t\tactualRowPageSize++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis._setPageCounter(actualRows.length, actualRowPageSize, actualStartRow ? (actualRows.indexOf(actualStartRow) + 1) : 0);\n\t\t\t\n\t\t\treturn output;\n\t\t}else{\n\t\t\tthis._setPageButtons();\n\t\t\tthis._setPageCounter(actualRows.length);\n\t\t\t\n\t\t\treturn data.slice(0);\n\t\t}\n\t}\n\t\n\ttrigger(){\n\t\tvar left;\n\t\t\n\t\tswitch(this.mode){\n\t\t\tcase \"local\":\n\t\t\t\tleft = this.table.rowManager.scrollLeft;\n\t\t\t\n\t\t\t\tthis.refreshData();\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\n\t\t\t\tthis.dispatchExternal(\"pageLoaded\", this.getPage());\n\t\t\t\n\t\t\t\treturn Promise.resolve();\n\t\t\t\n\t\t\tcase \"remote\":\n\t\t\t\tthis.dataChanging = true;\n\t\t\t\treturn this.reloadData(null)\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tthis.dataChanging = false;\n\t\t\t\t\t});\n\t\t\t\n\t\t\tcase \"progressive_load\":\n\t\t\tcase \"progressive_scroll\":\n\t\t\t\treturn this.reloadData(null, true);\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tconsole.warn(\"Pagination Error - no such pagination mode:\", this.mode);\n\t\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\t_parseRemoteData(data){\n\t\tvar margin;\n\t\t\n\t\tif(typeof data.last_page === \"undefined\"){\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + (this.options(\"dataReceiveParams\").last_page || \"last_page\") + \"' property\");\n\t\t}\n\t\t\n\t\tif(data.data){\n\t\t\tthis.max = parseInt(data.last_page) || 1;\n\n\t\t\tthis.remoteRowCountEstimate = typeof data.last_row !== \"undefined\" ? data.last_row : (data.last_page * this.size - (this.page == data.last_page ? (this.size - data.data.length) : 0));\n\t\t\t\n\t\t\tif(this.progressiveLoad){\n\t\t\t\tswitch(this.mode){\n\t\t\t\t\tcase \"progressive_load\":\n\t\t\t\t\t\n\t\t\t\t\t\tif(this.page == 1){\n\t\t\t\t\t\t\tthis.table.rowManager.setData(data.data, false, this.page == 1);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.table.rowManager.addRows(data.data);\n\t\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\tif(this.page < this.max){\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.nextPage();\n\t\t\t\t\t\t\t}, this.table.options.progressiveLoadDelay);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"progressive_scroll\":\n\t\t\t\t\t\tdata = this.page === 1 ? data.data : this.table.rowManager.getData().concat(data.data);\n\t\t\t\t\t\n\t\t\t\t\t\tthis.table.rowManager.setData(data, this.page !== 1, this.page == 1);\n\t\t\t\t\t\n\t\t\t\t\t\tmargin = this.table.options.progressiveLoadScrollMargin || (this.table.rowManager.element.clientHeight * 2);\n\t\t\t\t\t\n\t\t\t\t\t\tif(this.table.rowManager.element.scrollHeight <= (this.table.rowManager.element.clientHeight + margin)){\n\t\t\t\t\t\t\tif(this.page < this.max){\n\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\tthis.nextPage();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn false;\n\t\t\t}else{\n\t\t\t\t// left = this.table.rowManager.scrollLeft;\n\t\t\t\tthis.dispatchExternal(\"pageLoaded\",  this.getPage());\n\t\t\t\t// this.table.rowManager.scrollHorizontal(left);\n\t\t\t\t// this.table.columnManager.scrollHorizontal(left);\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + (this.options(\"dataReceiveParams\").data || \"data\") + \"' property\");\n\t\t}\n\t\t\n\t\treturn data.data;\n\t}\n\t\n\t//handle the footer element being redrawn\n\tfooterRedraw(){\n\t\tvar footer = this.table.footerManager.containerElement;\n\n\t\tif((Math.ceil(footer.clientWidth) - footer.scrollWidth) < 0){\n\t\t\tthis.pagesElement.style.display = 'none';\n\t\t}else{\n\t\t\tthis.pagesElement.style.display = '';\n\t\t\t\n\t\t\tif((Math.ceil(footer.clientWidth) - footer.scrollWidth) < 0){\n\t\t\t\tthis.pagesElement.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n}","// read persistance information from storage\nexport default {\n\tlocal:function(id, type){\n\t\tvar data = localStorage.getItem(id + \"-\" + type);\n\n\t\treturn data ? JSON.parse(data) : false;\n\t},\n\tcookie:function(id, type){\n\t\tvar cookie = document.cookie,\n\t\tkey = id + \"-\" + type,\n\t\tcookiePos = cookie.indexOf(key + \"=\"),\n\t\tend, data;\n\n\t\t//if cookie exists, decode and load column data into tabulator\n\t\tif(cookiePos > -1){\n\t\t\tcookie = cookie.slice(cookiePos);\n\n\t\t\tend = cookie.indexOf(\";\");\n\n\t\t\tif(end > -1){\n\t\t\t\tcookie = cookie.slice(0, end);\n\t\t\t}\n\n\t\t\tdata = cookie.replace(key + \"=\", \"\");\n\t\t}\n\n\t\treturn data ? JSON.parse(data) : false;\n\t}\n};\n","//write persistence information to storage\nexport default {\n\tlocal:function(id, type, data){\n\t\tlocalStorage.setItem(id + \"-\" + type, JSON.stringify(data));\n\t},\n\tcookie:function(id, type, data){\n\t\tvar expireDate = new Date();\n\n\t\texpireDate.setDate(expireDate.getDate() + 10000);\n\n\t\tdocument.cookie = id + \"-\" + type + \"=\" + JSON.stringify(data) + \"; expires=\" + expireDate.toUTCString();\n\t}\n};","import Module from '../../core/Module.js';\n\nimport defaultReaders from './defaults/readers.js';\nimport defaultWriters from './defaults/writers.js';\n\nexport default class Persistence extends Module{\n\n\tstatic moduleName = \"persistence\";\n\n\tstatic moduleInitOrder = -10;\n\n\t//load defaults\n\tstatic readers = defaultReaders;\n\tstatic writers = defaultWriters;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.mode = \"\";\n\t\tthis.id = \"\";\n\t\t// this.persistProps = [\"field\", \"width\", \"visible\"];\n\t\tthis.defWatcherBlock = false;\n\t\tthis.config = {};\n\t\tthis.readFunc = false;\n\t\tthis.writeFunc = false;\n\n\t\tthis.registerTableOption(\"persistence\", false);\n\t\tthis.registerTableOption(\"persistenceID\", \"\"); //key for persistent storage\n\t\tthis.registerTableOption(\"persistenceMode\", true); //mode for storing persistence information\n\t\tthis.registerTableOption(\"persistenceReaderFunc\", false); //function for handling persistence data reading\n\t\tthis.registerTableOption(\"persistenceWriterFunc\", false); //function for handling persistence data writing\n\t}\n\n\t// Test for whether localStorage is available for use.\n\tlocalStorageTest() {\n\t\tvar  testKey =  \"_tabulator_test\";\n\n\t\ttry {\n\t\t\twindow.localStorage.setItem( testKey, testKey);\n\t\t\twindow.localStorage.removeItem( testKey );\n\t\t\treturn true;\n\t\t} catch(e) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//setup parameters\n\tinitialize(){\n\t\tif(this.table.options.persistence){\n\t\t\t//determine persistent layout storage type\n\t\t\tvar mode = this.table.options.persistenceMode,\n\t\t\tid = this.table.options.persistenceID,\n\t\t\tretrievedData;\n\n\t\t\tthis.mode = mode !== true ?  mode : (this.localStorageTest() ? \"local\" : \"cookie\");\n\n\t\t\tif(this.table.options.persistenceReaderFunc){\n\t\t\t\tif(typeof this.table.options.persistenceReaderFunc === \"function\"){\n\t\t\t\t\tthis.readFunc = this.table.options.persistenceReaderFunc;\n\t\t\t\t}else{\n\t\t\t\t\tif(Persistence.readers[this.table.options.persistenceReaderFunc]){\n\t\t\t\t\t\tthis.readFunc = Persistence.readers[this.table.options.persistenceReaderFunc];\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.table.options.persistenceReaderFunc);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(Persistence.readers[this.mode]){\n\t\t\t\t\tthis.readFunc = Persistence.readers[this.mode];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.mode);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.table.options.persistenceWriterFunc){\n\t\t\t\tif(typeof this.table.options.persistenceWriterFunc === \"function\"){\n\t\t\t\t\tthis.writeFunc = this.table.options.persistenceWriterFunc;\n\t\t\t\t}else{\n\t\t\t\t\tif(Persistence.writers[this.table.options.persistenceWriterFunc]){\n\t\t\t\t\t\tthis.writeFunc = Persistence.writers[this.table.options.persistenceWriterFunc];\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Persistence Write Error - invalid reader set\", this.table.options.persistenceWriterFunc);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(Persistence.writers[this.mode]){\n\t\t\t\t\tthis.writeFunc = Persistence.writers[this.mode];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Persistence Write Error - invalid writer set\", this.mode);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//set storage tag\n\t\t\tthis.id = \"tabulator-\" + (id || (this.table.element.getAttribute(\"id\") || \"\"));\n\n\t\t\tthis.config = {\n\t\t\t\tsort:this.table.options.persistence === true || this.table.options.persistence.sort,\n\t\t\t\tfilter:this.table.options.persistence === true || this.table.options.persistence.filter,\n\t\t\t\theaderFilter:this.table.options.persistence === true || this.table.options.persistence.headerFilter,\n\t\t\t\tgroup:this.table.options.persistence === true || this.table.options.persistence.group,\n\t\t\t\tpage:this.table.options.persistence === true || this.table.options.persistence.page,\n\t\t\t\tcolumns:this.table.options.persistence === true ? [\"title\", \"width\", \"visible\"] : this.table.options.persistence.columns,\n\t\t\t};\n\n\t\t\t//load pagination data if needed\n\t\t\tif(this.config.page){\n\t\t\t\tretrievedData = this.retrieveData(\"page\");\n\n\t\t\t\tif(retrievedData){\n\t\t\t\t\tif(typeof retrievedData.paginationSize !== \"undefined\" && (this.config.page === true || this.config.page.size)){\n\t\t\t\t\t\tthis.table.options.paginationSize = retrievedData.paginationSize;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(typeof retrievedData.paginationInitialPage !== \"undefined\" && (this.config.page === true || this.config.page.page)){\n\t\t\t\t\t\tthis.table.options.paginationInitialPage = retrievedData.paginationInitialPage;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//load group data if needed\n\t\t\tif(this.config.group){\n\t\t\t\tretrievedData = this.retrieveData(\"group\");\n\n\t\t\t\tif(retrievedData){\n\t\t\t\t\tif(typeof retrievedData.groupBy !== \"undefined\" && (this.config.group === true || this.config.group.groupBy)){\n\t\t\t\t\t\tthis.table.options.groupBy = retrievedData.groupBy;\n\t\t\t\t\t}\n\t\t\t\t\tif(typeof retrievedData.groupStartOpen !== \"undefined\" && (this.config.group === true || this.config.group.groupStartOpen)){\n\t\t\t\t\t\tthis.table.options.groupStartOpen = retrievedData.groupStartOpen;\n\t\t\t\t\t}\n\t\t\t\t\tif(typeof retrievedData.groupHeader !== \"undefined\" && (this.config.group === true || this.config.group.groupHeader)){\n\t\t\t\t\t\tthis.table.options.groupHeader = retrievedData.groupHeader;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.config.columns){\n\t\t\t\tthis.table.options.columns = this.load(\"columns\", this.table.options.columns);\n\t\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\t\t\tthis.subscribe(\"column-show\", this.save.bind(this, \"columns\"));\n\t\t\t\tthis.subscribe(\"column-hide\", this.save.bind(this, \"columns\"));\n\t\t\t\tthis.subscribe(\"column-moved\", this.save.bind(this, \"columns\"));\n\t\t\t}\n\n\t\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this), 0);\n\n\t\t\tthis.subscribe(\"table-redraw\", this.tableRedraw.bind(this));\n\n\t\t\tthis.subscribe(\"filter-changed\", this.eventSave.bind(this, \"filter\"));\n\t\t\tthis.subscribe(\"filter-changed\", this.eventSave.bind(this, \"headerFilter\"));\n\t\t\tthis.subscribe(\"sort-changed\", this.eventSave.bind(this, \"sort\"));\n\t\t\tthis.subscribe(\"group-changed\", this.eventSave.bind(this, \"group\"));\n\t\t\tthis.subscribe(\"page-changed\", this.eventSave.bind(this, \"page\"));\n\t\t\tthis.subscribe(\"column-resized\", this.eventSave.bind(this, \"columns\"));\n\t\t\tthis.subscribe(\"column-width\", this.eventSave.bind(this, \"columns\"));\n\t\t\tthis.subscribe(\"layout-refreshed\", this.eventSave.bind(this, \"columns\"));\n\t\t}\n\n\t\tthis.registerTableFunction(\"getColumnLayout\", this.getColumnLayout.bind(this));\n\t\tthis.registerTableFunction(\"setColumnLayout\", this.setColumnLayout.bind(this));\n\t}\n\n\teventSave(type){\n\t\tif(this.config[type]){\n\t\t\tthis.save(type);\n\t\t}\n\t}\n\n\ttableBuilt(){\n\t\tvar sorters, filters, headerFilters;\n\n\t\tif(this.config.sort){\n\t\t\tsorters = this.load(\"sort\");\n\n\t\t\tif(!sorters === false){\n\t\t\t\tthis.table.options.initialSort = sorters;\n\t\t\t}\n\t\t}\n\n\t\tif(this.config.filter){\n\t\t\tfilters = this.load(\"filter\");\n\n\t\t\tif(!filters === false){\n\t\t\t\tthis.table.options.initialFilter = filters;\n\t\t\t}\n\t\t}\n\t\tif(this.config.headerFilter){\n\t\t\theaderFilters = this.load(\"headerFilter\");\n\n\t\t\tif(!headerFilters === false){\n\t\t\t\tthis.table.options.initialHeaderFilter = headerFilters;\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\n\ttableRedraw(force){\n\t\tif(force && this.config.columns){\n\t\t\tthis.save(\"columns\");\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\tgetColumnLayout(){\n\t\treturn this.parseColumns(this.table.columnManager.getColumns());\n\t}\n\n\tsetColumnLayout(layout){\n\t\tthis.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns, layout, true));\n\t\treturn true;\n\t}\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\tinitializeColumn(column){\n\t\tvar def, keys;\n\n\t\tif(this.config.columns){\n\t\t\tthis.defWatcherBlock = true;\n\n\t\t\tdef = column.getDefinition();\n\n\t\t\tkeys = this.config.columns === true ? Object.keys(def) : this.config.columns;\n\n\t\t\tkeys.forEach((key)=>{\n\t\t\t\tvar props = Object.getOwnPropertyDescriptor(def, key);\n\t\t\t\tvar value = def[key];\n\n\t\t\t\tif(props){\n\t\t\t\t\tObject.defineProperty(def, key, {\n\t\t\t\t\t\tset: (newValue) => {\n\t\t\t\t\t\t\tvalue = newValue;\n\n\t\t\t\t\t\t\tif(!this.defWatcherBlock){\n\t\t\t\t\t\t\t\tthis.save(\"columns\");\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif(props.set){\n\t\t\t\t\t\t\t\tprops.set(newValue);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tget:() => {\n\t\t\t\t\t\t\tif(props.get){\n\t\t\t\t\t\t\t\tprops.get();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.defWatcherBlock = false;\n\t\t}\n\t}\n\n\t//load saved definitions\n\tload(type, current){\n\t\tvar data = this.retrieveData(type);\n\n\t\tif(current){\n\t\t\tdata = data ? this.mergeDefinition(current, data) : current;\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t//retrieve data from memory\n\tretrieveData(type){\n\t\treturn this.readFunc ? this.readFunc(this.id, type) : false;\n\t}\n\n\t//merge old and new column definitions\n\tmergeDefinition(oldCols, newCols, mergeAllNew){\n\t\tvar output = [];\n\n\t\tnewCols = newCols || [];\n\n\t\tnewCols.forEach((column, to) => {\n\t\t\tvar from = this._findColumn(oldCols, column),\n\t\t\tkeys;\n\n\t\t\tif(from){\n\t\t\t\tif(mergeAllNew){\n\t\t\t\t\tkeys = Object.keys(column);\n\t\t\t\t}else if(this.config.columns === true || this.config.columns == undefined){\n\t\t\t\t\tkeys =  Object.keys(from);\n\t\t\t\t\tkeys.push(\"width\");\n\t\t\t\t}else{\n\t\t\t\t\tkeys = this.config.columns;\n\t\t\t\t}\n\n\t\t\t\tkeys.forEach((key)=>{\n\t\t\t\t\tif(key !== \"columns\" && typeof column[key] !== \"undefined\"){\n\t\t\t\t\t\tfrom[key] = column[key];\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(from.columns){\n\t\t\t\t\tfrom.columns = this.mergeDefinition(from.columns, column.columns);\n\t\t\t\t}\n\n\t\t\t\toutput.push(from);\n\t\t\t}\n\t\t});\n\n\t\toldCols.forEach((column, i) => {\n\t\t\tvar from = this._findColumn(newCols, column);\n\n\t\t\tif (!from) {\n\t\t\t\tif(output.length>i){\n\t\t\t\t\toutput.splice(i, 0, column);\n\t\t\t\t}else{\n\t\t\t\t\toutput.push(column);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\t//find matching columns\n\t_findColumn(columns, subject){\n\t\tvar type = subject.columns ? \"group\" : (subject.field ? \"field\" : \"object\");\n\n\t\treturn columns.find(function(col){\n\t\t\tswitch(type){\n\t\t\t\tcase \"group\":\n\t\t\t\t\treturn col.title === subject.title && col.columns.length === subject.columns.length;\n\n\t\t\t\tcase \"field\":\n\t\t\t\t\treturn col.field === subject.field;\n\n\t\t\t\tcase \"object\":\n\t\t\t\t\treturn col === subject;\n\t\t\t}\n\t\t});\n\t}\n\n\t//save data\n\tsave(type){\n\t\tvar data = {};\n\n\t\tswitch(type){\n\t\t\tcase \"columns\":\n\t\t\t\tdata = this.parseColumns(this.table.columnManager.getColumns());\n\t\t\t\tbreak;\n\n\t\t\tcase \"filter\":\n\t\t\t\tdata = this.table.modules.filter.getFilters();\n\t\t\t\tbreak;\n\n\t\t\tcase \"headerFilter\":\n\t\t\t\tdata = this.table.modules.filter.getHeaderFilters();\n\t\t\t\tbreak;\n\n\t\t\tcase \"sort\":\n\t\t\t\tdata = this.validateSorters(this.table.modules.sort.getSort());\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tdata = this.getGroupConfig();\n\t\t\t\tbreak;\n\n\t\t\tcase \"page\":\n\t\t\t\tdata = this.getPageConfig();\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(this.writeFunc){\n\t\t\tthis.writeFunc(this.id, type, data);\n\t\t}\n\n\t}\n\n\t//ensure sorters contain no function data\n\tvalidateSorters(data){\n\t\tdata.forEach(function(item){\n\t\t\titem.column = item.field;\n\t\t\tdelete item.field;\n\t\t});\n\n\t\treturn data;\n\t}\n\n\tgetGroupConfig(){\n\t\tvar data = {};\n\n\t\tif(this.config.group){\n\t\t\tif(this.config.group === true || this.config.group.groupBy){\n\t\t\t\tdata.groupBy = this.table.options.groupBy;\n\t\t\t}\n\n\t\t\tif(this.config.group === true || this.config.group.groupStartOpen){\n\t\t\t\tdata.groupStartOpen = this.table.options.groupStartOpen;\n\t\t\t}\n\n\t\t\tif(this.config.group === true || this.config.group.groupHeader){\n\t\t\t\tdata.groupHeader = this.table.options.groupHeader;\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n\n\tgetPageConfig(){\n\t\tvar data = {};\n\n\t\tif(this.config.page){\n\t\t\tif(this.config.page === true || this.config.page.size){\n\t\t\t\tdata.paginationSize = this.table.modules.page.getPageSize();\n\t\t\t}\n\n\t\t\tif(this.config.page === true || this.config.page.page){\n\t\t\t\tdata.paginationInitialPage = this.table.modules.page.getPage();\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n\n\n\t//parse columns for data to store\n\tparseColumns(columns){\n\t\tvar definitions = [],\n\t\texcludedKeys = [\"headerContextMenu\", \"headerMenu\", \"contextMenu\", \"clickMenu\"];\n\n\t\tcolumns.forEach((column) => {\n\t\t\tvar defStore = {},\n\t\t\tcolDef = column.getDefinition(),\n\t\t\tkeys;\n\n\t\t\tif(column.isGroup){\n\t\t\t\tdefStore.title = colDef.title;\n\t\t\t\tdefStore.columns = this.parseColumns(column.getColumns());\n\t\t\t}else{\n\t\t\t\tdefStore.field = column.getField();\n\n\t\t\t\tif(this.config.columns === true || this.config.columns == undefined){\n\t\t\t\t\tkeys =  Object.keys(colDef);\n\t\t\t\t\tkeys.push(\"width\");\n\t\t\t\t\tkeys.push(\"visible\");\n\t\t\t\t}else{\n\t\t\t\t\tkeys = this.config.columns;\n\t\t\t\t}\n\n\t\t\t\tkeys.forEach((key)=>{\n\t\t\t\t\tswitch(key){\n\t\t\t\t\t\tcase \"width\":\n\t\t\t\t\t\t\tdefStore.width = column.getWidth();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"visible\":\n\t\t\t\t\t\t\tdefStore.visible = column.visible;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tif(typeof colDef[key] !== \"function\" && excludedKeys.indexOf(key) === -1){\n\t\t\t\t\t\t\t\tdefStore[key] = colDef[key];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tdefinitions.push(defStore);\n\t\t});\n\n\t\treturn definitions;\n\t}\n}","import Module from '../../core/Module.js';\n\nexport default class Popup extends Module{\n\t\n\tstatic moduleName = \"popup\";\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.columnSubscribers = {};\n\t\t\n\t\tthis.registerTableOption(\"rowContextPopup\", false);\n\t\tthis.registerTableOption(\"rowClickPopup\", false);\n\t\tthis.registerTableOption(\"rowDblClickPopup\", false);\n\t\tthis.registerTableOption(\"groupContextPopup\", false);\n\t\tthis.registerTableOption(\"groupClickPopup\", false);\n\t\tthis.registerTableOption(\"groupDblClickPopup\", false);\n\t\t\n\t\tthis.registerColumnOption(\"headerContextPopup\");\n\t\tthis.registerColumnOption(\"headerClickPopup\");\n\t\tthis.registerColumnOption(\"headerDblClickPopup\");\n\t\tthis.registerColumnOption(\"headerPopup\");\n\t\tthis.registerColumnOption(\"headerPopupIcon\");\n\t\tthis.registerColumnOption(\"contextPopup\");\n\t\tthis.registerColumnOption(\"clickPopup\");\n\t\tthis.registerColumnOption(\"dblClickPopup\");\n\n\t\tthis.registerComponentFunction(\"cell\", \"popup\", this._componentPopupCall.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"popup\", this._componentPopupCall.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"popup\", this._componentPopupCall.bind(this));\n\t\tthis.registerComponentFunction(\"group\", \"popup\", this._componentPopupCall.bind(this));\n\t\t\n\t}\n\t\n\tinitialize(){\n\t\tthis.initializeRowWatchers();\n\t\tthis.initializeGroupWatchers();\n\t\t\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\n\t_componentPopupCall(component, contents, position){\n\t\tthis.loadPopupEvent(contents, null, component, position);\n\t}\n\t\n\tinitializeRowWatchers(){\n\t\tif(this.table.options.rowContextPopup){\n\t\t\tthis.subscribe(\"row-contextmenu\", this.loadPopupEvent.bind(this, this.table.options.rowContextPopup));\n\t\t\tthis.table.on(\"rowTapHold\", this.loadPopupEvent.bind(this, this.table.options.rowContextPopup));\n\t\t}\n\t\t\n\t\tif(this.table.options.rowClickPopup){\n\t\t\tthis.subscribe(\"row-click\", this.loadPopupEvent.bind(this, this.table.options.rowClickPopup));\n\t\t}\n\n\t\tif(this.table.options.rowDblClickPopup){\n\t\t\tthis.subscribe(\"row-dblclick\", this.loadPopupEvent.bind(this, this.table.options.rowDblClickPopup));\n\t\t}\n\t}\n\t\n\tinitializeGroupWatchers(){\n\t\tif(this.table.options.groupContextPopup){\n\t\t\tthis.subscribe(\"group-contextmenu\", this.loadPopupEvent.bind(this, this.table.options.groupContextPopup));\n\t\t\tthis.table.on(\"groupTapHold\", this.loadPopupEvent.bind(this, this.table.options.groupContextPopup));\n\t\t}\n\t\t\n\t\tif(this.table.options.groupClickPopup){\n\t\t\tthis.subscribe(\"group-click\", this.loadPopupEvent.bind(this, this.table.options.groupClickPopup));\n\t\t}\n\n\t\tif(this.table.options.groupDblClickPopup){\n\t\t\tthis.subscribe(\"group-dblclick\", this.loadPopupEvent.bind(this, this.table.options.groupDblClickPopup));\n\t\t}\n\t}\n\n\tinitializeColumn(column){\n\t\tvar def = column.definition;\n\t\t\n\t\t//handle column events\n\t\tif(def.headerContextPopup && !this.columnSubscribers.headerContextPopup){\n\t\t\tthis.columnSubscribers.headerContextPopup = this.loadPopupTableColumnEvent.bind(this, \"headerContextPopup\");\n\t\t\tthis.subscribe(\"column-contextmenu\", this.columnSubscribers.headerContextPopup);\n\t\t\tthis.table.on(\"headerTapHold\", this.loadPopupTableColumnEvent.bind(this, \"headerContextPopup\"));\n\t\t}\n\t\t\n\t\tif(def.headerClickPopup && !this.columnSubscribers.headerClickPopup){\n\t\t\tthis.columnSubscribers.headerClickPopup = this.loadPopupTableColumnEvent.bind(this, \"headerClickPopup\");\n\t\t\tthis.subscribe(\"column-click\", this.columnSubscribers.headerClickPopup);\n\t\t\n\t\t\n\t\t}if(def.headerDblClickPopup && !this.columnSubscribers.headerDblClickPopup){\n\t\t\tthis.columnSubscribers.headerDblClickPopup = this.loadPopupTableColumnEvent.bind(this, \"headerDblClickPopup\");\n\t\t\tthis.subscribe(\"column-dblclick\", this.columnSubscribers.headerDblClickPopup);\n\t\t}\n\t\t\n\t\tif(def.headerPopup){\n\t\t\tthis.initializeColumnHeaderPopup(column);\n\t\t}\n\t\t\n\t\t//handle cell events\n\t\tif(def.contextPopup && !this.columnSubscribers.contextPopup){\n\t\t\tthis.columnSubscribers.contextPopup = this.loadPopupTableCellEvent.bind(this, \"contextPopup\");\n\t\t\tthis.subscribe(\"cell-contextmenu\", this.columnSubscribers.contextPopup);\n\t\t\tthis.table.on(\"cellTapHold\", this.loadPopupTableCellEvent.bind(this, \"contextPopup\"));\n\t\t}\n\t\t\n\t\tif(def.clickPopup && !this.columnSubscribers.clickPopup){\n\t\t\tthis.columnSubscribers.clickPopup = this.loadPopupTableCellEvent.bind(this, \"clickPopup\");\n\t\t\tthis.subscribe(\"cell-click\", this.columnSubscribers.clickPopup);\n\t\t}\n\n\t\tif(def.dblClickPopup && !this.columnSubscribers.dblClickPopup){\n\t\t\tthis.columnSubscribers.dblClickPopup = this.loadPopupTableCellEvent.bind(this, \"dblClickPopup\");\n\t\t\tthis.subscribe(\"cell-click\", this.columnSubscribers.dblClickPopup);\n\t\t}\n\t}\n\t\n\tinitializeColumnHeaderPopup(column){\n\t\tvar icon = column.definition.headerPopupIcon,\n\t\theaderPopupEl;\n\t\t\n\t\theaderPopupEl = document.createElement(\"span\");\n\t\theaderPopupEl.classList.add(\"tabulator-header-popup-button\");\n\n\t\tif(icon){\n\t\t\tif(typeof icon === \"function\"){\n\t\t\t\ticon = icon(column.getComponent());\n\t\t\t}\n\n\t\t\tif(icon instanceof HTMLElement){\n\t\t\t\theaderPopupEl.appendChild(icon);\n\t\t\t}else{\n\t\t\t\theaderPopupEl.innerHTML = icon;\n\t\t\t}\n\t\t}else{\n\t\t\theaderPopupEl.innerHTML = \"&vellip;\";\n\t\t}\n\t\t\n\t\theaderPopupEl.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tthis.loadPopupEvent(column.definition.headerPopup, e, column);\n\t\t});\n\t\t\n\t\tcolumn.titleElement.insertBefore(headerPopupEl, column.titleElement.firstChild);\n\t}\n\t\n\tloadPopupTableCellEvent(option, e, cell){\n\t\tif(cell._cell){\n\t\t\tcell = cell._cell;\n\t\t}\n\t\t\n\t\tif(cell.column.definition[option]){\n\t\t\tthis.loadPopupEvent(cell.column.definition[option], e, cell);\n\t\t}\n\t}\n\t\n\tloadPopupTableColumnEvent(option, e, column){\n\t\tif(column._column){\n\t\t\tcolumn = column._column;\n\t\t}\n\t\t\n\t\tif(column.definition[option]){\n\t\t\tthis.loadPopupEvent(column.definition[option], e, column);\n\t\t}\n\t}\n\t\n\tloadPopupEvent(contents, e, component, position){\n\t\tvar renderedCallback;\n\n\t\tfunction onRendered(callback){\n\t\t\trenderedCallback = callback;\n\t\t}\n\t\t\n\t\tif(component._group){\n\t\t\tcomponent = component._group;\n\t\t}else if(component._row){\n\t\t\tcomponent = component._row;\n\t\t}\n\t\t\n\t\tcontents = typeof contents == \"function\" ? contents.call(this.table, e, component.getComponent(),  onRendered) : contents;\n\t\t\n\t\tthis.loadPopup(e, component, contents, renderedCallback, position);\n\t}\n\t\n\tloadPopup(e, component, contents, renderedCallback, position){\n\t\tvar touch = !(e instanceof MouseEvent),\n\t\tcontentsEl, popup;\n\t\t\n\t\tif(contents instanceof HTMLElement){\n\t\t\tcontentsEl = contents;\n\t\t}else{\n\t\t\tcontentsEl = document.createElement(\"div\");\n\t\t\tcontentsEl.innerHTML = contents;\n\t\t}\n\t\t\n\t\tcontentsEl.classList.add(\"tabulator-popup\");\n\n\t\tcontentsEl.addEventListener(\"click\", (e) =>{\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tif(!touch){\n\t\t\te.preventDefault();\n\t\t}\n\t\t\n\t\tpopup = this.popup(contentsEl);\n\n\t\tif(typeof renderedCallback === \"function\"){\n\t\t\tpopup.renderCallback(renderedCallback);\n\t\t}\n\n\t\tif(e){\n\t\t\tpopup.show(e);\n\t\t}else{\n\t\t\tpopup.show(component.getElement(), position || \"center\");\n\t\t}\n\n\t\t\n\t\tpopup.hideOnBlur(() => {\n\t\t\tthis.dispatchExternal(\"popupClosed\", component.getComponent());\n\t\t});\n\n\t\tthis.dispatchExternal(\"popupOpened\", component.getComponent());\n\t}\n}","import Module from '../../core/Module.js';\n\nexport default class Print extends Module{\n\n\tstatic moduleName = \"print\";\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.element = false;\n\t\tthis.manualBlock = false;\n\t\tthis.beforeprintEventHandler = null;\n\t\tthis.afterprintEventHandler = null;\n\n\t\tthis.registerTableOption(\"printAsHtml\", false); //enable print as html\n\t\tthis.registerTableOption(\"printFormatter\", false); //printing page formatter\n\t\tthis.registerTableOption(\"printHeader\", false); //page header contents\n\t\tthis.registerTableOption(\"printFooter\", false); //page footer contents\n\t\tthis.registerTableOption(\"printStyled\", true); //enable print as html styling\n\t\tthis.registerTableOption(\"printRowRange\", \"visible\"); //restrict print to visible rows only\n\t\tthis.registerTableOption(\"printConfig\", {}); //print config options\n\n\t\tthis.registerColumnOption(\"print\");\n\t\tthis.registerColumnOption(\"titlePrint\");\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.printAsHtml){\n\t\t\tthis.beforeprintEventHandler = this.replaceTable.bind(this);\n\t\t\tthis.afterprintEventHandler = this.cleanup.bind(this);\n\n\t\t\twindow.addEventListener(\"beforeprint\", this.beforeprintEventHandler );\n\t\t\twindow.addEventListener(\"afterprint\", this.afterprintEventHandler);\n\t\t\tthis.subscribe(\"table-destroy\", this.destroy.bind(this));\n\t\t}\n\n\t\tthis.registerTableFunction(\"print\", this.printFullscreen.bind(this));\n\t}\n\n\tdestroy(){\n\t\tif(this.table.options.printAsHtml){\n\t\t\twindow.removeEventListener( \"beforeprint\", this.beforeprintEventHandler );\n\t\t\twindow.removeEventListener( \"afterprint\", this.afterprintEventHandler );\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\treplaceTable(){\n\t\tif(!this.manualBlock){\n\t\t\tthis.element = document.createElement(\"div\");\n\t\t\tthis.element.classList.add(\"tabulator-print-table\");\n\n\t\t\tthis.element.appendChild(this.table.modules.export.generateTable(this.table.options.printConfig, this.table.options.printStyled, this.table.options.printRowRange, \"print\"));\n\n\t\t\tthis.table.element.style.display = \"none\";\n\n\t\t\tthis.table.element.parentNode.insertBefore(this.element, this.table.element);\n\t\t}\n\t}\n\n\tcleanup(){\n\t\tdocument.body.classList.remove(\"tabulator-print-fullscreen-hide\");\n\n\t\tif(this.element && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\tthis.table.element.style.display = \"\";\n\t\t}\n\t}\n\n\tprintFullscreen(visible, style, config){\n\t\tvar scrollX = window.scrollX,\n\t\tscrollY = window.scrollY,\n\t\theaderEl = document.createElement(\"div\"),\n\t\tfooterEl = document.createElement(\"div\"),\n\t\ttableEl = this.table.modules.export.generateTable(typeof config != \"undefined\" ? config : this.table.options.printConfig, typeof style != \"undefined\" ? style : this.table.options.printStyled, visible || this.table.options.printRowRange, \"print\"),\n\t\theaderContent, footerContent;\n\n\t\tthis.manualBlock = true;\n\n\t\tthis.element = document.createElement(\"div\");\n\t\tthis.element.classList.add(\"tabulator-print-fullscreen\");\n\n\t\tif(this.table.options.printHeader){\n\t\t\theaderEl.classList.add(\"tabulator-print-header\");\n\n\t\t\theaderContent = typeof this.table.options.printHeader == \"function\" ? this.table.options.printHeader.call(this.table) : this.table.options.printHeader;\n\n\t\t\tif(typeof headerContent == \"string\"){\n\t\t\t\theaderEl.innerHTML = headerContent;\n\t\t\t}else{\n\t\t\t\theaderEl.appendChild(headerContent);\n\t\t\t}\n\n\t\t\tthis.element.appendChild(headerEl);\n\t\t}\n\n\t\tthis.element.appendChild(tableEl);\n\n\t\tif(this.table.options.printFooter){\n\t\t\tfooterEl.classList.add(\"tabulator-print-footer\");\n\n\t\t\tfooterContent = typeof this.table.options.printFooter == \"function\" ? this.table.options.printFooter.call(this.table) : this.table.options.printFooter;\n\n\n\t\t\tif(typeof footerContent == \"string\"){\n\t\t\t\tfooterEl.innerHTML = footerContent;\n\t\t\t}else{\n\t\t\t\tfooterEl.appendChild(footerContent);\n\t\t\t}\n\n\t\t\tthis.element.appendChild(footerEl);\n\t\t}\n\n\t\tdocument.body.classList.add(\"tabulator-print-fullscreen-hide\");\n\t\tdocument.body.appendChild(this.element);\n\n\t\tif(this.table.options.printFormatter){\n\t\t\tthis.table.options.printFormatter(this.element, tableEl);\n\t\t}\n\n\t\twindow.print();\n\n\t\tthis.cleanup();\n\n\t\twindow.scrollTo(scrollX, scrollY);\n\n\t\tthis.manualBlock = false;\n\t}\n}","import Module from '../../core/Module.js';\n\nexport default class ReactiveData extends Module{\n\n\tstatic moduleName = \"reactiveData\";\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.data = false;\n\t\tthis.blocked = false; //block reactivity while performing update\n\t\tthis.origFuncs = {}; // hold original data array functions to allow replacement after data is done with\n\t\tthis.currentVersion = 0;\n\t\t\n\t\tthis.registerTableOption(\"reactiveData\", false); //enable data reactivity\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.reactiveData){\n\t\t\tthis.subscribe(\"cell-value-save-before\", this.block.bind(this, \"cellsave\"));\n\t\t\tthis.subscribe(\"cell-value-save-after\", this.unblock.bind(this, \"cellsave\"));\n\t\t\tthis.subscribe(\"row-data-save-before\", this.block.bind(this, \"rowsave\"));\n\t\t\tthis.subscribe(\"row-data-save-after\", this.unblock.bind(this, \"rowsave\"));\n\t\t\tthis.subscribe(\"row-data-init-after\", this.watchRow.bind(this));\n\t\t\tthis.subscribe(\"data-processing\", this.watchData.bind(this));\n\t\t\tthis.subscribe(\"table-destroy\", this.unwatchData.bind(this));\n\t\t}\n\t}\n\t\n\twatchData(data){\n\t\tvar self = this,\n\t\tversion;\n\t\t\n\t\tthis.currentVersion ++;\n\t\t\n\t\tversion = this.currentVersion;\n\t\t\n\t\tthis.unwatchData();\n\t\t\n\t\tthis.data = data;\n\t\t\n\t\t//override array push function\n\t\tthis.origFuncs.push = data.push;\n\t\t\n\t\tObject.defineProperty(this.data, \"push\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar args = Array.from(arguments),\n\t\t\t\tresult;\n\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\t\n\t\t\t\t\tself.block(\"data-push\");\n\n\t\t\t\t\targs.forEach((arg) => {\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, false);\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tresult = self.origFuncs.push.apply(data, arguments);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-push\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t//override array unshift function\n\t\tthis.origFuncs.unshift = data.unshift;\n\t\t\n\t\tObject.defineProperty(this.data, \"unshift\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar args = Array.from(arguments),\n\t\t\t\tresult;\n\t\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-unshift\");\n\t\t\t\t\t\n\t\t\t\t\targs.forEach((arg) => {\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, true);\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tresult = self.origFuncs.unshift.apply(data, arguments);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-unshift\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t\n\t\t//override array shift function\n\t\tthis.origFuncs.shift = data.shift;\n\t\t\n\t\tObject.defineProperty(this.data, \"shift\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar row, result;\n\t\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-shift\");\n\t\t\t\t\t\n\t\t\t\t\tif(self.data.length){\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[0]);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(row){\n\t\t\t\t\t\t\trow.deleteActual();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tresult = self.origFuncs.shift.call(data);\n\n\t\t\t\t\tself.unblock(\"data-shift\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t//override array pop function\n\t\tthis.origFuncs.pop = data.pop;\n\t\t\n\t\tObject.defineProperty(this.data, \"pop\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar row, result;\n\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-pop\");\n\t\t\t\t\t\n\t\t\t\t\tif(self.data.length){\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[self.data.length - 1]);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(row){\n\t\t\t\t\t\t\trow.deleteActual();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tresult = self.origFuncs.pop.call(data);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-pop\");\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t\n\t\t//override array splice function\n\t\tthis.origFuncs.splice = data.splice;\n\t\t\n\t\tObject.defineProperty(this.data, \"splice\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar args = Array.from(arguments),\n\t\t\t\tstart = args[0] < 0 ? data.length + args[0] : args[0],\n\t\t\t\tend = args[1],\n\t\t\t\tnewRows = args[2] ? args.slice(2) : false,\n\t\t\t\tstartRow, result;\n\t\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-splice\");\n\t\t\t\t\t//add new rows\n\t\t\t\t\tif(newRows){\n\t\t\t\t\t\tstartRow = data[start] ? self.table.rowManager.getRowFromDataObject(data[start]) : false;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(startRow){\n\t\t\t\t\t\t\tnewRows.forEach((rowData) => {\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, startRow, true);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tnewRows = newRows.slice().reverse();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tnewRows.forEach((rowData) => {\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, false, true);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t//delete removed rows\n\t\t\t\t\tif(end !== 0){\n\t\t\t\t\t\tvar oldRows = data.slice(start, typeof args[1] === \"undefined\" ? args[1] : start + end);\n\t\t\t\t\t\t\n\t\t\t\t\t\toldRows.forEach((rowData, i) => {\n\t\t\t\t\t\t\tvar row = self.table.rowManager.getRowFromDataObject(rowData);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(row){\n\t\t\t\t\t\t\t\trow.deleteActual(i !== oldRows.length - 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(newRows || end !== 0){\n\t\t\t\t\t\tself.table.rowManager.reRenderInPosition();\n\t\t\t\t\t}\n\n\t\t\t\t\tresult = self.origFuncs.splice.apply(data, arguments);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-splice\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result ;\n\t\t\t}\n\t\t});\n\t}\n\t\n\tunwatchData(){\n\t\tif(this.data !== false){\n\t\t\tfor(var key in this.origFuncs){\n\t\t\t\tObject.defineProperty(this.data, key, {\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tconfigurable:true,\n\t\t\t\t\twritable:true,\n\t\t\t\t\tvalue: this.origFuncs.key,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\t\n\twatchRow(row){\n\t\tvar data = row.getData();\n\t\t\n\t\tfor(var key in data){\n\t\t\tthis.watchKey(row, data, key);\n\t\t}\n\t\t\n\t\tif(this.table.options.dataTree){\n\t\t\tthis.watchTreeChildren(row);\n\t\t}\n\t}\n\t\n\twatchTreeChildren (row){\n\t\tvar self = this,\n\t\tchildField = row.getData()[this.table.options.dataTreeChildField],\n\t\torigFuncs = {};\n\t\t\n\t\tif(childField){\n\t\t\t\n\t\t\torigFuncs.push = childField.push;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"push\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-push\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result = origFuncs.push.apply(childField, arguments);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-push\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.unshift = childField.unshift;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"unshift\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-unshift\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.unshift.apply(childField, arguments);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-unshift\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.shift = childField.shift;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"shift\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-shift\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.shift.call(childField);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-shift\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.pop = childField.pop;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"pop\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-pop\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.pop.call(childField);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-pop\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.splice = childField.splice;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"splice\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-splice\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.splice.apply(childField, arguments);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-splice\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\trebuildTree(row){\n\t\tthis.table.modules.dataTree.initializeRow(row);\n\t\tthis.table.modules.dataTree.layoutRow(row);\n\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\n\t}\n\t\n\twatchKey(row, data, key){\n\t\tvar self = this,\n\t\tprops = Object.getOwnPropertyDescriptor(data, key),\n\t\tvalue = data[key],\n\t\tversion = this.currentVersion;\n\t\t\n\t\tObject.defineProperty(data, key, {\n\t\t\tset: (newValue) => {\n\t\t\t\tvalue = newValue;\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"key\");\n\t\t\t\t\t\n\t\t\t\t\tvar update = {};\n\t\t\t\t\tupdate[key] = newValue;\n\t\t\t\t\trow.updateData(update);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"key\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(props.set){\n\t\t\t\t\tprops.set(newValue);\n\t\t\t\t}\n\t\t\t},\n\t\t\tget:() => {\n\t\t\t\t\n\t\t\t\tif(props.get){\n\t\t\t\t\tprops.get();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn value;\n\t\t\t}\n\t\t});\n\t}\n\t\n\tunwatchRow(row){\n\t\tvar data = row.getData();\n\t\t\n\t\tfor(var key in data){\n\t\t\tObject.defineProperty(data, key, {\n\t\t\t\tvalue:data[key],\n\t\t\t});\n\t\t}\n\t}\n\t\n\tblock(key){\n\t\tif(!this.blocked){\n\t\t\tthis.blocked = key;\n\t\t}\n\t}\n\t\n\tunblock(key){\n\t\tif(this.blocked === key){\n\t\t\tthis.blocked = false;\n\t\t}\n\t}\n}","import Module from '../../core/Module.js';\n\nexport default class ResizeColumns extends Module{\n\n\tstatic moduleName = \"resizeColumns\";\n\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.startColumn = false;\n\t\tthis.startX = false;\n\t\tthis.startWidth = false;\n\t\tthis.latestX = false;\n\t\tthis.handle = null;\n\t\tthis.initialNextColumn = null;\n\t\tthis.nextColumn = null;\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.registerColumnOption(\"resizable\", true);\n\t\tthis.registerTableOption(\"resizableColumnFit\", false);\n\t\tthis.registerTableOption(\"resizableColumnGuide\", false);\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"column-rendered\", this.layoutColumnHeader.bind(this));\n\t}\n\t\n\tinitializeEventWatchers(){\n\t\tif(!this.initialized){\n\t\t\t\n\t\t\tthis.subscribe(\"cell-rendered\", this.layoutCellHandles.bind(this));\n\t\t\tthis.subscribe(\"cell-delete\", this.deInitializeComponent.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"cell-height\", this.resizeHandle.bind(this));\n\t\t\tthis.subscribe(\"column-moved\", this.columnLayoutUpdated.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"column-hide\", this.deInitializeColumn.bind(this));\n\t\t\tthis.subscribe(\"column-show\", this.columnLayoutUpdated.bind(this));\n\t\t\tthis.subscribe(\"column-width\", this.columnWidthUpdated.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"column-delete\", this.deInitializeComponent.bind(this));\n\t\t\tthis.subscribe(\"column-height\", this.resizeHandle.bind(this));\n\t\t\t\n\t\t\tthis.initialized = true;\n\t\t}\n\t}\n\t\n\t\n\tlayoutCellHandles(cell){\n\t\tif(cell.row.type === \"row\"){\n\t\t\tthis.deInitializeComponent(cell);\n\t\t\tthis.initializeColumn(\"cell\", cell, cell.column, cell.element);\n\t\t}\n\t}\n\t\n\tlayoutColumnHeader(column){\n\t\tif(column.definition.resizable){\n\t\t\tthis.initializeEventWatchers();\n\t\t\tthis.deInitializeComponent(column);\n\t\t\tthis.initializeColumn(\"header\", column, column, column.element);\n\t\t}\n\t}\n\t\n\tcolumnLayoutUpdated(column){\n\t\tvar prev = column.prevColumn();\n\t\t\n\t\tthis.reinitializeColumn(column);\n\t\t\n\t\tif(prev){\n\t\t\tthis.reinitializeColumn(prev);\n\t\t}\n\t}\n\t\n\tcolumnWidthUpdated(column){\n\t\tif(column.modules.frozen){\n\t\t\tif(this.table.modules.frozenColumns.leftColumns.includes(column)){\n\t\t\t\tthis.table.modules.frozenColumns.leftColumns.forEach((col) => {\n\t\t\t\t\tthis.reinitializeColumn(col);\n\t\t\t\t});\n\t\t\t}else if(this.table.modules.frozenColumns.rightColumns.includes(column)){\n\t\t\t\tthis.table.modules.frozenColumns.rightColumns.forEach((col) => {\n\t\t\t\t\tthis.reinitializeColumn(col);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tfrozenColumnOffset(column){\n\t\tvar offset = false;\n\n\t\tif(column.modules.frozen){\n\t\t\toffset = column.modules.frozen.marginValue; \n\n\t\t\tif(column.modules.frozen.position === \"left\"){\n\t\t\t\toffset += column.getWidth() - 3;\n\t\t\t}else{\n\t\t\t\tif(offset){\n\t\t\t\t\toffset -= 3;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn offset !== false ? offset + \"px\" : false;\n\t}\n\t\n\treinitializeColumn(column){\n\t\tvar frozenOffset = this.frozenColumnOffset(column);\n\t\t\n\t\tcolumn.cells.forEach((cell) => {\n\t\t\tif(cell.modules.resize && cell.modules.resize.handleEl){\n\t\t\t\tif(frozenOffset){\n\t\t\t\t\tcell.modules.resize.handleEl.style[column.modules.frozen.position] = frozenOffset;\n\t\t\t\t\tcell.modules.resize.handleEl.style[\"z-index\"] = 11;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcell.element.after(cell.modules.resize.handleEl);\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(column.modules.resize && column.modules.resize.handleEl){\n\t\t\tif(frozenOffset){\n\t\t\t\tcolumn.modules.resize.handleEl.style[column.modules.frozen.position] = frozenOffset;\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.element.after(column.modules.resize.handleEl);\n\t\t}\n\t}\n\t\n\tinitializeColumn(type, component, column, element){\n\t\tvar self = this,\n\t\tvariableHeight = false,\n\t\tmode = column.definition.resizable,\n\t\tconfig = {},\n\t\tnearestColumn = column.getLastColumn();\n\t\t\n\t\t//set column resize mode\n\t\tif(type === \"header\"){\n\t\t\tvariableHeight = column.definition.formatter == \"textarea\" || column.definition.variableHeight;\n\t\t\tconfig = {variableHeight:variableHeight};\n\t\t}\n\t\t\n\t\tif((mode === true || mode == type) && this._checkResizability(nearestColumn)){\n\t\t\t\n\t\t\tvar handle = document.createElement('span');\n\t\t\thandle.className = \"tabulator-col-resize-handle\";\n\t\t\t\n\t\t\thandle.addEventListener(\"click\", function(e){\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t\t\n\t\t\tvar handleDown = function(e){\n\t\t\t\tself.startColumn = column;\n\t\t\t\tself.initialNextColumn = self.nextColumn = nearestColumn.nextColumn();\n\t\t\t\tself._mouseDown(e, nearestColumn, handle);\n\t\t\t};\n\t\t\t\n\t\t\thandle.addEventListener(\"mousedown\", handleDown);\n\t\t\thandle.addEventListener(\"touchstart\", handleDown, {passive: true});\n\t\t\t\n\t\t\t//resize column on  double click\n\t\t\thandle.addEventListener(\"dblclick\", (e) => {\n\t\t\t\tvar oldWidth = nearestColumn.getWidth();\n\t\t\t\t\n\t\t\t\te.stopPropagation();\n\t\t\t\tnearestColumn.reinitializeWidth(true);\n\t\t\t\t\n\t\t\t\tif(oldWidth !== nearestColumn.getWidth()){\n\t\t\t\t\tself.dispatch(\"column-resized\", nearestColumn);\n\t\t\t\t\tself.dispatchExternal(\"columnResized\", nearestColumn.getComponent());\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(column.modules.frozen){\n\t\t\t\thandle.style.position = \"sticky\";\n\t\t\t\thandle.style[column.modules.frozen.position] = this.frozenColumnOffset(column);\n\t\t\t}\n\t\t\t\n\t\t\tconfig.handleEl = handle;\n\t\t\t\n\t\t\tif(element.parentNode && column.visible){\n\t\t\t\telement.after(handle);\t\t\t\n\t\t\t}\n\t\t}\n\t\t\n\t\tcomponent.modules.resize = config;\n\t}\n\t\n\tdeInitializeColumn(column){\n\t\tthis.deInitializeComponent(column);\n\t\t\n\t\tcolumn.cells.forEach((cell) => {\n\t\t\tthis.deInitializeComponent(cell);\n\t\t});\n\t}\n\t\n\tdeInitializeComponent(component){\n\t\tvar handleEl;\n\t\t\n\t\tif(component.modules.resize){\n\t\t\thandleEl = component.modules.resize.handleEl;\n\t\t\t\n\t\t\tif(handleEl && handleEl.parentElement){\n\t\t\t\thandleEl.parentElement.removeChild(handleEl);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tresizeHandle(component, height){\n\t\tif(component.modules.resize && component.modules.resize.handleEl){\n\t\t\tcomponent.modules.resize.handleEl.style.height = height;\n\t\t}\n\t}\n\t\n\tresize(e, column){\n\t\tvar x = typeof e.clientX === \"undefined\" ? e.touches[0].clientX : e.clientX,\n\t\tstartDiff = x - this.startX,\n\t\tmoveDiff = x - this.latestX,\n\t\tblockedBefore, blockedAfter;\n\n\t\tthis.latestX = x;\n\n\t\tif(this.table.rtl){\n\t\t\tstartDiff = -startDiff;\n\t\t\tmoveDiff = -moveDiff;\n\t\t}\n\n\t\tblockedBefore = column.width == column.minWidth || column.width == column.maxWidth;\n\n\t\tcolumn.setWidth(this.startWidth + startDiff);\n\n\t\tblockedAfter = column.width == column.minWidth || column.width == column.maxWidth;\n\n\t\tif(moveDiff < 0){\n\t\t\tthis.nextColumn = this.initialNextColumn;\n\t\t}\n\n\t\tif(this.table.options.resizableColumnFit && this.nextColumn && !(blockedBefore && blockedAfter)){\n\t\t\tlet colWidth = this.nextColumn.getWidth();\n\n\t\t\tif(moveDiff > 0){\n\t\t\t\tif(colWidth <= this.nextColumn.minWidth){\n\t\t\t\t\tthis.nextColumn = this.nextColumn.nextColumn();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.nextColumn){\n\t\t\t\tthis.nextColumn.setWidth(this.nextColumn.getWidth() - moveDiff);\n\t\t\t}\n\t\t}\n\n\t\tthis.table.columnManager.rerenderColumns(true);\n\n\t\tif(!this.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight){\n\t\t\tcolumn.checkCellHeights();\n\t\t}\n\t}\n\n\tcalcGuidePosition(e, column, handle) {\n\t\tvar mouseX = typeof e.clientX === \"undefined\" ? e.touches[0].clientX : e.clientX,\n\t\thandleX = handle.getBoundingClientRect().x - this.table.element.getBoundingClientRect().x,\n\t\ttableX = this.table.element.getBoundingClientRect().x,\n\t\tcolumnX = column.element.getBoundingClientRect().left - tableX,\n\t\tmouseDiff = mouseX - this.startX,\n\t\tpos = Math.max(handleX + mouseDiff, columnX + column.minWidth);\n\n\t\tif(column.maxWidth){\n\t\t\tpos = Math.min(pos, columnX + column.maxWidth);\n\t\t}\n\n\t\treturn pos;\n\t}\n\n\t_checkResizability(column){\n\t\treturn column.definition.resizable;\n\t}\n\t\n\t_mouseDown(e, column, handle){\n\t\tvar self = this,\n\t\tguideEl;\n\n\t\tthis.dispatchExternal(\"columnResizing\", column.getComponent());\n\n\t\tif(self.table.options.resizableColumnGuide){\n\t\t\tguideEl = document.createElement(\"span\");\n\t\t\tguideEl.classList.add('tabulator-col-resize-guide');\n\t\t\tself.table.element.appendChild(guideEl);\n\t\t\tsetTimeout(() => {\n\t\t\t\tguideEl.style.left = self.calcGuidePosition(e, column, handle) + \"px\";\n\t\t\t});\n\t\t}\n\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\n\n\t\tfunction mouseMove(e){\n\t\t\tif(self.table.options.resizableColumnGuide){\n\t\t\t\tguideEl.style.left = self.calcGuidePosition(e, column, handle) + \"px\";\n\t\t\t}else{\n\t\t\t\tself.resize(e, column);\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction mouseUp(e){\n\t\t\tif(self.table.options.resizableColumnGuide){\n\t\t\t\tself.resize(e, column);\n\t\t\t\tguideEl.remove();\n\t\t\t}\n\t\t\t\n\t\t\t//block editor from taking action while resizing is taking place\n\t\t\tif(self.startColumn.modules.edit){\n\t\t\t\tself.startColumn.modules.edit.blocked = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight){\n\t\t\t\tcolumn.checkCellHeights();\n\t\t\t}\n\t\t\t\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseUp);\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\n\t\t\t\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\n\t\t\t\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\n\t\t\t\n\t\t\tif(self.startWidth !== column.getWidth()){\n\t\t\t\tself.table.columnManager.verticalAlignHeaders();\n\n\t\t\t\tself.dispatch(\"column-resized\", column);\n\t\t\t\tself.dispatchExternal(\"columnResized\", column.getComponent());\n\t\t\t}\n\t\t}\n\t\t\n\t\te.stopPropagation(); //prevent resize from interfering with movable columns\n\t\t\n\t\t//block editor from taking action while resizing is taking place\n\t\tif(self.startColumn.modules.edit){\n\t\t\tself.startColumn.modules.edit.blocked = true;\n\t\t}\n\t\t\n\t\tself.startX = typeof e.clientX === \"undefined\" ? e.touches[0].clientX : e.clientX;\n\t\tself.latestX = self.startX;\n\t\tself.startWidth = column.getWidth();\n\t\t\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\n\t\thandle.addEventListener(\"touchmove\", mouseMove, {passive: true});\n\t\thandle.addEventListener(\"touchend\", mouseUp);\n\t}\n}","import Module from '../../core/Module.js';\n\nexport default class ResizeRows extends Module{\n\n\tstatic moduleName = \"resizeRows\";\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.startColumn = false;\n\t\tthis.startY = false;\n\t\tthis.startHeight = false;\n\t\tthis.handle = null;\n\t\tthis.prevHandle = null;\n\n\t\tthis.registerTableOption(\"resizableRows\", false); //resizable rows\n\t\tthis.registerTableOption(\"resizableRowGuide\", false);\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.resizableRows){\n\t\t\tthis.subscribe(\"row-layout-after\", this.initializeRow.bind(this));\n\t\t}\n\t}\n\n\tinitializeRow(row){\n\t\tvar self = this,\n\t\trowEl = row.getElement();\n\n\t\tvar handle = document.createElement('div');\n\t\thandle.className = \"tabulator-row-resize-handle\";\n\n\t\tvar prevHandle = document.createElement('div');\n\t\tprevHandle.className = \"tabulator-row-resize-handle prev\";\n\n\t\thandle.addEventListener(\"click\", function(e){\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tvar handleDown = function(e){\n\t\t\tself.startRow = row;\n\t\t\tself._mouseDown(e, row, handle);\n\t\t};\n\n\t\thandle.addEventListener(\"mousedown\", handleDown);\n\t\thandle.addEventListener(\"touchstart\", handleDown, {passive: true});\n\n\t\tprevHandle.addEventListener(\"click\", function(e){\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tvar prevHandleDown =  function(e){\n\t\t\tvar prevRow = self.table.rowManager.prevDisplayRow(row);\n\n\t\t\tif(prevRow){\n\t\t\t\tself.startRow = prevRow;\n\t\t\t\tself._mouseDown(e, prevRow, prevHandle);\n\t\t\t}\n\t\t};\n\n\t\tprevHandle.addEventListener(\"mousedown\",prevHandleDown);\n\t\tprevHandle.addEventListener(\"touchstart\",prevHandleDown, {passive: true});\n\n\t\trowEl.appendChild(handle);\n\t\trowEl.appendChild(prevHandle);\n\t}\n\n\tresize(e, row) {\n\t\trow.setHeight(this.startHeight + ((typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY) - this.startY));\n\t}\n\n\tcalcGuidePosition(e, row, handle) {\n\t\tvar mouseY = typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY,\n\t\thandleY = handle.getBoundingClientRect().y - this.table.element.getBoundingClientRect().y,\n\t\ttableY = this.table.element.getBoundingClientRect().y,\n\t\trowY = row.element.getBoundingClientRect().top - tableY,\n\t\tmouseDiff = mouseY - this.startY;\n\n\t\treturn Math.max(handleY + mouseDiff, rowY);\n\t}\n\n\t_mouseDown(e, row, handle){\n\t\tvar self = this,\n\t\tguideEl;\n\n\t\tself.dispatchExternal(\"rowResizing\", row.getComponent());\n\n\t\tif(self.table.options.resizableRowGuide){\n\t\t\tguideEl = document.createElement(\"span\");\n\t\t\tguideEl.classList.add('tabulator-row-resize-guide');\n\t\t\tself.table.element.appendChild(guideEl);\n\t\t\tsetTimeout(() => {\n\t\t\t\tguideEl.style.top = self.calcGuidePosition(e, row, handle) + \"px\";\n\t\t\t});\n\t\t}\n\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\n\n\t\tfunction mouseMove(e){\n\t\t\tif(self.table.options.resizableRowGuide){\n\t\t\t\tguideEl.style.top = self.calcGuidePosition(e, row, handle) + \"px\";\n\t\t\t}else{\n\t\t\t\tself.resize(e, row);\n\t\t\t}\n\t\t}\n\n\t\tfunction mouseUp(e){\n\t\t\tif(self.table.options.resizableRowGuide){\n\t\t\t\tself.resize(e, row);\n\t\t\t\tguideEl.remove();\n\t\t\t}\n\n\t\t\t// //block editor from taking action while resizing is taking place\n\t\t\t// if(self.startColumn.modules.edit){\n\t\t\t// \tself.startColumn.modules.edit.blocked = false;\n\t\t\t// }\n\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseMove);\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\n\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\n\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\t\tself.dispatchExternal(\"rowResized\", row.getComponent());\n\t\t}\n\n\t\te.stopPropagation(); //prevent resize from interfering with movable columns\n\n\t\t//block editor from taking action while resizing is taking place\n\t\t// if(self.startColumn.modules.edit){\n\t\t// \tself.startColumn.modules.edit.blocked = true;\n\t\t// }\n\n\t\tself.startY = typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY;\n\t\tself.startHeight = row.getHeight();\n\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\n\n\t\thandle.addEventListener(\"touchmove\", mouseMove, {passive: true});\n\t\thandle.addEventListener(\"touchend\", mouseUp);\n\t}\n}","import Module from '../../core/Module.js';\n\nexport default class ResizeTable extends Module{\n\n\tstatic moduleName = \"resizeTable\";\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.binding = false;\n\t\tthis.visibilityObserver = false;\n\t\tthis.resizeObserver = false;\n\t\tthis.containerObserver = false;\n\t\t\n\t\tthis.tableHeight = 0;\n\t\tthis.tableWidth = 0;\n\t\tthis.containerHeight = 0;\n\t\tthis.containerWidth = 0;\n\t\t\n\t\tthis.autoResize = false;\n\t\t\n\t\tthis.visible = false;\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.initialRedraw = false;\n\t\t\n\t\tthis.registerTableOption(\"autoResize\", true); //auto resize table\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.autoResize){\n\t\t\tvar table = this.table,\n\t\t\ttableStyle;\n\t\t\t\n\t\t\tthis.tableHeight = table.element.clientHeight;\n\t\t\tthis.tableWidth = table.element.clientWidth;\n\t\t\t\n\t\t\tif(table.element.parentNode){\n\t\t\t\tthis.containerHeight = table.element.parentNode.clientHeight;\n\t\t\t\tthis.containerWidth = table.element.parentNode.clientWidth;\n\t\t\t}\n\t\t\t\n\t\t\tif(typeof IntersectionObserver !== \"undefined\" && typeof ResizeObserver !== \"undefined\" && table.rowManager.getRenderMode() === \"virtual\"){\n\t\t\t\t\n\t\t\t\tthis.initializeVisibilityObserver();\n\t\t\t\t\n\t\t\t\tthis.autoResize = true;\n\t\t\t\t\n\t\t\t\tthis.resizeObserver = new ResizeObserver((entry) => {\n\t\t\t\t\tif(!table.browserMobile || (table.browserMobile && (!table.modules.edit || (table.modules.edit && !table.modules.edit.currentCell)))){\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\n\t\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.tableHeight != nodeHeight || this.tableWidth != nodeWidth){\n\t\t\t\t\t\t\tthis.tableHeight = nodeHeight;\n\t\t\t\t\t\t\tthis.tableWidth = nodeWidth;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(table.element.parentNode){\n\t\t\t\t\t\t\t\tthis.containerHeight = table.element.parentNode.clientHeight;\n\t\t\t\t\t\t\t\tthis.containerWidth = table.element.parentNode.clientWidth;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.redrawTable();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.resizeObserver.observe(table.element);\n\t\t\t\t\n\t\t\t\ttableStyle = window.getComputedStyle(table.element);\n\t\t\t\t\n\t\t\t\tif(this.table.element.parentNode && !this.table.rowManager.fixedHeight && (tableStyle.getPropertyValue(\"max-height\") || tableStyle.getPropertyValue(\"min-height\"))){\n\t\t\t\t\t\n\t\t\t\t\tthis.containerObserver = new ResizeObserver((entry) => {\n\t\t\t\t\t\tif(!table.browserMobile || (table.browserMobile && (!table.modules.edit || (table.modules.edit && !table.modules.edit.currentCell)))){\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\n\t\t\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(this.containerHeight != nodeHeight || this.containerWidth != nodeWidth){\n\t\t\t\t\t\t\t\tthis.containerHeight = nodeHeight;\n\t\t\t\t\t\t\t\tthis.containerWidth = nodeWidth;\n\t\t\t\t\t\t\t\tthis.tableHeight = table.element.clientHeight;\n\t\t\t\t\t\t\t\tthis.tableWidth = table.element.clientWidth;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.redrawTable();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.containerObserver.observe(this.table.element.parentNode);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.subscribe(\"table-resize\", this.tableResized.bind(this));\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.binding = function(){\n\t\t\t\t\tif(!table.browserMobile || (table.browserMobile && (!table.modules.edit || (table.modules.edit && !table.modules.edit.currentCell)))){\n\t\t\t\t\t\ttable.columnManager.rerenderColumns(true);\n\t\t\t\t\t\ttable.redraw();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\twindow.addEventListener(\"resize\", this.binding);\n\t\t\t}\n\t\t\t\n\t\t\tthis.subscribe(\"table-destroy\", this.clearBindings.bind(this));\n\t\t}\n\t}\n\t\n\tinitializeVisibilityObserver(){\n\t\tthis.visibilityObserver = new IntersectionObserver((entries) => {\n\t\t\tthis.visible = entries[0].isIntersecting;\n\t\t\t\n\t\t\tif(!this.initialized){\n\t\t\t\tthis.initialized = true;\n\t\t\t\tthis.initialRedraw = !this.visible;\n\t\t\t}else{\n\t\t\t\tif(this.visible){\n\t\t\t\t\tthis.redrawTable(this.initialRedraw);\n\t\t\t\t\tthis.initialRedraw = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.visibilityObserver.observe(this.table.element);\n\t}\n\t\n\tredrawTable(force){\n\t\tif(this.initialized && this.visible){\n\t\t\tthis.table.columnManager.rerenderColumns(true);\n\t\t\tthis.table.redraw(force);\n\t\t}\n\t}\n\t\n\ttableResized(){\n\t\tthis.table.rowManager.redraw();\n\t}\n\t\n\tclearBindings(){\n\t\tif(this.binding){\n\t\t\twindow.removeEventListener(\"resize\", this.binding);\n\t\t}\n\t\t\n\t\tif(this.resizeObserver){\n\t\t\tthis.resizeObserver.unobserve(this.table.element);\n\t\t}\n\t\t\n\t\tif(this.visibilityObserver){\n\t\t\tthis.visibilityObserver.unobserve(this.table.element);\n\t\t}\n\t\t\n\t\tif(this.containerObserver){\n\t\t\tthis.containerObserver.unobserve(this.table.element.parentNode);\n\t\t}\n\t}\n}","export default function(cell, formatterParams, onRendered){\n\tvar el = document.createElement(\"div\"),\n\tconfig = cell.getRow()._row.modules.responsiveLayout;\n\n\tel.classList.add(\"tabulator-responsive-collapse-toggle\");\n\t\n\tel.innerHTML = `<svg class='tabulator-responsive-collapse-toggle-open' viewbox=\"0 0 24 24\">\n  <line x1=\"7\" y1=\"12\" x2=\"17\" y2=\"12\" fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\n  <line y1=\"7\" x1=\"12\" y2=\"17\" x2=\"12\" fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\n</svg>\n\n<svg class='tabulator-responsive-collapse-toggle-close' viewbox=\"0 0 24 24\">\n  <line x1=\"7\" y1=\"12\" x2=\"17\" y2=\"12\"  fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\n</svg>`;\n\n\tcell.getElement().classList.add(\"tabulator-row-handle\");\n\n\tfunction toggleList(isOpen){\n\t\tvar collapseEl = config.element;\n\n\t\tconfig.open = isOpen;\n\n\t\tif(collapseEl){\n\n\t\t\tif(config.open){\n\t\t\t\tel.classList.add(\"open\");\n\t\t\t\tcollapseEl.style.display = '';\n\t\t\t}else{\n\t\t\t\tel.classList.remove(\"open\");\n\t\t\t\tcollapseEl.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n\n\tel.addEventListener(\"click\", function(e){\n\t\te.stopImmediatePropagation();\n\t\ttoggleList(!config.open);\n\t\tcell.getTable().rowManager.adjustTableSize();\n\t});\n\n\ttoggleList(config.open);\n\n\treturn el;\n}","import responsiveCollapse from './formatters/responsiveCollapse.js';\r\n\r\nexport default {\r\n\tformat:{\r\n\t\tformatters:{\r\n\t\t\tresponsiveCollapse:responsiveCollapse,\r\n\t\t}\r\n\t}\r\n};","import Module from '../../core/Module.js';\nimport extensions from './extensions/extensions.js';\n\nexport default class ResponsiveLayout extends Module{\n\n\tstatic moduleName = \"responsiveLayout\";\n\tstatic moduleExtensions = extensions;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.columns = [];\n\t\tthis.hiddenColumns = [];\n\t\tthis.mode = \"\";\n\t\tthis.index = 0;\n\t\tthis.collapseFormatter = [];\n\t\tthis.collapseStartOpen = true;\n\t\tthis.collapseHandleColumn = false;\n\n\t\tthis.registerTableOption(\"responsiveLayout\", false); //responsive layout flags\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseStartOpen\", true); //start showing collapsed data\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseUseFormatters\", true); //responsive layout collapse formatter\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseFormatter\", false); //responsive layout collapse formatter\n\n\t\tthis.registerColumnOption(\"responsive\");\n\t}\n\n\t//generate responsive columns list\n\tinitialize(){\n\t\tif(this.table.options.responsiveLayout){\n\t\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\t\tthis.subscribe(\"column-show\", this.updateColumnVisibility.bind(this));\n\t\t\tthis.subscribe(\"column-hide\", this.updateColumnVisibility.bind(this));\n\t\t\tthis.subscribe(\"columns-loaded\", this.initializeResponsivity.bind(this));\n\t\t\tthis.subscribe(\"column-moved\", this.initializeResponsivity.bind(this));\n\t\t\tthis.subscribe(\"column-add\", this.initializeResponsivity.bind(this));\n\t\t\tthis.subscribe(\"column-delete\", this.initializeResponsivity.bind(this));\n\n\t\t\tthis.subscribe(\"table-redrawing\", this.tableRedraw.bind(this));\n\t\t\t\n\t\t\tif(this.table.options.responsiveLayout === \"collapse\"){\n\t\t\t\tthis.subscribe(\"row-data-changed\", this.generateCollapsedRowContent.bind(this));\n\t\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t\t\tthis.subscribe(\"row-layout\", this.layoutRow.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\n\ttableRedraw(force){\n\t\tif([\"fitColumns\", \"fitDataStretch\"].indexOf(this.layoutMode()) === -1){\n\t\t\tif(!force){\n\t\t\t\tthis.update();\n\t\t\t}\n\t\t}\n\t}\n\n\tinitializeResponsivity(){\n\t\tvar columns = [];\n\n\t\tthis.mode = this.table.options.responsiveLayout;\n\t\tthis.collapseFormatter = this.table.options.responsiveLayoutCollapseFormatter || this.formatCollapsedData;\n\t\tthis.collapseStartOpen = this.table.options.responsiveLayoutCollapseStartOpen;\n\t\tthis.hiddenColumns = [];\n\n\t\tif(this.collapseFormatter){\n\t\t\tthis.collapseFormatter = this.collapseFormatter.bind(this.table);\n\t\t}\n\n\t\t//determine level of responsivity for each column\n\t\tthis.table.columnManager.columnsByIndex.forEach((column, i) => {\n\t\t\tif(column.modules.responsive){\n\t\t\t\tif(column.modules.responsive.order && column.modules.responsive.visible){\n\t\t\t\t\tcolumn.modules.responsive.index = i;\n\t\t\t\t\tcolumns.push(column);\n\n\t\t\t\t\tif(!column.visible && this.mode === \"collapse\"){\n\t\t\t\t\t\tthis.hiddenColumns.push(column);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t//sort list by responsivity\n\t\tcolumns = columns.reverse();\n\t\tcolumns = columns.sort((a, b) => {\n\t\t\tvar diff = b.modules.responsive.order - a.modules.responsive.order;\n\t\t\treturn diff || (b.modules.responsive.index - a.modules.responsive.index);\n\t\t});\n\n\t\tthis.columns = columns;\n\n\t\tif(this.mode === \"collapse\"){\n\t\t\tthis.generateCollapsedContent();\n\t\t}\n\n\t\t//assign collapse column\n\t\tfor (let col of this.table.columnManager.columnsByIndex){\n\t\t\tif(col.definition.formatter == \"responsiveCollapse\"){\n\t\t\t\tthis.collapseHandleColumn = col;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif(this.collapseHandleColumn){\n\t\t\tif(this.hiddenColumns.length){\n\t\t\t\tthis.collapseHandleColumn.show();\n\t\t\t}else{\n\t\t\t\tthis.collapseHandleColumn.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\t//define layout information\n\tinitializeColumn(column){\n\t\tvar def = column.getDefinition();\n\n\t\tcolumn.modules.responsive = {order: typeof def.responsive === \"undefined\" ? 1 : def.responsive, visible:def.visible === false ? false : true};\n\t}\n\n\tinitializeRow(row){\n\t\tvar el;\n\n\t\tif(row.type !== \"calc\"){\n\t\t\tel = document.createElement(\"div\");\n\t\t\tel.classList.add(\"tabulator-responsive-collapse\");\n\n\t\t\trow.modules.responsiveLayout = {\n\t\t\t\telement:el,\n\t\t\t\topen:this.collapseStartOpen,\n\t\t\t};\n\n\t\t\tif(!this.collapseStartOpen){\n\t\t\t\tel.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n\n\tlayoutRow(row){\n\t\tvar rowEl = row.getElement();\n\n\t\tif(row.modules.responsiveLayout){\n\t\t\trowEl.appendChild(row.modules.responsiveLayout.element);\n\t\t\tthis.generateCollapsedRowContent(row);\n\t\t}\n\t}\n\n\t//update column visibility\n\tupdateColumnVisibility(column, responsiveToggle){\n\t\tif(!responsiveToggle && column.modules.responsive){\n\t\t\tcolumn.modules.responsive.visible = column.visible;\n\t\t\tthis.initializeResponsivity();\n\t\t}\n\t}\n\n\thideColumn(column){\n\t\tvar colCount = this.hiddenColumns.length;\n\n\t\tcolumn.hide(false, true);\n\n\t\tif(this.mode === \"collapse\"){\n\t\t\tthis.hiddenColumns.unshift(column);\n\t\t\tthis.generateCollapsedContent();\n\n\t\t\tif(this.collapseHandleColumn && !colCount){\n\t\t\t\tthis.collapseHandleColumn.show();\n\t\t\t}\n\t\t}\n\t}\n\n\tshowColumn(column){\n\t\tvar index;\n\n\t\tcolumn.show(false, true);\n\t\t//set column width to prevent calculation loops on uninitialized columns\n\t\tcolumn.setWidth(column.getWidth());\n\n\t\tif(this.mode === \"collapse\"){\n\t\t\tindex = this.hiddenColumns.indexOf(column);\n\n\t\t\tif(index > -1){\n\t\t\t\tthis.hiddenColumns.splice(index, 1);\n\t\t\t}\n\n\t\t\tthis.generateCollapsedContent();\n\n\t\t\tif(this.collapseHandleColumn && !this.hiddenColumns.length){\n\t\t\t\tthis.collapseHandleColumn.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\t//redraw columns to fit space\n\tupdate(){\n\t\tvar working = true;\n\n\t\twhile(working){\n\n\t\t\tlet width = this.table.modules.layout.getMode() == \"fitColumns\" ? this.table.columnManager.getFlexBaseWidth() : this.table.columnManager.getWidth();\n\n\t\t\tlet diff = (this.table.options.headerVisible ? this.table.columnManager.element.clientWidth : this.table.element.clientWidth) - width;\n\n\t\t\tif(diff < 0){\n\t\t\t\t//table is too wide\n\t\t\t\tlet column = this.columns[this.index];\n\n\t\t\t\tif(column){\n\t\t\t\t\tthis.hideColumn(column);\n\t\t\t\t\tthis.index ++;\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\n\t\t\t}else{\n\n\t\t\t\t//table has spare space\n\t\t\t\tlet column = this.columns[this.index -1];\n\n\t\t\t\tif(column){\n\t\t\t\t\tif(diff > 0){\n\t\t\t\t\t\tif(diff >= column.getWidth()){\n\t\t\t\t\t\t\tthis.showColumn(column);\n\t\t\t\t\t\t\tthis.index --;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tworking = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tworking = false;\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!this.table.rowManager.activeRowsCount){\n\t\t\t\tthis.table.rowManager.renderEmptyScroll();\n\t\t\t}\n\t\t}\n\t}\n\n\tgenerateCollapsedContent(){\n\t\tvar rows = this.table.rowManager.getDisplayRows();\n\n\t\trows.forEach((row) => {\n\t\t\tthis.generateCollapsedRowContent(row);\n\t\t});\n\t}\n\n\tgenerateCollapsedRowContent(row){\n\t\tvar el, contents;\n\n\t\tif(row.modules.responsiveLayout){\n\t\t\tel = row.modules.responsiveLayout.element;\n\n\t\t\twhile(el.firstChild) el.removeChild(el.firstChild);\n\n\t\t\tcontents = this.collapseFormatter(this.generateCollapsedRowData(row));\n\t\t\tif(contents){\n\t\t\t\tel.appendChild(contents);\n\t\t\t}\n\t\t\trow.calcHeight(true);\n\t\t}\n\t}\n\n\tgenerateCollapsedRowData(row){\n\t\tvar data = row.getData(),\n\t\toutput = [],\n\t\tmockCellComponent;\n\n\t\tthis.hiddenColumns.forEach((column) => {\n\t\t\tvar value = column.getFieldValue(data);\n\n\t\t\tif(column.definition.title && column.field){\n\t\t\t\tif(column.modules.format && this.table.options.responsiveLayoutCollapseUseFormatters){\n\n\t\t\t\t\tmockCellComponent = {\n\t\t\t\t\t\tvalue:false,\n\t\t\t\t\t\tdata:{},\n\t\t\t\t\t\tgetValue:function(){\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetData:function(){\n\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetType:function(){\n\t\t\t\t\t\t\treturn \"cell\";\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetElement:function(){\n\t\t\t\t\t\t\treturn document.createElement(\"div\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetRow:function(){\n\t\t\t\t\t\t\treturn row.getComponent();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetColumn:function(){\n\t\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetTable:() => {\n\t\t\t\t\t\t\treturn this.table;\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\n\t\t\t\t\tfunction onRendered(callback){\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push({\n\t\t\t\t\t\tfield: column.field,\n\t\t\t\t\t\ttitle: column.definition.title,\n\t\t\t\t\t\tvalue: column.modules.format.formatter.call(this.table.modules.format, mockCellComponent, column.modules.format.params, onRendered)\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\toutput.push({\n\t\t\t\t\t\tfield: column.field,\n\t\t\t\t\t\ttitle: column.definition.title,\n\t\t\t\t\t\tvalue: value\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tformatCollapsedData(data){\n\t\tvar list = document.createElement(\"table\");\n\n\t\tdata.forEach((item) => {\n\t\t\tvar row = document.createElement(\"tr\");\n\t\t\tvar titleData = document.createElement(\"td\");\n\t\t\tvar valueData = document.createElement(\"td\");\n\t\t\tvar node_content;\n\n\t\t\tvar titleHighlight = document.createElement(\"strong\");\n\t\t\ttitleData.appendChild(titleHighlight);\n\t\t\t\n\t\t\tthis.modules.localize.bind(\"columns|\" + item.field, function(text){\n\t\t\t\ttitleHighlight.innerHTML = text || item.title;\n\t\t\t});\n\n\t\t\tif(item.value instanceof Node){\n\t\t\t\tnode_content = document.createElement(\"div\");\n\t\t\t\tnode_content.appendChild(item.value);\n\t\t\t\tvalueData.appendChild(node_content);\n\t\t\t}else{\n\t\t\t\tvalueData.innerHTML = item.value;\n\t\t\t}\n\n\t\t\trow.appendChild(titleData);\n\t\t\trow.appendChild(valueData);\n\t\t\tlist.appendChild(row);\n\t\t});\n\n\t\treturn Object.keys(data).length ? list : \"\";\n\t}\n}","import RowComponent from '../../../../core/row/RowComponent.js';\n\nexport default function(cell, formatterParams, onRendered){\n\tvar checkbox = document.createElement(\"input\");\n\tvar blocked = false;\n\n\tcheckbox.type = 'checkbox';\n\n\tcheckbox.setAttribute(\"aria-label\", \"Select Row\");\n\t\n\tif(this.table.modExists(\"selectRow\", true)){\n\n\t\tcheckbox.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tif(typeof cell.getRow == 'function'){\n\t\t\tvar row = cell.getRow();\n\n\t\t\tif(row instanceof RowComponent){\n\n\t\t\t\tcheckbox.addEventListener(\"change\", (e) => {\n\t\t\t\t\tif(this.table.options.selectableRowsRangeMode === \"click\"){\n\t\t\t\t\t\tif(!blocked){\n\t\t\t\t\t\t\trow.toggleSelect();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tblocked = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\trow.toggleSelect();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(this.table.options.selectableRowsRangeMode === \"click\"){\n\t\t\t\t\tcheckbox.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\tblocked = true;\n\t\t\t\t\t\tthis.table.modules.selectRow.handleComplexRowClick(row._row, e);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tcheckbox.checked = row.isSelected && row.isSelected();\n\t\t\t\tthis.table.modules.selectRow.registerRowSelectCheckbox(row, checkbox);\n\t\t\t}else{\n\t\t\t\tcheckbox = \"\";\n\t\t\t}\n\t\t}else {\n\t\t\tcheckbox.addEventListener(\"change\", (e) => {\n\t\t\t\tif(this.table.modules.selectRow.selectedRows.length){\n\t\t\t\t\tthis.table.deselectRow();\n\t\t\t\t}else {\n\t\t\t\t\tthis.table.selectRow(formatterParams.rowRange);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.table.modules.selectRow.registerHeaderSelectCheckbox(checkbox);\n\t\t}\n\t}\n\n\treturn checkbox;\n}","import rowSelection from './formatters/rowSelection.js';\r\n\r\nexport default {\r\n\tformat:{\r\n\t\tformatters:{\r\n\t\t\trowSelection:rowSelection,\r\n\t\t}\r\n\t}\r\n};","import Module from '../../core/Module.js';\nimport extensions from './extensions/extensions.js';\n\nexport default class SelectRow extends Module{\n\n\tstatic moduleName = \"selectRow\";\n\tstatic moduleExtensions = extensions;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.selecting = false; //flag selecting in progress\n\t\tthis.lastClickedRow = false; //last clicked row\n\t\tthis.selectPrev = []; //hold previously selected element for drag drop selection\n\t\tthis.selectedRows = []; //hold selected rows\n\t\tthis.headerCheckboxElement = null; // hold header select element\n\t\t\n\t\tthis.registerTableOption(\"selectableRows\", \"highlight\"); //highlight rows on hover\n\t\tthis.registerTableOption(\"selectableRowsRangeMode\", \"drag\");  //highlight rows on hover\n\t\tthis.registerTableOption(\"selectableRowsRollingSelection\", true); //roll selection once maximum number of selectable rows is reached\n\t\tthis.registerTableOption(\"selectableRowsPersistence\", true); // maintain selection when table view is updated\n\t\tthis.registerTableOption(\"selectableRowsCheck\", function(data, row){return true;}); //check whether row is selectable\n\t\t\n\t\tthis.registerTableFunction(\"selectRow\", this.selectRows.bind(this));\n\t\tthis.registerTableFunction(\"deselectRow\", this.deselectRows.bind(this));\n\t\tthis.registerTableFunction(\"toggleSelectRow\", this.toggleRow.bind(this));\n\t\tthis.registerTableFunction(\"getSelectedRows\", this.getSelectedRows.bind(this));\n\t\tthis.registerTableFunction(\"getSelectedData\", this.getSelectedData.bind(this));\n\t\t\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"select\", this.selectRows.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"deselect\", this.deselectRows.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"toggleSelect\", this.toggleRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"isSelected\", this.isRowSelected.bind(this));\n\t}\n\t\n\tinitialize(){\n\n\t\tthis.deprecatedOptionsCheck();\n\n\t\tif(this.table.options.selectableRows === \"highlight\" && this.table.options.selectableRange){\n\t\t\tthis.table.options.selectableRows = false;\n\t\t}\n\n\t\tif(this.table.options.selectableRows !== false){\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t\tthis.subscribe(\"row-deleting\", this.rowDeleted.bind(this));\n\t\t\tthis.subscribe(\"rows-wipe\", this.clearSelectionData.bind(this));\n\t\t\tthis.subscribe(\"rows-retrieve\", this.rowRetrieve.bind(this));\n\t\t\t\n\t\t\tif(this.table.options.selectableRows && !this.table.options.selectableRowsPersistence){\n\t\t\t\tthis.subscribe(\"data-refreshing\", this.deselectRows.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\n\tdeprecatedOptionsCheck(){\n\t\t// this.deprecationCheck(\"selectable\", \"selectableRows\", true);\n\t\t// this.deprecationCheck(\"selectableRollingSelection\", \"selectableRowsRollingSelection\", true);\n\t\t// this.deprecationCheck(\"selectableRangeMode\", \"selectableRowsRangeMode\", true);\n\t\t// this.deprecationCheck(\"selectablePersistence\", \"selectableRowsPersistence\", true);\n\t\t// this.deprecationCheck(\"selectableCheck\", \"selectableRowsCheck\", true);\n\t}\n\t\n\trowRetrieve(type, prevValue){\n\t\treturn type === \"selected\" ? this.selectedRows : prevValue;\n\t}\n\t\n\trowDeleted(row){\n\t\tthis._deselectRow(row, true);\n\t}\n\t\n\tclearSelectionData(silent){\n\t\tvar prevSelected = this.selectedRows.length;\n\n\t\tthis.selecting = false;\n\t\tthis.lastClickedRow = false;\n\t\tthis.selectPrev = [];\n\t\tthis.selectedRows = [];\n\t\t\n\t\tif(prevSelected && silent !== true){\n\t\t\tthis._rowSelectionChanged();\n\t\t}\n\t}\n\t\n\tinitializeRow(row){\n\t\tvar self = this,\n\t\tselectable = self.checkRowSelectability(row),\n\t\telement = row.getElement();\n\t\t\n\t\t// trigger end of row selection\n\t\tvar endSelect = function(){\n\t\t\t\n\t\t\tsetTimeout(function(){\n\t\t\t\tself.selecting = false;\n\t\t\t}, 50);\n\t\t\t\n\t\t\tdocument.body.removeEventListener(\"mouseup\", endSelect);\n\t\t};\n\t\t\n\t\trow.modules.select = {selected:false};\n\n\t\telement.classList.toggle(\"tabulator-selectable\", selectable);\n\t\telement.classList.toggle(\"tabulator-unselectable\", !selectable);\n\t\t\n\t\t//set row selection class\n\t\tif(self.checkRowSelectability(row)){\t\t\t\n\t\t\tif(self.table.options.selectableRows && self.table.options.selectableRows != \"highlight\"){\n\t\t\t\tif(self.table.options.selectableRowsRangeMode === \"click\"){\n\t\t\t\t\telement.addEventListener(\"click\", this.handleComplexRowClick.bind(this, row));\n\t\t\t\t}else{\n\t\t\t\t\telement.addEventListener(\"click\", function(e){\n\t\t\t\t\t\tif(!self.table.modExists(\"edit\") || !self.table.modules.edit.getCurrentCell()){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(!self.selecting){\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\telement.addEventListener(\"mousedown\", function(e){\n\t\t\t\t\t\tif(e.shiftKey){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.selecting = true;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.selectPrev = [];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"mouseup\", endSelect);\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"keyup\", endSelect);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\telement.addEventListener(\"mouseenter\", function(e){\n\t\t\t\t\t\tif(self.selecting){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(self.selectPrev[1] == row){\n\t\t\t\t\t\t\t\tself.toggleRow(self.selectPrev[0]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\telement.addEventListener(\"mouseout\", function(e){\n\t\t\t\t\t\tif(self.selecting){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\tself.selectPrev.unshift(row);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\thandleComplexRowClick(row, e){\n\t\tif(e.shiftKey){\n\t\t\tthis.table._clearSelection();\n\t\t\tthis.lastClickedRow = this.lastClickedRow || row;\n\t\t\t\n\t\t\tvar lastClickedRowIdx = this.table.rowManager.getDisplayRowIndex(this.lastClickedRow);\n\t\t\tvar rowIdx = this.table.rowManager.getDisplayRowIndex(row);\n\t\t\t\n\t\t\tvar fromRowIdx = lastClickedRowIdx <= rowIdx ? lastClickedRowIdx : rowIdx;\n\t\t\tvar toRowIdx = lastClickedRowIdx >= rowIdx ? lastClickedRowIdx : rowIdx;\n\t\t\t\n\t\t\tvar rows = this.table.rowManager.getDisplayRows().slice(0);\n\t\t\tvar toggledRows = rows.splice(fromRowIdx, toRowIdx - fromRowIdx + 1);\n\t\t\t\n\t\t\tif(e.ctrlKey || e.metaKey){\n\t\t\t\ttoggledRows.forEach((toggledRow)=>{\n\t\t\t\t\tif(toggledRow !== this.lastClickedRow){\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.table.options.selectableRows !== true && !this.isRowSelected(row)){\n\t\t\t\t\t\t\tif(this.selectedRows.length < this.table.options.selectableRows){\n\t\t\t\t\t\t\t\tthis.toggleRow(toggledRow);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.toggleRow(toggledRow);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.lastClickedRow = row;\n\t\t\t}else{\n\t\t\t\tthis.deselectRows(undefined, true);\n\t\t\t\t\n\t\t\t\tif(this.table.options.selectableRows !== true){\n\t\t\t\t\tif(toggledRows.length > this.table.options.selectableRows){\n\t\t\t\t\t\ttoggledRows = toggledRows.slice(0, this.table.options.selectableRows);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.selectRows(toggledRows);\n\t\t\t}\n\t\t\tthis.table._clearSelection();\n\t\t}\n\t\telse if(e.ctrlKey || e.metaKey){\n\t\t\tthis.toggleRow(row);\n\t\t\tthis.lastClickedRow = row;\n\t\t}else{\n\t\t\tthis.deselectRows(undefined, true);\n\t\t\tthis.selectRows(row);\n\t\t\tthis.lastClickedRow = row;\n\t\t}\n\t}\n\n\tcheckRowSelectability(row){\n\t\tif(row && row.type === \"row\"){\n\t\t\treturn this.table.options.selectableRowsCheck.call(this.table, row.getComponent());\n\t\t}\n\n\t\treturn false;\n\t}\n\t\n\t//toggle row selection\n\ttoggleRow(row){\n\t\tif(this.checkRowSelectability(row)){\n\t\t\tif(row.modules.select && row.modules.select.selected){\n\t\t\t\tthis._deselectRow(row);\n\t\t\t}else{\n\t\t\t\tthis._selectRow(row);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//select a number of rows\n\tselectRows(rows){\n\t\tvar changes = [], \n\t\trowMatch, change;\n\t\t\n\t\tswitch(typeof rows){\n\t\t\tcase \"undefined\":\n\t\t\t\trowMatch = this.table.rowManager.rows;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"number\":\n\t\t\t\trowMatch = this.table.rowManager.findRow(rows);\n\t\t\t\tbreak;\n\t\t\t\t\n\t\t\tcase \"string\":\n\t\t\t\trowMatch = this.table.rowManager.findRow(rows);\n\t\t\t\n\t\t\t\tif(!rowMatch){\n\t\t\t\t\trowMatch = this.table.rowManager.getRows(rows);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\trowMatch = rows;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(Array.isArray(rowMatch)){\n\t\t\tif(rowMatch.length){\n\t\t\t\trowMatch.forEach((row) => {\n\t\t\t\t\tchange = this._selectRow(row, true, true);\n\n\t\t\t\t\tif(change){\n\t\t\t\t\t\tchanges.push(change);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis._rowSelectionChanged(false, changes);\n\t\t\t}\n\t\t}else{\n\t\t\tif(rowMatch){\n\t\t\t\tthis._selectRow(rowMatch, false, true);\n\t\t\t}\n\t\t}\t\n\t}\n\t\n\t//select an individual row\n\t_selectRow(rowInfo, silent, force){\n\t\t//handle max row count\n\t\tif(!isNaN(this.table.options.selectableRows) && this.table.options.selectableRows !== true && !force){\n\t\t\tif(this.selectedRows.length >= this.table.options.selectableRows){\n\t\t\t\tif(this.table.options.selectableRowsRollingSelection){\n\t\t\t\t\tthis._deselectRow(this.selectedRows[0]);\n\t\t\t\t}else{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar row = this.table.rowManager.findRow(rowInfo);\n\t\t\n\t\tif(row){\n\t\t\tif(this.selectedRows.indexOf(row) == -1){\n\t\t\t\trow.getElement().classList.add(\"tabulator-selected\");\n\t\t\t\tif(!row.modules.select){\n\t\t\t\t\trow.modules.select = {};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trow.modules.select.selected = true;\n\t\t\t\tif(row.modules.select.checkboxEl){\n\t\t\t\t\trow.modules.select.checkboxEl.checked = true;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.selectedRows.push(row);\n\t\t\t\t\n\t\t\t\tif(this.table.options.dataTreeSelectPropagate){\n\t\t\t\t\tthis.childRowSelection(row, true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatchExternal(\"rowSelected\", row.getComponent());\n\t\t\t\t\n\t\t\t\tthis._rowSelectionChanged(silent, row);\n\n\t\t\t\treturn row;\n\t\t\t}\n\t\t}else{\n\t\t\tif(!silent){\n\t\t\t\tconsole.warn(\"Selection Error - No such row found, ignoring selection:\" + rowInfo);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tisRowSelected(row){\n\t\treturn this.selectedRows.indexOf(row) !== -1;\n\t}\n\t\n\t//deselect a number of rows\n\tdeselectRows(rows, silent){\n\t\tvar changes = [], \n\t\trowMatch, change;\n\t\t\n\t\tswitch(typeof rows){\n\t\t\tcase \"undefined\":\n\t\t\t\trowMatch = Object.assign([], this.selectedRows);\n\t\t\t\tbreak;\n\n\t\t\tcase \"number\":\n\t\t\t\trowMatch = this.table.rowManager.findRow(rows);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"string\":\n\t\t\t\trowMatch = this.table.rowManager.findRow(rows);\n\t\t\t\n\t\t\t\tif(!rowMatch){\n\t\t\t\t\trowMatch = this.table.rowManager.getRows(rows);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\trowMatch = rows;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(Array.isArray(rowMatch)){\n\t\t\tif(rowMatch.length){\n\t\t\t\trowMatch.forEach((row) => {\n\t\t\t\t\tchange = this._deselectRow(row, true, true);\n\n\t\t\t\t\tif(change){\n\t\t\t\t\t\tchanges.push(change);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis._rowSelectionChanged(silent, [], changes);\n\t\t\t}\n\t\t}else{\n\t\t\tif(rowMatch){\n\t\t\t\tthis._deselectRow(rowMatch, silent, true);\n\t\t\t}\n\t\t}\t\n\t}\n\t\n\t//deselect an individual row\n\t_deselectRow(rowInfo, silent){\n\t\tvar self = this,\n\t\trow = self.table.rowManager.findRow(rowInfo),\n\t\tindex, element;\n\t\t\n\t\tif(row){\n\t\t\tindex = self.selectedRows.findIndex(function(selectedRow){\n\t\t\t\treturn selectedRow == row;\n\t\t\t});\n\t\t\t\n\t\t\tif(index > -1){\n\n\t\t\t\telement = row.getElement();\n\t\t\t\t\n\t\t\t\tif(element){\n\t\t\t\t\telement.classList.remove(\"tabulator-selected\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(!row.modules.select){\n\t\t\t\t\trow.modules.select = {};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trow.modules.select.selected = false;\n\t\t\t\tif(row.modules.select.checkboxEl){\n\t\t\t\t\trow.modules.select.checkboxEl.checked = false;\n\t\t\t\t}\n\t\t\t\tself.selectedRows.splice(index, 1);\n\t\t\t\t\n\t\t\t\tif(this.table.options.dataTreeSelectPropagate){\n\t\t\t\t\tthis.childRowSelection(row, false);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatchExternal(\"rowDeselected\", row.getComponent());\n\t\t\t\t\n\t\t\t\tself._rowSelectionChanged(silent, undefined, row);\n\n\t\t\t\treturn row;\n\t\t\t}\n\t\t}else{\n\t\t\tif(!silent){\n\t\t\t\tconsole.warn(\"Deselection Error - No such row found, ignoring selection:\" + rowInfo);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tgetSelectedData(){\n\t\tvar data = [];\n\t\t\n\t\tthis.selectedRows.forEach(function(row){\n\t\t\tdata.push(row.getData());\n\t\t});\n\t\t\n\t\treturn data;\n\t}\n\t\n\tgetSelectedRows(){\n\t\tvar rows = [];\n\t\t\n\t\tthis.selectedRows.forEach(function(row){\n\t\t\trows.push(row.getComponent());\n\t\t});\n\t\t\n\t\treturn rows;\n\t}\n\t\n\t_rowSelectionChanged(silent, selected = [], deselected = []){\n\t\tif(this.headerCheckboxElement){\n\t\t\tif(this.selectedRows.length === 0){\n\t\t\t\tthis.headerCheckboxElement.checked = false;\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\n\t\t\t} else if(this.table.rowManager.rows.length === this.selectedRows.length){\n\t\t\t\tthis.headerCheckboxElement.checked = true;\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\n\t\t\t} else {\n\t\t\t\tthis.headerCheckboxElement.indeterminate = true;\n\t\t\t\tthis.headerCheckboxElement.checked = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(!silent){\n\t\t\tif(!Array.isArray(selected)){\n\t\t\t\tselected = [selected];\n\t\t\t}\n\n\t\t\tselected = selected.map(row => row.getComponent());\n\n\t\t\tif(!Array.isArray(deselected)){\n\t\t\t\tdeselected = [deselected];\n\t\t\t}\n\n\t\t\tdeselected = deselected.map(row => row.getComponent());\n\n\t\t\tthis.dispatchExternal(\"rowSelectionChanged\", this.getSelectedData(), this.getSelectedRows(), selected, deselected);\n\t\t}\n\t}\n\t\n\tregisterRowSelectCheckbox (row, element) {\n\t\tif(!row._row.modules.select){\n\t\t\trow._row.modules.select = {};\n\t\t}\n\t\t\n\t\trow._row.modules.select.checkboxEl = element;\n\t}\n\t\n\tregisterHeaderSelectCheckbox (element) {\n\t\tthis.headerCheckboxElement = element;\n\t}\n\t\n\tchildRowSelection(row, select){\n\t\tvar children = this.table.modules.dataTree.getChildren(row, true, true);\n\t\t\n\t\tif(select){\n\t\t\tfor(let child of children){\n\t\t\t\tthis._selectRow(child, true);\n\t\t\t}\n\t\t}else{\n\t\t\tfor(let child of children){\n\t\t\t\tthis._deselectRow(child, true);\n\t\t\t}\n\t\t}\n\t}\n}","export default class RangeComponent {\n\tconstructor(range) {\n\t\tthis._range = range;\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function (target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t} else {\n\t\t\t\t\treturn target._range.table.componentFunctionBinder.handle(\"range\", target._range, name);\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t}\n\n\tgetElement() {\n\t\treturn this._range.element;\n\t}\n\n\tgetData() {\n\t\treturn this._range.getData();\n\t}\n\n\tgetCells() {\n\t\treturn this._range.getCells(true);\n\t}\n\n\tgetStructuredCells() {\n\t\treturn this._range.getStructuredCells();\n\t}\n\n\tgetRows() {\n\t\treturn this._range.getRows().map((row) => row.getComponent());\n\t}\n\n\tgetColumns() {\n\t\treturn this._range.getColumns().map((column) => column.getComponent());\n\t}\n\t\n\tgetBounds() {\n\t\treturn this._range.getBounds();\n\t}\n\n\tgetTopEdge() {\n\t\treturn this._range.top;\n\t}\n\n\tgetBottomEdge() {\n\t\treturn this._range.bottom;\n\t}\n\n\tgetLeftEdge() {\n\t\treturn this._range.left;\n\t}\n\n\tgetRightEdge() {\n\t\treturn this._range.right;\n\t}\n\n\tsetBounds(start, end){\n\t\tif(this._range.destroyedGuard(\"setBounds\")){\n\t\t\tthis._range.setBounds(start ? start._cell : start, end ? end._cell : end);\n\t\t}\n\t}\n\n\tsetStartBound(start){\n\t\tif(this._range.destroyedGuard(\"setStartBound\")){\n\t\t\tthis._range.setEndBound(start ? start._cell : start);\n\t\t\tthis._range.rangeManager.layoutElement();\n\t\t}\n\t}\n\n\tsetEndBound(end){\n\t\tif(this._range.destroyedGuard(\"setEndBound\")){\n\t\t\tthis._range.setEndBound(end ? end._cell : end);\n\t\t\tthis._range.rangeManager.layoutElement();\n\t\t}\n\t}\n\n\tclearValues(){\n\t\tif(this._range.destroyedGuard(\"clearValues\")){\n\t\t\tthis._range.clearValues();\n\t\t}\n\t}\n\n\tremove(){\n\t\tif(this._range.destroyedGuard(\"remove\")){\n\t\t\tthis._range.destroy(true);\n\t\t}\n\t}\n}","import CoreFeature from '../../core/CoreFeature.js';\nimport RangeComponent from \"./RangeComponent\";\n\nexport default class Range extends CoreFeature{\n\tconstructor(table, rangeManager, start, end) {\n\t\tsuper(table);\n\t\t\n\t\tthis.rangeManager = rangeManager;\n\t\tthis.element = null;\n\t\tthis.initialized = false;\n\t\tthis.initializing = {\n\t\t\tstart:false,\n\t\t\tend:false,\n\t\t};\n\t\tthis.destroyed = false;\n\t\t\n\t\tthis.top = 0;\n\t\tthis.bottom = 0;\n\t\tthis.left = 0;\n\t\tthis.right = 0;\n\t\t\n\t\tthis.table = table;\n\t\tthis.start = {row:0, col:0};\n\t\tthis.end = {row:0, col:0};\n\n\t\tif(this.rangeManager.rowHeader){\n\t\t\tthis.left = 1;\n\t\t\tthis.right = 1;\n\t\t\tthis.start.col = 1;\n\t\t\tthis.end.col = 1;\n\t\t}\n\t\t\n\t\tthis.initElement();\n\t\t\n\t\tsetTimeout(() => {\n\t\t\tthis.initBounds(start, end);\n\t\t});\n\t}\n\t\n\tinitElement(){\n\t\tthis.element = document.createElement(\"div\");\n\t\tthis.element.classList.add(\"tabulator-range\");\n\t}\n\t\n\tinitBounds(start, end){\n\t\tthis._updateMinMax();\n\t\t\n\t\tif(start){\n\t\t\tthis.setBounds(start, end || start);\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t///////   Boundary Setup    ///////\n\t///////////////////////////////////\n\t\n\tsetStart(row, col) {\n\t\tif(this.start.row !== row || this.start.col !== col){\n\t\t\tthis.start.row = row;\n\t\t\tthis.start.col = col;\n\t\t\t\n\t\t\tthis.initializing.start = true;\n\t\t\tthis._updateMinMax();\n\t\t}\n\t}\n\t\n\tsetEnd(row, col) {\n\t\tif(this.end.row !== row || this.end.col !== col){\n\t\t\tthis.end.row = row;\n\t\t\tthis.end.col = col;\n\t\t\t\n\t\t\tthis.initializing.end = true;\n\t\t\tthis._updateMinMax();\n\t\t}\n\t}\n\t\n\tsetBounds(start, end, visibleRows){\n\t\tif(start){\n\t\t\tthis.setStartBound(start);\n\t\t}\n\t\t\n\t\tthis.setEndBound(end || start);\n\t\tthis.rangeManager.layoutElement(visibleRows);\n\t}\n\t\n\tsetStartBound(element){\n\t\tvar row, col;\n\t\t\n\t\tif (element.type === \"column\") {\n\t\t\tif(this.rangeManager.columnSelection){\n\t\t\t\tthis.setStart(0, element.getPosition() - 1);\n\t\t\t}\n\t\t}else{\n\t\t\trow = element.row.position - 1;\n\t\t\tcol = element.column.getPosition() - 1;\n\t\t\t\n\t\t\tif (element.column === this.rangeManager.rowHeader) {\n\t\t\t\tthis.setStart(row, 1);\n\t\t\t} else {\n\t\t\t\tthis.setStart(row, col);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tsetEndBound(element){\n\t\tvar rowsCount = this._getTableRows().length,\n\t\trow, col, isRowHeader;\n\t\t\n\t\tif (element.type === \"column\") {\n\t\t\tif(this.rangeManager.columnSelection){\n\t\t\t\tif (this.rangeManager.selecting === \"column\") {\n\t\t\t\t\tthis.setEnd(rowsCount - 1, element.getPosition() - 1);\n\t\t\t\t} else if (this.rangeManager.selecting === \"cell\") {\n\t\t\t\t\tthis.setEnd(0, element.getPosition() - 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\trow = element.row.position - 1;\n\t\t\tcol = element.column.getPosition() - 1;\n\t\t\tisRowHeader = element.column === this.rangeManager.rowHeader;\n\t\t\t\n\t\t\tif (this.rangeManager.selecting === \"row\") {\n\t\t\t\tthis.setEnd(row, this._getTableColumns().length - 1);\n\t\t\t} else if (this.rangeManager.selecting !== \"row\" && isRowHeader) {\n\t\t\t\tthis.setEnd(row, 0);\n\t\t\t} else if (this.rangeManager.selecting === \"column\") {\n\t\t\t\tthis.setEnd(rowsCount - 1, col);\n\t\t\t} else {\n\t\t\t\tthis.setEnd(row, col);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_updateMinMax() {\n\t\tthis.top = Math.min(this.start.row, this.end.row);\n\t\tthis.bottom = Math.max(this.start.row, this.end.row);\n\t\tthis.left = Math.min(this.start.col, this.end.col);\n\t\tthis.right = Math.max(this.start.col, this.end.col);\n\t\t\n\t\tif(this.initialized){\n\t\t\tthis.dispatchExternal(\"rangeChanged\", this.getComponent());\n\t\t}else{\n\t\t\tif(this.initializing.start && this.initializing.end){\n\t\t\t\tthis.initialized = true;\n\t\t\t\tthis.dispatchExternal(\"rangeAdded\", this.getComponent());\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_getTableColumns() {\n\t\treturn this.table.columnManager.getVisibleColumnsByIndex();\n\t}\n\t\n\t_getTableRows() {\n\t\treturn this.table.rowManager.getDisplayRows().filter(row=> row.type === \"row\");\n\t}\n\t\n\t///////////////////////////////////\n\t///////      Rendering      ///////\n\t///////////////////////////////////\n\t\n\tlayout() {\n\t\tvar _vDomTop = this.table.rowManager.renderer.vDomTop,\n\t\t_vDomBottom = this.table.rowManager.renderer.vDomBottom,\n\t\t_vDomLeft = this.table.columnManager.renderer.leftCol,\n\t\t_vDomRight = this.table.columnManager.renderer.rightCol,\t\t\n\t\ttop, bottom, left, right, topLeftCell, bottomRightCell, topLeftCellEl, bottomRightCellEl, topLeftRowEl, bottomRightRowEl;\n\n\t\tif(this.table.options.renderHorizontal === \"virtual\" && this.rangeManager.rowHeader) {\n\t\t\t_vDomRight += 1;\n\t\t}\n\t\t\n\t\tif (_vDomTop == null) {\n\t\t\t_vDomTop = 0;\n\t\t}\n\t\t\n\t\tif (_vDomBottom == null) {\n\t\t\t_vDomBottom = Infinity;\n\t\t}\n\t\t\n\t\tif (_vDomLeft == null) {\n\t\t\t_vDomLeft = 0;\n\t\t}\n\t\t\n\t\tif (_vDomRight == null) {\n\t\t\t_vDomRight = Infinity;\n\t\t}\n\t\t\n\t\tif (this.overlaps(_vDomLeft, _vDomTop, _vDomRight, _vDomBottom)) {\n\t\t\ttop = Math.max(this.top, _vDomTop);\n\t\t\tbottom = Math.min(this.bottom, _vDomBottom);\n\t\t\tleft = Math.max(this.left, _vDomLeft);\n\t\t\tright = Math.min(this.right, _vDomRight);\n\t\t\t\n\t\t\ttopLeftCell = this.rangeManager.getCell(top, left);\n\t\t\tbottomRightCell = this.rangeManager.getCell(bottom, right);\n\t\t\ttopLeftCellEl = topLeftCell.getElement();\n\t\t\tbottomRightCellEl = bottomRightCell.getElement();\n\t\t\ttopLeftRowEl = topLeftCell.row.getElement();\n\t\t\tbottomRightRowEl = bottomRightCell.row.getElement();\n\t\t\t\n\t\t\tthis.element.classList.add(\"tabulator-range-active\");\n\t\t\t// this.element.classList.toggle(\"tabulator-range-active\", this === this.rangeManager.activeRange);\n\n\t\t\tif(this.table.rtl){\n\t\t\t\tthis.element.style.right = topLeftRowEl.offsetWidth - topLeftCellEl.offsetLeft - topLeftCellEl.offsetWidth + \"px\";\n\t\t\t\tthis.element.style.width = topLeftCellEl.offsetLeft + topLeftCellEl.offsetWidth - bottomRightCellEl.offsetLeft + \"px\";\n\t\t\t}else{\n\t\t\t\tthis.element.style.left = topLeftRowEl.offsetLeft + topLeftCellEl.offsetLeft + \"px\";\n\t\t\t\tthis.element.style.width = bottomRightCellEl.offsetLeft + bottomRightCellEl.offsetWidth - topLeftCellEl.offsetLeft + \"px\";\n\t\t\t}\n\t\t\t\n\t\t\tthis.element.style.top = topLeftRowEl.offsetTop + \"px\";\n\t\t\tthis.element.style.height = bottomRightRowEl.offsetTop + bottomRightRowEl.offsetHeight - topLeftRowEl.offsetTop + \"px\";\n\t\t}\n\t}\n\t\n\tatTopLeft(cell) {\n\t\treturn cell.row.position - 1 === this.top && cell.column.getPosition() - 1 === this.left;\n\t}\n\t\n\tatBottomRight(cell) {\n\t\treturn cell.row.position - 1 === this.bottom && cell.column.getPosition() - 1 === this.right;\n\t}\n\t\n\toccupies(cell) {\n\t\treturn this.occupiesRow(cell.row) && this.occupiesColumn(cell.column);\n\t}\n\t\n\toccupiesRow(row) {\n\t\treturn this.top <= row.position - 1 && row.position - 1 <= this.bottom;\n\t}\n\t\n\toccupiesColumn(col) {\n\t\treturn this.left <= col.getPosition() - 1 && col.getPosition() - 1 <= this.right;\n\t}\n\t\n\toverlaps(left, top, right, bottom) {\n\t\tif ((this.left > right || left > this.right) || (this.top > bottom || top > this.bottom)){\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\treturn true;\n\t}\n\t\n\tgetData() {\n\t\tvar data = [],\n\t\trows = this.getRows(),\n\t\tcolumns = this.getColumns();\n\t\t\n\t\trows.forEach((row) => {\n\t\t\tvar rowData = row.getData(),\n\t\t\tresult = {};\n\t\t\t\n\t\t\tcolumns.forEach((column) => {\n\t\t\t\tresult[column.field] = rowData[column.field];\n\t\t\t});\n\t\t\t\n\t\t\tdata.push(result);\n\t\t});\n\t\t\n\t\treturn data;\n\t}\n\t\n\tgetCells(structured, component) {\n\t\tvar cells = [],\n\t\trows = this.getRows(),\n\t\tcolumns = this.getColumns();\n\t\t\n\t\tif (structured) {\n\t\t\tcells = rows.map((row) => {\n\t\t\t\tvar arr = [];\n\t\t\t\t\n\t\t\t\trow.getCells().forEach((cell) => {\n\t\t\t\t\tif (columns.includes(cell.column)) {\n\t\t\t\t\t\tarr.push(component ? cell.getComponent() : cell);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn arr;\n\t\t\t});\n\t\t} else {\n\t\t\trows.forEach((row) => {\n\t\t\t\trow.getCells().forEach((cell) => {\n\t\t\t\t\tif (columns.includes(cell.column)) {\n\t\t\t\t\t\tcells.push(component ? cell.getComponent() : cell);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn cells;\n\t}\n\t\n\tgetStructuredCells() {\n\t\treturn this.getCells(true, true);\n\t}\n\t\n\tgetRows() {\n\t\treturn this._getTableRows().slice(this.top, this.bottom + 1);\n\t}\n\t\n\tgetColumns() {\n\t\treturn this._getTableColumns().slice(this.left, this.right + 1);\n\t}\n\t\n\tclearValues(){\n\t\tvar cells = this.getCells();\n\t\tvar clearValue = this.table.options.selectableRangeClearCellsValue;\n\t\t\n\t\tthis.table.blockRedraw();\n\t\t\n\t\tcells.forEach((cell) => {\n\t\t\tcell.setValue(clearValue);\n\t\t});\n\t\t\n\t\tthis.table.restoreRedraw();\n\t\t\n\t}\n\t\n\tgetBounds(component){\n\t\tvar cells = this.getCells(false, component),\n\t\toutput = {\n\t\t\tstart:null,\n\t\t\tend:null,\n\t\t};\n\t\t\n\t\tif(cells.length){\n\t\t\toutput.start = cells[0];\n\t\t\toutput.end = cells[cells.length - 1];\n\t\t}else{\n\t\t\tconsole.warn(\"No bounds defined on range\");\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetComponent() {\n\t\tif (!this.component) {\n\t\t\tthis.component = new RangeComponent(this);\n\t\t}\n\t\treturn this.component;\n\t}\n\t\n\tdestroy(notify) {\n\t\tthis.destroyed = true;\n\t\t\n\t\tthis.element.remove();\n\t\t\n\t\tif(notify){\n\t\t\tthis.rangeManager.rangeRemoved(this);\n\t\t}\n\t\t\n\t\tif(this.initialized){\n\t\t\tthis.dispatchExternal(\"rangeRemoved\", this.getComponent());\n\t\t}\n\t}\n\t\n\tdestroyedGuard(func){\n\t\tif(this.destroyed){\n\t\t\tconsole.warn(\"You cannot call the \"  + func + \" function on a destroyed range\");\n\t\t}\n\t\t\n\t\treturn !this.destroyed;\n\t}\n}","export default {\r\n\trangeJumpUp:[\"ctrl + 38\", \"meta + 38\"],\r\n\trangeJumpDown:[\"ctrl + 40\", \"meta + 40\"],\r\n\trangeJumpLeft:[\"ctrl + 37\", \"meta + 37\"],\r\n\trangeJumpRight:[\"ctrl + 39\", \"meta + 39\"],\r\n\trangeExpandUp:\"shift + 38\",\r\n\trangeExpandDown:\"shift + 40\",\r\n\trangeExpandLeft:\"shift + 37\",\r\n\trangeExpandRight:\"shift + 39\",\r\n\trangeExpandJumpUp:[\"ctrl + shift + 38\", \"meta + shift + 38\"],\r\n\trangeExpandJumpDown:[\"ctrl + shift + 40\", \"meta + shift + 40\"],\r\n\trangeExpandJumpLeft:[\"ctrl + shift + 37\", \"meta + shift + 37\"],\r\n\trangeExpandJumpRight:[\"ctrl + shift + 39\", \"meta + shift + 39\"],\r\n};\r\n","export default {\r\n\trangeJumpLeft: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"left\", true, false);\r\n\t},\r\n\trangeJumpRight: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"right\", true, false);\r\n\t},\r\n\trangeJumpUp: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"up\", true, false);\r\n\t},\r\n\trangeJumpDown: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"down\", true, false);\r\n\t},\r\n\trangeExpandLeft: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"left\", false, true);\r\n\t},\r\n\trangeExpandRight: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"right\", false, true);\r\n\t},\r\n\trangeExpandUp: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"up\", false, true);\r\n\t},\r\n\trangeExpandDown: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"down\", false, true);\r\n\t},\r\n\trangeExpandJumpLeft: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"left\", true, true);\r\n\t},\r\n\trangeExpandJumpRight: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"right\", true, true);\r\n\t},\r\n\trangeExpandJumpUp: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"up\", true, true);\r\n\t},\r\n\trangeExpandJumpDown: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"down\", true, true);\r\n\t},\r\n};\r\n","export default {\r\n\trange:function(data){\r\n\t\tvar rows = [],\r\n\t\trange = this.table.modules.selectRange.activeRange,\r\n\t\tsingleCell = false,\r\n\t\tbounds, startCell, startRow, rowWidth, dataLength;\r\n\r\n\t\tdataLength = data.length;\r\n\t\t\r\n\t\tif(range){\r\n\t\t\tbounds = range.getBounds();\r\n\t\t\tstartCell = bounds.start;\r\n\t\t\t\r\n\t\t\tif(bounds.start === bounds.end){\r\n\t\t\t\tsingleCell = true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(startCell){\r\n\t\t\t\trows = this.table.rowManager.activeRows.slice();\r\n\t\t\t\tstartRow = rows.indexOf(startCell.row);\r\n\r\n\t\t\t\tif(singleCell){\r\n\t\t\t\t\trowWidth = data.length;\r\n\t\t\t\t}else{\r\n\t\t\t\t\trowWidth = (rows.indexOf(bounds.end.row) - startRow) + 1;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif(startRow >-1){\r\n\t\t\t\t\tthis.table.blockRedraw();\r\n\t\t\t\t\t\r\n\t\t\t\t\trows = rows.slice(startRow, startRow + rowWidth);\r\n\t\t\t\t\t\r\n\t\t\t\t\trows.forEach((row, i) => {\r\n\t\t\t\t\t\trow.updateData(data[i % dataLength]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.table.restoreRedraw();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn rows;\r\n\t}\r\n};","export default {\r\n\trange:function(clipboard){\r\n\t\tvar data = [],\r\n\t\trows = [],\r\n\t\trange = this.table.modules.selectRange.activeRange,\r\n\t\tsingleCell = false,\r\n\t\tbounds, startCell, colWidth, columnMap, startCol;\r\n\t\t\r\n\t\tif(range){\r\n\t\t\tbounds = range.getBounds();\r\n\t\t\tstartCell = bounds.start;\r\n\r\n\t\t\tif(bounds.start === bounds.end){\r\n\t\t\t\tsingleCell = true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(startCell){\r\n\t\t\t\t//get data from clipboard into array of columns and rows.\r\n\t\t\t\tclipboard = clipboard.split(\"\\n\");\r\n\t\t\t\t\r\n\t\t\t\tclipboard.forEach(function(row){\r\n\t\t\t\t\tdata.push(row.split(\"\\t\"));\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tif(data.length){\r\n\t\t\t\t\tcolumnMap = this.table.columnManager.getVisibleColumnsByIndex();\r\n\t\t\t\t\tstartCol = columnMap.indexOf(startCell.column);\r\n\r\n\t\t\t\t\tif(startCol > -1){\r\n\t\t\t\t\t\tif(singleCell){\r\n\t\t\t\t\t\t\tcolWidth = data[0].length;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tcolWidth = (columnMap.indexOf(bounds.end.column) - startCol) + 1;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcolumnMap = columnMap.slice(startCol, startCol + colWidth);\r\n\r\n\t\t\t\t\t\tdata.forEach((item) => {\r\n\t\t\t\t\t\t\tvar row = {};\r\n\t\t\t\t\t\t\tvar itemLength = item.length;\r\n\r\n\t\t\t\t\t\t\tcolumnMap.forEach(function(col, i){\r\n\t\t\t\t\t\t\t\trow[col.field] = item[i % itemLength];\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\trows.push(row);\t\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\treturn rows;\r\n\t\t\t\t\t}\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n};","export default {\r\n\trange:function(){\r\n\t\tvar columns = this.modules.selectRange.selectedColumns();\r\n\r\n\t\tif(this.columnManager.rowHeader){\r\n\t\t\tcolumns.unshift(this.columnManager.rowHeader);\r\n\t\t}\r\n\r\n\t\treturn columns;\r\n\t},\r\n};","export default {\r\n\trange:function(){\r\n\t\treturn this.modules.selectRange.selectedRows();\r\n\t},\r\n};","import bindings from './keybindings/bindings.js';\r\nimport actions from './keybindings/actions.js';\r\nimport pasteActions from './clipboard/pasteActions.js';\r\nimport pasteParsers from './clipboard/pasteParsers.js';\r\nimport columnLookups from './export/columnLookups.js';\r\nimport rowLookups from './export/rowLookups.js';\r\n\r\nexport default {\r\n\tkeybindings:{\r\n\t\tbindings:bindings,\r\n\t\tactions:actions\r\n\t},\r\n\tclipboard:{\r\n\t\tpasteActions:pasteActions,\r\n\t\tpasteParsers:pasteParsers\r\n\t},\r\n\texport:{\r\n\t\tcolumnLookups:columnLookups,\r\n\t\trowLookups:rowLookups,\r\n\t}\r\n};","import Module from \"../../core/Module.js\";\nimport Range from \"./Range.js\";\nimport extensions from './extensions/extensions.js';\n\n\nexport default class SelectRange extends Module {\n\t\n\tstatic moduleName = \"selectRange\";\n\tstatic moduleInitOrder = 1;\n\tstatic moduleExtensions = extensions;\n\t\n\tconstructor(table) {\n\t\tsuper(table);\n\t\t\n\t\tthis.selecting = \"cell\";\n\t\tthis.mousedown = false;\n\t\tthis.ranges = [];\n\t\tthis.overlay = null;\n\t\tthis.rowHeader = null;\n\t\tthis.layoutChangeTimeout = null;\n\t\tthis.columnSelection = false;\n\t\tthis.rowSelection = false;\n\t\tthis.maxRanges = 0;\n\t\tthis.activeRange = false;\n\t\tthis.blockKeydown = false;\n\t\t\n\t\tthis.keyDownEvent = this._handleKeyDown.bind(this);\n\t\tthis.mouseUpEvent = this._handleMouseUp.bind(this);\n\t\t\n\t\tthis.registerTableOption(\"selectableRange\", false); //enable selectable range\n\t\tthis.registerTableOption(\"selectableRangeColumns\", false); //enable selectable range\n\t\tthis.registerTableOption(\"selectableRangeRows\", false); //enable selectable range\n\t\tthis.registerTableOption(\"selectableRangeClearCells\", false); //allow clearing of active range\n\t\tthis.registerTableOption(\"selectableRangeClearCellsValue\", undefined); //value for cleared active range\n\t\t\n\t\tthis.registerTableFunction(\"getRangesData\", this.getRangesData.bind(this));\n\t\tthis.registerTableFunction(\"getRanges\", this.getRanges.bind(this));\n\t\tthis.registerTableFunction(\"addRange\", this.addRangeFromComponent.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"cell\", \"getRanges\", this.cellGetRanges.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"getRanges\", this.rowGetRanges.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"getRanges\", this.colGetRanges.bind(this));\n\t}\n\t\n\t///////////////////////////////////\n\t///////    Initialization   ///////\n\t///////////////////////////////////\n\t\n\tinitialize() {\n\t\tif (this.options(\"selectableRange\")) {\t\n\t\t\tif(!this.options(\"selectableRows\")){\n\t\t\t\tthis.maxRanges = this.options(\"selectableRange\");\n\t\t\t\t\n\t\t\t\tthis.initializeTable();\n\t\t\t\tthis.initializeWatchers();\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"SelectRange functionality cannot be used in conjunction with row selection\");\n\t\t\t}\n\n\t\t\tif(this.options('columns').findIndex((column) => column.frozen) > 0) {\n\t\t\t\tconsole.warn(\"Having frozen column in arbitrary position with selectRange option may result in unpredictable behavior.\");\n\t\t\t}\n\n\t\t\tif(this.options('columns').filter((column) => column.frozen) > 1) {\n\t\t\t\tconsole.warn(\"Having multiple frozen columns with selectRange option may result in unpredictable behavior.\");\n\t\t\t}\n\t\t}\n\t}\n\t\n\t\n\tinitializeTable() {\t\t\n\t\tthis.overlay = document.createElement(\"div\");\n\t\tthis.overlay.classList.add(\"tabulator-range-overlay\");\n\t\t\n\t\tthis.rangeContainer = document.createElement(\"div\");\n\t\tthis.rangeContainer.classList.add(\"tabulator-range-container\");\n\t\t\n\t\tthis.activeRangeCellElement = document.createElement(\"div\");\n\t\tthis.activeRangeCellElement.classList.add(\"tabulator-range-cell-active\");\n\t\t\n\t\tthis.overlay.appendChild(this.rangeContainer);\n\t\tthis.overlay.appendChild(this.activeRangeCellElement);\n\t\t\n\t\tthis.table.rowManager.element.addEventListener(\"keydown\", this.keyDownEvent);\n\t\t\n\t\tthis.resetRanges();\n\t\t\n\t\tthis.table.rowManager.element.appendChild(this.overlay);\n\t\tthis.table.columnManager.element.setAttribute(\"tabindex\", 0);\n\t\tthis.table.element.classList.add(\"tabulator-ranges\");\n\t}\n\t\n\tinitializeWatchers() {\n\t\tthis.columnSelection = this.options(\"selectableRangeColumns\");\n\t\tthis.rowSelection = this.options(\"selectableRangeRows\");\n\t\t\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"column-mousedown\", this.handleColumnMouseDown.bind(this));\n\t\tthis.subscribe(\"column-mousemove\", this.handleColumnMouseMove.bind(this));\n\t\tthis.subscribe(\"column-resized\", this.handleColumnResized.bind(this));\n\t\tthis.subscribe(\"column-width\", this.layoutChange.bind(this));\n\t\tthis.subscribe(\"column-height\", this.layoutChange.bind(this));\n\t\tthis.subscribe(\"column-resized\", this.layoutChange.bind(this));\n\t\tthis.subscribe(\"columns-loaded\", this.updateHeaderColumn.bind(this));\n\t\t\n\t\tthis.subscribe(\"cell-height\", this.layoutChange.bind(this));\n\t\tthis.subscribe(\"cell-rendered\", this.renderCell.bind(this));\n\t\tthis.subscribe(\"cell-mousedown\", this.handleCellMouseDown.bind(this));\n\t\tthis.subscribe(\"cell-mousemove\", this.handleCellMouseMove.bind(this));\n\t\tthis.subscribe(\"cell-click\", this.handleCellClick.bind(this));\n\t\tthis.subscribe(\"cell-editing\", this.handleEditingCell.bind(this));\n\t\t\n\t\tthis.subscribe(\"page-changed\", this.redraw.bind(this));\n\t\t\n\t\tthis.subscribe(\"scroll-vertical\", this.layoutChange.bind(this));\n\t\tthis.subscribe(\"scroll-horizontal\", this.layoutChange.bind(this));\n\t\t\n\t\tthis.subscribe(\"data-destroy\", this.tableDestroyed.bind(this));\n\t\tthis.subscribe(\"data-processed\", this.resetRanges.bind(this));\n\t\t\n\t\tthis.subscribe(\"table-layout\", this.layoutElement.bind(this));\n\t\tthis.subscribe(\"table-redraw\", this.redraw.bind(this));\n\t\tthis.subscribe(\"table-destroy\", this.tableDestroyed.bind(this));\n\t\t\n\t\tthis.subscribe(\"edit-editor-clear\", this.finishEditingCell.bind(this));\n\t\tthis.subscribe(\"edit-blur\", this.restoreFocus.bind(this));\n\t\t\n\t\tthis.subscribe(\"keybinding-nav-prev\", this.keyNavigate.bind(this, \"left\"));\n\t\tthis.subscribe(\"keybinding-nav-next\", this.keyNavigate.bind(this, \"right\"));\n\t\tthis.subscribe(\"keybinding-nav-left\", this.keyNavigate.bind(this, \"left\"));\n\t\tthis.subscribe(\"keybinding-nav-right\", this.keyNavigate.bind(this, \"right\"));\n\t\tthis.subscribe(\"keybinding-nav-up\", this.keyNavigate.bind(this, \"up\"));\n\t\tthis.subscribe(\"keybinding-nav-down\", this.keyNavigate.bind(this, \"down\"));\n\t\tthis.subscribe(\"keybinding-nav-range\", this.keyNavigateRange.bind(this));\n\t}\n\t\n\t\n\tinitializeColumn(column) {\n\t\tif(this.columnSelection && column.definition.headerSort && this.options(\"headerSortClickElement\") !== \"icon\"){\n\t\t\tconsole.warn(\"Using column headerSort with selectableRangeColumns option may result in unpredictable behavior. Consider using headerSortClickElement: 'icon'.\");\n\t\t}\n\t\t\n\t\tif (column.modules.edit) {\n\t\t\t// Block editor from taking action so we can trigger edit by\n\t\t\t// double clicking.\n\t\t\t// column.modules.edit.blocked = true;\n\t\t}\n\t}\n\t\n\tupdateHeaderColumn(){\n\t\tvar frozenCols;\n\n\t\tif(this.rowSelection){\n\t\t\tthis.rowHeader = this.table.columnManager.getVisibleColumnsByIndex()[0];\n\t\t\t\n\t\t\tif(this.rowHeader){\n\t\t\t\tthis.rowHeader.definition.cssClass = this.rowHeader.definition.cssClass + \" tabulator-range-row-header\";\n\t\t\t\t\n\t\t\t\tif(this.rowHeader.definition.headerSort){\n\t\t\t\t\tconsole.warn(\"Using column headerSort with selectableRangeRows option may result in unpredictable behavior\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(this.rowHeader.definition.editor){\n\t\t\t\t\tconsole.warn(\"Using column editor with selectableRangeRows option may result in unpredictable behavior\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//warn if invalid frozen column configuration detected\n\t\tif(this.table.modules.frozenColumns && this.table.modules.frozenColumns.active){\n\t\t\tfrozenCols = this.table.modules.frozenColumns.getFrozenColumns();\n\n\t\t\tif(frozenCols.length > 1 || (frozenCols.length === 1 && frozenCols[0] !== this.rowHeader)){\n\t\t\t\tconsole.warn(\"Using frozen columns that are not the range header in combination with the selectRange option may result in unpredictable behavior\");\n\t\t\t}\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t///////   Table Functions   ///////\n\t///////////////////////////////////\n\t\n\tgetRanges(){\n\t\treturn this.ranges.map((range) => range.getComponent());\n\t}\n\t\n\tgetRangesData() {\n\t\treturn this.ranges.map((range) => range.getData());\n\t}\n\t\n\taddRangeFromComponent(start, end){\n\t\tstart = start ? start._cell : null;\n\t\tend = end ? end._cell : null;\n\t\t\n\t\treturn this.addRange(start, end);\n\t}\n\t\n\t///////////////////////////////////\n\t/////// Component Functions ///////\n\t///////////////////////////////////\n\t\n\tcellGetRanges(cell){\n\t\tvar ranges = [];\n\t\t\n\t\tif (cell.column === this.rowHeader) {\n\t\t\tranges = this.ranges.filter((range) => range.occupiesRow(cell.row));\n\t\t} else {\n\t\t\tranges = this.ranges.filter((range) => range.occupies(cell));\n\t\t}\n\t\t\n\t\treturn ranges.map((range) => range.getComponent());\n\t}\n\t\n\trowGetRanges(row){\n\t\tvar ranges = this.ranges.filter((range) => range.occupiesRow(row));\n\t\t\n\t\treturn ranges.map((range) => range.getComponent());\n\t}\n\t\n\tcolGetRanges(col){\n\t\tvar ranges = this.ranges.filter((range) => range.occupiesColumn(col));\n\t\t\n\t\treturn ranges.map((range) => range.getComponent());\n\t}\n\t\n\t///////////////////////////////////\n\t////////// Event Handlers /////////\n\t///////////////////////////////////\n\t\n\t_handleMouseUp(e){\n\t\tthis.mousedown = false;\n\t\tdocument.removeEventListener(\"mouseup\", this.mouseUpEvent);\n\t}\n\t\n\t_handleKeyDown(e) {\n\t\tif (!this.blockKeydown && (!this.table.modules.edit || (this.table.modules.edit && !this.table.modules.edit.currentCell))) {\n\t\t\tif (e.key === \"Enter\") {\n\t\t\t\t// is editing a cell?\n\t\t\t\tif (this.table.modules.edit && this.table.modules.edit.currentCell) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.table.modules.edit.editCell(this.getActiveCell());\n\t\t\t\t\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tif ((e.key === \"Backspace\" || e.key === \"Delete\") && this.options(\"selectableRangeClearCells\")) {\n\t\t\t\tif(this.activeRange){\n\t\t\t\t\tthis.activeRange.clearValues();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tinitializeFocus(cell){\n\t\tvar range;\n\t\t\n\t\ttry{\n\t\t\tif (document.selection) { // IE\n\t\t\t\trange = document.body.createTextRange();\n\t\t\t\trange.moveToElementText(cell.getElement());\n\t\t\t\trange.select();\n\t\t\t} else if (window.getSelection) {\n\t\t\t\trange = document.createRange();\n\t\t\t\trange.selectNode(cell.getElement());\n\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\twindow.getSelection().addRange(range);\n\t\t\t}\n\t\t}catch(e){}\n\t}\n\t\n\trestoreFocus(element){\n\t\tthis.table.rowManager.element.focus();\n\t\t\n\t\treturn true;\n\t}\n\t\n\t///////////////////////////////////\n\t////// Column Functionality ///////\n\t///////////////////////////////////\n\t\n\thandleColumnResized(column) {\n\t\tvar selected;\n\t\t\n\t\tif (this.selecting !== \"column\" && this.selecting !== \"all\") {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tselected = this.ranges.some((range) => range.occupiesColumn(column));\n\t\t\n\t\tif (!selected) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.ranges.forEach((range) => {\n\t\t\tvar selectedColumns = range.getColumns(true);\n\t\t\t\n\t\t\tselectedColumns.forEach((selectedColumn) => {\n\t\t\t\tif (selectedColumn !== column) {\n\t\t\t\t\tselectedColumn.setWidth(column.width);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\t\n\thandleColumnMouseDown(event, column) {\n\t\tif (event.button === 2 && (this.selecting === \"column\" || this.selecting === \"all\") && this.activeRange.occupiesColumn(column)) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.mousedown = true;\n\t\t\n\t\tdocument.addEventListener(\"mouseup\", this.mouseUpEvent);\n\t\t\n\t\tthis.newSelection(event, column);\n\t}\n\t\n\thandleColumnMouseMove(e, column) {\n\t\tif (column === this.rowHeader || !this.mousedown || this.selecting === 'all') {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.activeRange.setBounds(false, column, true);\n\t}\n\t\n\t///////////////////////////////////\n\t//////// Cell Functionality ///////\n\t///////////////////////////////////\n\t\n\trenderCell(cell) {\n\t\tvar el = cell.getElement(),\n\t\trangeIdx = this.ranges.findIndex((range) => range.occupies(cell));\n\t\t\n\t\tel.classList.toggle(\"tabulator-range-selected\", rangeIdx !== -1);\n\t\tel.classList.toggle(\"tabulator-range-only-cell-selected\", this.ranges.length === 1 && this.ranges[0].atTopLeft(cell) &&\tthis.ranges[0].atBottomRight(cell));\n\t\t\n\t\tel.dataset.range = rangeIdx;\n\t}\n\t\n\thandleCellMouseDown(event, cell) {\n\t\tif (event.button === 2 && (this.activeRange.occupies(cell) || ((this.selecting === \"row\" || this.selecting === \"all\") && this.activeRange.occupiesRow(cell.row)))) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.mousedown = true;\n\t\t\n\t\tdocument.addEventListener(\"mouseup\", this.mouseUpEvent);\n\t\t\n\t\tthis.newSelection(event, cell);\n\t}\n\t\n\thandleCellMouseMove(e, cell) {\n\t\tif (!this.mousedown || this.selecting === \"all\") {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.activeRange.setBounds(false, cell, true);\n\t}\n\t\n\thandleCellClick(e, cell){\n\t\tthis.initializeFocus(cell);\n\t}\n\t\n\thandleEditingCell(cell) {\n\t\tif(this.activeRange){\n\t\t\tthis.activeRange.setBounds(cell);\n\t\t}\n\t}\n\t\n\tfinishEditingCell() {\n\t\tthis.blockKeydown = true;\n\t\tthis.table.rowManager.element.focus();\n\t\t\n\t\tsetTimeout(() => {\n\t\t\tthis.blockKeydown = false;\n\t\t}, 10);\n\t}\n\t\n\t///////////////////////////////////\n\t///////     Navigation      ///////\n\t///////////////////////////////////\n\t\n\tkeyNavigate(dir, e){\n\t\tif(this.navigate(false, false, dir)){\n\t\t\te.preventDefault();\n\t\t}\n\t}\n\t\n\tkeyNavigateRange(e, dir, jump, expand){\n\t\tif(this.navigate(jump, expand, dir)){\n\t\t\te.preventDefault();\n\t\t}\n\t}\n\t\n\tnavigate(jump, expand, dir) {\n\t\tvar moved = false,\n\t\trange, rangeEdge, nextRow, nextCol, row, column;\n\t\t\n\t\t// Don't navigate while editing\n\t\tif (this.table.modules.edit && this.table.modules.edit.currentCell) {\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\t// If there are more than 1 range, use the active range and destroy the others\n\t\tif (this.ranges.length > 1) {\n\t\t\tthis.ranges = this.ranges.filter((range) => {\n\t\t\t\tif (range === this.activeRange) {\n\t\t\t\t\trange.setEnd(range.start.row, range.start.col);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\trange.destroy();\n\t\t\t\treturn false;\n\t\t\t});\n\t\t}\n\t\t\n\t\trange = this.activeRange;\n\t\t\n\t\trangeEdge = expand ? range.end : range.start;\n\t\tnextRow = rangeEdge.row;\n\t\tnextCol = rangeEdge.col;\n\t\t\n\t\tif(jump){\n\t\t\tswitch(dir){\n\t\t\t\tcase \"left\":\n\t\t\t\t\tnextCol = this.findJumpCellLeft(range.start.row, rangeEdge.col);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"right\":\n\t\t\t\t\tnextCol = this.findJumpCellRight(range.start.row, rangeEdge.col);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"up\":\n\t\t\t\t\tnextRow = this.findJumpCellUp(rangeEdge.row, range.start.col);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"down\":\n\t\t\t\t\tnextRow = this.findJumpCellDown(rangeEdge.row, range.start.col);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}else{\n\t\t\tif(expand){\n\t\t\t\tif ((this.selecting === 'row' && (dir === 'left' || dir === 'right')) || (this.selecting === 'column' && (dir === 'up' || dir === 'down'))) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tswitch(dir){\n\t\t\t\tcase \"left\":\n\t\t\t\t\tnextCol = Math.max(nextCol - 1, 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"right\":\n\t\t\t\t\tnextCol = Math.min(nextCol + 1, this.getTableColumns().length - 1);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"up\":\n\t\t\t\t\tnextRow = Math.max(nextRow - 1, 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"down\":\n\t\t\t\t\tnextRow = Math.min(nextRow + 1, this.getTableRows().length - 1);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\tmoved = nextCol !== rangeEdge.col || nextRow !== rangeEdge.row;\n\t\t\n\t\tif(!expand){\n\t\t\trange.setStart(nextRow, nextCol);\n\t\t}\n\t\t\n\t\trange.setEnd(nextRow, nextCol);\n\t\t\n\t\tif(!expand){\n\t\t\tthis.selecting = \"cell\";\n\t\t}\n\t\t\n\t\tif (moved) {\n\t\t\trow = this.getRowByRangePos(range.end.row);\n\t\t\tcolumn = this.getColumnByRangePos(range.end.col);\n\t\t\t\n\t\t\tif ((dir === 'left' || dir === 'right') && column.getElement().parentNode === null) {\n\t\t\t\tcolumn.getComponent().scrollTo(undefined, false);\n\t\t\t} else if ((dir === 'up' || dir === 'down') && row.getElement().parentNode === null) {\n\t\t\t\trow.getComponent().scrollTo(undefined, false);\n\t\t\t} else {\n\t\t\t\t// Use faster autoScroll when the elements are on the DOM\n\t\t\t\tthis.autoScroll(range, row.getElement(), column.getElement());\n\t\t\t}\n\t\t\t\n\t\t\tthis.layoutElement();\n\t\t\t\n\t\t\treturn true;\n\t\t}\n\t}\n\t\n\trangeRemoved(removed){\n\t\tthis.ranges = this.ranges.filter((range) => range !== removed);\n\t\t\n\t\tif(this.activeRange === removed){\n\t\t\tif(this.ranges.length){\n\t\t\t\tthis.activeRange = this.ranges[this.ranges.length - 1];\n\t\t\t}else{\n\t\t\t\tthis.addRange();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.layoutElement();\n\t}\n\t\n\tfindJumpCell(cells, reverse, emptyStart, emptySide){\n\t\tvar nextCell;\n\t\t\n\t\tif(reverse){\n\t\t\tcells = cells.reverse();\n\t\t}\n\t\t\n\t\tfor(let currentCell of cells){\n\t\t\tlet currentValue = currentCell.getValue();\n\t\t\t\n\t\t\tif(emptyStart){\n\t\t\t\tnextCell = currentCell;\n\t\t\t\tif(currentValue){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(emptySide){\n\t\t\t\t\tnextCell = currentCell;\n\t\t\t\t\t\n\t\t\t\t\tif(currentValue){\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif(currentValue){\n\t\t\t\t\t\tnextCell = currentCell;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn nextCell;\n\t}\n\t\n\tfindJumpCellLeft(rowPos, colPos){\n\t\tvar row = this.getRowByRangePos(rowPos),\n\t\tcells = row.cells.filter((cell) => cell.column.visible),\n\t\tisStartingCellEmpty = !cells[colPos].getValue(),\n\t\tisLeftOfStartingCellEmpty = cells[colPos] ? !cells[colPos].getValue() : false,\n\t\tjumpCol = colPos,\n\t\ttargetCells = this.rowHeader ? cells.slice(1, colPos) : cells.slice(0, colPos),\n\t\tnextCell = this.findJumpCell(targetCells, true, isStartingCellEmpty, isLeftOfStartingCellEmpty);\n\t\t\n\t\tif(nextCell){\n\t\t\tjumpCol = nextCell.column.getPosition() - 1;\n\t\t}\n\t\t\n\t\treturn jumpCol;\n\t}\n\t\n\tfindJumpCellRight(rowPos, colPos){\n\t\tvar row = this.getRowByRangePos(rowPos),\n\t\tcells = row.cells.filter((cell) => cell.column.visible),\n\t\tisStartingCellEmpty = !cells[colPos].getValue(),\n\t\tisRightOfStartingCellEmpty = cells[colPos + 1] ? !cells[colPos + 1].getValue() : false,\n\t\tjumpCol = colPos,\n\t\tnextCell = this.findJumpCell(cells.slice(colPos + 1, cells.length), false, isStartingCellEmpty, isRightOfStartingCellEmpty);\n\t\t\n\t\tif(nextCell){\n\t\t\tjumpCol = nextCell.column.getPosition() - 1;\n\t\t}\n\t\t\n\t\treturn jumpCol;\n\t}\n\t\n\tfindJumpCellUp(rowPos, colPos) {\n\t\tvar column = this.getColumnByRangePos(colPos),\n\t\tcells = column.cells.filter((cell) => this.table.rowManager.activeRows.includes(cell.row)),\n\t\tisStartingCellEmpty = !cells[rowPos].getValue(),\n\t\tisTopOfStartingCellEmpty = cells[rowPos - 1] ? !cells[rowPos - 1].getValue() : false,\n\t\tjumpRow = rowPos,\n\t\tnextCell = this.findJumpCell(cells.slice(0, jumpRow), true, isStartingCellEmpty, isTopOfStartingCellEmpty);\n\t\t\n\t\tif(nextCell){\n\t\t\tjumpRow = nextCell.row.position - 1;\n\t\t}\n\t\t\n\t\treturn jumpRow;\n\t}\n\t\n\tfindJumpCellDown(rowPos, colPos) {\n\t\tvar column = this.getColumnByRangePos(colPos),\n\t\tcells = column.cells.filter((cell) => this.table.rowManager.activeRows.includes(cell.row)),\n\t\tisStartingCellEmpty = !cells[rowPos].getValue(),\n\t\tisBottomOfStartingCellEmpty = cells[rowPos + 1] ? !cells[rowPos + 1].getValue() : false,\n\t\tjumpRow = rowPos,\n\t\tnextCell = this.findJumpCell(cells.slice(jumpRow + 1, cells.length), false, isStartingCellEmpty, isBottomOfStartingCellEmpty);\n\t\t\n\t\tif(nextCell){\n\t\t\tjumpRow = nextCell.row.position - 1;\n\t\t}\n\t\t\n\t\treturn jumpRow;\n\t}\n\t\n\t///////////////////////////////////\n\t///////      Selection      ///////\n\t///////////////////////////////////\n\tnewSelection(event, element) {\n\t\tvar range;\n\t\t\n\t\tif (element.type === \"column\") {\n\t\t\tif(!this.columnSelection){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tif (element === this.rowHeader) {\n\t\t\t\trange = this.resetRanges();\n\t\t\t\tthis.selecting = \"all\";\n\t\t\t\t\n\t\t\t\tvar topLeftCell, bottomRightCell = this.getCell(-1, -1);\n\t\t\t\t\n\t\t\t\tif(this.rowHeader){\n\t\t\t\t\ttopLeftCell = this.getCell(0, 1);\n\t\t\t\t}else{\n\t\t\t\t\ttopLeftCell = this.getCell(0, 0);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trange.setBounds(topLeftCell, bottomRightCell);\t\t\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tthis.selecting = \"column\";\n\t\t\t}\n\t\t} else if (element.column === this.rowHeader) {\n\t\t\tthis.selecting = \"row\";\n\t\t} else {\n\t\t\tthis.selecting = \"cell\";\n\t\t}\n\t\t\n\t\tif (event.shiftKey) {\n\t\t\tthis.activeRange.setBounds(false, element);\n\t\t} else if (event.ctrlKey) {\n\t\t\tthis.addRange().setBounds(element);\n\t\t} else {\n\t\t\tthis.resetRanges().setBounds(element);\n\t\t}\n\t}\n\t\n\tautoScroll(range, row, column) {\n\t\tvar tableHolder = this.table.rowManager.element,\n\t\trowHeader, rect, view, withinHorizontalView, withinVerticalView;\n\t\t\n\t\tif (typeof row === 'undefined') {\n\t\t\trow = this.getRowByRangePos(range.end.row).getElement();\n\t\t}\n\t\t\n\t\tif (typeof column === 'undefined') {\n\t\t\tcolumn = this.getColumnByRangePos(range.end.col).getElement();\n\t\t}\n\t\t\n\t\tif (this.rowHeader) {\n\t\t\trowHeader = this.rowHeader.getElement();\n\t\t}\n\t\t\n\t\trect = {\n\t\t\tleft: column.offsetLeft,\n\t\t\tright: column.offsetLeft + column.offsetWidth,\n\t\t\ttop: row.offsetTop,\n\t\t\tbottom: row.offsetTop + row.offsetHeight,\n\t\t};\n\t\t\n\t\tview = {\n\t\t\tleft: tableHolder.scrollLeft,\n\t\t\tright: Math.ceil(tableHolder.scrollLeft + tableHolder.clientWidth),\n\t\t\ttop: tableHolder.scrollTop,\n\t\t\tbottom:\ttableHolder.scrollTop +\ttableHolder.offsetHeight - this.table.rowManager.scrollbarWidth,\n\t\t};\n\t\t\n\t\tif (rowHeader) {\n\t\t\tview.left += rowHeader.offsetWidth;\n\t\t}\n\t\t\n\t\twithinHorizontalView = view.left < rect.left &&\trect.left < view.right && view.left < rect.right &&\trect.right < view.right;\n\t\t\n\t\twithinVerticalView = view.top < rect.top &&\trect.top < view.bottom && view.top < rect.bottom &&\trect.bottom < view.bottom;\n\t\t\n\t\tif (!withinHorizontalView) {\n\t\t\tif (rect.left < view.left) {\n\t\t\t\ttableHolder.scrollLeft = rect.left;\n\t\t\t\tif (rowHeader) {\n\t\t\t\t\ttableHolder.scrollLeft -= rowHeader.offsetWidth;\n\t\t\t\t}\n\t\t\t} else if (rect.right > view.right) {\n\t\t\t\ttableHolder.scrollLeft = rect.right - tableHolder.clientWidth;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (!withinVerticalView) {\n\t\t\tif (rect.top < view.top) {\n\t\t\t\ttableHolder.scrollTop = rect.top;\n\t\t\t} else if (rect.bottom > view.bottom) {\n\t\t\t\ttableHolder.scrollTop = rect.bottom - tableHolder.clientHeight;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t///////       Layout        ///////\n\t///////////////////////////////////\n\t\n\tlayoutChange(){\n\t\tthis.overlay.style.visibility = \"hidden\";\n\t\tclearTimeout(this.layoutChangeTimeout);\n\t\tthis.layoutChangeTimeout = setTimeout(this.layoutRanges.bind(this), 200);\n\t}\n\t\n\tredraw(force) {\n\t\tif (force) {\n\t\t\tthis.selecting = 'cell';\n\t\t\tthis.resetRanges();\n\t\t\tthis.layoutElement();\n\t\t}\n\t}\n\t\n\tlayoutElement(visibleRows) {\n\t\tvar rows;\n\t\t\n\t\tif (visibleRows) {\n\t\t\trows = this.table.rowManager.getVisibleRows(true);\n\t\t} else {\n\t\t\trows = this.table.rowManager.getRows();\n\t\t}\n\t\t\n\t\trows.forEach((row) => {\n\t\t\tif (row.type === \"row\") {\n\t\t\t\tthis.layoutRow(row);\n\t\t\t\trow.cells.forEach((cell) => this.renderCell(cell));\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.getTableColumns().forEach((column) => {\n\t\t\tthis.layoutColumn(column);\n\t\t});\n\t\t\n\t\tthis.layoutRanges();\n\t}\n\t\n\tlayoutRow(row) {\n\t\tvar el = row.getElement(),\n\t\tselected = false,\n\t\toccupied = this.ranges.some((range) => range.occupiesRow(row));\n\t\t\n\t\tif (this.selecting === \"row\") {\n\t\t\tselected = occupied;\n\t\t} else if (this.selecting === \"all\") {\n\t\t\tselected = true;\n\t\t}\n\t\t\n\t\tel.classList.toggle(\"tabulator-range-selected\", selected);\n\t\tel.classList.toggle(\"tabulator-range-highlight\", occupied);\n\t}\n\t\n\tlayoutColumn(column) {\n\t\tvar el = column.getElement(),\t\t\n\t\tselected = false,\n\t\toccupied = this.ranges.some((range) => range.occupiesColumn(column));\n\t\t\n\t\tif (this.selecting === \"column\") {\n\t\t\tselected = occupied;\n\t\t} else if (this.selecting === \"all\") {\n\t\t\tselected = true;\n\t\t}\n\t\t\n\t\tel.classList.toggle(\"tabulator-range-selected\", selected);\n\t\tel.classList.toggle(\"tabulator-range-highlight\", occupied);\n\t}\n\t\n\tlayoutRanges() {\n\t\tvar activeCell, activeCellEl, activeRowEl;\n\t\t\n\t\tif (!this.table.initialized) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tactiveCell = this.getActiveCell();\n\t\t\n\t\tif (!activeCell) {\n\t\t\treturn;\n\t\t}\n\n\t\tactiveCellEl = activeCell.getElement();\n\t\tactiveRowEl = activeCell.row.getElement();\n\n\t\tif(this.table.rtl){\n\t\t\tthis.activeRangeCellElement.style.right = activeRowEl.offsetWidth - activeCellEl.offsetLeft - activeCellEl.offsetWidth + \"px\";\n\t\t}else{\n\t\t\tthis.activeRangeCellElement.style.left = activeRowEl.offsetLeft + activeCellEl.offsetLeft + \"px\";\n\t\t}\n\n\t\tthis.activeRangeCellElement.style.top =\tactiveRowEl.offsetTop + \"px\";\n\t\tthis.activeRangeCellElement.style.width = activeCellEl.offsetWidth + \"px\";\n\t\tthis.activeRangeCellElement.style.height =  activeRowEl.offsetHeight  + \"px\";\n\t\t\n\t\tthis.ranges.forEach((range) => range.layout());\n\t\t\n\t\tthis.overlay.style.visibility = \"visible\";\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t///////  Helper Functions   ///////\n\t///////////////////////////////////\t\n\t\n\tgetCell(rowIdx, colIdx) {\n\t\tvar row;\n\t\t\n\t\tif (colIdx < 0) {\n\t\t\tcolIdx = this.getTableColumns().length + colIdx;\n\t\t\tif (colIdx < 0) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (rowIdx < 0) {\n\t\t\trowIdx = this.getTableRows().length + rowIdx;\n\t\t}\n\t\t\n\t\trow = this.table.rowManager.getRowFromPosition(rowIdx + 1);\n\t\t\n\t\treturn row ? row.getCells(false, true).filter((cell) => cell.column.visible)[colIdx] : null;\n\t}\n\t\n\t\n\tgetActiveCell() {\n\t\treturn this.getCell(this.activeRange.start.row, this.activeRange.start.col);\n\t}\n\t\n\tgetRowByRangePos(pos) {\n\t\treturn this.getTableRows()[pos];\n\t}\n\t\n\tgetColumnByRangePos(pos) {\n\t\treturn this.getTableColumns()[pos];\n\t}\n\t\n\tgetTableRows() {\n\t\treturn this.table.rowManager.getDisplayRows().filter(row=> row.type === \"row\");\n\t}\n\t\n\tgetTableColumns() {\n\t\treturn this.table.columnManager.getVisibleColumnsByIndex();\n\t}\n\t\n\taddRange(start, end) {\n\t\tvar  range;\n\t\t\n\t\tif(this.maxRanges !== true && this.ranges.length >= this.maxRanges){\n\t\t\tthis.ranges.shift().destroy();\n\t\t}\n\t\t\n\t\trange = new Range(this.table, this, start, end);\n\t\t\n\t\tthis.activeRange = range;\n\t\tthis.ranges.push(range);\n\t\tthis.rangeContainer.appendChild(range.element);\n\t\t\n\t\treturn range;\n\t}\n\t\n\tresetRanges() {\n\t\tvar range, cell, visibleCells;\n\t\t\n\t\tthis.ranges.forEach((range) => range.destroy());\n\t\tthis.ranges = [];\n\t\t\n\t\trange = this.addRange();\n\t\t\n\t\tif(this.table.rowManager.activeRows.length){\n\t\t\tvisibleCells = this.table.rowManager.activeRows[0].cells.filter((cell) => cell.column.visible);\n\t\t\tcell = visibleCells[this.rowHeader ? 1 : 0];\n\n\t\t\tif(cell){\n\t\t\t\trange.setBounds(cell);\n\t\t\t\tthis.initializeFocus(cell);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn range;\n\t}\n\t\n\ttableDestroyed(){\n\t\tdocument.removeEventListener(\"mouseup\", this.mouseUpEvent);\n\t\tthis.table.rowManager.element.removeEventListener(\"keydown\", this.keyDownEvent);\n\t}\n\t\n\tselectedRows(component) {\n\t\treturn component ? this.activeRange.getRows().map((row) => row.getComponent()) : this.activeRange.getRows();\n\t}\n\t\n\tselectedColumns(component) {\n\t\treturn component ? this.activeRange.getColumns().map((col) => col.getComponent()) : this.activeRange.getColumns();\n\t}\n}","//sort numbers\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar alignEmptyValues = params.alignEmptyValues;\n\tvar decimal = params.decimalSeparator;\n\tvar thousand = params.thousandSeparator;\n\tvar emptyAlign = 0;\n\n\ta = String(a);\n\tb = String(b);\n\n\tif(thousand){\n\t\ta = a.split(thousand).join(\"\");\n\t\tb = b.split(thousand).join(\"\");\n\t}\n\n\tif(decimal){\n\t\ta = a.split(decimal).join(\".\");\n\t\tb = b.split(decimal).join(\".\");\n\t}\n\n\ta = parseFloat(a);\n\tb = parseFloat(b);\n\n\t//handle non numeric values\n\tif(isNaN(a)){\n\t\temptyAlign =  isNaN(b) ? 0 : -1;\n\t}else if(isNaN(b)){\n\t\temptyAlign =  1;\n\t}else{\n\t\t//compare valid values\n\t\treturn a - b;\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}","//sort strings\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar alignEmptyValues = params.alignEmptyValues;\n\tvar emptyAlign = 0;\n\tvar locale;\n\n\t//handle empty values\n\tif(!a){\n\t\temptyAlign =  !b ? 0 : -1;\n\t}else if(!b){\n\t\temptyAlign =  1;\n\t}else{\n\t\t//compare valid values\n\t\tswitch(typeof params.locale){\n\t\t\tcase \"boolean\":\n\t\t\t\tif(params.locale){\n\t\t\t\t\tlocale = this.langLocale();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"string\":\n\t\t\t\tlocale = params.locale;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn String(a).toLowerCase().localeCompare(String(b).toLowerCase(), locale);\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}","//sort datetime\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar DT = window.DateTime || luxon.DateTime;\n\tvar format = params.format || \"dd/MM/yyyy HH:mm:ss\",\n\talignEmptyValues = params.alignEmptyValues,\n\temptyAlign = 0;\n\n\tif(typeof DT != \"undefined\"){\n\t\tif(!DT.isDateTime(a)){\n\t\t\tif(format === \"iso\"){\n\t\t\t\ta = DT.fromISO(String(a));\n\t\t\t}else{\n\t\t\t\ta = DT.fromFormat(String(a), format);\n\t\t\t}\n\t\t}\n\n\t\tif(!DT.isDateTime(b)){\n\t\t\tif(format === \"iso\"){\n\t\t\t\tb = DT.fromISO(String(b));\n\t\t\t}else{\n\t\t\t\tb = DT.fromFormat(String(b), format);\n\t\t\t}\n\t\t}\n\n\t\tif(!a.isValid){\n\t\t\temptyAlign = !b.isValid ? 0 : -1;\n\t\t}else if(!b.isValid){\n\t\t\temptyAlign =  1;\n\t\t}else{\n\t\t\t//compare valid values\n\t\t\treturn a - b;\n\t\t}\n\n\t\t//fix empty values in position\n\t\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\t\temptyAlign *= -1;\n\t\t}\n\n\t\treturn emptyAlign;\n\n\t}else{\n\t\tconsole.error(\"Sort Error - 'datetime' sorter is dependant on luxon.js\");\n\t}\n}","import datetime from './datetime.js';\n\n//sort date\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tif(!params.format){\n\t\tparams.format = \"dd/MM/yyyy\";\n\t}\n\n\treturn datetime.call(this, a, b, aRow, bRow, column, dir, params);\n}","import datetime from './datetime.js';\n\n//sort times\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tif(!params.format){\n\t\tparams.format = \"HH:mm\";\n\t}\n\n\treturn datetime.call(this, a, b, aRow, bRow, column, dir, params);\n}","//sort booleans\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar el1 = a === true || a === \"true\" || a === \"True\" || a === 1 ? 1 : 0;\n\tvar el2 = b === true || b === \"true\" || b === \"True\" || b === 1 ? 1 : 0;\n\n\treturn el1 - el2;\n}","//sort if element contains any data\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar type = params.type || \"length\",\n\talignEmptyValues = params.alignEmptyValues,\n\temptyAlign = 0;\n\n\tfunction calc(value){\n\t\tvar result;\n\n\t\tswitch(type){\n\t\t\tcase \"length\":\n\t\t\t\tresult = value.length;\n\t\t\t\tbreak;\n\n\t\t\tcase \"sum\":\n\t\t\t\tresult = value.reduce(function(c, d){\n\t\t\t\t\treturn c + d;\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"max\":\n\t\t\t\tresult = Math.max.apply(null, value) ;\n\t\t\t\tbreak;\n\n\t\t\tcase \"min\":\n\t\t\t\tresult = Math.min.apply(null, value) ;\n\t\t\t\tbreak;\n\n\t\t\tcase \"avg\":\n\t\t\t\tresult = value.reduce(function(c, d){\n\t\t\t\t\treturn c + d;\n\t\t\t\t}) / value.length;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t//handle non array values\n\tif(!Array.isArray(a)){\n\t\temptyAlign = !Array.isArray(b) ? 0 : -1;\n\t}else if(!Array.isArray(b)){\n\t\temptyAlign = 1;\n\t}else{\n\t\treturn calc(b) - calc(a);\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}","//sort if element contains any data\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar el1 = typeof a == \"undefined\" ? 0 : 1;\n\tvar el2 = typeof b == \"undefined\" ? 0 : 1;\n\n\treturn el1 - el2;\n}","//sort alpha numeric strings\nexport default function(as, bs, aRow, bRow, column, dir, params){\n\tvar a, b, a1, b1, i= 0, L, rx = /(\\d+)|(\\D+)/g, rd = /\\d/;\n\tvar alignEmptyValues = params.alignEmptyValues;\n\tvar emptyAlign = 0;\n\n\t//handle empty values\n\tif(!as && as!== 0){\n\t\temptyAlign =  !bs && bs!== 0 ? 0 : -1;\n\t}else if(!bs && bs!== 0){\n\t\temptyAlign =  1;\n\t}else{\n\n\t\tif(isFinite(as) && isFinite(bs)) return as - bs;\n\t\ta = String(as).toLowerCase();\n\t\tb = String(bs).toLowerCase();\n\t\tif(a === b) return 0;\n\t\tif(!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\n\t\ta = a.match(rx);\n\t\tb = b.match(rx);\n\t\tL = a.length > b.length ? b.length : a.length;\n\t\twhile(i < L){\n\t\t\ta1= a[i];\n\t\t\tb1= b[i++];\n\t\t\tif(a1 !== b1){\n\t\t\t\tif(isFinite(a1) && isFinite(b1)){\n\t\t\t\t\tif(a1.charAt(0) === \"0\") a1 = \".\" + a1;\n\t\t\t\t\tif(b1.charAt(0) === \"0\") b1 = \".\" + b1;\n\t\t\t\t\treturn a1 - b1;\n\t\t\t\t}\n\t\t\t\telse return a1 > b1 ? 1 : -1;\n\t\t\t}\n\t\t}\n\n\t\treturn a.length > b.length;\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}","import number from './sorters/number.js';\nimport string from './sorters/string.js';\nimport date from './sorters/date.js';\nimport time from './sorters/time.js';\nimport datetime from './sorters/datetime.js';\nimport boolean from './sorters/boolean.js';\nimport array from './sorters/array.js';\nimport exists from './sorters/exists.js';\nimport alphanum from './sorters/alphanum.js';\n\nexport default {\n\tnumber:number,\n\tstring:string,\n\tdate:date,\n\ttime:time,\n\tdatetime:datetime,\n\tboolean:boolean,\n\tarray:array,\n\texists:exists,\n\talphanum:alphanum\n};","import Module from '../../core/Module.js';\n\nimport defaultSorters from './defaults/sorters.js';\n\nexport default class Sort extends Module{\n\n\tstatic moduleName = \"sort\";\n\n\t//load defaults\n\tstatic sorters = defaultSorters;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.sortList = []; //holder current sort\n\t\tthis.changed = false; //has the sort changed since last render\n\t\t\n\t\tthis.registerTableOption(\"sortMode\", \"local\"); //local or remote sorting\n\t\t\n\t\tthis.registerTableOption(\"initialSort\", false); //initial sorting criteria\n\t\tthis.registerTableOption(\"columnHeaderSortMulti\", true); //multiple or single column sorting\n\t\tthis.registerTableOption(\"sortOrderReverse\", false); //reverse internal sort ordering\n\t\tthis.registerTableOption(\"headerSortElement\", \"<div class='tabulator-arrow'></div>\"); //header sort element\n\t\tthis.registerTableOption(\"headerSortClickElement\", \"header\"); //element which triggers sort when clicked\n\t\t\n\t\tthis.registerColumnOption(\"sorter\");\n\t\tthis.registerColumnOption(\"sorterParams\");\n\t\t\n\t\tthis.registerColumnOption(\"headerSort\", true);\n\t\tthis.registerColumnOption(\"headerSortStartingDir\");\n\t\tthis.registerColumnOption(\"headerSortTristate\");\n\t\t\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this));\n\t\tthis.registerDataHandler(this.sort.bind(this), 20);\n\t\t\n\t\tthis.registerTableFunction(\"setSort\", this.userSetSort.bind(this));\n\t\tthis.registerTableFunction(\"getSorters\", this.getSort.bind(this));\n\t\tthis.registerTableFunction(\"clearSort\", this.clearSort.bind(this));\n\t\t\n\t\tif(this.table.options.sortMode === \"remote\"){\n\t\t\tthis.subscribe(\"data-params\", this.remoteSortParams.bind(this));\n\t\t}\n\t}\n\t\n\ttableBuilt(){\n\t\tif(this.table.options.initialSort){\n\t\t\tthis.setSort(this.table.options.initialSort);\n\t\t}\n\t}\n\t\n\tremoteSortParams(data, config, silent, params){\n\t\tvar sorters = this.getSort();\n\t\t\n\t\tsorters.forEach((item) => {\n\t\t\tdelete item.column;\n\t\t});\n\t\t\n\t\tparams.sort = sorters;\n\t\t\n\t\treturn params;\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\tuserSetSort(sortList, dir){\n\t\tthis.setSort(sortList, dir);\n\t\t// this.table.rowManager.sorterRefresh();\n\t\tthis.refreshSort();\n\t}\n\t\n\tclearSort(){\n\t\tthis.clear();\n\t\t// this.table.rowManager.sorterRefresh();\n\t\tthis.refreshSort();\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\t//initialize column header for sorting\n\tinitializeColumn(column){\n\t\tvar sorter = false,\n\t\tcolEl,\n\t\tarrowEl;\n\t\t\n\t\tswitch(typeof column.definition.sorter){\n\t\t\tcase \"string\":\n\t\t\t\tif(Sort.sorters[column.definition.sorter]){\n\t\t\t\t\tsorter = Sort.sorters[column.definition.sorter];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Sort Error - No such sorter found: \", column.definition.sorter);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t\tsorter = column.definition.sorter;\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\tcolumn.modules.sort = {\n\t\t\tsorter:sorter, dir:\"none\",\n\t\t\tparams:column.definition.sorterParams || {},\n\t\t\tstartingDir:column.definition.headerSortStartingDir || \"asc\",\n\t\t\ttristate: column.definition.headerSortTristate,\n\t\t};\n\t\t\n\t\tif(column.definition.headerSort !== false){\n\t\t\t\n\t\t\tcolEl = column.getElement();\n\t\t\t\n\t\t\tcolEl.classList.add(\"tabulator-sortable\");\n\t\t\t\n\t\t\tarrowEl = document.createElement(\"div\");\n\t\t\tarrowEl.classList.add(\"tabulator-col-sorter\");\n\t\t\t\n\t\t\tswitch(this.table.options.headerSortClickElement){\n\t\t\t\tcase \"icon\":\n\t\t\t\t\tarrowEl.classList.add(\"tabulator-col-sorter-element\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"header\":\n\t\t\t\t\tcolEl.classList.add(\"tabulator-col-sorter-element\");\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tcolEl.classList.add(\"tabulator-col-sorter-element\");\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tswitch(this.table.options.headerSortElement){\n\t\t\t\tcase \"function\":\n\t\t\t\t//do nothing\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"object\":\n\t\t\t\t\tarrowEl.appendChild(this.table.options.headerSortElement);\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tdefault:\n\t\t\t\t\tarrowEl.innerHTML = this.table.options.headerSortElement;\n\t\t\t}\n\t\t\t\n\t\t\t//create sorter arrow\n\t\t\tcolumn.titleHolderElement.appendChild(arrowEl);\n\t\t\t\n\t\t\tcolumn.modules.sort.element = arrowEl;\n\t\t\t\n\t\t\tthis.setColumnHeaderSortIcon(column, \"none\");\n\t\t\t\n\t\t\tif(this.table.options.headerSortClickElement === \"icon\"){\n\t\t\t\tarrowEl.addEventListener(\"mousedown\", (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t//sort on click\n\t\t\t(this.table.options.headerSortClickElement === \"icon\" ? arrowEl : colEl).addEventListener(\"click\", (e) => {\n\t\t\t\tvar dir = \"\",\n\t\t\t\tsorters=[],\n\t\t\t\tmatch = false;\n\t\t\t\t\n\t\t\t\tif(column.modules.sort){\n\t\t\t\t\tif(column.modules.sort.tristate){\n\t\t\t\t\t\tif(column.modules.sort.dir == \"none\"){\n\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(column.modules.sort.dir == column.modules.sort.startingDir){\n\t\t\t\t\t\t\t\tdir = column.modules.sort.dir == \"asc\" ? \"desc\" : \"asc\";\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tdir = \"none\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tswitch(column.modules.sort.dir){\n\t\t\t\t\t\t\tcase \"asc\":\n\t\t\t\t\t\t\t\tdir = \"desc\";\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tcase \"desc\":\n\t\t\t\t\t\t\t\tdir = \"asc\";\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (this.table.options.columnHeaderSortMulti && (e.shiftKey || e.ctrlKey)) {\n\t\t\t\t\t\tsorters = this.getSort();\n\t\t\t\t\t\t\n\t\t\t\t\t\tmatch = sorters.findIndex((sorter) => {\n\t\t\t\t\t\t\treturn sorter.field === column.getField();\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(match > -1){\n\t\t\t\t\t\t\tsorters[match].dir = dir;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tmatch = sorters.splice(match, 1)[0];\n\t\t\t\t\t\t\tif(dir != \"none\"){\n\t\t\t\t\t\t\t\tsorters.push(match);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(dir != \"none\"){\n\t\t\t\t\t\t\t\tsorters.push({column:column, dir:dir});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t//add to existing sort\n\t\t\t\t\t\tthis.setSort(sorters);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(dir == \"none\"){\n\t\t\t\t\t\t\tthis.clear();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t//sort by column only\n\t\t\t\t\t\t\tthis.setSort(column, dir);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// this.table.rowManager.sorterRefresh(!this.sortList.length);\n\t\t\t\t\tthis.refreshSort();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\trefreshSort(){\n\t\tif(this.table.options.sortMode === \"remote\"){\n\t\t\tthis.reloadData(null, false, false);\n\t\t}else{\n\t\t\tthis.refreshData(true);\n\t\t}\n\t\t\n\t\t//TODO - Persist left position of row manager\n\t\t// left = this.scrollLeft;\n\t\t// this.scrollHorizontal(left);\n\t}\n\t\n\t//check if the sorters have changed since last use\n\thasChanged(){\n\t\tvar changed = this.changed;\n\t\tthis.changed = false;\n\t\treturn changed;\n\t}\n\t\n\t//return current sorters\n\tgetSort(){\n\t\tvar self = this,\n\t\tsorters = [];\n\t\t\n\t\tself.sortList.forEach(function(item){\n\t\t\tif(item.column){\n\t\t\t\tsorters.push({column:item.column.getComponent(), field:item.column.getField(), dir:item.dir});\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn sorters;\n\t}\n\t\n\t//change sort list and trigger sort\n\tsetSort(sortList, dir){\n\t\tvar self = this,\n\t\tnewSortList = [];\n\t\t\n\t\tif(!Array.isArray(sortList)){\n\t\t\tsortList = [{column: sortList, dir:dir}];\n\t\t}\n\t\t\n\t\tsortList.forEach(function(item){\n\t\t\tvar column;\n\t\t\t\n\t\t\tcolumn = self.table.columnManager.findColumn(item.column);\n\t\t\t\n\t\t\tif(column){\n\t\t\t\titem.column = column;\n\t\t\t\tnewSortList.push(item);\n\t\t\t\tself.changed = true;\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Sort Warning - Sort field does not exist and is being ignored: \", item.column);\n\t\t\t}\n\t\t\t\n\t\t});\n\t\t\n\t\tself.sortList = newSortList;\n\t\t\n\t\tthis.dispatch(\"sort-changed\");\n\t}\n\t\n\t//clear sorters\n\tclear(){\n\t\tthis.setSort([]);\n\t}\n\t\n\t//find appropriate sorter for column\n\tfindSorter(column){\n\t\tvar row = this.table.rowManager.activeRows[0],\n\t\tsorter = \"string\",\n\t\tfield, value;\n\t\t\n\t\tif(row){\n\t\t\trow = row.getData();\n\t\t\tfield = column.getField();\n\t\t\t\n\t\t\tif(field){\n\t\t\t\t\n\t\t\t\tvalue = column.getFieldValue(row);\n\t\t\t\t\n\t\t\t\tswitch(typeof value){\n\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\t\tsorter = \"boolean\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif(!isNaN(value) && value !== \"\"){\n\t\t\t\t\t\t\tsorter = \"number\";\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){\n\t\t\t\t\t\t\t\tsorter = \"alphanum\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn Sort.sorters[sorter];\n\t}\n\t\n\t//work through sort list sorting data\n\tsort(data, sortOnly){\n\t\tvar self = this,\n\t\tsortList = this.table.options.sortOrderReverse ? self.sortList.slice().reverse() : self.sortList,\n\t\tsortListActual = [],\n\t\trowComponents = [];\n\t\t\n\t\tif(this.subscribedExternal(\"dataSorting\")){\n\t\t\tthis.dispatchExternal(\"dataSorting\", self.getSort());\n\t\t}\n\t\t\n\t\tif(!sortOnly) {\n\t\t\tself.clearColumnHeaders();\n\t\t}\n\t\t\n\t\tif(this.table.options.sortMode !== \"remote\"){\n\t\t\t\n\t\t\t//build list of valid sorters and trigger column specific callbacks before sort begins\n\t\t\tsortList.forEach(function(item, i){\n\t\t\t\tvar sortObj;\n\t\t\t\t\n\t\t\t\tif(item.column){\n\t\t\t\t\tsortObj = item.column.modules.sort;\n\t\t\t\t\t\n\t\t\t\t\tif(sortObj){\n\t\t\t\t\t\t\n\t\t\t\t\t\t//if no sorter has been defined, take a guess\n\t\t\t\t\t\tif(!sortObj.sorter){\n\t\t\t\t\t\t\tsortObj.sorter = self.findSorter(item.column);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\titem.params = typeof sortObj.params === \"function\" ? sortObj.params(item.column.getComponent(), item.dir) : sortObj.params;\n\t\t\t\t\t\t\n\t\t\t\t\t\tsortListActual.push(item);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(!sortOnly) {\n\t\t\t\t\t\tself.setColumnHeader(item.column, item.dir);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\t//sort data\n\t\t\tif (sortListActual.length) {\n\t\t\t\tself._sortItems(data, sortListActual);\n\t\t\t}\n\t\t\t\n\t\t}else if(!sortOnly) {\n\t\t\tsortList.forEach(function(item, i){\n\t\t\t\tself.setColumnHeader(item.column, item.dir);\n\t\t\t});\n\t\t}\n\n\t\t\n\t\tif(this.subscribedExternal(\"dataSorted\")){\n\t\t\tdata.forEach((row) => {\n\t\t\t\trowComponents.push(row.getComponent());\n\t\t\t});\n\t\t\t\n\t\t\tthis.dispatchExternal(\"dataSorted\", self.getSort(), rowComponents);\n\t\t}\n\t\t\n\t\treturn data;\n\t}\n\t\n\t//clear sort arrows on columns\n\tclearColumnHeaders(){\n\t\tthis.table.columnManager.getRealColumns().forEach((column) => {\n\t\t\tif(column.modules.sort){\n\t\t\t\tcolumn.modules.sort.dir = \"none\";\n\t\t\t\tcolumn.getElement().setAttribute(\"aria-sort\", \"none\");\n\t\t\t\tthis.setColumnHeaderSortIcon(column, \"none\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//set the column header sort direction\n\tsetColumnHeader(column, dir){\n\t\tcolumn.modules.sort.dir = dir;\n\t\tcolumn.getElement().setAttribute(\"aria-sort\", dir === \"asc\" ? \"ascending\" : \"descending\");\n\t\tthis.setColumnHeaderSortIcon(column, dir);\n\t}\n\t\n\tsetColumnHeaderSortIcon(column, dir){\n\t\tvar sortEl = column.modules.sort.element,\n\t\tarrowEl;\n\t\t\n\t\tif(column.definition.headerSort && typeof this.table.options.headerSortElement === \"function\"){\n\t\t\twhile(sortEl.firstChild) sortEl.removeChild(sortEl.firstChild);\n\t\t\t\n\t\t\tarrowEl = this.table.options.headerSortElement.call(this.table, column.getComponent(), dir);\n\t\t\t\n\t\t\tif(typeof arrowEl === \"object\"){\n\t\t\t\tsortEl.appendChild(arrowEl);\n\t\t\t}else{\n\t\t\t\tsortEl.innerHTML = arrowEl;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//sort each item in sort list\n\t_sortItems(data, sortList){\n\t\tvar sorterCount = sortList.length - 1;\n\t\t\n\t\tdata.sort((a, b) => {\n\t\t\tvar result;\n\t\t\t\n\t\t\tfor(var i = sorterCount; i>= 0; i--){\n\t\t\t\tlet sortItem = sortList[i];\n\t\t\t\t\n\t\t\t\tresult = this._sortRow(a, b, sortItem.column, sortItem.dir, sortItem.params);\n\t\t\t\t\n\t\t\t\tif(result !== 0){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn result;\n\t\t});\n\t}\n\t\n\t//process individual rows for a sort function on active data\n\t_sortRow(a, b, column, dir, params){\n\t\tvar el1Comp, el2Comp;\n\t\t\n\t\t//switch elements depending on search direction\n\t\tvar el1 = dir == \"asc\" ? a : b;\n\t\tvar el2 = dir == \"asc\" ? b : a;\n\t\t\n\t\ta = column.getFieldValue(el1.getData());\n\t\tb = column.getFieldValue(el2.getData());\n\t\t\n\t\ta = typeof a !== \"undefined\" ? a : \"\";\n\t\tb = typeof b !== \"undefined\" ? b : \"\";\n\t\t\n\t\tel1Comp = el1.getComponent();\n\t\tel2Comp = el2.getComponent();\n\t\t\n\t\treturn column.modules.sort.sorter.call(this, a, b, el1Comp, el2Comp, column.getComponent(), dir, params);\n\t}\n}","export default class GridCalculator{\r\n\tconstructor(columns, rows){\r\n\t\tthis.columnCount = columns;\r\n\t\tthis.rowCount = rows;\r\n\r\n\t\tthis.columnString = [];\r\n\t\tthis.columns = [];\r\n\t\tthis.rows = [];\r\n\t}\r\n\r\n\tgenColumns(data){\r\n\t\tvar colCount = Math.max(this.columnCount, Math.max(...data.map(item => item.length)));\r\n\r\n\t\tthis.columnString = [];\r\n\t\tthis.columns = [];\r\n\r\n\t\tfor(let i = 1; i <= colCount; i++){\r\n\t\t\tthis.incrementChar(this.columnString.length - 1);\r\n\t\t\tthis.columns.push(this.columnString.join(\"\"));\r\n\t\t}\r\n\r\n\t\treturn this.columns;\r\n\t}\r\n\r\n\tgenRows(data){\r\n\t\tvar rowCount = Math.max(this.rowCount, data.length);\r\n\r\n\t\tthis.rows = [];\r\n\r\n\t\tfor(let i = 1; i <= rowCount; i++){\r\n\t\t\tthis.rows.push(i);\r\n\t\t}\r\n\t\t\r\n\t\treturn this.rows;\r\n\t}\r\n\r\n\tincrementChar(i){\r\n\t\tlet char = this.columnString[i];\r\n\r\n\t\tif(char){\r\n\t\t\tif(char !== \"Z\"){\r\n\t\t\t\tthis.columnString[i] = String.fromCharCode(this.columnString[i].charCodeAt(0) + 1);\r\n\t\t\t}else{\r\n\t\t\t\tthis.columnString[i] = \"A\";\r\n\t\t\t\t\r\n\t\t\t\tif(i){\r\n\t\t\t\t\tthis.incrementChar(i-1);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.columnString.push(\"A\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.columnString.push(\"A\");\r\n\t\t}\r\n\t}\r\n\r\n\tsetRowCount(count){\r\n\t\tthis.rowCount = count;\r\n\t}\r\n\r\n\tsetColumnCount(count){\r\n\t\tthis.columnCount = count;\r\n\t}\r\n}","export default class SheetComponent {\r\n\tconstructor(sheet) {\r\n\t\tthis._sheet = sheet;\r\n\r\n\t\treturn new Proxy(this, {\r\n\t\t\tget: function (target, name, receiver) {\r\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\r\n\t\t\t\t\treturn target[name];\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn target._sheet.table.componentFunctionBinder.handle(\"sheet\", target._sheet, name);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\tgetTitle(){\r\n\t\treturn this._sheet.title;\r\n\t}\r\n\r\n\tgetKey(){\r\n\t\treturn this._sheet.key;\r\n\t}\r\n\r\n\tgetDefinition(){\r\n\t\treturn this._sheet.getDefinition();\r\n\t}\r\n\r\n\tgetData() {\r\n\t\treturn this._sheet.getData();\r\n\t}\r\n\r\n\tsetData(data) {\r\n\t\treturn this._sheet.setData(data);\r\n\t}\r\n\r\n\tclear(){\r\n\t\treturn this._sheet.clear();\r\n\t}\r\n\r\n\tremove(){\r\n\t\treturn this._sheet.remove();\r\n\t}\r\n\t\r\n\tactive(){\r\n\t\treturn this._sheet.active();\r\n\t}\r\n\r\n\tsetTitle(title){\r\n\t\treturn this._sheet.setTitle(title);\r\n\t}\r\n\r\n\tsetRows(rows){\r\n\t\treturn this._sheet.setRows(rows);\r\n\t}\r\n\r\n\tsetColumns(columns){\r\n\t\treturn this._sheet.setColumns(columns);\r\n\t}\r\n}","import CoreFeature from '../../core/CoreFeature.js';\r\nimport GridCalculator from \"./GridCalculator\";\r\nimport SheetComponent from \"./SheetComponent\";\r\n\r\nexport default class Sheet extends CoreFeature{\r\n\tconstructor(spreadsheetManager, definition) {\r\n\t\tsuper(spreadsheetManager.table);\r\n\t\t\r\n\t\tthis.spreadsheetManager = spreadsheetManager;\r\n\t\tthis.definition = definition;\r\n\t\t\r\n\t\tthis.title = this.definition.title || \"\";\r\n\t\tthis.key = this.definition.key || this.definition.title;\r\n\t\tthis.rowCount = this.definition.rows;\r\n\t\tthis.columnCount = this.definition.columns;\r\n\t\tthis.data = this.definition.data || [];\r\n\t\tthis.element = null;\r\n\t\tthis.isActive = false;\r\n\t\t\r\n\t\tthis.grid = new GridCalculator(this.columnCount, this.rowCount);\r\n\t\t\r\n\t\tthis.defaultColumnDefinition = {width:100, headerHozAlign:\"center\", headerSort:false};\r\n\t\tthis.columnDefinition = Object.assign(this.defaultColumnDefinition, this.options(\"spreadsheetColumnDefinition\"));\r\n\t\t\r\n\t\tthis.columnDefs = [];\r\n\t\tthis.rowDefs = [];\r\n\t\tthis.columnFields = [];\r\n\t\tthis.columns = [];\r\n\t\tthis.rows = [];\r\n\t\t\r\n\t\tthis.scrollTop = null;\r\n\t\tthis.scrollLeft = null;\r\n\t\t\r\n\t\tthis.initialize();\r\n\t\t\r\n\t\tthis.dispatchExternal(\"sheetAdded\", this.getComponent());\r\n\t}\r\n\t\r\n\t///////////////////////////////////\r\n\t///////// Initialization //////////\r\n\t///////////////////////////////////\r\n\t\r\n\tinitialize(){\r\n\t\tthis.initializeElement();\r\n\t\tthis.initializeColumns();\r\n\t\tthis.initializeRows();\r\n\t}\r\n\t\r\n\treinitialize(){\r\n\t\tthis.initializeColumns();\r\n\t\tthis.initializeRows();\r\n\t}\r\n\t\r\n\tinitializeElement(){\r\n\t\tthis.element = document.createElement(\"div\");\r\n\t\tthis.element.classList.add(\"tabulator-spreadsheet-tab\");\r\n\t\tthis.element.innerText = this.title;\r\n\t\t\r\n\t\tthis.element.addEventListener(\"click\", () => {\r\n\t\t\tthis.spreadsheetManager.loadSheet(this);\r\n\t\t});\r\n\t}\r\n\t\r\n\tinitializeColumns(){\r\n\t\tthis.grid.setColumnCount(this.columnCount);\r\n\t\tthis.columnFields = this.grid.genColumns(this.data);\r\n\t\t\r\n\t\tthis.columnDefs = [];\r\n\t\t\r\n\t\tthis.columnFields.forEach((ref) => {\r\n\t\t\tvar def = Object.assign({}, this.columnDefinition);\r\n\t\t\tdef.field = ref;\r\n\t\t\tdef.title = ref;\r\n\t\t\t\r\n\t\t\tthis.columnDefs.push(def);\r\n\t\t});\r\n\t}\r\n\t\r\n\tinitializeRows(){\r\n\t\tvar refs;\r\n\t\t\r\n\t\tthis.grid.setRowCount(this.rowCount);\r\n\t\t\r\n\t\trefs = this.grid.genRows(this.data);\r\n\t\t\r\n\t\tthis.rowDefs = [];\r\n\t\t\r\n\t\trefs.forEach((ref, i) => {\r\n\t\t\tvar def = {\"_id\":ref};\r\n\t\t\tvar data = this.data[i];\r\n\t\t\t\r\n\t\t\tif(data){\r\n\t\t\t\tdata.forEach((val, j) => {\r\n\t\t\t\t\tvar field = this.columnFields[j];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(field){\r\n\t\t\t\t\t\tdef[field] = val;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.rowDefs.push(def);\r\n\t\t});\r\n\t}\r\n\t\r\n\tunload(){\r\n\t\tthis.isActive = false;\r\n\t\tthis.scrollTop = this.table.rowManager.scrollTop;\r\n\t\tthis.scrollLeft = this.table.rowManager.scrollLeft;\r\n\t\tthis.data = this.getData(true);\r\n\t\tthis.element.classList.remove(\"tabulator-spreadsheet-tab-active\");\r\n\t}\r\n\t\r\n\tload(){\r\n\t\t\r\n\t\tvar wasInactive = !this.isActive;\r\n\t\t\r\n\t\tthis.isActive = true;\r\n\t\tthis.table.blockRedraw();\r\n\t\tthis.table.setData([]);\r\n\t\tthis.table.setColumns(this.columnDefs);\r\n\t\tthis.table.setData(this.rowDefs);\r\n\t\tthis.table.restoreRedraw();\r\n\t\t\r\n\t\tif(wasInactive && this.scrollTop !== null){\r\n\t\t\tthis.table.rowManager.element.scrollLeft = this.scrollLeft;\r\n\t\t\tthis.table.rowManager.element.scrollTop = this.scrollTop;\r\n\t\t}\r\n\t\t\r\n\t\tthis.element.classList.add(\"tabulator-spreadsheet-tab-active\");\r\n\t\t\r\n\t\tthis.dispatchExternal(\"sheetLoaded\", this.getComponent());\r\n\t}\r\n\t\r\n\t///////////////////////////////////\r\n\t//////// Helper Functions /////////\r\n\t///////////////////////////////////\r\n\t\r\n\tgetComponent(){\r\n\t\treturn new SheetComponent(this);\r\n\t}\r\n\t\r\n\tgetDefinition(){\r\n\t\treturn {\r\n\t\t\ttitle:this.title,\r\n\t\t\tkey:this.key,\r\n\t\t\trows:this.rowCount,\r\n\t\t\tcolumns:this.columnCount,\r\n\t\t\tdata:this.getData(),\r\n\t\t};\r\n\t}\r\n\t\r\n\tgetData(full){\r\n\t\tvar output = [], \r\n\t\trowWidths,\r\n\t\toutputWidth, outputHeight;\r\n\t\t\r\n\t\t//map data to array format\r\n\t\tthis.rowDefs.forEach((rowData) => {\r\n\t\t\tvar row = [];\r\n\t\t\t\r\n\t\t\tthis.columnFields.forEach((field) => {\r\n\t\t\t\trow.push(rowData[field]);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\toutput.push(row);\r\n\t\t});\r\n\t\t\r\n\t\t//trim output\r\n\t\tif(!full && !this.options(\"spreadsheetOutputFull\")){\r\n\t\t\t\r\n\t\t\t//calculate used area of data\r\n\t\t\trowWidths = output.map(row => row.findLastIndex(val => typeof val !== 'undefined') + 1);\r\n\t\t\toutputWidth = Math.max(...rowWidths);\r\n\t\t\toutputHeight = rowWidths.findLastIndex(width => width > 0) + 1;\r\n\t\t\t\r\n\t\t\toutput = output.slice(0, outputHeight);\r\n\t\t\toutput = output.map(row => row.slice(0, outputWidth));\r\n\t\t}\r\n\t\t\r\n\t\treturn output;\r\n\t}\r\n\t\r\n\tsetData(data){\r\n\t\tthis.data = data;\r\n\t\tthis.reinitialize();\r\n\t\t\r\n\t\tthis.dispatchExternal(\"sheetUpdated\", this.getComponent());\r\n\t\t\r\n\t\tif(this.isActive){\r\n\t\t\tthis.load();\r\n\t\t}\r\n\t}\r\n\t\r\n\tclear(){\r\n\t\tthis.setData([]);\r\n\t}\r\n\t\r\n\tsetTitle(title){\r\n\t\tthis.title = title;\r\n\t\tthis.element.innerText = title;\r\n\t\t\r\n\t\tthis.dispatchExternal(\"sheetUpdated\", this.getComponent());\r\n\t}\r\n\t\r\n\tsetRows(rows){\r\n\t\tthis.rowCount = rows;\r\n\t\tthis.initializeRows();\r\n\t\t\r\n\t\tthis.dispatchExternal(\"sheetUpdated\", this.getComponent());\r\n\t\t\r\n\t\tif(this.isActive){\r\n\t\t\tthis.load();\r\n\t\t}\r\n\t}\r\n\t\r\n\tsetColumns(columns){\r\n\t\tthis.columnCount = columns;\r\n\t\tthis.reinitialize();\r\n\t\t\r\n\t\tthis.dispatchExternal(\"sheetUpdated\", this.getComponent());\r\n\t\t\r\n\t\tif(this.isActive){\r\n\t\t\tthis.load();\r\n\t\t}\r\n\t}\r\n\t\r\n\tremove(){\r\n\t\tthis.spreadsheetManager.removeSheet(this);\r\n\t}\r\n\t\r\n\tdestroy(){\r\n\t\tif(this.element.parentNode){\r\n\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t}\r\n\t\t\r\n\t\tthis.dispatchExternal(\"sheetRemoved\", this.getComponent());\r\n\t}\r\n\t\r\n\tactive(){\r\n\t\tthis.spreadsheetManager.loadSheet(this);\r\n\t}\r\n}","import Module from '../../core/Module.js';\r\nimport Sheet from \"./Sheet\";\r\nimport SheetComponent from \"./SheetComponent\";\r\n\r\nexport default class Spreadsheet extends Module{\r\n\t\r\n\tstatic moduleName = \"spreadsheet\";\r\n\t\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t\t\r\n\t\tthis.sheets = [];\r\n\t\tthis.element = null;\r\n\t\t\r\n\t\tthis.registerTableOption(\"spreadsheet\", false); \r\n\t\tthis.registerTableOption(\"spreadsheetRows\", 50); \r\n\t\tthis.registerTableOption(\"spreadsheetColumns\", 50); \r\n\t\tthis.registerTableOption(\"spreadsheetColumnDefinition\", {}); \r\n\t\tthis.registerTableOption(\"spreadsheetOutputFull\", false); \r\n\t\tthis.registerTableOption(\"spreadsheetData\", false); \r\n\t\tthis.registerTableOption(\"spreadsheetSheets\", false); \r\n\t\tthis.registerTableOption(\"spreadsheetSheetTabs\", false); \r\n\t\tthis.registerTableOption(\"spreadsheetSheetTabsElement\", false); \r\n\t\t\r\n\t\tthis.registerTableFunction(\"setSheets\", this.setSheets.bind(this));\r\n\t\tthis.registerTableFunction(\"addSheet\", this.addSheet.bind(this));\r\n\t\tthis.registerTableFunction(\"getSheets\", this.getSheets.bind(this));\r\n\t\tthis.registerTableFunction(\"getSheetDefinitions\", this.getSheetDefinitions.bind(this));\r\n\t\tthis.registerTableFunction(\"setSheetData\", this.setSheetData.bind(this));\r\n\t\tthis.registerTableFunction(\"getSheet\", this.getSheet.bind(this));\r\n\t\tthis.registerTableFunction(\"getSheetData\", this.getSheetData.bind(this));\r\n\t\tthis.registerTableFunction(\"clearSheet\", this.clearSheet.bind(this));\r\n\t\tthis.registerTableFunction(\"removeSheet\", this.removeSheetFunc.bind(this));\r\n\t\tthis.registerTableFunction(\"activeSheet\", this.activeSheetFunc.bind(this));\r\n\t}\r\n\t\r\n\t///////////////////////////////////\r\n\t////// Module Initialization //////\r\n\t///////////////////////////////////\r\n\t\r\n\t\r\n\tinitialize(){\r\n\t\tif(this.options(\"spreadsheet\")){\t\r\n\t\t\tthis.subscribe(\"table-initialized\", this.tableInitialized.bind(this));\r\n\t\t\tthis.subscribe(\"data-loaded\", this.loadRemoteData.bind(this));\r\n\t\t\t\r\n\t\t\tthis.table.options.index = \"_id\";\r\n\t\t\t\r\n\t\t\tif(this.options(\"spreadsheetData\") && this.options(\"spreadsheetSheets\")){\r\n\t\t\t\tconsole.warn(\"You cannot use spreadsheetData and spreadsheetSheets at the same time, ignoring spreadsheetData\");\r\n\t\t\t\t\r\n\t\t\t\tthis.table.options.spreadsheetData = false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.compatibilityCheck();\r\n\t\t\t\r\n\t\t\tif(this.options(\"spreadsheetSheetTabs\")){\r\n\t\t\t\tthis.initializeTabset();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tcompatibilityCheck(){\r\n\t\tif(this.options(\"data\")){\r\n\t\t\tconsole.warn(\"Do not use the data option when working with spreadsheets, use either spreadsheetData or spreadsheetSheets to pass data into the table\");\r\n\t\t}\r\n\t\t\r\n\t\tif(this.options(\"pagination\")){\r\n\t\t\tconsole.warn(\"The spreadsheet module is not compatible with the pagination module\");\r\n\t\t}\r\n\t\t\r\n\t\tif(this.options(\"groupBy\")){\r\n\t\t\tconsole.warn(\"The spreadsheet module is not compatible with the row grouping module\");\r\n\t\t}\r\n\t\t\r\n\t\tif(this.options(\"responsiveCollapse\")){\r\n\t\t\tconsole.warn(\"The spreadsheet module is not compatible with the responsive collapse module\");\r\n\t\t}\r\n\t}\r\n\tinitializeTabset(){\r\n\t\tthis.element = document.createElement(\"div\");\r\n\t\tthis.element.classList.add(\"tabulator-spreadsheet-tabs\");\r\n\t\tvar altContainer = this.options(\"spreadsheetSheetTabsElement\");\r\n\t\t\r\n\t\tif(altContainer && !(altContainer instanceof HTMLElement)){\r\n\t\t\taltContainer = document.querySelector(altContainer);\r\n\t\t\t\r\n\t\t\tif(!altContainer){\r\n\t\t\t\tconsole.warn(\"Unable to find element matching spreadsheetSheetTabsElement selector:\", this.options(\"spreadsheetSheetTabsElement\"));\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(altContainer){\r\n\t\t\taltContainer.appendChild(this.element);\r\n\t\t}else{\r\n\t\t\tthis.footerAppend(this.element);\r\n\t\t}\r\n\t}\r\n\t\r\n\ttableInitialized(){\r\n\t\tif(this.sheets.length){\r\n\t\t\tthis.loadSheet(this.sheets[0]);\r\n\t\t}else{\r\n\t\t\t\r\n\t\t\tif(this.options(\"spreadsheetSheets\")){\r\n\t\t\t\tthis.loadSheets(this.options(\"spreadsheetSheets\"));\r\n\t\t\t}else if(this.options(\"spreadsheetData\")){\r\n\t\t\t\tthis.loadData(this.options(\"spreadsheetData\"));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t/////////// Ajax Parsing //////////\r\n\t///////////////////////////////////\r\n\r\n\tloadRemoteData(data, data1, data2){\r\n\t\tconsole.log(\"data\", data, data1, data2);\r\n\r\n\t\tif(Array.isArray(data)){\r\n\r\n\t\t\tthis.table.dataLoader.clearAlert();\r\n\t\t\tthis.dispatchExternal(\"dataLoaded\", data);\r\n\r\n\t\t\tif(!data.length || Array.isArray(data[0])){\r\n\t\t\t\tthis.loadData(data);\r\n\t\t\t}else{\r\n\t\t\t\tthis.loadSheets(data);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.error(\"Spreadsheet Loading Error - Unable to process remote data due to invalid data type \\nExpecting: array \\nReceived: \", typeof data, \"\\nData:     \", data);\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Sheet Management ////////\r\n\t///////////////////////////////////\r\n\t\r\n\t\r\n\tloadData(data){\r\n\t\tvar def = {\r\n\t\t\tdata:data,\r\n\t\t};\r\n\t\t\r\n\t\tthis.loadSheet(this.newSheet(def));\r\n\t}\r\n\t\r\n\tdestroySheets(){\r\n\t\tthis.sheets.forEach((sheet) => {\r\n\t\t\tsheet.destroy();\r\n\t\t});\r\n\t\t\r\n\t\tthis.sheets = [];\r\n\t\tthis.activeSheet = null;\r\n\t}\r\n\t\r\n\tloadSheets(sheets){\t\r\n\t\tif(!Array.isArray(sheets)){\r\n\t\t\tsheets = [];\r\n\t\t}\r\n\t\t\r\n\t\tthis.destroySheets();\r\n\t\t\r\n\t\tsheets.forEach((def) => {\r\n\t\t\tthis.newSheet(def);\r\n\t\t});\r\n\t\t\r\n\t\tthis.loadSheet(this.sheets[0]);\r\n\t}\r\n\t\r\n\tloadSheet(sheet){\r\n\t\tif(this.activeSheet !== sheet){\r\n\t\t\tif(this.activeSheet){\r\n\t\t\t\tthis.activeSheet.unload();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.activeSheet = sheet;\r\n\t\t\t\r\n\t\t\tsheet.load();\r\n\t\t}\r\n\t}\r\n\t\r\n\tnewSheet(definition = {}){\r\n\t\tvar sheet;\r\n\t\t\r\n\t\tif(!definition.rows){\r\n\t\t\tdefinition.rows = this.options(\"spreadsheetRows\");\r\n\t\t}\r\n\t\t\r\n\t\tif(!definition.columns){\r\n\t\t\tdefinition.columns = this.options(\"spreadsheetColumns\");\r\n\t\t}\r\n\t\t\r\n\t\tsheet = new Sheet(this, definition);\r\n\t\t\r\n\t\tthis.sheets.push(sheet);\r\n\t\t\r\n\t\tif(this.element){\r\n\t\t\tthis.element.appendChild(sheet.element);\r\n\t\t}\r\n\t\t\r\n\t\treturn sheet;\r\n\t}\r\n\t\r\n\tremoveSheet(sheet){\r\n\t\tvar index = this.sheets.indexOf(sheet),\r\n\t\tprevSheet;\r\n\t\t\r\n\t\tif(this.sheets.length > 1){\r\n\t\t\tif(index > -1){\r\n\t\t\t\tthis.sheets.splice(index, 1);\r\n\t\t\t\tsheet.destroy();\r\n\t\t\t\t\r\n\t\t\t\tif(this.activeSheet === sheet){\r\n\t\t\t\t\t\r\n\t\t\t\t\tprevSheet = this.sheets[index - 1] || this.sheets[0];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(prevSheet){\r\n\t\t\t\t\t\tthis.loadSheet(prevSheet);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.activeSheet = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Unable to remove sheet, at least one sheet must be active\");\r\n\t\t}\r\n\t}\r\n\t\r\n\tlookupSheet(key){\r\n\t\tif(!key){\r\n\t\t\treturn this.activeSheet;\r\n\t\t}else if(key instanceof Sheet){\r\n\t\t\treturn key;\r\n\t\t}else if(key instanceof SheetComponent){\r\n\t\t\treturn key._sheet;\r\n\t\t}else{\r\n\t\t\treturn this.sheets.find(sheet => sheet.key === key) || false;\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t///////////////////////////////////\r\n\t//////// Public Functions /////////\r\n\t///////////////////////////////////\r\n\t\r\n\tsetSheets(sheets){\r\n\t\tthis.loadSheets(sheets);\r\n\r\n\t\treturn this.getSheets();\r\n\t}\r\n\r\n\taddSheet(sheet){\r\n\t\treturn this.newSheet(sheet).getComponent();\r\n\t}\r\n\t\r\n\tgetSheetDefinitions(){\r\n\t\treturn this.sheets.map(sheet => sheet.getDefinition());\r\n\t}\r\n\t\r\n\tgetSheets(){\r\n\t\treturn this.sheets.map(sheet => sheet.getComponent());\r\n\t}\r\n\t\r\n\tgetSheet(key){\r\n\t\tvar sheet = this.lookupSheet(key);\r\n\t\t\r\n\t\treturn sheet ? sheet.getComponent() : false;\r\n\t}\r\n\t\r\n\tsetSheetData(key, data){\r\n\t\tif (key && !data){\r\n\t\t\tdata = key;\r\n\t\t\tkey = false;\r\n\t\t}\r\n\t\t\r\n\t\tvar sheet = this.lookupSheet(key);\r\n\t\t\r\n\t\treturn sheet ? sheet.setData(data) : false;\t\r\n\t}\r\n\t\r\n\tgetSheetData(key){\r\n\t\tvar sheet = this.lookupSheet(key);\r\n\t\t\r\n\t\treturn sheet ? sheet.getData() : false;\t\r\n\t}\r\n\t\r\n\tclearSheet(key){\r\n\t\tvar sheet = this.lookupSheet(key);\r\n\t\t\r\n\t\treturn sheet ? sheet.clear() : false;\r\n\t}\r\n\t\r\n\tremoveSheetFunc(key){\r\n\t\tvar sheet = this.lookupSheet(key);\r\n\t\t\r\n\t\tif(sheet){\r\n\t\t\tthis.removeSheet(sheet);\r\n\t\t}\r\n\t}\r\n\t\r\n\tactiveSheetFunc(key){\r\n\t\tvar sheet = this.lookupSheet(key);\r\n\t\t\r\n\t\treturn sheet ? this.loadSheet(sheet) : false;\r\n\t}\r\n}","import Module from '../../core/Module.js';\nimport Cell from '../../core/cell/Cell.js';\n\nexport default class Tooltip extends Module{\n\n\tstatic moduleName = \"tooltip\";\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.tooltipSubscriber = null,\n\t\tthis.headerSubscriber = null,\n\t\t\n\t\tthis.timeout = null;\n\t\tthis.popupInstance = null;\n\t\t\n\t\t// this.registerTableOption(\"tooltipGenerationMode\", undefined);  //deprecated\n\t\tthis.registerTableOption(\"tooltipDelay\", 300); \n\t\t\n\t\tthis.registerColumnOption(\"tooltip\");\n\t\tthis.registerColumnOption(\"headerTooltip\");\n\t}\n\t\n\tinitialize(){\n\t\tthis.deprecatedOptionsCheck();\n\t\t\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\t\n\tdeprecatedOptionsCheck(){\n\t\t// this.deprecationCheckMsg(\"tooltipGenerationMode\", \"This option is no longer needed as tooltips are always generated on hover now\");\n\t}\t\n\t\n\tinitializeColumn(column){\n\t\tif(column.definition.headerTooltip && !this.headerSubscriber){\n\t\t\tthis.headerSubscriber = true;\n\t\t\t\n\t\t\tthis.subscribe(\"column-mousemove\", this.mousemoveCheck.bind(this, \"headerTooltip\"));\n\t\t\tthis.subscribe(\"column-mouseout\", this.mouseoutCheck.bind(this, \"headerTooltip\"));\n\t\t}\n\t\t\n\t\tif(column.definition.tooltip && !this.tooltipSubscriber){\n\t\t\tthis.tooltipSubscriber = true;\n\t\t\t\n\t\t\tthis.subscribe(\"cell-mousemove\", this.mousemoveCheck.bind(this, \"tooltip\"));\n\t\t\tthis.subscribe(\"cell-mouseout\", this.mouseoutCheck.bind(this, \"tooltip\"));\n\t\t}\n\t}\n\t\n\tmousemoveCheck(action, e, component){\n\t\tvar tooltip = action === \"tooltip\" ? component.column.definition.tooltip : component.definition.headerTooltip;\n\t\t\n\t\tif(tooltip){\n\t\t\tthis.clearPopup();\n\t\t\tthis.timeout = setTimeout(this.loadTooltip.bind(this, e, component, tooltip), this.table.options.tooltipDelay);\n\t\t}\n\t}\n\n\tmouseoutCheck(action, e, component){\n\t\tif(!this.popupInstance){\n\t\t\tthis.clearPopup();\n\t\t}\n\t}\n\t\n\tclearPopup(action, e, component){\n\t\tclearTimeout(this.timeout);\n\t\tthis.timeout = null;\n\t\t\n\t\tif(this.popupInstance){\n\t\t\tthis.popupInstance.hide();\n\t\t}\n\t}\n\t\n\tloadTooltip(e, component, tooltip){\n\t\tvar contentsEl, renderedCallback, coords;\n\n\t\tfunction onRendered(callback){\n\t\t\trenderedCallback = callback;\n\t\t}\n\t\t\n\t\tif(typeof tooltip === \"function\"){\n\t\t\ttooltip = tooltip(e, component.getComponent(), onRendered);\n\t\t}\n\t\t\n\t\tif(tooltip instanceof HTMLElement){\n\t\t\tcontentsEl = tooltip;\n\t\t}else{\n\t\t\tcontentsEl = document.createElement(\"div\");\n\t\t\t\n\t\t\tif(tooltip === true){\n\t\t\t\tif(component instanceof Cell){\n\t\t\t\t\ttooltip = component.value;\n\t\t\t\t}else{\n\t\t\t\t\tif(component.definition.field){\n\t\t\t\t\t\tthis.langBind(\"columns|\" + component.definition.field, (value) => {\n\t\t\t\t\t\t\tcontentsEl.innerHTML = tooltip = value || component.definition.title;\n\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\ttooltip = component.definition.title;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tcontentsEl.innerHTML = tooltip;\n\t\t}\n\t\t\n\t\tif(tooltip || tooltip === 0 || tooltip === false){\n\t\t\tcontentsEl.classList.add(\"tabulator-tooltip\");\n\n\t\t\tcontentsEl.addEventListener(\"mousemove\", e => e.preventDefault());\n\t\t\t\n\t\t\tthis.popupInstance = this.popup(contentsEl);\n\t\t\t\n\t\t\tif(typeof renderedCallback === \"function\"){\n\t\t\t\tthis.popupInstance.renderCallback(renderedCallback);\n\t\t\t}\n\n\t\t\tcoords = this.popupInstance.containerEventCoords(e);\n\t\t\t\n\t\t\tthis.popupInstance.show(coords.x + 15, coords.y + 15).hideOnBlur(() => {\n\t\t\t\tthis.dispatchExternal(\"TooltipClosed\", component.getComponent());\n\t\t\t\tthis.popupInstance = null;\n\t\t\t});\n\t\t\t\n\t\t\tthis.dispatchExternal(\"TooltipOpened\", component.getComponent());\n\t\t}\n\t}\n}","export default {\n\t//is integer\n\tinteger: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tvalue = Number(value);\n\n\t\treturn !isNaN(value) && isFinite(value) && Math.floor(value) === value;\n\t},\n\n\t//is float\n\tfloat: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\tvalue = Number(value);\n\n\t\treturn !isNaN(value) && isFinite(value) && value % 1 !== 0;\n\t},\n\n\t//must be a number\n\tnumeric: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn !isNaN(value);\n\t},\n\n\t//must be a string\n\tstring: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn isNaN(value);\n\t},\n\n\t//must be alphanumeric\n\talphanumeric: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tvar reg = new RegExp(/^[a-z0-9]+$/i);\n\n\t\treturn reg.test(value);\n\t},\n\n\t//maximum value\n\tmax: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn parseFloat(value) <= parameters;\n\t},\n\n\t//minimum value\n\tmin: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn parseFloat(value) >= parameters;\n\t},\n\n\t//starts with  value\n\tstarts: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).toLowerCase().startsWith(String(parameters).toLowerCase());\n\t},\n\n\t//ends with  value\n\tends: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).toLowerCase().endsWith(String(parameters).toLowerCase());\n\t},\n\n\n\t//minimum string length\n\tminLength: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).length >= parameters;\n\t},\n\n\t//maximum string length\n\tmaxLength: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).length <= parameters;\n\t},\n\n\t//in provided value list\n\tin: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tif(typeof parameters == \"string\"){\n\t\t\tparameters = parameters.split(\"|\");\n\t\t}\n\n\t\treturn parameters.indexOf(value) > -1;\n\t},\n\n\t//must match provided regex\n\tregex: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\tvar reg = new RegExp(parameters);\n\n\t\treturn reg.test(value);\n\t},\n\n\t//value must be unique in this column\n\tunique: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\tvar unique = true;\n\n\t\tvar cellData = cell.getData();\n\t\tvar column = cell.getColumn()._getSelf();\n\n\t\tthis.table.rowManager.rows.forEach(function(row){\n\t\t\tvar data = row.getData();\n\n\t\t\tif(data !== cellData){\n\t\t\t\tif(value == column.getFieldValue(data)){\n\t\t\t\t\tunique = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn unique;\n\t},\n\n\t//must have a value\n\trequired:function(cell, value, parameters){\n\t\treturn value !== \"\" && value !== null && typeof value !== \"undefined\";\n\t},\n};","import Module from '../../core/Module.js';\n\nimport defaultValidators from './defaults/validators.js';\n\nexport default class Validate extends Module{\n\n\tstatic moduleName = \"validate\";\n\n\t//load defaults\n\tstatic validators = defaultValidators;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.invalidCells = [];\n\t\t\n\t\tthis.registerTableOption(\"validationMode\", \"blocking\");\n\t\t\n\t\tthis.registerColumnOption(\"validator\");\n\t\t\n\t\tthis.registerTableFunction(\"getInvalidCells\", this.getInvalidCells.bind(this));\n\t\tthis.registerTableFunction(\"clearCellValidation\", this.userClearCellValidation.bind(this));\n\t\tthis.registerTableFunction(\"validate\", this.userValidate.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"cell\", \"isValid\", this.cellIsValid.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"clearValidation\", this.clearValidation.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"validate\", this.cellValidate.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"column\", \"validate\", this.columnValidate.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"validate\", this.rowValidate.bind(this));\n\t}\n\t\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-delete\", this.clearValidation.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumnCheck.bind(this));\n\t\t\n\t\tthis.subscribe(\"edit-success\", this.editValidate.bind(this));\n\t\tthis.subscribe(\"edit-editor-clear\", this.editorClear.bind(this));\n\t\tthis.subscribe(\"edit-edited-clear\", this.editedClear.bind(this));\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Event Handling //////////\n\t///////////////////////////////////\n\t\n\teditValidate(cell, value, previousValue){\n\t\tvar valid = this.table.options.validationMode !== \"manual\" ? this.validate(cell.column.modules.validate, cell, value) : true;\n\t\t\n\t\t// allow time for editor to make render changes then style cell\n\t\tif(valid !== true){\n\t\t\tsetTimeout(() => {\n\t\t\t\tcell.getElement().classList.add(\"tabulator-validation-fail\");\n\t\t\t\tthis.dispatchExternal(\"validationFailed\", cell.getComponent(), value, valid);\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn valid;\n\t}\n\t\n\teditorClear(cell, cancelled){\n\t\tif(cancelled){\n\t\t\tif(cell.column.modules.validate){\n\t\t\t\tthis.cellValidate(cell);\n\t\t\t}\n\t\t}\n\n\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\n\t}\n\t\n\teditedClear(cell){\n\t\tif(cell.modules.validate){\n\t\t\tcell.modules.validate.invalid = false;\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t////////// Cell Functions /////////\n\t///////////////////////////////////\n\t\n\tcellIsValid(cell){\n\t\treturn cell.modules.validate ? (cell.modules.validate.invalid || true) : true;\n\t}\n\t\n\tcellValidate(cell){\n\t\treturn this.validate(cell.column.modules.validate, cell, cell.getValue());\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Column Functions ////////\n\t///////////////////////////////////\n\t\n\tcolumnValidate(column){\n\t\tvar invalid = [];\n\t\t\n\t\tcolumn.cells.forEach((cell) => {\n\t\t\tif(this.cellValidate(cell) !== true){\n\t\t\t\tinvalid.push(cell.getComponent());\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn invalid.length ? invalid : true;\n\t}\n\t\n\t///////////////////////////////////\n\t////////// Row Functions //////////\n\t///////////////////////////////////\n\t\n\trowValidate(row){\n\t\tvar invalid = [];\n\t\t\n\t\trow.cells.forEach((cell) => {\n\t\t\tif(this.cellValidate(cell) !== true){\n\t\t\t\tinvalid.push(cell.getComponent());\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn invalid.length ? invalid : true;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\t\n\tuserClearCellValidation(cells){\n\t\tif(!cells){\n\t\t\tcells = this.getInvalidCells();\n\t\t}\n\t\t\n\t\tif(!Array.isArray(cells)){\n\t\t\tcells = [cells];\n\t\t}\n\t\t\n\t\tcells.forEach((cell) => {\n\t\t\tthis.clearValidation(cell._getSelf());\n\t\t});\n\t}\n\t\n\tuserValidate(cells){\n\t\tvar output = [];\n\t\t\n\t\t//clear row data\n\t\tthis.table.rowManager.rows.forEach((row) => {\n\t\t\trow = row.getComponent();\n\t\t\t\n\t\t\tvar valid = row.validate();\n\t\t\t\n\t\t\tif(valid !== true){\n\t\t\t\toutput = output.concat(valid);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn output.length ? output : true;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tinitializeColumnCheck(column){\n\t\tif(typeof column.definition.validator !== \"undefined\"){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\t\n\t//validate\n\tinitializeColumn(column){\n\t\tvar self = this,\n\t\tconfig = [],\n\t\tvalidator;\n\t\t\n\t\tif(column.definition.validator){\n\t\t\t\n\t\t\tif(Array.isArray(column.definition.validator)){\n\t\t\t\tcolumn.definition.validator.forEach((item) => {\n\t\t\t\t\tvalidator = self._extractValidator(item);\n\t\t\t\t\t\n\t\t\t\t\tif(validator){\n\t\t\t\t\t\tconfig.push(validator);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tvalidator = this._extractValidator(column.definition.validator);\n\t\t\t\t\n\t\t\t\tif(validator){\n\t\t\t\t\tconfig.push(validator);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.modules.validate = config.length ? config : false;\n\t\t}\n\t}\n\t\n\t_extractValidator(value){\n\t\tvar type, params, pos;\n\t\t\n\t\tswitch(typeof value){\n\t\t\tcase \"string\":\n\t\t\t\tpos = value.indexOf(':');\n\t\t\t\n\t\t\t\tif(pos > -1){\n\t\t\t\t\ttype = value.substring(0,pos);\n\t\t\t\t\tparams = value.substring(pos+1);\n\t\t\t\t}else{\n\t\t\t\t\ttype = value;\n\t\t\t\t}\n\t\t\t\n\t\t\t\treturn this._buildValidator(type, params);\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t\treturn this._buildValidator(value);\n\t\t\t\n\t\t\tcase \"object\":\n\t\t\t\treturn this._buildValidator(value.type, value.parameters);\n\t\t}\n\t}\n\t\n\t_buildValidator(type, params){\n\t\t\n\t\tvar func = typeof type == \"function\" ? type : Validate.validators[type];\n\t\t\n\t\tif(!func){\n\t\t\tconsole.warn(\"Validator Setup Error - No matching validator found:\", type);\n\t\t\treturn false;\n\t\t}else{\n\t\t\treturn {\n\t\t\t\ttype:typeof type == \"function\" ? \"function\" : type,\n\t\t\t\tfunc:func,\n\t\t\t\tparams:params,\n\t\t\t};\n\t\t}\n\t}\n\t\n\tvalidate(validators, cell, value){\n\t\tvar self = this,\n\t\tfailedValidators = [],\n\t\tinvalidIndex = this.invalidCells.indexOf(cell);\n\t\t\n\t\tif(validators){\n\t\t\tvalidators.forEach((item) => {\n\t\t\t\tif(!item.func.call(self, cell.getComponent(), value, item.params)){\n\t\t\t\t\tfailedValidators.push({\n\t\t\t\t\t\ttype:item.type,\n\t\t\t\t\t\tparameters:item.params\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\tif(!cell.modules.validate){\n\t\t\tcell.modules.validate = {};\n\t\t}\n\t\t\n\t\tif(!failedValidators.length){\n\t\t\tcell.modules.validate.invalid = false;\n\t\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\n\t\t\t\n\t\t\tif(invalidIndex > -1){\n\t\t\t\tthis.invalidCells.splice(invalidIndex, 1);\n\t\t\t}\n\t\t}else{\n\t\t\tcell.modules.validate.invalid = failedValidators;\n\t\t\t\n\t\t\tif(this.table.options.validationMode !== \"manual\"){\n\t\t\t\tcell.getElement().classList.add(\"tabulator-validation-fail\");\n\t\t\t}\n\t\t\t\n\t\t\tif(invalidIndex == -1){\n\t\t\t\tthis.invalidCells.push(cell);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn failedValidators.length ? failedValidators : true;\n\t}\n\t\n\tgetInvalidCells(){\n\t\tvar output = [];\n\t\t\n\t\tthis.invalidCells.forEach((cell) => {\n\t\t\toutput.push(cell.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tclearValidation(cell){\n\t\tvar invalidIndex;\n\t\t\n\t\tif(cell.modules.validate && cell.modules.validate.invalid){\n\t\t\t\n\t\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\n\t\t\tcell.modules.validate.invalid = false;\n\t\t\t\n\t\t\tinvalidIndex = this.invalidCells.indexOf(cell);\n\t\t\t\n\t\t\tif(invalidIndex > -1){\n\t\t\t\tthis.invalidCells.splice(invalidIndex, 1);\n\t\t\t}\n\t\t}\n\t}\n}","export default {\n\n\tdebugEventsExternal:false, //flag to console log events\n\tdebugEventsInternal:false, //flag to console log events\n\tdebugInvalidOptions:true, //allow toggling of invalid option warnings\n\tdebugInvalidComponentFuncs:true, //allow toggling of invalid component warnings\n\tdebugInitialization:true, //allow toggling of pre initialization function call warnings\n\tdebugDeprecation:true, //allow toggling of deprecation warnings\n\n\theight:false, //height of tabulator\n\tminHeight:false, //minimum height of tabulator\n\tmaxHeight:false, //maximum height of tabulator\n\n\tcolumnHeaderVertAlign:\"top\", //vertical alignment of column headers\n\n\tpopupContainer:false,\n\n\tcolumns:[],//store for colum header info\n\tcolumnDefaults:{}, //store column default props\n\trowHeader:false,\n\n\tdata:false, //default starting data\n\n\tautoColumns:false, //build columns from data row structure\n\tautoColumnsDefinitions:false,\n\n\tnestedFieldSeparator:\".\", //separator for nested data\n\n\tfooterElement:false, //hold footer element\n\n\tindex:\"id\", //filed for row index\n\n\ttextDirection:\"auto\",\n\n\taddRowPos:\"bottom\", //position to insert blank rows, top|bottom\n\n\theaderVisible:true, //hide header\n\n\trenderVertical:\"virtual\",\n\trenderHorizontal:\"basic\",\n\trenderVerticalBuffer:0, // set virtual DOM buffer size\n\n\tscrollToRowPosition:\"top\",\n\tscrollToRowIfVisible:true,\n\n\tscrollToColumnPosition:\"left\",\n\tscrollToColumnIfVisible:true,\n\n\trowFormatter:false,\n\trowFormatterPrint:null,\n\trowFormatterClipboard:null,\n\trowFormatterHtmlOutput:null,\n\n\trowHeight:null,\n\n\tplaceholder:false,\n\n\tdataLoader:true,\n\tdataLoaderLoading:false,\n\tdataLoaderError:false,\n\tdataLoaderErrorTimeout:3000,\n\n\tdataSendParams:{},\n\n\tdataReceiveParams:{},\n};\n","export default class OptionsList {\n\tconstructor(table, msgType, defaults = {}){\n\t\tthis.table = table;\n\t\tthis.msgType = msgType;\n\t\tthis.registeredDefaults = Object.assign({}, defaults);\n\t}\n\t\n\tregister(option, value){\n\t\tthis.registeredDefaults[option] = value;\n\t}\n\t\n\tgenerate(defaultOptions, userOptions = {}){\n\t\tvar output = Object.assign({}, this.registeredDefaults),\n\t\twarn = this.table.options.debugInvalidOptions || userOptions.debugInvalidOptions === true;\n\t\t\n\t\tObject.assign(output, defaultOptions);\n\t\t\n\t\tfor (let key in userOptions){\n\t\t\tif(!output.hasOwnProperty(key)){\n\t\t\t\tif(warn){\n\t\t\t\t\tconsole.warn(\"Invalid \" + this.msgType + \" option:\", key);\n\t\t\t\t}\n\n\t\t\t\toutput[key] = userOptions.key;\n\t\t\t}\n\t\t}\n\t\n\t\t\n\t\tfor (let key in output){\n\t\t\tif(key in userOptions){\n\t\t\t\toutput[key] = userOptions[key];\n\t\t\t}else{\n\t\t\t\tif(Array.isArray(output[key])){\n\t\t\t\t\toutput[key] = Object.assign([], output[key]);\n\t\t\t\t}else if(typeof output[key] === \"object\" && output[key] !== null){\n\t\t\t\t\toutput[key] = Object.assign({}, output[key]);\n\t\t\t\t}else if (typeof output[key] === \"undefined\"){\n\t\t\t\t\tdelete output[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n}","import CoreFeature from '../CoreFeature.js';\nimport Helpers from '../tools/Helpers.js';\n\nexport default class Renderer extends CoreFeature{\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.elementVertical = table.rowManager.element;\n\t\tthis.elementHorizontal = table.columnManager.element;\n\t\tthis.tableElement =  table.rowManager.tableElement;\n\n\t\tthis.verticalFillMode = \"fit\"; // used by row manager to determine how to size the render area (\"fit\" - fits container to the contents, \"fill\" - fills the container without resizing it)\n\t}\n\n\n\t///////////////////////////////////\n\t/////// Internal Bindings /////////\n\t///////////////////////////////////\n\n\tinitialize(){\n\t\t//initialize core functionality\n\t}\n\n\tclearRows(){\n\t\t//clear down existing rows layout\n\t}\n\n\tclearColumns(){\n\t\t//clear down existing columns layout\n\t}\n\n\n\treinitializeColumnWidths(columns){\n\t\t//resize columns to fit data\n\t}\n\n\n\trenderRows(){\n\t\t//render rows from a clean slate\n\t}\n\n\trenderColumns(){\n\t\t//render columns from a clean slate\n\t}\n\n\trerenderRows(callback){\n\t\t// rerender rows and keep position\n\t\tif(callback){\n\t\t\tcallback();\n\t\t}\n\t}\n\n\trerenderColumns(update, blockRedraw){\n\t\t//rerender columns\n\t}\n\n\trenderRowCells(row){\n\t\t//render the cells in a row\n\t}\n\n\trerenderRowCells(row, force){\n\t\t//rerender the cells in a row\n\t}\n\n\tscrollColumns(left, dir){\n\t\t//handle horizontal scrolling\n\t}\n\n\tscrollRows(top, dir){\n\t\t//handle vertical scrolling\n\t}\n\n\tresize(){\n\t\t//container has resized, carry out any needed recalculations (DO NOT RERENDER IN THIS FUNCTION)\n\t}\n\n\tscrollToRow(row){\n\t\t//scroll to a specific row\n\t}\n\n\tscrollToRowNearestTop(row){\n\t\t//determine weather the row is nearest the top or bottom of the table, return true for top or false for bottom\n\t}\n\n\tvisibleRows(includingBuffer){\n\t\t//return the visible rows\n\t\treturn [];\n\t}\n\n\t///////////////////////////////////\n\t//////// Helper Functions /////////\n\t///////////////////////////////////\n\n\trows(){\n\t\treturn this.table.rowManager.getDisplayRows();\n\t}\n\n\tstyleRow(row, index){\n\t\tvar rowEl = row.getElement();\n\n\t\tif(index % 2){\n\t\t\trowEl.classList.add(\"tabulator-row-even\");\n\t\t\trowEl.classList.remove(\"tabulator-row-odd\");\n\t\t}else{\n\t\t\trowEl.classList.add(\"tabulator-row-odd\");\n\t\t\trowEl.classList.remove(\"tabulator-row-even\");\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t/////// External Triggers /////////\n\t/////// (DO NOT OVERRIDE) /////////\n\t///////////////////////////////////\n\n\tclear(){\n\t\t//clear down existing layout\n\t\tthis.clearRows();\n\t\tthis.clearColumns();\n\t}\n\n\trender(){\n\t\t//render from a clean slate\n\t\tthis.renderRows();\n\t\tthis.renderColumns();\n\t}\n\n\trerender(callback){\n\t\t// rerender and keep position\n\t\tthis.rerenderRows();\n\t\tthis.rerenderColumns();\n\t}\n\n\tscrollToRowPosition(row, position, ifVisible){\n\t\tvar rowIndex = this.rows().indexOf(row),\n\t\trowEl = row.getElement(),\n\t\toffset = 0;\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif(rowIndex > -1){\n\n\t\t\t\tif(typeof ifVisible === \"undefined\"){\n\t\t\t\t\tifVisible = this.table.options.scrollToRowIfVisible;\n\t\t\t\t}\n\n\t\t\t\t//check row visibility\n\t\t\t\tif(!ifVisible){\n\t\t\t\t\tif(Helpers.elVisible(rowEl)){\n\t\t\t\t\t\toffset = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.elementVertical).top;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(offset > 0 && offset < this.elementVertical.clientHeight - rowEl.offsetHeight){\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(typeof position === \"undefined\"){\n\t\t\t\t\tposition = this.table.options.scrollToRowPosition;\n\t\t\t\t}\n\n\t\t\t\tif(position === \"nearest\"){\n\t\t\t\t\tposition = this.scrollToRowNearestTop(row) ? \"top\" : \"bottom\";\n\t\t\t\t}\n\n\t\t\t\t//scroll to row\n\t\t\t\tthis.scrollToRow(row);\n\n\t\t\t\t//align to correct position\n\t\t\t\tswitch(position){\n\t\t\t\t\tcase \"middle\":\n\t\t\t\t\tcase \"center\":\n\n\t\t\t\t\t\tif(this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight){\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop + (rowEl.offsetTop - this.elementVertical.scrollTop) - ((this.elementVertical.scrollHeight - rowEl.offsetTop) / 2);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - (this.elementVertical.clientHeight / 2);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"bottom\":\n\n\t\t\t\t\t\tif(this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight){\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - (this.elementVertical.scrollHeight - rowEl.offsetTop) + rowEl.offsetHeight;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - this.elementVertical.clientHeight + rowEl.offsetHeight;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"top\":\n\t\t\t\t\t\tthis.elementVertical.scrollTop = rowEl.offsetTop;\t\t\t\t\t\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tresolve();\n\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Scroll Error - Row not visible\");\n\t\t\t\treject(\"Scroll Error - Row not visible\");\n\t\t\t}\n\t\t});\n\t}\n}","import Renderer from '../Renderer.js';\n\nexport default class BasicHorizontal extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\t}\n\t\n\trenderRowCells(row, inFragment) {\n\t\tconst rowFrag = document.createDocumentFragment();\n\t\trow.cells.forEach((cell) => {\n\t\t\trowFrag.appendChild(cell.getElement());\n\t\t});\n\t\trow.element.appendChild(rowFrag);\n\t\t\n\t\tif(!inFragment){\n\t\t\trow.cells.forEach((cell) => {\n\t\t\t\tcell.cellRendered();\n\t\t\t});\n\t\t}\n\t}\n\t\n\treinitializeColumnWidths(columns){\n\t\tcolumns.forEach(function(column){\n\t\t\tcolumn.reinitializeWidth();\n\t\t});\n\t}\n}","import Renderer from '../Renderer.js';\n\nexport default class VirtualDomHorizontal extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.leftCol = 0;\n\t\tthis.rightCol = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.vDomScrollPosLeft = 0;\n\t\tthis.vDomScrollPosRight = 0;\n\t\t\n\t\tthis.vDomPadLeft = 0;\n\t\tthis.vDomPadRight = 0;\n\t\t\n\t\tthis.fitDataColAvg = 0;\n\t\t\n\t\tthis.windowBuffer = 200; //pixel margin to make column visible before it is shown on screen\n\t\t\n\t\tthis.visibleRows = null;\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.isFitData = false;\n\t\t\n\t\tthis.columns = [];\n\t}\n\t\n\tinitialize(){\n\t\tthis.compatibilityCheck();\n\t\tthis.layoutCheck();\n\t\tthis.vertScrollListen();\n\t}\n\t\n\tcompatibilityCheck(){\t\t\n\t\tif(this.options(\"layout\") == \"fitDataTable\"){\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not compatible with fitDataTable layout mode\");\n\t\t}\n\t\t\n\t\tif(this.options(\"responsiveLayout\")){\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not compatible with responsive columns\");\n\t\t}\n\t\t\n\t\tif(this.options(\"rtl\")){\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not currently compatible with RTL text direction\");\n\t\t}\n\t}\n\t\n\tlayoutCheck(){\n\t\tthis.isFitData = this.options(\"layout\").startsWith('fitData');\n\t}\n\t\n\tvertScrollListen(){\n\t\tthis.subscribe(\"scroll-vertical\", this.clearVisRowCache.bind(this));\n\t\tthis.subscribe(\"data-refreshed\", this.clearVisRowCache.bind(this));\n\t}\n\t\n\tclearVisRowCache(){\n\t\tthis.visibleRows = null;\n\t}\n\t\n\t//////////////////////////////////////\n\t///////// Public Functions ///////////\n\t//////////////////////////////////////\n\t\n\trenderColumns(row, force){\n\t\tthis.dataChange();\n\t}\n\t\n\t\n\tscrollColumns(left, dir){\n\t\tif(this.scrollLeft != left){\n\t\t\tthis.scrollLeft = left;\n\t\t\t\n\t\t\tthis.scroll(left - (this.vDomScrollPosLeft + this.windowBuffer));\n\t\t}\n\t}\n\t\n\tcalcWindowBuffer(){\n\t\tvar buffer = this.elementVertical.clientWidth;\n\t\t\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tif(column.visible){\n\t\t\t\tvar width = column.getWidth();\n\t\t\t\t\n\t\t\t\tif(width > buffer){\n\t\t\t\t\tbuffer = width;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.windowBuffer = buffer * 2;\n\t}\n\t\n\trerenderColumns(update, blockRedraw){\t\t\n\t\tvar old = {\n\t\t\tcols:this.columns,\n\t\t\tleftCol:this.leftCol,\n\t\t\trightCol:this.rightCol,\n\t\t},\n\t\tcolPos = 0;\n\t\t\n\t\tif(update && !this.initialized){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.clear();\n\t\t\n\t\tthis.calcWindowBuffer();\n\t\t\n\t\tthis.scrollLeft = this.elementVertical.scrollLeft;\n\t\t\n\t\tthis.vDomScrollPosLeft = this.scrollLeft - this.windowBuffer;\n\t\tthis.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer;\n\t\t\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tvar config = {},\n\t\t\twidth;\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\tif(!column.modules.frozen){\t\t\t\n\t\t\t\t\twidth = column.getWidth();\n\n\t\t\t\t\tconfig.leftPos = colPos;\n\t\t\t\t\tconfig.rightPos = colPos + width;\n\t\t\t\t\t\n\t\t\t\t\tconfig.width = width;\n\t\t\t\t\t\n\t\t\t\t\tif (this.isFitData) {\n\t\t\t\t\t\tconfig.fitDataCheck = column.modules.vdomHoz ? column.modules.vdomHoz.fitDataCheck : true;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif((colPos + width > this.vDomScrollPosLeft) && (colPos < this.vDomScrollPosRight)){\n\t\t\t\t\t\t//column is visible\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.leftCol == -1){\n\t\t\t\t\t\t\tthis.leftCol = this.columns.length;\n\t\t\t\t\t\t\tthis.vDomPadLeft = colPos;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.rightCol = this.columns.length;\n\t\t\t\t\t}else{\n\t\t\t\t\t\t// column is hidden\n\t\t\t\t\t\tif(this.leftCol !== -1){\n\t\t\t\t\t\t\tthis.vDomPadRight += width;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.columns.push(column);\n\t\t\t\t\t\n\t\t\t\t\tcolumn.modules.vdomHoz = config;\n\t\t\t\t\t\n\t\t\t\t\tcolPos += width;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n\t\t\n\t\tthis.initialized = true;\n\t\t\n\t\tif(!blockRedraw){\n\t\t\tif(!update || this.reinitChanged(old)){\n\t\t\t\tthis.reinitializeRows();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.elementVertical.scrollLeft = this.scrollLeft;\n\t}\n\t\n\trenderRowCells(row){\n\t\tif(this.initialized){\n\t\t\tthis.initializeRow(row);\n\t\t}else{\n\t\t\tconst rowFrag = document.createDocumentFragment();\n\t\t\trow.cells.forEach((cell) => {\n\t\t\t\trowFrag.appendChild(cell.getElement());\n\t\t\t});\n\t\t\trow.element.appendChild(rowFrag);\n\n\t\t\trow.cells.forEach((cell) => {\n\t\t\t\tcell.cellRendered();\n\t\t\t});\n\t\t}\n\t}\n\t\n\trerenderRowCells(row, force){\n\t\tthis.reinitializeRow(row, force);\n\t}\n\t\n\treinitializeColumnWidths(columns){\n\t\tfor(let i = this.leftCol; i <= this.rightCol; i++){\n\t\t\tthis.columns[i].reinitializeWidth();\n\t\t}\n\t}\n\t\n\t//////////////////////////////////////\n\t//////// Internal Rendering //////////\n\t//////////////////////////////////////\n\t\n\tdeinitialize(){\n\t\tthis.initialized = false;\n\t}\n\t\n\tclear(){\n\t\tthis.columns = [];\n\t\t\n\t\tthis.leftCol = -1;\n\t\tthis.rightCol = 0;\n\t\t\n\t\tthis.vDomScrollPosLeft = 0;\n\t\tthis.vDomScrollPosRight = 0;\n\t\tthis.vDomPadLeft = 0;\n\t\tthis.vDomPadRight = 0;\n\t}\n\t\n\tdataChange(){\n\t\tvar change = false,\n\t\trow, rowEl;\n\t\t\n\t\tif(this.isFitData){\n\t\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\t\tif(!column.definition.width && column.visible){\n\t\t\t\t\tchange = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(change && this.table.rowManager.getDisplayRows().length){\n\t\t\t\tthis.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer;\n\t\t\t\t\n\t\t\t\trow = this.chain(\"rows-sample\", [1], [], () => {\n\t\t\t\t\treturn this.table.rowManager.getDisplayRows();\n\t\t\t\t})[0];\n\t\t\t\t\n\t\t\t\tif(row){\n\t\t\t\t\trowEl = row.getElement();\n\t\t\t\t\t\n\t\t\t\t\trow.generateCells();\n\t\t\t\t\t\n\t\t\t\t\tthis.tableElement.appendChild(rowEl);\n\t\t\t\t\t\n\t\t\t\t\tfor(let colEnd = 0; colEnd < row.cells.length; colEnd++){\n\t\t\t\t\t\tlet cell = row.cells[colEnd];\n\t\t\t\t\t\trowEl.appendChild(cell.getElement());\n\t\t\t\t\t\t\n\t\t\t\t\t\tcell.column.reinitializeWidth();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t\t\t\n\t\t\t\t\tthis.rerenderColumns(false, true);\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif(this.options(\"layout\") === \"fitColumns\"){\n\t\t\t\tthis.layoutRefresh();\n\t\t\t\tthis.rerenderColumns(false, true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\treinitChanged(old){\n\t\tvar match = true;\n\t\t\n\t\tif(old.cols.length !== this.columns.length || old.leftCol !== this.leftCol || old.rightCol !== this.rightCol){\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\told.cols.forEach((col, i) => {\n\t\t\tif(col !== this.columns[i]){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn !match;\n\t}\n\t\n\treinitializeRows(){\n\t\tvar visibleRows = this.getVisibleRows(),\n\t\totherRows = this.table.rowManager.getRows().filter(row => !visibleRows.includes(row));\n\n\t\tvisibleRows.forEach((row) => {\n\t\t\tthis.reinitializeRow(row, true);\n\t\t});\n\n\t\totherRows.forEach((row) =>{\n\t\t\trow.deinitialize();\n\t\t});\n\t}\n\t\n\tgetVisibleRows(){\n\t\tif (!this.visibleRows){\n\t\t\tthis.visibleRows = this.table.rowManager.getVisibleRows();\n\t\t}\n\t\t\n\t\treturn this.visibleRows;\t\n\t}\n\t\n\tscroll(diff){\n\t\tthis.vDomScrollPosLeft += diff;\n\t\tthis.vDomScrollPosRight += diff;\n\t\t\n\t\tif(Math.abs(diff) > (this.windowBuffer / 2)){\n\t\t\tthis.rerenderColumns();\n\t\t}else{\n\t\t\tif(diff > 0){\n\t\t\t\t//scroll right\n\t\t\t\tthis.addColRight();\n\t\t\t\tthis.removeColLeft();\n\t\t\t}else{\n\t\t\t\t//scroll left\n\t\t\t\tthis.addColLeft();\n\t\t\t\tthis.removeColRight();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcolPositionAdjust (start, end, diff){\n\t\tfor(let i = start; i < end; i++){\n\t\t\tlet column = this.columns[i];\n\t\t\t\n\t\t\tcolumn.modules.vdomHoz.leftPos += diff;\n\t\t\tcolumn.modules.vdomHoz.rightPos += diff;\n\t\t}\n\t}\n\t\n\taddColRight(){\n\t\tvar changes = false,\n\t\tworking = true;\n\t\t\n\t\twhile(working){\n\n\t\t\tlet column = this.columns[this.rightCol + 1];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.leftPos <= this.vDomScrollPosRight){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\trow.getElement().insertBefore(cell.getElement(), row.getCell(this.columns[this.rightCol]).getElement().nextSibling);\n\t\t\t\t\t\t\tcell.cellRendered();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.fitDataColActualWidthCheck(column);\n\t\t\t\t\t\n\t\t\t\t\tthis.rightCol++; // Don't move this below the >= check below\n\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.rightCol = this.rightCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif(this.rightCol >= (this.columns.length - 1)){\n\t\t\t\t\t\tthis.vDomPadRight = 0;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.vDomPadRight -= column.getWidth();\n\t\t\t\t\t}\t\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n\t\t}\n\t}\n\t\n\taddColLeft(){\n\t\tvar changes = false,\n\t\tworking = true;\n\t\t\n\t\twhile(working){\n\t\t\tlet column = this.columns[this.leftCol - 1];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.rightPos >= this.vDomScrollPosLeft){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\trow.getElement().insertBefore(cell.getElement(), row.getCell(this.columns[this.leftCol]).getElement());\n\t\t\t\t\t\t\tcell.cellRendered();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.leftCol--; // don't move this below the <= check below\n\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.leftCol = this.leftCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif(this.leftCol <= 0){ // replicating logic in addColRight\n\t\t\t\t\t\tthis.vDomPadLeft = 0;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.vDomPadLeft -= column.getWidth();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tlet diff = this.fitDataColActualWidthCheck(column);\n\t\t\t\t\t\n\t\t\t\t\tif(diff){\n\t\t\t\t\t\tthis.scrollLeft = this.elementVertical.scrollLeft = this.elementVertical.scrollLeft + diff;\n\t\t\t\t\t\tthis.vDomPadRight -= diff;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n\t\t}\n\t}\n\t\n\tremoveColRight(){\n\t\tvar changes = false,\n\t\tworking = true;\n\t\t\n\t\twhile(working){\n\t\t\tlet column = this.columns[this.rightCol];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.leftPos > this.vDomScrollPosRight){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\trow.getElement().removeChild(cell.getElement());\n\t\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\t\tconsole.warn(\"Could not removeColRight\", ex.message);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.vDomPadRight += column.getWidth();\n\t\t\t\t\tthis.rightCol --;\n\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.rightCol = this.rightCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n\t\t}\n\t}\n\t\n\tremoveColLeft(){\n\t\tvar changes = false,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tlet column = this.columns[this.leftCol];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.rightPos < this.vDomScrollPosLeft){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\t\t\t\t\t\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\trow.getElement().removeChild(cell.getElement());\n\t\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\t\tconsole.warn(\"Could not removeColLeft\", ex.message);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.vDomPadLeft += column.getWidth();\n\t\t\t\t\tthis.leftCol ++;\n\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.leftCol = this.leftCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n\t\t}\n\t}\n\t\n\tfitDataColActualWidthCheck(column){\n\t\tvar newWidth, widthDiff;\n\t\t\n\t\tif(column.modules.vdomHoz.fitDataCheck){\n\t\t\tcolumn.reinitializeWidth();\n\t\t\t\n\t\t\tnewWidth = column.getWidth();\n\t\t\twidthDiff = newWidth - column.modules.vdomHoz.width;\n\t\t\t\n\t\t\tif(widthDiff){\n\t\t\t\tcolumn.modules.vdomHoz.rightPos += widthDiff;\n\t\t\t\tcolumn.modules.vdomHoz.width = newWidth;\n\t\t\t\tthis.colPositionAdjust(this.columns.indexOf(column) + 1, this.columns.length, widthDiff);\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.modules.vdomHoz.fitDataCheck = false;\n\t\t}\n\t\t\n\t\treturn widthDiff;\n\t}\n\t\n\tinitializeRow(row){\n\t\tif(row.type !== \"group\"){\n\t\t\trow.modules.vdomHoz = {\n\t\t\t\tleftCol:this.leftCol,\n\t\t\t\trightCol:this.rightCol,\n\t\t\t};\n\n\t\t\tif(this.table.modules.frozenColumns){\n\t\t\t\tthis.table.modules.frozenColumns.leftColumns.forEach((column) => {\n\t\t\t\t\tthis.appendCell(row, column);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfor(let i = this.leftCol; i <= this.rightCol; i++){\n\t\t\t\tthis.appendCell(row, this.columns[i]);\n\t\t\t}\n\n\t\t\tif(this.table.modules.frozenColumns){\n\t\t\t\tthis.table.modules.frozenColumns.rightColumns.forEach((column) => {\n\t\t\t\t\tthis.appendCell(row, column);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\t\n\tappendCell(row, column){\n\t\tif(column && column.visible){\n\t\t\tlet cell = row.getCell(column);\n\t\t\t\n\t\t\trow.getElement().appendChild(cell.getElement());\n\t\t\tcell.cellRendered();\n\t\t}\n\t}\n\t\n\treinitializeRow(row, force){\n\t\tif(row.type !== \"group\"){\n\t\t\tif(force || !row.modules.vdomHoz || row.modules.vdomHoz.leftCol !== this.leftCol || row.modules.vdomHoz.rightCol !== this.rightCol){\n\t\t\t\t\n\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\twhile(rowEl.firstChild) rowEl.removeChild(rowEl.firstChild);\n\n\t\t\t\tthis.initializeRow(row);\n\t\t\t}\n\t\t}\n\t}\n}\n","import CoreFeature from './CoreFeature.js';\nimport Column from './column/Column.js';\nimport ColumnComponent from './column/ColumnComponent.js';\nimport Helpers from './tools/Helpers.js';\nimport OptionsList from './tools/OptionsList.js';\n\nimport RendererBasicHorizontal from './rendering/renderers/BasicHorizontal.js';\nimport RendererVirtualDomHorizontal from './rendering/renderers/VirtualDomHorizontal.js';\n\nimport defaultColumnOptions from './column/defaults/options.js';\n\nexport default class ColumnManager extends CoreFeature {\n\t\n\tconstructor (table){\n\t\tsuper(table);\n\t\t\n\t\tthis.blockHozScrollEvent = false;\n\t\tthis.headersElement = null;\n\t\tthis.contentsElement = null;\n\t\tthis.rowHeader = null;\n\t\tthis.element = null ; //containing element\n\t\tthis.columns = []; // column definition object\n\t\tthis.columnsByIndex = []; //columns by index\n\t\tthis.columnsByField = {}; //columns by field\n\t\tthis.scrollLeft = 0;\n\t\tthis.optionsList = new OptionsList(this.table, \"column definition\", defaultColumnOptions);\n\t\t\n\t\tthis.redrawBlock = false; //prevent redraws to allow multiple data manipulations before continuing\n\t\tthis.redrawBlockUpdate = null; //store latest redraw update only status\n\t\t\n\t\tthis.renderer = null;\n\t}\n\t\n\t////////////// Setup Functions /////////////////\n\t\n\tinitialize(){\n\t\tthis.initializeRenderer();\n\t\t\n\t\tthis.headersElement = this.createHeadersElement();\n\t\tthis.contentsElement = this.createHeaderContentsElement();\n\t\tthis.element = this.createHeaderElement();\n\t\t\n\t\tthis.contentsElement.insertBefore(this.headersElement, this.contentsElement.firstChild);\n\t\tthis.element.insertBefore(this.contentsElement, this.element.firstChild);\n\t\t\n\t\tthis.initializeScrollWheelWatcher();\n\t\t\n\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\n\t\tthis.subscribe(\"scrollbar-vertical\", this.padVerticalScrollbar.bind(this));\n\t}\n\t\n\tpadVerticalScrollbar(width){\n\t\tif(this.table.rtl){\n\t\t\tthis.headersElement.style.marginLeft = width + \"px\";\n\t\t}else{\n\t\t\tthis.headersElement.style.marginRight = width + \"px\";\n\t\t}\n\t}\n\t\n\tinitializeRenderer(){\n\t\tvar renderClass;\n\t\t\n\t\tvar renderers = {\n\t\t\t\"virtual\": RendererVirtualDomHorizontal,\n\t\t\t\"basic\": RendererBasicHorizontal,\n\t\t};\n\t\t\n\t\tif(typeof this.table.options.renderHorizontal === \"string\"){\n\t\t\trenderClass = renderers[this.table.options.renderHorizontal];\n\t\t}else{\n\t\t\trenderClass = this.table.options.renderHorizontal;\n\t\t}\n\t\t\n\t\tif(renderClass){\n\t\t\tthis.renderer = new renderClass(this.table, this.element, this.tableElement);\n\t\t\tthis.renderer.initialize();\n\t\t}else{\n\t\t\tconsole.error(\"Unable to find matching renderer:\", this.table.options.renderHorizontal);\n\t\t}\n\t}\n\t\n\t\n\tcreateHeadersElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-headers\");\n\t\tel.setAttribute(\"role\", \"row\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tcreateHeaderContentsElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-header-contents\");\n\t\tel.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tcreateHeaderElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-header\");\n\t\tel.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\tif(!this.table.options.headerVisible){\n\t\t\tel.classList.add(\"tabulator-header-hidden\");\n\t\t}\n\t\t\n\t\treturn el;\n\t}\n\t\n\t//return containing element\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\t\n\t//return containing contents element\n\tgetContentsElement(){\n\t\treturn this.contentsElement;\n\t}\n\t\n\t\n\t//return header containing element\n\tgetHeadersElement(){\n\t\treturn this.headersElement;\n\t}\n\t\n\t//scroll horizontally to match table body\n\tscrollHorizontal(left){\n\t\tthis.contentsElement.scrollLeft = left;\n\t\t\n\t\tthis.scrollLeft = left;\n\t\t\n\t\tthis.renderer.scrollColumns(left);\n\t}\n\t\n\tinitializeScrollWheelWatcher(){\n\t\tthis.contentsElement.addEventListener(\"wheel\", (e) => {\n\t\t\tvar left;\n\t\t\t\n\t\t\tif(e.deltaX){\n\t\t\t\tleft = this.contentsElement.scrollLeft + e.deltaX;\n\t\t\t\t\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\tthis.table.columnManager.scrollHorizontal(left);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t///////////// Column Setup Functions /////////////\n\tgenerateColumnsFromRowData(data){\n\t\tvar cols = [],\n\t\tcollProgress = {},\n\t\trowSample = this.table.options.autoColumns === \"full\" ? data : [data[0]],\n\t\tdefinitions = this.table.options.autoColumnsDefinitions;\n\t\t\n\t\tif(data && data.length){\n\t\t\t\n\t\t\trowSample.forEach((row) => {\n\t\t\t\t\n\t\t\t\tObject.keys(row).forEach((key, index) => {\n\t\t\t\t\tlet value = row[key],\n\t\t\t\t\tcol;\n\t\t\t\t\t\n\t\t\t\t\tif(!collProgress[key]){\n\t\t\t\t\t\tcol = {\n\t\t\t\t\t\t\tfield:key,\n\t\t\t\t\t\t\ttitle:key,\n\t\t\t\t\t\t\tsorter:this.calculateSorterFromValue(value),\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tcols.splice(index, 0, col);\n\t\t\t\t\t\tcollProgress[key] = typeof value === \"undefined\" ? col : true;\n\t\t\t\t\t}else if(collProgress[key] !== true){\n\t\t\t\t\t\tif(typeof value !== \"undefined\"){\n\t\t\t\t\t\t\tcollProgress[key].sorter = this.calculateSorterFromValue(value);\n\t\t\t\t\t\t\tcollProgress[key] = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\t\n\t\t\tif(definitions){\n\t\t\t\t\n\t\t\t\tswitch(typeof definitions){\n\t\t\t\t\tcase \"function\":\n\t\t\t\t\t\tthis.table.options.columns = definitions.call(this.table, cols);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\tif(Array.isArray(definitions)){\n\t\t\t\t\t\t\tcols.forEach((col) => {\n\t\t\t\t\t\t\t\tvar match = definitions.find((def) => {\n\t\t\t\t\t\t\t\t\treturn def.field === col.field;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(match){\n\t\t\t\t\t\t\t\t\tObject.assign(col, match);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tcols.forEach((col) => {\n\t\t\t\t\t\t\t\tif(definitions[col.field]){\n\t\t\t\t\t\t\t\t\tObject.assign(col, definitions[col.field]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.table.options.columns = cols;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.table.options.columns = cols;\n\t\t\t}\n\t\t\t\n\t\t\tthis.setColumns(this.table.options.columns);\n\t\t}\n\t}\n\t\n\tcalculateSorterFromValue(value){\n\t\tvar sorter;\n\t\t\n\t\tswitch(typeof value){\n\t\t\tcase \"undefined\":\n\t\t\t\tsorter = \"string\";\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"boolean\":\n\t\t\t\tsorter = \"boolean\";\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"number\":\n\t\t\t\tsorter = \"number\";\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"object\":\n\t\t\t\tif(Array.isArray(value)){\n\t\t\t\t\tsorter = \"array\";\n\t\t\t\t}else{\n\t\t\t\t\tsorter = \"string\";\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tif(!isNaN(value) && value !== \"\"){\n\t\t\t\t\tsorter = \"number\";\n\t\t\t\t}else{\n\t\t\t\t\tif(value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){\n\t\t\t\t\t\tsorter = \"alphanum\";\n\t\t\t\t\t}else{\n\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\treturn sorter;\n\t}\n\t\n\tsetColumns(cols, row){\n\t\twhile(this.headersElement.firstChild) this.headersElement.removeChild(this.headersElement.firstChild);\n\t\t\n\t\tthis.columns = [];\n\t\tthis.columnsByIndex = [];\n\t\tthis.columnsByField = {};\n\t\t\n\t\tthis.dispatch(\"columns-loading\");\n\t\tthis.dispatchExternal(\"columnsLoading\");\n\t\t\n\t\tif(this.table.options.rowHeader){\n\t\t\tthis.rowHeader = new Column(this.table.options.rowHeader === true ? {} : this.table.options.rowHeader, this, true);\n\t\t\tthis.columns.push(this.rowHeader);\n\t\t\tthis.headersElement.appendChild(this.rowHeader.getElement());\n\t\t\tthis.rowHeader.columnRendered();\n\t\t}\n\t\t\n\t\tcols.forEach((def, i) => {\n\t\t\tthis._addColumn(def);\n\t\t});\n\t\t\n\t\tthis._reIndexColumns();\n\t\t\n\t\tthis.dispatch(\"columns-loaded\");\n\n\t\tif(this.subscribedExternal(\"columnsLoaded\")){\n\t\t\tthis.dispatchExternal(\"columnsLoaded\", this.getComponents());\n\t\t}\n\t\t\n\t\tthis.rerenderColumns(false, true);\n\t\t\n\t\tthis.redraw(true);\n\t}\n\t\n\t_addColumn(definition, before, nextToColumn){\n\t\tvar column = new Column(definition, this),\n\t\tcolEl = column.getElement(),\n\t\tindex = nextToColumn ? this.findColumnIndex(nextToColumn) : nextToColumn;\n\t\t\n\t\t//prevent adding of rows in front of row header\n\t\tif(before && this.rowHeader && (!nextToColumn || nextToColumn === this.rowHeader)){\n\t\t\tbefore = false;\n\t\t\tnextToColumn = this.rowHeader;\n\t\t\tindex = 0;\n\t\t}\n\t\t\n\t\tif(nextToColumn && index > -1){\n\t\t\tvar topColumn = nextToColumn.getTopColumn();\n\t\t\tvar parentIndex = this.columns.indexOf(topColumn);\n\t\t\tvar nextEl = topColumn.getElement();\n\t\t\t\n\t\t\tif(before){\n\t\t\t\tthis.columns.splice(parentIndex, 0, column);\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl);\n\t\t\t}else{\n\t\t\t\tthis.columns.splice(parentIndex + 1, 0, column);\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl.nextSibling);\n\t\t\t}\n\t\t}else{\n\t\t\tif(before){\n\t\t\t\tthis.columns.unshift(column);\n\t\t\t\tthis.headersElement.insertBefore(column.getElement(), this.headersElement.firstChild);\n\t\t\t}else{\n\t\t\t\tthis.columns.push(column);\n\t\t\t\tthis.headersElement.appendChild(column.getElement());\n\t\t\t}\n\t\t}\n\t\t\n\t\tcolumn.columnRendered();\n\t\t\n\t\treturn column;\n\t}\n\t\n\tregisterColumnField(col){\n\t\tif(col.definition.field){\n\t\t\tthis.columnsByField[col.definition.field] = col;\n\t\t}\n\t}\n\t\n\tregisterColumnPosition(col){\n\t\tthis.columnsByIndex.push(col);\n\t}\n\t\n\t_reIndexColumns(){\n\t\tthis.columnsByIndex = [];\n\t\t\n\t\tthis.columns.forEach(function(column){\n\t\t\tcolumn.reRegisterPosition();\n\t\t});\n\t}\n\t\n\t//ensure column headers take up the correct amount of space in column groups\n\tverticalAlignHeaders(){\n\t\tvar minHeight = 0;\n\t\t\n\t\tif(!this.redrawBlock){\n\t\t\t\n\t\t\tthis.headersElement.style.height=\"\";\n\t\t\t\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tcolumn.clearVerticalAlign();\n\t\t\t});\n\t\t\t\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tvar height = column.getHeight();\n\t\t\t\t\n\t\t\t\tif(height > minHeight){\n\t\t\t\t\tminHeight = height;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tthis.headersElement.style.height = minHeight + \"px\";\n\t\t\t\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tcolumn.verticalAlign(this.table.options.columnHeaderVertAlign, minHeight);\n\t\t\t});\n\t\t\t\n\t\t\tthis.table.rowManager.adjustTableSize();\n\t\t}\n\t}\n\t\n\t//////////////// Column Details /////////////////\n\tfindColumn(subject){\n\t\tvar columns;\n\t\t\n\t\tif(typeof subject == \"object\"){\n\t\t\t\n\t\t\tif(subject instanceof Column){\n\t\t\t\t//subject is column element\n\t\t\t\treturn subject;\n\t\t\t}else if(subject instanceof ColumnComponent){\n\t\t\t\t//subject is public column component\n\t\t\t\treturn subject._getSelf() || false;\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\n\t\t\t\t\n\t\t\t\tcolumns = [];\n\t\t\t\t\n\t\t\t\tthis.columns.forEach((column) => {\n\t\t\t\t\tcolumns.push(column);\n\t\t\t\t\tcolumns = columns.concat(column.getColumns(true));\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t//subject is a HTML element of the column header\n\t\t\t\tlet match = columns.find((column) => {\n\t\t\t\t\treturn column.element === subject;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn match || false;\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\t//subject should be treated as the field name of the column\n\t\t\treturn this.columnsByField[subject] || false;\n\t\t}\n\t\t\n\t\t//catch all for any other type of input\n\t\treturn false;\n\t}\n\t\n\tgetColumnByField(field){\n\t\treturn this.columnsByField[field];\n\t}\n\t\n\tgetColumnsByFieldRoot(root){\n\t\tvar matches = [];\n\t\t\n\t\tObject.keys(this.columnsByField).forEach((field) => {\n\t\t\tvar fieldRoot = this.table.options.nestedFieldSeparator ? field.split(this.table.options.nestedFieldSeparator)[0] : field;\n\t\t\tif(fieldRoot === root){\n\t\t\t\tmatches.push(this.columnsByField[field]);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn matches;\n\t}\n\t\n\tgetColumnByIndex(index){\n\t\treturn this.columnsByIndex[index];\n\t}\n\t\n\tgetFirstVisibleColumn(){\n\t\tvar index = this.columnsByIndex.findIndex((col) => {\n\t\t\treturn col.visible;\n\t\t});\n\t\t\n\t\treturn index > -1 ? this.columnsByIndex[index] : false;\n\t}\n\t\n\tgetVisibleColumnsByIndex() {\n\t\treturn this.columnsByIndex.filter((col) => col.visible);\n\t}\n\t\n\tgetColumns(){\n\t\treturn this.columns;\n\t}\n\t\n\tfindColumnIndex(column){\n\t\treturn this.columnsByIndex.findIndex((col) => {\n\t\t\treturn column === col;\n\t\t});\n\t}\n\t\n\t//return all columns that are not groups\n\tgetRealColumns(){\n\t\treturn this.columnsByIndex;\n\t}\n\t\n\t//traverse across columns and call action\n\ttraverse(callback){\n\t\tthis.columnsByIndex.forEach((column,i) =>{\n\t\t\tcallback(column, i);\n\t\t});\n\t}\n\t\n\t//get definitions of actual columns\n\tgetDefinitions(active){\n\t\tvar output = [];\n\t\t\n\t\tthis.columnsByIndex.forEach((column) => {\n\t\t\tif(!active || (active && column.visible)){\n\t\t\t\toutput.push(column.getDefinition());\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\t//get full nested definition tree\n\tgetDefinitionTree(){\n\t\tvar output = [];\n\t\t\n\t\tthis.columns.forEach((column) => {\n\t\t\toutput.push(column.getDefinition(true));\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetComponents(structured){\n\t\tvar output = [],\n\t\tcolumns = structured ? this.columns : this.columnsByIndex;\n\t\t\n\t\tcolumns.forEach((column) => {\n\t\t\toutput.push(column.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetWidth(){\n\t\tvar width = 0;\n\t\t\n\t\tthis.columnsByIndex.forEach((column) => {\n\t\t\tif(column.visible){\n\t\t\t\twidth += column.getWidth();\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn width;\n\t}\n\t\n\tmoveColumn(from, to, after){\n\t\tto.element.parentNode.insertBefore(from.element, to.element);\n\t\t\n\t\tif(after){\n\t\t\tto.element.parentNode.insertBefore(to.element, from.element);\n\t\t}\n\t\t\n\t\tthis.moveColumnActual(from, to, after);\n\t\t\n\t\tthis.verticalAlignHeaders();\n\t\t\n\t\tthis.table.rowManager.reinitialize();\n\t}\n\t\n\tmoveColumnActual(from, to, after){\n\t\tif(from.parent.isGroup){\n\t\t\tthis._moveColumnInArray(from.parent.columns, from, to, after);\n\t\t}else{\n\t\t\tthis._moveColumnInArray(this.columns, from, to, after);\n\t\t}\n\t\t\n\t\tthis._moveColumnInArray(this.columnsByIndex, from, to, after, true);\n\t\t\n\t\tthis.rerenderColumns(true);\n\t\t\n\t\tthis.dispatch(\"column-moved\", from, to, after);\n\t\t\n\t\tif(this.subscribedExternal(\"columnMoved\")){\n\t\t\tthis.dispatchExternal(\"columnMoved\", from.getComponent(), this.table.columnManager.getComponents());\n\t\t}\n\t}\n\t\n\t_moveColumnInArray(columns, from, to, after, updateRows){\n\t\tvar\tfromIndex = columns.indexOf(from),\n\t\ttoIndex, rows = [];\n\t\t\n\t\tif (fromIndex > -1) {\n\t\t\t\n\t\t\tcolumns.splice(fromIndex, 1);\n\t\t\t\n\t\t\ttoIndex = columns.indexOf(to);\n\t\t\t\n\t\t\tif (toIndex > -1) {\n\t\t\t\t\n\t\t\t\tif(after){\n\t\t\t\t\ttoIndex = toIndex+1;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\ttoIndex = fromIndex;\n\t\t\t}\n\t\t\t\n\t\t\tcolumns.splice(toIndex, 0, from);\n\t\t\t\n\t\t\tif(updateRows){\n\t\t\t\t\n\t\t\t\trows = this.chain(\"column-moving-rows\", [from, to, after], null, []) || [];\n\t\t\t\t\n\t\t\t\trows = rows.concat(this.table.rowManager.rows);\n\t\t\t\t\n\t\t\t\trows.forEach(function(row){\n\t\t\t\t\tif(row.cells.length){\n\t\t\t\t\t\tvar cell = row.cells.splice(fromIndex, 1)[0];\n\t\t\t\t\t\trow.cells.splice(toIndex, 0, cell);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t}\n\t\n\tscrollToColumn(column, position, ifVisible){\n\t\tvar left = 0,\n\t\toffset = column.getLeftOffset(),\n\t\tadjust = 0,\n\t\tcolEl = column.getElement();\n\t\t\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t\n\t\t\tif(typeof position === \"undefined\"){\n\t\t\t\tposition = this.table.options.scrollToColumnPosition;\n\t\t\t}\n\t\t\t\n\t\t\tif(typeof ifVisible === \"undefined\"){\n\t\t\t\tifVisible = this.table.options.scrollToColumnIfVisible;\n\t\t\t}\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\t\n\t\t\t\t//align to correct position\n\t\t\t\tswitch(position){\n\t\t\t\t\tcase \"middle\":\n\t\t\t\t\tcase \"center\":\n\t\t\t\t\t\tadjust = -this.element.clientWidth / 2;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"right\":\n\t\t\t\t\t\tadjust = colEl.clientWidth - this.headersElement.clientWidth;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//check column visibility\n\t\t\t\tif(!ifVisible){\n\t\t\t\t\tif(offset > 0 && offset + colEl.offsetWidth < this.element.clientWidth){\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//calculate scroll position\n\t\t\t\tleft = offset + adjust;\n\t\t\t\t\n\t\t\t\tleft = Math.max(Math.min(left, this.table.rowManager.element.scrollWidth - this.table.rowManager.element.clientWidth),0);\n\t\t\t\t\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\tthis.scrollHorizontal(left);\n\t\t\t\t\n\t\t\t\tresolve();\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Scroll Error - Column not visible\");\n\t\t\t\treject(\"Scroll Error - Column not visible\");\n\t\t\t}\n\t\t\t\n\t\t});\n\t}\n\t\n\t//////////////// Cell Management /////////////////\n\tgenerateCells(row){\n\t\tvar cells = [];\n\t\t\n\t\tthis.columnsByIndex.forEach((column) => {\n\t\t\tcells.push(column.generateCell(row));\n\t\t});\n\t\t\n\t\treturn cells;\n\t}\n\t\n\t//////////////// Column Management /////////////////\n\tgetFlexBaseWidth(){\n\t\tvar totalWidth = this.table.element.clientWidth, //table element width\n\t\tfixedWidth = 0;\n\t\t\n\t\t//adjust for vertical scrollbar if present\n\t\tif(this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight){\n\t\t\ttotalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\n\t\t}\n\t\t\n\t\tthis.columnsByIndex.forEach(function(column){\n\t\t\tvar width, minWidth, colWidth;\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\t\n\t\t\t\twidth = column.definition.width || 0;\n\t\t\t\t\n\t\t\t\tminWidth = parseInt(column.minWidth);\n\t\t\t\t\n\t\t\t\tif(typeof(width) == \"string\"){\n\t\t\t\t\tif(width.indexOf(\"%\") > -1){\n\t\t\t\t\t\tcolWidth = (totalWidth / 100) * parseInt(width) ;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tcolWidth = parseInt(width);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tcolWidth = width;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\n\t\t\t\t\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn fixedWidth;\n\t}\n\t\n\taddColumn(definition, before, nextToColumn){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar column = this._addColumn(definition, before, nextToColumn);\n\t\t\t\n\t\t\tthis._reIndexColumns();\n\t\t\t\n\t\t\tthis.dispatch(\"column-add\", definition, before, nextToColumn);\n\t\t\t\n\t\t\tif(this.layoutMode() != \"fitColumns\"){\n\t\t\t\tcolumn.reinitializeWidth();\n\t\t\t}\n\t\t\t\n\t\t\tthis.redraw(true);\n\t\t\t\n\t\t\tthis.table.rowManager.reinitialize();\n\t\t\t\n\t\t\tthis.rerenderColumns();\n\t\t\t\n\t\t\tresolve(column);\n\t\t});\n\t}\n\t\n\t//remove column from system\n\tderegisterColumn(column){\n\t\tvar field = column.getField(),\n\t\tindex;\n\t\t\n\t\t//remove from field list\n\t\tif(field){\n\t\t\tdelete this.columnsByField[field];\n\t\t}\n\t\t\n\t\t//remove from index list\n\t\tindex = this.columnsByIndex.indexOf(column);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.columnsByIndex.splice(index, 1);\n\t\t}\n\t\t\n\t\t//remove from column list\n\t\tindex = this.columns.indexOf(column);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.columns.splice(index, 1);\n\t\t}\n\t\t\n\t\tthis.verticalAlignHeaders();\n\t\t\n\t\tthis.redraw();\n\t}\n\t\n\trerenderColumns(update, silent){\n\t\tif(!this.redrawBlock){\n\t\t\tthis.renderer.rerenderColumns(update, silent);\n\t\t}else{\n\t\t\tif(update === false || (update === true && this.redrawBlockUpdate === null)){\n\t\t\t\tthis.redrawBlockUpdate = update;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tblockRedraw(){\n\t\tthis.redrawBlock = true;\n\t\tthis.redrawBlockUpdate = null;\n\t}\n\t\n\trestoreRedraw(){\n\t\tthis.redrawBlock = false;\n\t\tthis.verticalAlignHeaders();\n\t\tthis.renderer.rerenderColumns(this.redrawBlockUpdate);\n\t\t\n\t}\n\t\n\t//redraw columns\n\tredraw(force){\n\t\tif(Helpers.elVisible(this.element)){\n\t\t\tthis.verticalAlignHeaders();\n\t\t}\n\t\t\n\t\tif(force){\n\t\t\tthis.table.rowManager.resetScroll();\n\t\t\tthis.table.rowManager.reinitialize();\n\t\t}\n\t\t\n\t\tif(!this.confirm(\"table-redrawing\", force)){\n\t\t\tthis.layoutRefresh(force);\n\t\t}\n\t\t\n\t\tthis.dispatch(\"table-redraw\", force);\n\t\t\n\t\tthis.table.footerManager.redraw();\n\t}\n}","import Renderer from '../Renderer.js';\nimport Helpers from '../../tools/Helpers.js';\n\nexport default class BasicVertical extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.verticalFillMode = \"fill\";\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t}\n\t\n\tclearRows(){\n\t\tvar element = this.tableElement;\n\t\t\n\t\t// element.children.detach();\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\t\n\t\telement.scrollTop = 0;\n\t\telement.scrollLeft = 0;\n\t\t\n\t\telement.style.minWidth = \"\";\n\t\telement.style.minHeight = \"\";\n\t\telement.style.display = \"\";\n\t\telement.style.visibility = \"\";\n\t}\n\t\n\trenderRows() {\n\t\tvar element = this.tableElement,\n\t\tonlyGroupHeaders = true,\n\t\ttableFrag = document.createDocumentFragment(),\n\t\trows = this.rows();\n\t\t\n\t\trows.forEach((row, index) => {\n\t\t\tthis.styleRow(row, index);\n\t\t\trow.initialize(false, true);\n\t\t\t\n\t\t\tif (row.type !== \"group\") {\n\t\t\t\tonlyGroupHeaders = false;\n\t\t\t}\n\t\t\t\n\t\t\ttableFrag.appendChild(row.getElement());\n\t\t});\n\t\t\n\t\telement.appendChild(tableFrag);\n\t\t\n\t\trows.forEach((row) => {\n\t\t\trow.rendered();\n\t\t\t\n\t\t\tif(!row.heightInitialized) {\n\t\t\t\trow.calcHeight(true);\n\t\t\t}\n\t\t});\n\t\t\n\t\trows.forEach((row) => {\n\t\t\tif(!row.heightInitialized) {\n\t\t\t\trow.setCellHeight();\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(onlyGroupHeaders){\n\t\t\telement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n\t\t}else{\n\t\t\telement.style.minWidth = \"\";\n\t\t}\n\t}\n\t\n\t\n\trerenderRows(callback){\t\n\t\tthis.clearRows();\n\t\t\n\t\tif(callback){\n\t\t\tcallback();\n\t\t}\n\t\t\n\t\tthis.renderRows();\n\n\t\tif(!this.rows().length){\n\t\t\tthis.table.rowManager.tableEmpty();\n\t\t}\n\t}\n\t\n\tscrollToRowNearestTop(row){\n\t\tvar rowTop = Helpers.elOffset(row.getElement()).top;\n\t\t\n\t\treturn !(Math.abs(this.elementVertical.scrollTop - rowTop) > Math.abs(this.elementVertical.scrollTop + this.elementVertical.clientHeight - rowTop));\n\t}\n\t\n\tscrollToRow(row){\n\t\tvar rowEl = row.getElement();\n\t\t\n\t\tthis.elementVertical.scrollTop = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.elementVertical).top + this.elementVertical.scrollTop;\n\t}\n\t\n\tvisibleRows(includingBuffer){\n\t\treturn this.rows();\n\t}\n\t\n}\n","import Renderer from '../Renderer.js';\nimport Helpers from '../../tools/Helpers.js';\n\nexport default class VirtualDomVertical extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.verticalFillMode = \"fill\";\n\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\n\t\tthis.vDomRowHeight = 20; //approximation of row heights for padding\n\n\t\tthis.vDomTop = 0; //hold position for first rendered row in the virtual DOM\n\t\tthis.vDomBottom = 0; //hold position for last rendered row in the virtual DOM\n\n\t\tthis.vDomScrollPosTop = 0; //last scroll position of the vDom top;\n\t\tthis.vDomScrollPosBottom = 0; //last scroll position of the vDom bottom;\n\n\t\tthis.vDomTopPad = 0; //hold value of padding for top of virtual DOM\n\t\tthis.vDomBottomPad = 0; //hold value of padding for bottom of virtual DOM\n\n\t\tthis.vDomMaxRenderChain = 90; //the maximum number of dom elements that can be rendered in 1 go\n\n\t\tthis.vDomWindowBuffer = 0; //window row buffer before removing elements, to smooth scrolling\n\n\t\tthis.vDomWindowMinTotalRows = 20; //minimum number of rows to be generated in virtual dom (prevent buffering issues on tables with tall rows)\n\t\tthis.vDomWindowMinMarginRows = 5; //minimum number of rows to be generated in virtual dom margin\n\n\t\tthis.vDomTopNewRows = []; //rows to normalize after appending to optimize render speed\n\t\tthis.vDomBottomNewRows = []; //rows to normalize after appending to optimize render speed\n\t}\n\n\t//////////////////////////////////////\n\t///////// Public Functions ///////////\n\t//////////////////////////////////////\n\n\tclearRows(){\n\t\tvar element = this.tableElement;\n\n\t\t// element.children.detach();\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\n\t\telement.style.paddingTop = \"\";\n\t\telement.style.paddingBottom = \"\";\n\t\telement.style.minHeight = \"\";\n\t\telement.style.display = \"\";\n\t\telement.style.visibility = \"\";\n\n\t\tthis.elementVertical.scrollTop = 0;\n\t\tthis.elementVertical.scrollLeft = 0;\n\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\n\t\tthis.vDomTop = 0;\n\t\tthis.vDomBottom = 0;\n\t\tthis.vDomTopPad = 0;\n\t\tthis.vDomBottomPad = 0;\n\t\tthis.vDomScrollPosTop = 0;\n\t\tthis.vDomScrollPosBottom = 0;\n\t}\n\n\trenderRows(){\n\t\tthis._virtualRenderFill();\n\t}\n\n\trerenderRows(callback){\n\t\tvar scrollTop = this.elementVertical.scrollTop;\n\t\tvar topRow = false;\n\t\tvar topOffset = false;\n\n\t\tvar left = this.table.rowManager.scrollLeft;\n\n\t\tvar rows = this.rows();\n\n\t\tfor(var i = this.vDomTop; i <= this.vDomBottom; i++){\n\n\t\t\tif(rows[i]){\n\t\t\t\tvar diff = scrollTop - rows[i].getElement().offsetTop;\n\n\t\t\t\tif(topOffset === false || Math.abs(diff) < topOffset){\n\t\t\t\t\ttopOffset = diff;\n\t\t\t\t\ttopRow = i;\n\t\t\t\t}else{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\trows.forEach((row) => {\n\t\t\trow.deinitializeHeight();\n\t\t});\n\n\t\tif(callback){\n\t\t\tcallback();\n\t\t}\n\n\t\tif(this.rows().length){\n\t\t\tthis._virtualRenderFill((topRow === false ? this.rows.length - 1 : topRow), true, topOffset || 0);\n\t\t}else{\n\t\t\tthis.clear();\n\t\t\tthis.table.rowManager.tableEmpty();\n\t\t}\n\n\t\tthis.scrollColumns(left);\n\t}\n\n\tscrollColumns(left){\n\t\tthis.table.rowManager.scrollHorizontal(left);\n\t}\n\n\tscrollRows(top, dir){\n\t\tvar topDiff = top - this.vDomScrollPosTop;\n\t\tvar bottomDiff = top - this.vDomScrollPosBottom;\n\t\tvar margin = this.vDomWindowBuffer * 2;\n\t\tvar rows = this.rows();\n\n\t\tthis.scrollTop = top;\n\n\t\tif(-topDiff > margin || bottomDiff > margin){\n\t\t\t//if big scroll redraw table;\n\t\t\tvar left = this.table.rowManager.scrollLeft;\n\t\t\tthis._virtualRenderFill(Math.floor((this.elementVertical.scrollTop / this.elementVertical.scrollHeight) * rows.length));\n\t\t\tthis.scrollColumns(left);\n\t\t}else{\n\n\t\t\tif(dir){\n\t\t\t\t//scrolling up\n\t\t\t\tif(topDiff < 0){\n\t\t\t\t\tthis._addTopRow(rows, -topDiff);\n\t\t\t\t}\n\n\t\t\t\tif(bottomDiff < 0){\n\t\t\t\t\t//hide bottom row if needed\n\t\t\t\t\tif(this.vDomScrollHeight - this.scrollTop > this.vDomWindowBuffer){\n\t\t\t\t\t\tthis._removeBottomRow(rows, -bottomDiff);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\n\t\t\t\tif(bottomDiff >= 0){\n\t\t\t\t\tthis._addBottomRow(rows, bottomDiff);\n\t\t\t\t}\n\n\t\t\t\t//scrolling down\n\t\t\t\tif(topDiff >= 0){\n\t\t\t\t\t//hide top row if needed\n\t\t\t\t\tif(this.scrollTop > this.vDomWindowBuffer){\n\t\t\t\t\t\tthis._removeTopRow(rows, topDiff);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.vDomScrollPosTop = this.scrollTop;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tresize(){\n\t\tthis.vDomWindowBuffer = this.table.options.renderVerticalBuffer || this.elementVertical.clientHeight;\n\t}\n\n\tscrollToRowNearestTop(row){\n\t\tvar rowIndex = this.rows().indexOf(row);\n\n\t\treturn !(Math.abs(this.vDomTop - rowIndex) > Math.abs(this.vDomBottom - rowIndex));\n\t}\n\n\tscrollToRow(row){\n\t\tvar index = this.rows().indexOf(row);\n\n\t\tif(index > -1){\n\t\t\tthis._virtualRenderFill(index, true);\n\t\t}\n\t}\n\n\tvisibleRows(includingBuffer){\n\t\tvar topEdge = this.elementVertical.scrollTop,\n\t\tbottomEdge = this.elementVertical.clientHeight + topEdge,\n\t\ttopFound = false,\n\t\ttopRow = 0,\n\t\tbottomRow = 0,\n\t\trows = this.rows();\n\n\t\tif(includingBuffer){\n\t\t\ttopRow = this.vDomTop;\n\t\t\tbottomRow = this.vDomBottom;\n\t\t}else{\n\t\t\tfor(var i = this.vDomTop; i <= this.vDomBottom; i++){\n\t\t\t\tif(rows[i]){\n\t\t\t\t\tif(!topFound){\n\t\t\t\t\t\tif((topEdge - rows[i].getElement().offsetTop) >= 0){\n\t\t\t\t\t\t\ttopRow = i;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\ttopFound = true;\n\n\t\t\t\t\t\t\tif(bottomEdge - rows[i].getElement().offsetTop >= 0){\n\t\t\t\t\t\t\t\tbottomRow = i;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(bottomEdge - rows[i].getElement().offsetTop >= 0){\n\t\t\t\t\t\t\tbottomRow = i;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn rows.slice(topRow, bottomRow + 1);\n\t}\n\n\t//////////////////////////////////////\n\t//////// Internal Rendering //////////\n\t//////////////////////////////////////\n\n\t//full virtual render\n\t_virtualRenderFill(position, forceMove, offset) {\n\t\tvar\telement = this.tableElement,\n\t\tholder = this.elementVertical,\n\t\ttopPad = 0,\n\t\trowsHeight = 0,\n\t\trowHeight = 0,\n\t\theightOccupied = 0,\n\t\ttopPadHeight = 0,\n\t\ti = 0,\n\t\trows = this.rows(),\n\t\trowsCount = rows.length,\n\t\tindex = 0,\n\t\trow,\n\t\trowFragment,\n\t\trenderedRows = [],\n\t\ttotalRowsRendered = 0,\n\t\trowsToRender = 0,\n\t\tfixedHeight = this.table.rowManager.fixedHeight,\n\t\tcontainerHeight = this.elementVertical.clientHeight, \n\t\tavgRowHeight = this.table.options.rowHeight, \n\t\tresized = true;\n\n\t\tposition = position || 0;\n\n\t\toffset = offset || 0;\n\n\t\tif(!position){\n\t\t\tthis.clear();\n\t\t}else {\n\t\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\n\t\t\t//check if position is too close to bottom of table\n\t\t\theightOccupied = (rowsCount - position + 1) * this.vDomRowHeight;\n\n\t\t\tif(heightOccupied < containerHeight){\n\t\t\t\tposition -= Math.ceil((containerHeight - heightOccupied) / this.vDomRowHeight);\n\t\t\t\tif(position < 0){\n\t\t\t\t\tposition = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//calculate initial pad\n\t\t\ttopPad = Math.min(Math.max(Math.floor(this.vDomWindowBuffer / this.vDomRowHeight),  this.vDomWindowMinMarginRows), position);\n\t\t\tposition -= topPad;\n\t\t}\n\n\t\tif(rowsCount && Helpers.elVisible(this.elementVertical)){\n\t\t\tthis.vDomTop = position;\n\t\t\tthis.vDomBottom = position -1;\n\n\t\t\tif(fixedHeight || this.table.options.maxHeight) {\n\t\t\t\tif(avgRowHeight) {\n\t\t\t\t\trowsToRender = (containerHeight / avgRowHeight) + (this.vDomWindowBuffer / avgRowHeight);\n\t\t\t\t}\n\t\t\t\trowsToRender = Math.max(this.vDomWindowMinTotalRows, Math.ceil(rowsToRender));\n\t\t\t}\n\t\t\telse {\n\t\t\t\trowsToRender = rowsCount;\n\t\t\t}\n\n\t\t\twhile(((rowsToRender == rowsCount || rowsHeight <= containerHeight + this.vDomWindowBuffer) || totalRowsRendered < this.vDomWindowMinTotalRows) && this.vDomBottom < rowsCount -1) {\n\t\t\t\trenderedRows = [];\n\t\t\t\trowFragment = document.createDocumentFragment();\n\n\t\t\t\ti = 0;\n\n\t\t\t\twhile ((i < rowsToRender) && this.vDomBottom < rowsCount -1) {\t\n\t\t\t\t\tindex = this.vDomBottom + 1,\n\t\t\t\t\trow = rows[index];\n\n\t\t\t\t\tthis.styleRow(row, index);\n\n\t\t\t\t\trow.initialize(false, true);\n\t\t\t\t\tif(!row.heightInitialized && !this.table.options.rowHeight){\n\t\t\t\t\t\trow.clearCellHeight();\n\t\t\t\t\t}\n\n\t\t\t\t\trowFragment.appendChild(row.getElement());\n\t\t\t\t\trenderedRows.push(row);\n\t\t\t\t\tthis.vDomBottom ++;\n\t\t\t\t\ti++;\n\t\t\t\t}\n\n\t\t\t\tif(!renderedRows.length){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\telement.appendChild(rowFragment);\n\t\t\t\t\n\t\t\t\t// NOTE: The next 3 loops are separate on purpose\n\t\t\t\t// This is to batch up the dom writes and reads which drastically improves performance \n\n\t\t\t\trenderedRows.forEach((row) => {\n\t\t\t\t\trow.rendered();\n\n\t\t\t\t\tif(!row.heightInitialized) {\n\t\t\t\t\t\trow.calcHeight(true);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\trenderedRows.forEach((row) => {\n\t\t\t\t\tif(!row.heightInitialized) {\n\t\t\t\t\t\trow.setCellHeight();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\trenderedRows.forEach((row) => {\n\t\t\t\t\trowHeight = row.getHeight();\n\t\t\t\t\t\n\t\t\t\t\tif(totalRowsRendered < topPad){\n\t\t\t\t\t\ttopPadHeight += rowHeight;\n\t\t\t\t\t}else {\n\t\t\t\t\t\trowsHeight += rowHeight;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\n\t\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\n\t\t\t\t\t}\n\t\t\t\t\ttotalRowsRendered++;\n\t\t\t\t});\n\n\t\t\t\tresized = this.table.rowManager.adjustTableSize();\n\t\t\t\tcontainerHeight = this.elementVertical.clientHeight;\n\t\t\t\tif(resized && (fixedHeight || this.table.options.maxHeight))\n\t\t\t\t{\n\t\t\t\t\tavgRowHeight = rowsHeight / totalRowsRendered;\n\t\t\t\t\trowsToRender = Math.max(this.vDomWindowMinTotalRows, Math.ceil((containerHeight / avgRowHeight) + (this.vDomWindowBuffer / avgRowHeight)));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!position){\n\t\t\t\tthis.vDomTopPad = 0;\n\t\t\t\t//adjust row height to match average of rendered elements\n\t\t\t\tthis.vDomRowHeight = Math.floor((rowsHeight + topPadHeight) / totalRowsRendered);\n\t\t\t\tthis.vDomBottomPad = this.vDomRowHeight * (rowsCount - this.vDomBottom -1);\n\n\t\t\t\tthis.vDomScrollHeight = topPadHeight + rowsHeight + this.vDomBottomPad - containerHeight;\n\t\t\t}else {\n\t\t\t\tthis.vDomTopPad = !forceMove ? this.scrollTop - topPadHeight : (this.vDomRowHeight * this.vDomTop) + offset;\n\t\t\t\tthis.vDomBottomPad = this.vDomBottom == rowsCount-1 ? 0 : Math.max(this.vDomScrollHeight - this.vDomTopPad - rowsHeight - topPadHeight, 0);\n\t\t\t}\n\t\t\t\n\t\t\telement.style.paddingTop = this.vDomTopPad+\"px\";\n\t\t\telement.style.paddingBottom = this.vDomBottomPad+\"px\";\n\n\t\t\tif(forceMove){\n\t\t\t\tthis.scrollTop = this.vDomTopPad + (topPadHeight) + offset - (this.elementVertical.scrollWidth > this.elementVertical.clientWidth ? this.elementVertical.offsetHeight - containerHeight : 0);\n\t\t\t}\n\n\t\t\tthis.scrollTop = Math.min(this.scrollTop, this.elementVertical.scrollHeight - containerHeight);\n\n\t\t\t//adjust for horizontal scrollbar if present (and not at top of table)\n\t\t\tif(this.elementVertical.scrollWidth > this.elementVertical.clientWidth && forceMove){\n\t\t\t\tthis.scrollTop += this.elementVertical.offsetHeight - containerHeight;\n\t\t\t}\n\n\t\t\tthis.vDomScrollPosTop = this.scrollTop;\n\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\n\n\t\t\tholder.scrollTop = this.scrollTop;\n\n\t\t\tthis.dispatch(\"render-virtual-fill\");\n\t\t}\n\t}\n\n\t_addTopRow(rows, fillableSpace){\n\t\tvar table = this.tableElement,\n\t\taddedRows = [],\n\t\tpaddingAdjust = 0,\n\t\tindex = this.vDomTop -1,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tif(this.vDomTop){\n\t\t\t\tlet row = rows[index],\n\t\t\t\trowHeight, initialized;\n\n\t\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\t\t\t\t\tinitialized = row.initialized;\n\n\t\t\t\t\tif(fillableSpace >= rowHeight){\n\n\t\t\t\t\t\tthis.styleRow(row, index);\n\t\t\t\t\t\ttable.insertBefore(row.getElement(), table.firstChild);\n\n\t\t\t\t\t\tif(!row.initialized || !row.heightInitialized){\n\t\t\t\t\t\t\taddedRows.push(row);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trow.initialize();\n\n\t\t\t\t\t\tif(!initialized){\n\t\t\t\t\t\t\trowHeight = row.getElement().offsetHeight;\n\n\t\t\t\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\n\t\t\t\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\t\tthis.vDomTop--;\n\t\t\t\t\t\tindex--;\n\t\t\t\t\t\ti++;\n\n\t\t\t\t\t}else{\n\t\t\t\t\t\tworking = false;\n\t\t\t\t\t}\n\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of addedRows){\n\t\t\trow.clearCellHeight();\n\t\t}\n\n\t\tthis._quickNormalizeRowHeight(addedRows);\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomTopPad -= paddingAdjust;\n\n\t\t\tif(this.vDomTopPad < 0){\n\t\t\t\tthis.vDomTopPad = index * this.vDomRowHeight;\n\t\t\t}\n\n\t\t\tif(index < 1){\n\t\t\t\tthis.vDomTopPad = 0;\n\t\t\t}\n\n\t\t\ttable.style.paddingTop = this.vDomTopPad + \"px\";\n\t\t\tthis.vDomScrollPosTop -= paddingAdjust;\n\t\t}\n\t}\n\n\t_removeTopRow(rows, fillableSpace){\n\t\tvar removableRows = [],\n\t\tpaddingAdjust = 0,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tlet row = rows[this.vDomTop],\n\t\t\trowHeight;\n\n\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\n\t\t\t\tif(fillableSpace >= rowHeight){\n\t\t\t\t\tthis.vDomTop++;\n\n\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\tremovableRows.push(row);\n\t\t\t\t\ti++;\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of removableRows){\n\t\t\tlet rowEl = row.getElement();\n\n\t\t\tif(rowEl.parentNode){\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t}\n\t\t}\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomTopPad += paddingAdjust;\n\t\t\tthis.tableElement.style.paddingTop = this.vDomTopPad + \"px\";\n\t\t\tthis.vDomScrollPosTop += this.vDomTop ? paddingAdjust : paddingAdjust + this.vDomWindowBuffer;\n\t\t}\n\t}\n\n\t_addBottomRow(rows, fillableSpace){\n\t\tvar table = this.tableElement,\n\t\taddedRows = [],\n\t\tpaddingAdjust = 0,\n\t\tindex = this.vDomBottom + 1,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tlet row = rows[index],\n\t\t\trowHeight, initialized;\n\n\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\t\t\t\tinitialized = row.initialized;\n\n\t\t\t\tif(fillableSpace >= rowHeight){\n\n\t\t\t\t\tthis.styleRow(row, index);\n\t\t\t\t\ttable.appendChild(row.getElement());\n\n\t\t\t\t\tif(!row.initialized || !row.heightInitialized){\n\t\t\t\t\t\taddedRows.push(row);\n\t\t\t\t\t}\n\n\t\t\t\t\trow.initialize();\n\n\t\t\t\t\tif(!initialized){\n\t\t\t\t\t\trowHeight = row.getElement().offsetHeight;\n\n\t\t\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\n\t\t\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\tthis.vDomBottom++;\n\t\t\t\t\tindex++;\n\t\t\t\t\ti++;\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of addedRows){\n\t\t\trow.clearCellHeight();\n\t\t}\n\n\t\tthis._quickNormalizeRowHeight(addedRows);\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomBottomPad -= paddingAdjust;\n\n\t\t\tif(this.vDomBottomPad < 0 || index == rows.length -1){\n\t\t\t\tthis.vDomBottomPad = 0;\n\t\t\t}\n\n\t\t\ttable.style.paddingBottom = this.vDomBottomPad + \"px\";\n\t\t\tthis.vDomScrollPosBottom += paddingAdjust;\n\t\t}\n\t}\n\n\t_removeBottomRow(rows, fillableSpace){\n\t\tvar removableRows = [],\n\t\tpaddingAdjust = 0,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tlet row = rows[this.vDomBottom],\n\t\t\trowHeight;\n\n\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\n\t\t\t\tif(fillableSpace >= rowHeight){\n\t\t\t\t\tthis.vDomBottom --;\n\n\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\tremovableRows.push(row);\n\t\t\t\t\ti++;\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of removableRows){\n\t\t\tlet rowEl = row.getElement();\n\n\t\t\tif(rowEl.parentNode){\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t}\n\t\t}\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomBottomPad += paddingAdjust;\n\n\t\t\tif(this.vDomBottomPad < 0){\n\t\t\t\tthis.vDomBottomPad = 0;\n\t\t\t}\n\n\t\t\tthis.tableElement.style.paddingBottom = this.vDomBottomPad + \"px\";\n\t\t\tthis.vDomScrollPosBottom -= paddingAdjust;\n\t\t}\n\t}\n\n\t_quickNormalizeRowHeight(rows){\n\t\tfor(let row of rows){\n\t\t\trow.calcHeight();\n\t\t}\n\n\t\tfor(let row of rows){\n\t\t\trow.setCellHeight();\n\t\t}\n\t}\n}\n","import CoreFeature from './CoreFeature.js';\nimport Row from './row/Row.js';\nimport RowComponent from './row/RowComponent.js';\nimport Helpers from './tools/Helpers.js';\n\nimport RendererBasicVertical from './rendering/renderers/BasicVertical.js';\nimport RendererVirtualDomVertical from './rendering/renderers/VirtualDomVertical.js';\n\nexport default class RowManager extends CoreFeature{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.element = this.createHolderElement(); //containing element\n\t\tthis.tableElement = this.createTableElement(); //table element\n\t\tthis.heightFixer = this.createTableElement(); //table element\n\t\tthis.placeholder = null; //placeholder element\n\t\tthis.placeholderContents = null; //placeholder element\n\t\t\n\t\tthis.firstRender = false; //handle first render\n\t\tthis.renderMode = \"virtual\"; //current rendering mode\n\t\tthis.fixedHeight = false; //current rendering mode\n\t\t\n\t\tthis.rows = []; //hold row data objects\n\t\tthis.activeRowsPipeline = []; //hold calculation of active rows\n\t\tthis.activeRows = []; //rows currently available to on display in the table\n\t\tthis.activeRowsCount = 0; //count of active rows\n\t\t\n\t\tthis.displayRows = []; //rows currently on display in the table\n\t\tthis.displayRowsCount = 0; //count of display rows\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.redrawBlock = false; //prevent redraws to allow multiple data manipulations before continuing\n\t\tthis.redrawBlockRestoreConfig = false; //store latest redraw function calls for when redraw is needed\n\t\tthis.redrawBlockRenderInPosition = false; //store latest redraw function calls for when redraw is needed\n\t\t\n\t\tthis.dataPipeline = []; //hold data pipeline tasks\n\t\tthis.displayPipeline = []; //hold data display pipeline tasks\n\t\t\n\t\tthis.scrollbarWidth = 0;\n\t\t\n\t\tthis.renderer = null;\n\t}\n\t\n\t//////////////// Setup Functions /////////////////\n\t\n\tcreateHolderElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-tableholder\");\n\t\tel.setAttribute(\"tabindex\", 0);\n\t\t// el.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tcreateTableElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-table\");\n\t\tel.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tinitializePlaceholder(){\n\t\tvar placeholder = this.table.options.placeholder;\n\t\t\n\t\tif(typeof placeholder === \"function\"){\n\t\t\tplaceholder = placeholder.call(this.table);\n\t\t}\n\t\t\n\t\tplaceholder = this.chain(\"placeholder\", [placeholder], placeholder, placeholder) || placeholder;\n\t\t\n\t\t//configure placeholder element\n\t\tif(placeholder){\t\n\t\t\tlet el = document.createElement(\"div\");\n\t\t\tel.classList.add(\"tabulator-placeholder\");\n\t\t\t\n\t\t\tif(typeof placeholder == \"string\"){\n\t\t\t\tlet contents = document.createElement(\"div\");\n\t\t\t\tcontents.classList.add(\"tabulator-placeholder-contents\");\n\t\t\t\tcontents.innerHTML = placeholder;\n\t\t\t\t\n\t\t\t\tel.appendChild(contents);\n\t\t\t\t\n\t\t\t\tthis.placeholderContents = contents;\n\t\t\t\t\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && placeholder instanceof HTMLElement){\n\t\t\t\t\n\t\t\t\tel.appendChild(placeholder);\n\t\t\t\tthis.placeholderContents = placeholder;\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Invalid placeholder provided, must be string or HTML Element\", placeholder);\n\t\t\t\t\n\t\t\t\tthis.el = null;\n\t\t\t}\n\t\t\t\n\t\t\tthis.placeholder = el;\n\t\t}\n\t}\n\t\n\t//return containing element\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\t\n\t//return table element\n\tgetTableElement(){\n\t\treturn this.tableElement;\n\t}\n\t\n\tinitialize(){\n\t\tthis.initializePlaceholder();\n\t\tthis.initializeRenderer();\n\t\t\n\t\t//initialize manager\n\t\tthis.element.appendChild(this.tableElement);\n\t\t\n\t\tthis.firstRender = true;\n\t\t\n\t\t//scroll header along with table body\n\t\tthis.element.addEventListener(\"scroll\", () => {\n\t\t\tvar left = this.element.scrollLeft,\n\t\t\tleftDir = this.scrollLeft > left,\n\t\t\ttop = this.element.scrollTop,\n\t\t\ttopDir = this.scrollTop > top;\n\t\t\t\n\t\t\t//handle horizontal scrolling\n\t\t\tif(this.scrollLeft != left){\n\t\t\t\tthis.scrollLeft = left;\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"scroll-horizontal\", left, leftDir);\n\t\t\t\tthis.dispatchExternal(\"scrollHorizontal\", left, leftDir);\n\t\t\t\t\n\t\t\t\tthis._positionPlaceholder();\n\t\t\t}\n\t\t\t\n\t\t\t//handle vertical scrolling\n\t\t\tif(this.scrollTop != top){\n\t\t\t\tthis.scrollTop = top;\n\t\t\t\t\n\t\t\t\tthis.renderer.scrollRows(top, topDir);\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"scroll-vertical\", top, topDir);\n\t\t\t\tthis.dispatchExternal(\"scrollVertical\", top, topDir);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t////////////////// Row Manipulation //////////////////\n\tfindRow(subject){\n\t\tif(typeof subject == \"object\"){\n\t\t\tif(subject instanceof Row){\n\t\t\t\t//subject is row element\n\t\t\t\treturn subject;\n\t\t\t}else if(subject instanceof RowComponent){\n\t\t\t\t//subject is public row component\n\t\t\t\treturn subject._getSelf() || false;\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\n\t\t\t\t//subject is a HTML element of the row\n\t\t\t\tlet match = this.rows.find((row) => {\n\t\t\t\t\treturn row.getElement() === subject;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn match || false;\n\t\t\t}else if(subject === null){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else if(typeof subject == \"undefined\"){\n\t\t\treturn false;\n\t\t}else{\n\t\t\t//subject should be treated as the index of the row\n\t\t\tlet match = this.rows.find((row) => {\n\t\t\t\treturn row.data[this.table.options.index] == subject;\n\t\t\t});\n\t\t\t\n\t\t\treturn match || false;\n\t\t}\n\t\t\n\t\t//catch all for any other type of input\n\t\treturn false;\n\t}\n\t\n\tgetRowFromDataObject(data){\n\t\tvar match = this.rows.find((row) => {\n\t\t\treturn row.data === data;\n\t\t});\n\t\t\n\t\treturn match || false;\n\t}\n\t\n\tgetRowFromPosition(position){\n\t\treturn this.getDisplayRows().find((row) => {\n\t\t\treturn row.type === \"row\" && row.getPosition() === position && row.isDisplayed();\n\t\t});\n\t}\n\t\n\tscrollToRow(row, position, ifVisible){\n\t\treturn this.renderer.scrollToRowPosition(row, position, ifVisible);\n\t}\n\t\n\t////////////////// Data Handling //////////////////\n\tsetData(data, renderInPosition, columnsChanged){\n\t\treturn new Promise((resolve, reject)=>{\n\t\t\tif(renderInPosition && this.getDisplayRows().length){\n\t\t\t\tif(this.table.options.pagination){\n\t\t\t\t\tthis._setDataActual(data, true);\n\t\t\t\t}else{\n\t\t\t\t\tthis.reRenderInPosition(() => {\n\t\t\t\t\t\tthis._setDataActual(data);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(this.table.options.autoColumns && columnsChanged && this.table.initialized){\n\t\t\t\t\tthis.table.columnManager.generateColumnsFromRowData(data);\n\t\t\t\t}\n\t\t\t\tthis.resetScroll();\n\t\t\t\t\n\t\t\t\tthis._setDataActual(data);\n\t\t\t}\n\t\t\t\n\t\t\tresolve();\n\t\t});\n\t}\n\t\n\t_setDataActual(data, renderInPosition){\n\t\tthis.dispatchExternal(\"dataProcessing\", data);\n\t\t\n\t\tthis._wipeElements();\n\t\t\n\t\tif(Array.isArray(data)){\n\t\t\tthis.dispatch(\"data-processing\", data);\n\t\t\t\n\t\t\tdata.forEach((def, i) => {\n\t\t\t\tif(def && typeof def === \"object\"){\n\t\t\t\t\tvar row = new Row(def, this);\n\t\t\t\t\tthis.rows.push(row);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Data Loading Warning - Invalid row data detected and ignored, expecting object but received:\", def);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tthis.refreshActiveData(false, false, renderInPosition);\n\t\t\t\n\t\t\tthis.dispatch(\"data-processed\", data);\n\t\t\tthis.dispatchExternal(\"dataProcessed\", data);\n\t\t}else{\n\t\t\tconsole.error(\"Data Loading Error - Unable to process data due to invalid data type \\nExpecting: array \\nReceived: \", typeof data, \"\\nData:     \", data);\n\t\t}\n\t}\n\t\n\t_wipeElements(){\n\t\tthis.dispatch(\"rows-wipe\");\n\t\t\n\t\tthis.destroy();\n\t\t\n\t\tthis.adjustTableSize();\n\t\t\n\t\tthis.dispatch(\"rows-wiped\");\n\t}\n\t\n\tdestroy(){\n\t\tthis.rows.forEach((row) => {\n\t\t\trow.wipe();\n\t\t});\n\t\t\n\t\tthis.rows = [];\n\t\tthis.activeRows = [];\n\t\tthis.activeRowsPipeline = [];\n\t\tthis.activeRowsCount = 0;\n\t\tthis.displayRows = [];\n\t\tthis.displayRowsCount = 0;\n\t}\n\t\n\tdeleteRow(row, blockRedraw){\n\t\tvar allIndex = this.rows.indexOf(row),\n\t\tactiveIndex = this.activeRows.indexOf(row);\n\t\t\n\t\tif(activeIndex > -1){\n\t\t\tthis.activeRows.splice(activeIndex, 1);\n\t\t}\n\t\t\n\t\tif(allIndex > -1){\n\t\t\tthis.rows.splice(allIndex, 1);\n\t\t}\n\t\t\n\t\tthis.setActiveRows(this.activeRows);\n\t\t\n\t\tthis.displayRowIterator((rows) => {\n\t\t\tvar displayIndex = rows.indexOf(row);\n\t\t\t\n\t\t\tif(displayIndex > -1){\n\t\t\t\trows.splice(displayIndex, 1);\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(!blockRedraw){\n\t\t\tthis.reRenderInPosition();\n\t\t}\n\t\t\n\t\tthis.regenerateRowPositions();\n\t\t\n\t\tthis.dispatchExternal(\"rowDeleted\", row.getComponent());\n\t\t\n\t\tif(!this.displayRowsCount){\n\t\t\tthis.tableEmpty();\n\t\t}\n\t\t\n\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\tthis.dispatchExternal(\"dataChanged\", this.getData());\n\t\t}\n\t}\n\t\n\taddRow(data, pos, index, blockRedraw){\n\t\tvar row = this.addRowActual(data, pos, index, blockRedraw);\n\t\treturn row;\n\t}\n\t\n\t//add multiple rows\n\taddRows(data, pos, index, refreshDisplayOnly){\n\t\tvar rows = [];\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tpos = this.findAddRowPos(pos);\n\t\t\t\n\t\t\tif(!Array.isArray(data)){\n\t\t\t\tdata = [data];\n\t\t\t}\n\t\t\t\n\t\t\tif((typeof index == \"undefined\" && pos) || (typeof index !== \"undefined\" && !pos)){\n\t\t\t\tdata.reverse();\n\t\t\t}\n\t\t\t\n\t\t\tdata.forEach((item, i) => {\n\t\t\t\tvar row = this.addRow(item, pos, index, true);\n\t\t\t\trows.push(row);\n\t\t\t\tthis.dispatch(\"row-added\", row, item, pos, index);\n\t\t\t});\n\t\t\t\n\t\t\tthis.refreshActiveData(refreshDisplayOnly ? \"displayPipeline\" : false, false, true);\n\t\t\t\n\t\t\tthis.regenerateRowPositions();\n\t\t\t\n\t\t\tif(this.displayRowsCount){\n\t\t\t\tthis._clearPlaceholder();\n\t\t\t}\n\t\t\t\n\t\t\tresolve(rows);\n\t\t});\n\t}\n\t\n\tfindAddRowPos(pos){\n\t\tif(typeof pos === \"undefined\"){\n\t\t\tpos = this.table.options.addRowPos;\n\t\t}\n\t\t\n\t\tif(pos === \"pos\"){\n\t\t\tpos = true;\n\t\t}\n\t\t\n\t\tif(pos === \"bottom\"){\n\t\t\tpos = false;\n\t\t}\n\t\t\n\t\treturn pos;\n\t}\n\t\n\taddRowActual(data, pos, index, blockRedraw){\n\t\tvar row = data instanceof Row ? data : new Row(data || {}, this),\n\t\ttop = this.findAddRowPos(pos),\n\t\tallIndex = -1,\n\t\tactiveIndex, chainResult;\n\t\t\n\t\tif(!index){\n\t\t\tchainResult = this.chain(\"row-adding-position\", [row, top], null, {index, top});\n\t\t\t\n\t\t\tindex = chainResult.index;\n\t\t\ttop = chainResult.top;\n\t\t}\n\t\t\n\t\tif(typeof index !== \"undefined\"){\n\t\t\tindex = this.findRow(index);\n\t\t}\n\t\t\n\t\tindex = this.chain(\"row-adding-index\", [row, index, top], null, index);\n\t\t\n\t\tif(index){\n\t\t\tallIndex = this.rows.indexOf(index);\n\t\t}\n\t\t\n\t\tif(index && allIndex > -1){\n\t\t\tactiveIndex = this.activeRows.indexOf(index);\n\t\t\t\n\t\t\tthis.displayRowIterator(function(rows){\n\t\t\t\tvar displayIndex = rows.indexOf(index);\n\t\t\t\t\n\t\t\t\tif(displayIndex > -1){\n\t\t\t\t\trows.splice((top ? displayIndex : displayIndex + 1), 0, row);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(activeIndex > -1){\n\t\t\t\tthis.activeRows.splice((top ? activeIndex : activeIndex + 1), 0, row);\n\t\t\t}\n\t\t\t\n\t\t\tthis.rows.splice((top ? allIndex : allIndex + 1), 0, row);\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tif(top){\n\t\t\t\t\n\t\t\t\tthis.displayRowIterator(function(rows){\n\t\t\t\t\trows.unshift(row);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.activeRows.unshift(row);\n\t\t\t\tthis.rows.unshift(row);\n\t\t\t}else{\n\t\t\t\tthis.displayRowIterator(function(rows){\n\t\t\t\t\trows.push(row);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.activeRows.push(row);\n\t\t\t\tthis.rows.push(row);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.setActiveRows(this.activeRows);\n\t\t\n\t\tthis.dispatchExternal(\"rowAdded\", row.getComponent());\n\t\t\n\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n\t\t}\n\t\t\n\t\tif(!blockRedraw){\n\t\t\tthis.reRenderInPosition();\n\t\t}\n\t\t\n\t\treturn row;\n\t}\n\t\n\tmoveRow(from, to, after){\n\t\tthis.dispatch(\"row-move\", from, to, after);\n\t\t\n\t\tthis.moveRowActual(from, to, after);\n\t\t\n\t\tthis.regenerateRowPositions();\n\t\t\n\t\tthis.dispatch(\"row-moved\", from, to, after);\n\t\tthis.dispatchExternal(\"rowMoved\", from.getComponent());\n\t}\n\t\n\tmoveRowActual(from, to, after){\n\t\tthis.moveRowInArray(this.rows, from, to, after);\n\t\tthis.moveRowInArray(this.activeRows, from, to, after);\n\t\t\n\t\tthis.displayRowIterator((rows) => {\n\t\t\tthis.moveRowInArray(rows, from, to, after);\n\t\t});\n\t\t\n\t\tthis.dispatch(\"row-moving\", from, to, after);\n\t}\n\t\n\tmoveRowInArray(rows, from, to, after){\n\t\tvar\tfromIndex, toIndex, start, end;\n\t\t\n\t\tif(from !== to){\n\t\t\t\n\t\t\tfromIndex = rows.indexOf(from);\n\t\t\t\n\t\t\tif (fromIndex > -1) {\n\t\t\t\t\n\t\t\t\trows.splice(fromIndex, 1);\n\t\t\t\t\n\t\t\t\ttoIndex = rows.indexOf(to);\n\t\t\t\t\n\t\t\t\tif (toIndex > -1) {\n\t\t\t\t\t\n\t\t\t\t\tif(after){\n\t\t\t\t\t\trows.splice(toIndex+1, 0, from);\n\t\t\t\t\t}else{\n\t\t\t\t\t\trows.splice(toIndex, 0, from);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\trows.splice(fromIndex, 0, from);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t//restyle rows\n\t\t\tif(rows === this.getDisplayRows()){\n\t\t\t\t\n\t\t\t\tstart = fromIndex < toIndex ? fromIndex : toIndex;\n\t\t\t\tend = toIndex > fromIndex ? toIndex : fromIndex +1;\n\t\t\t\t\n\t\t\t\tfor(let i = start; i <= end; i++){\n\t\t\t\t\tif(rows[i]){\n\t\t\t\t\t\tthis.styleRow(rows[i], i);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tclearData(){\n\t\tthis.setData([]);\n\t}\n\t\n\tgetRowIndex(row){\n\t\treturn this.findRowIndex(row, this.rows);\n\t}\n\t\n\tgetDisplayRowIndex(row){\n\t\tvar index = this.getDisplayRows().indexOf(row);\n\t\treturn index > -1 ? index : false;\n\t}\n\t\n\tnextDisplayRow(row, rowOnly){\n\t\tvar index = this.getDisplayRowIndex(row),\n\t\tnextRow = false;\n\t\t\n\t\t\n\t\tif(index !== false && index < this.displayRowsCount -1){\n\t\t\tnextRow = this.getDisplayRows()[index+1];\n\t\t}\n\t\t\n\t\tif(nextRow && (!(nextRow instanceof Row) || nextRow.type != \"row\")){\n\t\t\treturn this.nextDisplayRow(nextRow, rowOnly);\n\t\t}\n\t\t\n\t\treturn nextRow;\n\t}\n\t\n\tprevDisplayRow(row, rowOnly){\n\t\tvar index = this.getDisplayRowIndex(row),\n\t\tprevRow = false;\n\t\t\n\t\tif(index){\n\t\t\tprevRow = this.getDisplayRows()[index-1];\n\t\t}\n\t\t\n\t\tif(rowOnly && prevRow && (!(prevRow instanceof Row) || prevRow.type != \"row\")){\n\t\t\treturn this.prevDisplayRow(prevRow, rowOnly);\n\t\t}\n\t\t\n\t\treturn prevRow;\n\t}\n\t\n\tfindRowIndex(row, list){\n\t\tvar rowIndex;\n\t\t\n\t\trow = this.findRow(row);\n\t\t\n\t\tif(row){\n\t\t\trowIndex = list.indexOf(row);\n\t\t\t\n\t\t\tif(rowIndex > -1){\n\t\t\t\treturn rowIndex;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tgetData(active, transform){\n\t\tvar output = [],\n\t\trows = this.getRows(active);\n\t\t\n\t\trows.forEach(function(row){\n\t\t\tif(row.type == \"row\"){\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetComponents(active){\n\t\tvar\toutput = [],\n\t\trows = this.getRows(active);\n\t\t\n\t\trows.forEach(function(row){\n\t\t\toutput.push(row.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetDataCount(active){\n\t\tvar rows = this.getRows(active);\n\t\t\n\t\treturn rows.length;\n\t}\n\t\n\tscrollHorizontal(left){\n\t\tthis.scrollLeft = left;\n\t\tthis.element.scrollLeft = left;\n\t\t\n\t\tthis.dispatch(\"scroll-horizontal\", left);\n\t}\n\t\n\tregisterDataPipelineHandler(handler, priority){\n\t\tif(typeof priority !== \"undefined\"){\n\t\t\tthis.dataPipeline.push({handler, priority});\n\t\t\tthis.dataPipeline.sort((a, b) => {\n\t\t\t\treturn a.priority - b.priority;\n\t\t\t});\n\t\t}else{\n\t\t\tconsole.error(\"Data pipeline handlers must have a priority in order to be registered\");\n\t\t}\n\t}\n\t\n\tregisterDisplayPipelineHandler(handler, priority){\n\t\tif(typeof priority !== \"undefined\"){\n\t\t\tthis.displayPipeline.push({handler, priority});\n\t\t\tthis.displayPipeline.sort((a, b) => {\n\t\t\t\treturn a.priority - b.priority;\n\t\t\t});\n\t\t}else{\n\t\t\tconsole.error(\"Display pipeline handlers must have a priority in order to be registered\");\n\t\t}\n\t}\n\t\n\t//set active data set\n\trefreshActiveData(handler, skipStage, renderInPosition){\n\t\tvar table = this.table,\n\t\tstage = \"\",\n\t\tindex = 0,\n\t\tcascadeOrder = [\"all\", \"dataPipeline\", \"display\", \"displayPipeline\", \"end\"];\n\t\t\n\t\tif(!this.table.destroyed){\n\t\t\tif(typeof handler === \"function\"){\n\t\t\t\tindex = this.dataPipeline.findIndex((item) => {\n\t\t\t\t\treturn item.handler === handler;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif(index > -1){\n\t\t\t\t\tstage = \"dataPipeline\";\n\t\t\t\t\t\n\t\t\t\t\tif(skipStage){\n\t\t\t\t\t\tif(index == this.dataPipeline.length - 1){\n\t\t\t\t\t\t\tstage = \"display\";\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tindex = this.displayPipeline.findIndex((item) => {\n\t\t\t\t\t\treturn item.handler === handler;\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif(index > -1){\n\t\t\t\t\t\tstage = \"displayPipeline\";\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(skipStage){\n\t\t\t\t\t\t\tif(index == this.displayPipeline.length - 1){\n\t\t\t\t\t\t\t\tstage = \"end\";\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.error(\"Unable to refresh data, invalid handler provided\", handler);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tstage = handler || \"all\";\n\t\t\t\tindex = 0;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.redrawBlock){\n\t\t\t\tif(!this.redrawBlockRestoreConfig || (this.redrawBlockRestoreConfig && ((this.redrawBlockRestoreConfig.stage === stage && index < this.redrawBlockRestoreConfig.index) || (cascadeOrder.indexOf(stage) < cascadeOrder.indexOf(this.redrawBlockRestoreConfig.stage))))){\n\t\t\t\t\tthis.redrawBlockRestoreConfig = {\n\t\t\t\t\t\thandler: handler,\n\t\t\t\t\t\tskipStage: skipStage,\n\t\t\t\t\t\trenderInPosition: renderInPosition,\n\t\t\t\t\t\tstage:stage,\n\t\t\t\t\t\tindex:index,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn;\n\t\t\t}else{\n\t\t\t\tif(Helpers.elVisible(this.element)){\n\t\t\t\t\tif(renderInPosition){\n\t\t\t\t\t\tthis.reRenderInPosition(this.refreshPipelines.bind(this, handler, stage, index, renderInPosition));\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.refreshPipelines(handler, stage, index, renderInPosition);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(!handler){\n\t\t\t\t\t\t\tthis.table.columnManager.renderer.renderColumns();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.renderTable();\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(table.options.layoutColumnsOnNewData){\n\t\t\t\t\t\t\tthis.table.columnManager.redraw(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.refreshPipelines(handler, stage, index, renderInPosition);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"data-refreshed\");\n\t\t\t}\n\t\t}\n\t}\n\t\n\trefreshPipelines(handler, stage, index, renderInPosition){\n\t\tthis.dispatch(\"data-refreshing\");\n\t\t\n\t\tif(!handler || !this.activeRowsPipeline[0]){\n\t\t\tthis.activeRowsPipeline[0] = this.rows.slice(0);\n\t\t}\n\t\t\n\t\t//cascade through data refresh stages\n\t\tswitch(stage){\n\t\t\tcase \"all\":\n\t\t\t//handle case where all data needs refreshing\n\t\t\t\n\t\t\tcase \"dataPipeline\":\n\t\t\t\tfor(let i = index; i < this.dataPipeline.length; i++){\n\t\t\t\t\tlet result = this.dataPipeline[i].handler(this.activeRowsPipeline[i].slice(0));\n\t\t\t\t\n\t\t\t\t\tthis.activeRowsPipeline[i + 1] = result || this.activeRowsPipeline[i].slice(0);\n\t\t\t\t}\n\t\t\t\n\t\t\t\tthis.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]);\n\t\t\t\n\t\t\tcase \"display\":\n\t\t\t\tindex = 0;\n\t\t\t\tthis.resetDisplayRows();\n\t\t\t\n\t\t\tcase \"displayPipeline\":\n\t\t\t\tfor(let i = index; i < this.displayPipeline.length; i++){\n\t\t\t\t\tlet result = this.displayPipeline[i].handler((i ? this.getDisplayRows(i - 1) : this.activeRows).slice(0), renderInPosition);\n\t\t\t\t\n\t\t\t\t\tthis.setDisplayRows(result || this.getDisplayRows(i - 1).slice(0), i);\n\t\t\t\t}\n\t\t\t\n\t\t\tcase \"end\":\n\t\t\t//case to handle scenario when trying to skip past end stage\n\t\t\t\tthis.regenerateRowPositions();\n\t\t}\n\t\t\n\t\tif(this.getDisplayRows().length){\n\t\t\tthis._clearPlaceholder();\n\t\t}\n\t}\n\t\n\t//regenerate row positions\n\tregenerateRowPositions(){\n\t\tvar rows = this.getDisplayRows();\n\t\tvar index = 1;\n\t\t\n\t\trows.forEach((row) => {\n\t\t\tif (row.type === \"row\"){\n\t\t\t\trow.setPosition(index);\n\t\t\t\tindex++;\n\t\t\t}\n\t\t});\n\t}\n\t\n\tsetActiveRows(activeRows){\n\t\tthis.activeRows = this.activeRows = Object.assign([], activeRows);\n\t\tthis.activeRowsCount = this.activeRows.length;\n\t}\n\t\n\t//reset display rows array\n\tresetDisplayRows(){\n\t\tthis.displayRows = [];\n\t\t\n\t\tthis.displayRows.push(this.activeRows.slice(0));\n\t\t\n\t\tthis.displayRowsCount = this.displayRows[0].length;\n\t}\n\t\n\t//set display row pipeline data\n\tsetDisplayRows(displayRows, index){\n\t\tthis.displayRows[index] = displayRows;\n\t\t\n\t\tif(index == this.displayRows.length -1){\n\t\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length -1].length;\n\t\t}\n\t}\n\t\n\tgetDisplayRows(index){\n\t\tif(typeof index == \"undefined\"){\n\t\t\treturn this.displayRows.length ? this.displayRows[this.displayRows.length -1] : [];\n\t\t}else{\n\t\t\treturn this.displayRows[index] || [];\n\t\t}\n\t}\n\t\n\tgetVisibleRows(chain, viewable){\n\t\tvar rows =  Object.assign([], this.renderer.visibleRows(!viewable));\n\t\t\n\t\tif(chain){\n\t\t\trows = this.chain(\"rows-visible\", [viewable], rows, rows);\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\t//repeat action across display rows\n\tdisplayRowIterator(callback){\n\t\tthis.activeRowsPipeline.forEach(callback);\n\t\tthis.displayRows.forEach(callback);\n\t\t\n\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length -1].length;\n\t}\n\t\n\t//return only actual rows (not group headers etc)\n\tgetRows(type){\n\t\tvar rows = [];\n\t\t\n\t\tswitch(type){\n\t\t\tcase \"active\":\n\t\t\t\trows = this.activeRows;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"display\":\n\t\t\t\trows = this.table.rowManager.getDisplayRows();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"visible\":\n\t\t\t\trows = this.getVisibleRows(false, true);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\trows = this.chain(\"rows-retrieve\", type, null, this.rows) || this.rows;\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\t///////////////// Table Rendering /////////////////\n\t//trigger rerender of table in current position\n\treRenderInPosition(callback){\n\t\tif(this.redrawBlock){\n\t\t\tif(callback){\n\t\t\t\tcallback();\n\t\t\t}else{\n\t\t\t\tthis.redrawBlockRenderInPosition = true;\n\t\t\t}\n\t\t}else{\n\t\t\tthis.dispatchExternal(\"renderStarted\");\n\t\t\t\n\t\t\tthis.renderer.rerenderRows(callback);\n\t\t\t\n\t\t\tif(!this.fixedHeight){\n\t\t\t\tthis.adjustTableSize();\n\t\t\t}\n\t\t\t\n\t\t\tthis.scrollBarCheck();\n\t\t\t\n\t\t\tthis.dispatchExternal(\"renderComplete\");\n\t\t}\n\t}\n\t\n\tscrollBarCheck(){\n\t\tvar scrollbarWidth = 0;\n\t\t\n\t\t//adjust for vertical scrollbar moving table when present\n\t\tif(this.element.scrollHeight > this.element.clientHeight){\n\t\t\tscrollbarWidth = this.element.offsetWidth - this.element.clientWidth;\n\t\t}\n\t\t\n\t\tif(scrollbarWidth !== this.scrollbarWidth){\n\t\t\tthis.scrollbarWidth = scrollbarWidth;\n\t\t\tthis.dispatch(\"scrollbar-vertical\", scrollbarWidth);\n\t\t}\n\t}\n\t\n\tinitializeRenderer(){\n\t\tvar renderClass;\n\t\t\n\t\tvar renderers = {\n\t\t\t\"virtual\": RendererVirtualDomVertical,\n\t\t\t\"basic\": RendererBasicVertical,\n\t\t};\n\t\t\n\t\tif(typeof this.table.options.renderVertical === \"string\"){\n\t\t\trenderClass = renderers[this.table.options.renderVertical];\n\t\t}else{\n\t\t\trenderClass = this.table.options.renderVertical;\n\t\t}\n\t\t\n\t\tif(renderClass){\n\t\t\tthis.renderMode = this.table.options.renderVertical;\n\t\t\t\n\t\t\tthis.renderer = new renderClass(this.table, this.element, this.tableElement);\n\t\t\tthis.renderer.initialize();\n\t\t\t\n\t\t\tif((this.table.element.clientHeight || this.table.options.height) && !(this.table.options.minHeight && this.table.options.maxHeight)){\n\t\t\t\tthis.fixedHeight = true;\n\t\t\t}else{\n\t\t\t\tthis.fixedHeight = false;\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.error(\"Unable to find matching renderer:\", this.table.options.renderVertical);\n\t\t}\n\t}\n\t\n\tgetRenderMode(){\n\t\treturn this.renderMode;\n\t}\n\t\n\trenderTable(){\n\t\tthis.dispatchExternal(\"renderStarted\");\n\t\t\n\t\tthis.element.scrollTop = 0;\n\t\t\n\t\tthis._clearTable();\n\t\t\n\t\tif(this.displayRowsCount){\n\t\t\tthis.renderer.renderRows();\n\t\t\t\n\t\t\tif(this.firstRender){\n\t\t\t\tthis.firstRender = false;\n\t\t\t\t\n\t\t\t\tif(!this.fixedHeight){\n\t\t\t\t\tthis.adjustTableSize();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.layoutRefresh(true);\n\t\t\t}\n\t\t}else{\n\t\t\tthis.renderEmptyScroll();\n\t\t}\n\t\t\n\t\tif(!this.fixedHeight){\n\t\t\tthis.adjustTableSize();\n\t\t}\n\t\t\n\t\tthis.dispatch(\"table-layout\");\n\t\t\n\t\tif(!this.displayRowsCount){\n\t\t\tthis._showPlaceholder();\n\t\t}\n\t\t\n\t\tthis.scrollBarCheck();\n\t\t\n\t\tthis.dispatchExternal(\"renderComplete\");\n\t}\n\t\n\t//show scrollbars on empty table div\n\trenderEmptyScroll(){\n\t\tif(this.placeholder){\n\t\t\tthis.tableElement.style.display = \"none\";\n\t\t}else{\n\t\t\tthis.tableElement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n\t\t\t// this.tableElement.style.minHeight = \"1px\";\n\t\t\t// this.tableElement.style.visibility = \"hidden\";\n\t\t}\n\t}\n\t\n\t_clearTable(){\t\n\t\tthis._clearPlaceholder();\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.renderer.clearRows();\n\t}\n\t\n\ttableEmpty(){\n\t\tthis.renderEmptyScroll();\n\t\tthis._showPlaceholder();\n\t}\n\n\tcheckPlaceholder(){\n\t\tif(this.displayRowsCount){\n\t\t\tthis._clearPlaceholder();\n\t\t}else{\n\t\t\tthis.tableEmpty();\n\t\t}\n\t}\n\t\n\t_showPlaceholder(){\n\t\tif(this.placeholder){\n\t\t\tif(this.placeholder && this.placeholder.parentNode){\n\t\t\t\tthis.placeholder.parentNode.removeChild(this.placeholder);\n\t\t\t}\n\t\t\t\n\t\t\tthis.initializePlaceholder();\n\t\t\t\n\t\t\tthis.placeholder.setAttribute(\"tabulator-render-mode\", this.renderMode);\n\t\t\t\n\t\t\tthis.getElement().appendChild(this.placeholder);\n\t\t\tthis._positionPlaceholder();\n\n\t\t\tthis.adjustTableSize();\n\t\t}\n\t}\n\t\n\t_clearPlaceholder(){\n\t\tif(this.placeholder && this.placeholder.parentNode){\n\t\t\tthis.placeholder.parentNode.removeChild(this.placeholder);\n\t\t}\n\t\t\n\t\t// clear empty table placeholder min\n\t\tthis.tableElement.style.minWidth = \"\";\n\t\tthis.tableElement.style.display = \"\";\n\t}\n\t\n\t_positionPlaceholder(){\n\t\tif(this.placeholder && this.placeholder.parentNode){\n\t\t\tthis.placeholder.style.width = this.table.columnManager.getWidth() + \"px\";\n\t\t\tthis.placeholderContents.style.width = this.table.rowManager.element.clientWidth + \"px\";\n\t\t\tthis.placeholderContents.style.marginLeft = this.scrollLeft + \"px\";\n\t\t}\n\t}\n\t\n\tstyleRow(row, index){\n\t\tvar rowEl = row.getElement();\n\t\t\n\t\tif(index % 2){\n\t\t\trowEl.classList.add(\"tabulator-row-even\");\n\t\t\trowEl.classList.remove(\"tabulator-row-odd\");\n\t\t}else{\n\t\t\trowEl.classList.add(\"tabulator-row-odd\");\n\t\t\trowEl.classList.remove(\"tabulator-row-even\");\n\t\t}\n\t}\n\t\n\t//normalize height of active rows\n\tnormalizeHeight(){\n\t\tthis.activeRows.forEach(function(row){\n\t\t\trow.normalizeHeight();\n\t\t});\n\t}\n\t\n\t//adjust the height of the table holder to fit in the Tabulator element\n\tadjustTableSize(){\n\t\tlet initialHeight = this.element.clientHeight, minHeight;\n\t\tlet resized = false;\n\t\t\n\t\tif(this.renderer.verticalFillMode === \"fill\"){\n\t\t\tlet otherHeight =  Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height + (this.table.footerManager && this.table.footerManager.active && !this.table.footerManager.external ? this.table.footerManager.getElement().getBoundingClientRect().height : 0));\n\t\t\t\n\t\t\tif(this.fixedHeight){\n\t\t\t\tminHeight = isNaN(this.table.options.minHeight) ? this.table.options.minHeight : this.table.options.minHeight + \"px\";\n\t\t\t\t\n\t\t\t\tconst height = \"calc(100% - \" + otherHeight + \"px)\";\n\t\t\t\tthis.element.style.minHeight = minHeight || \"calc(100% - \" + otherHeight + \"px)\";\n\t\t\t\tthis.element.style.height = height;\n\t\t\t\tthis.element.style.maxHeight = height;\n\t\t\t} else {\n\t\t\t\tthis.element.style.height = \"\";\n\t\t\t\tthis.element.style.height =\n\t\t\t\tthis.table.element.clientHeight - otherHeight + \"px\";\n\t\t\t\tthis.element.scrollTop = this.scrollTop;\n\t\t\t}\n\t\t\t\n\t\t\tthis.renderer.resize();\n\t\t\t\n\t\t\t//check if the table has changed size when dealing with variable height tables\n\t\t\tif(!this.fixedHeight && initialHeight != this.element.clientHeight){\n\t\t\t\tresized = true;\n\t\t\t\tif(this.subscribed(\"table-resize\")){\n\t\t\t\t\tthis.dispatch(\"table-resize\");\n\t\t\t\t}else{\n\t\t\t\t\tthis.redraw();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis.scrollBarCheck();\n\t\t}\n\t\t\n\t\tthis._positionPlaceholder();\n\t\treturn resized;\n\t}\n\t\n\t//reinitialize all rows\n\treinitialize(){\n\t\tthis.rows.forEach(function(row){\n\t\t\trow.reinitialize(true);\n\t\t});\n\t}\n\t\n\t//prevent table from being redrawn\n\tblockRedraw (){\n\t\tthis.redrawBlock = true;\n\t\tthis.redrawBlockRestoreConfig = false;\n\t}\n\t\n\t//restore table redrawing\n\trestoreRedraw (){\n\t\tthis.redrawBlock = false;\n\t\t\n\t\tif(this.redrawBlockRestoreConfig){\n\t\t\tthis.refreshActiveData(this.redrawBlockRestoreConfig.handler, this.redrawBlockRestoreConfig.skipStage, this.redrawBlockRestoreConfig.renderInPosition);\n\t\t\t\n\t\t\tthis.redrawBlockRestoreConfig = false;\n\t\t}else{\n\t\t\tif(this.redrawBlockRenderInPosition){\n\t\t\t\tthis.reRenderInPosition();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.redrawBlockRenderInPosition = false;\n\t}\n\t\n\t//redraw table\n\tredraw (force){\n\t\tthis.adjustTableSize();\n\t\tthis.table.tableWidth = this.table.element.clientWidth;\n\t\t\n\t\tif(!force){\t\n\t\t\tthis.reRenderInPosition();\n\t\t\tthis.scrollHorizontal(this.scrollLeft);\n\t\t}else{\n\t\t\tthis.renderTable();\n\t\t}\n\t}\n\t\n\tresetScroll(){\n\t\tthis.element.scrollLeft = 0;\n\t\tthis.element.scrollTop = 0;\n\t\t\n\t\tif(this.table.browser === \"ie\"){\n\t\t\tvar event = document.createEvent(\"Event\");\n\t\t\tevent.initEvent(\"scroll\", false, true);\n\t\t\tthis.element.dispatchEvent(event);\n\t\t}else{\n\t\t\tthis.element.dispatchEvent(new Event('scroll'));\n\t\t}\n\t}\n}\n","import CoreFeature from './CoreFeature.js';\n\nexport default class FooterManager extends CoreFeature{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.active = false;\n\t\tthis.element = this.createElement(); //containing element\n\t\tthis.containerElement = this.createContainerElement(); //containing element\n\t\tthis.external = false;\n\t}\n\n\tinitialize(){\n\t\tthis.initializeElement();\n\t}\n\n\tcreateElement(){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-footer\");\n\n\t\treturn el;\n\t}\n\n\t\n\tcreateContainerElement(){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-footer-contents\");\n\n\t\tthis.element.appendChild(el);\n\n\t\treturn el;\n\t}\n\n\tinitializeElement(){\n\t\tif(this.table.options.footerElement){\n\n\t\t\tswitch(typeof this.table.options.footerElement){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(this.table.options.footerElement[0] === \"<\"){\n\t\t\t\t\t\tthis.containerElement.innerHTML = this.table.options.footerElement;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.external = true;\n\t\t\t\t\t\tthis.containerElement = document.querySelector(this.table.options.footerElement);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis.element = this.table.options.footerElement;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\n\tappend(element){\n\t\tthis.activate();\n\n\t\tthis.containerElement.appendChild(element);\n\t\tthis.table.rowManager.adjustTableSize();\n\t}\n\n\tprepend(element){\n\t\tthis.activate();\n\n\t\tthis.element.insertBefore(element, this.element.firstChild);\n\t\tthis.table.rowManager.adjustTableSize();\n\t}\n\n\tremove(element){\n\t\telement.parentNode.removeChild(element);\n\t\tthis.deactivate();\n\t}\n\n\tdeactivate(force){\n\t\tif(!this.element.firstChild || force){\n\t\t\tif(!this.external){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t\tthis.active = false;\n\t\t}\n\t}\n\n\tactivate(){\n\t\tif(!this.active){\n\t\t\tthis.active = true;\n\t\t\tif(!this.external){\n\t\t\t\tthis.table.element.appendChild(this.getElement());\n\t\t\t\tthis.table.element.style.display = '';\n\t\t\t}\n\t\t}\n\t}\n\n\tredraw(){\n\t\tthis.dispatch(\"footer-redraw\");\n\t}\n}","import CoreFeature from '../CoreFeature.js';\nimport Row from '../row/Row.js';\n\nexport default class InteractionManager extends CoreFeature {\n\t\n\tconstructor (table){\n\t\tsuper(table);\n\t\t\n\t\tthis.el = null;\n\t\t\n\t\tthis.abortClasses = [\"tabulator-headers\", \"tabulator-table\"];\n\t\t\n\t\tthis.previousTargets = {};\n\t\t\n\t\tthis.listeners = [\n\t\t\t\"click\",\n\t\t\t\"dblclick\",\n\t\t\t\"contextmenu\",\n\t\t\t\"mouseenter\",\n\t\t\t\"mouseleave\",\n\t\t\t\"mouseover\",\n\t\t\t\"mouseout\",\n\t\t\t\"mousemove\",\n\t\t\t\"mouseup\",\n\t\t\t\"mousedown\",\n\t\t\t\"touchstart\",\n\t\t\t\"touchend\",\n\t\t];\n\t\t\n\t\tthis.componentMap = {\n\t\t\t\"tabulator-cell\":\"cell\",\n\t\t\t\"tabulator-row\":\"row\",\n\t\t\t\"tabulator-group\":\"group\",\n\t\t\t\"tabulator-col\":\"column\",\n\t\t};\n\t\t\n\t\tthis.pseudoTrackers = {\n\t\t\t\"row\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t\t\"cell\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t\t\"group\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t\t\"column\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t};\n\t\t\n\t\tthis.pseudoTracking = false;\n\t}\n\t\n\tinitialize(){\n\t\tthis.el = this.table.element;\n\t\t\n\t\tthis.buildListenerMap();\n\t\tthis.bindSubscriptionWatchers();\n\t}\n\t\n\tbuildListenerMap(){\n\t\tvar listenerMap = {};\n\t\t\n\t\tthis.listeners.forEach((listener) => {\n\t\t\tlistenerMap[listener] = {\n\t\t\t\thandler:null,\n\t\t\t\tcomponents:[],\n\t\t\t};\n\t\t});\n\t\t\n\t\tthis.listeners = listenerMap;\n\t}\n\t\n\tbindPseudoEvents(){\n\t\tObject.keys(this.pseudoTrackers).forEach((key) => {\n\t\t\tthis.pseudoTrackers[key].subscriber = this.pseudoMouseEnter.bind(this, key);\n\t\t\tthis.subscribe(key + \"-mouseover\", this.pseudoTrackers[key].subscriber);\n\t\t});\n\t\t\n\t\tthis.pseudoTracking = true;\n\t}\n\t\n\tpseudoMouseEnter(key, e, target){\n\t\tif(this.pseudoTrackers[key].target !== target){\n\t\t\t\n\t\t\tif(this.pseudoTrackers[key].target){\n\t\t\t\tthis.dispatch(key + \"-mouseleave\", e, this.pseudoTrackers[key].target);\n\t\t\t}\n\t\t\t\n\t\t\tthis.pseudoMouseLeave(key, e);\n\t\t\t\n\t\t\tthis.pseudoTrackers[key].target = target;\n\t\t\t\n\t\t\tthis.dispatch(key + \"-mouseenter\", e, target);\n\t\t}\n\t}\n\t\n\tpseudoMouseLeave(key, e){\n\t\tvar leaveList = Object.keys(this.pseudoTrackers),\n\t\tlinkedKeys = {\n\t\t\t\"row\":[\"cell\"],\n\t\t\t\"cell\":[\"row\"],\n\t\t};\n\t\t\n\t\tleaveList = leaveList.filter((item) => {\n\t\t\tvar links = linkedKeys[key];\n\t\t\treturn item !== key && (!links || (links && !links.includes(item)));\n\t\t});\n\t\t\n\t\t\n\t\tleaveList.forEach((key) => {\n\t\t\tvar target = this.pseudoTrackers[key].target;\n\t\t\t\n\t\t\tif(this.pseudoTrackers[key].target){\n\t\t\t\tthis.dispatch(key + \"-mouseleave\", e, target);\n\t\t\t\t\n\t\t\t\tthis.pseudoTrackers[key].target = null;\n\t\t\t}\n\t\t});\n\t}\n\t\n\t\n\tbindSubscriptionWatchers(){\n\t\tvar listeners = Object.keys(this.listeners),\n\t\tcomponents = Object.values(this.componentMap);\n\t\t\n\t\tfor(let comp of components){\n\t\t\tfor(let listener of listeners){\n\t\t\t\tlet key = comp + \"-\" + listener;\n\t\t\t\t\n\t\t\t\tthis.subscriptionChange(key, this.subscriptionChanged.bind(this, comp, listener));\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.subscribe(\"table-destroy\", this.clearWatchers.bind(this));\n\t}\n\t\n\tsubscriptionChanged(component, key, added){\n\t\tvar listener = this.listeners[key].components,\n\t\tindex = listener.indexOf(component),\n\t\tchanged = false;\n\t\t\n\t\tif(added){\n\t\t\tif(index === -1){\n\t\t\t\tlistener.push(component);\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t}else{\n\t\t\tif(!this.subscribed(component + \"-\" + key)){\n\t\t\t\tif(index > -1){\n\t\t\t\t\tlistener.splice(index, 1);\n\t\t\t\t\tchanged = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif((key === \"mouseenter\" || key === \"mouseleave\") && !this.pseudoTracking){\n\t\t\tthis.bindPseudoEvents();\n\t\t}\n\t\t\n\t\tif(changed){\n\t\t\tthis.updateEventListeners();\n\t\t}\n\t}\n\t\n\tupdateEventListeners(){\n\t\tfor(let key in this.listeners){\n\t\t\tlet listener = this.listeners[key];\n\t\t\t\n\t\t\tif(listener.components.length){\n\t\t\t\tif(!listener.handler){\n\t\t\t\t\tlistener.handler = this.track.bind(this, key);\n\t\t\t\t\tthis.el.addEventListener(key, listener.handler);\n\t\t\t\t\t// this.el.addEventListener(key, listener.handler, {passive: true})\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(listener.handler){\n\t\t\t\t\tthis.el.removeEventListener(key, listener.handler);\n\t\t\t\t\tlistener.handler = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\ttrack(type, e){\n\t\tvar path = (e.composedPath && e.composedPath()) || e.path;\n\t\t\n\t\tvar targets = this.findTargets(path);\n\t\ttargets = this.bindComponents(type, targets);\n\t\t\n\t\tthis.triggerEvents(type, e, targets);\n\t\t\n\t\tif(this.pseudoTracking && (type == \"mouseover\" || type == \"mouseleave\") && !Object.keys(targets).length){\n\t\t\tthis.pseudoMouseLeave(\"none\", e);\n\t\t}\n\t}\n\t\n\tfindTargets(path){\n\t\tvar targets = {};\n\t\t\n\t\tlet componentMap = Object.keys(this.componentMap);\n\t\t\n\t\tfor (let el of path) {\n\t\t\tlet classList = el.classList ? [...el.classList] : [];\n\t\t\t\n\t\t\tlet abort = classList.filter((item) => {\n\t\t\t\treturn this.abortClasses.includes(item);\n\t\t\t});\n\t\t\t\n\t\t\tif(abort.length){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tlet elTargets = classList.filter((item) => {\n\t\t\t\treturn componentMap.includes(item);\n\t\t\t});\n\t\t\t\n\t\t\tfor (let target of elTargets) {\n\t\t\t\tif(!targets[this.componentMap[target]]){\n\t\t\t\t\ttargets[this.componentMap[target]] = el;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(targets.group && targets.group === targets.row){\n\t\t\tdelete targets.row;\n\t\t}\n\n\t\treturn targets;\n\t}\n\t\n\tbindComponents(type, targets){\n\t\t//ensure row component is looked up before cell\n\t\tvar keys = Object.keys(targets).reverse(),\n\t\tlistener = this.listeners[type],\n\t\tmatches = {},\n\t\ttargetMatches = {};\n\t\t\n\t\tfor(let key of keys){\n\t\t\tlet component,\n\t\t\ttarget = targets[key],\n\t\t\tpreviousTarget = this.previousTargets[key];\n\t\t\t\n\t\t\tif(previousTarget && previousTarget.target === target){\n\t\t\t\tcomponent = previousTarget.component;\n\t\t\t}else{\n\t\t\t\tswitch(key){\n\t\t\t\t\tcase \"row\":\n\t\t\t\t\tcase \"group\":\n\t\t\t\t\t\tif(listener.components.includes(\"row\") || listener.components.includes(\"cell\") || listener.components.includes(\"group\")){\n\t\t\t\t\t\t\tlet rows = this.table.rowManager.getVisibleRows(true);\n\t\t\t\t\t\t\n\t\t\t\t\t\t\tcomponent = rows.find((row) => {\n\t\t\t\t\t\t\t\treturn row.getElement() === target;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(targets[\"row\"] && targets[\"row\"].parentNode && targets[\"row\"].parentNode.closest(\".tabulator-row\")){\n\t\t\t\t\t\t\t\ttargets[key] = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"column\":\n\t\t\t\t\t\tif(listener.components.includes(\"column\")){\n\t\t\t\t\t\t\tcomponent = this.table.columnManager.findColumn(target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"cell\":\n\t\t\t\t\t\tif(listener.components.includes(\"cell\")){\n\t\t\t\t\t\t\tif(matches[\"row\"] instanceof Row){\n\t\t\t\t\t\t\t\tcomponent = matches[\"row\"].findCell(target);\n\t\t\t\t\t\t\t}else{\t\n\t\t\t\t\t\t\t\tif(targets[\"row\"]){\n\t\t\t\t\t\t\t\t\tconsole.warn(\"Event Target Lookup Error - The row this cell is attached to cannot be found, has the table been reinitialized without being destroyed first?\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(component){\n\t\t\t\tmatches[key] = component;\n\t\t\t\ttargetMatches[key] = {\n\t\t\t\t\ttarget:target,\n\t\t\t\t\tcomponent:component,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.previousTargets = targetMatches;\n\t\t\n\t\treturn matches;\n\t}\n\t\n\ttriggerEvents(type, e, targets){\n\t\tvar listener = this.listeners[type];\n\n\t\tfor(let key in targets){\n\t\t\tif(targets[key] && listener.components.includes(key)){\n\t\t\t\tthis.dispatch(key + \"-\" + type, e, targets[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tclearWatchers(){\n\t\tfor(let key in this.listeners){\n\t\t\tlet listener = this.listeners[key];\n\t\t\t\n\t\t\tif(listener.handler){\n\t\t\t\tthis.el.removeEventListener(key, listener.handler);\n\t\t\t\tlistener.handler = null;\n\t\t\t}\n\t\t}\n\t}\n}\n","export default class ComponentFunctionBinder{\n\n\tconstructor(table){\n\t\tthis.table = table;\n\n\t\tthis.bindings = {};\n\t}\n\n\tbind(type, funcName, handler){\n\t\tif(!this.bindings[type]){\n\t\t\tthis.bindings[type] = {};\n\t\t}\n\n\t\tif(this.bindings[type][funcName]){\n\t\t\tconsole.warn(\"Unable to bind component handler, a matching function name is already bound\", type, funcName, handler);\n\t\t}else{\n\t\t\tthis.bindings[type][funcName] = handler;\n\t\t}\n\t}\n\n\thandle(type, component, name){\n\t\tif(this.bindings[type] && this.bindings[type][name] && typeof this.bindings[type][name].bind === 'function'){\n\t\t\treturn this.bindings[type][name].bind(null, component);\n\t\t}else{\n\t\t\tif(name !== \"then\" && typeof name === \"string\" && !name.startsWith(\"_\")){\n\t\t\t\tif(this.table.options.debugInvalidComponentFuncs){\n\t\t\t\t\tconsole.error(\"The \" + type + \" component does not have a \" + name + \" function, have you checked that you have the correct Tabulator module installed?\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","import CoreFeature from '../CoreFeature.js';\n\nexport default class DataLoader extends CoreFeature{\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.requestOrder = 0; //prevent requests coming out of sequence if overridden by another load request\n\t\tthis.loading = false;\n\t}\n\t\n\tinitialize(){}\n\t\n\tload(data, params, config, replace, silent, columnsChanged){\n\t\tvar requestNo = ++this.requestOrder;\n\n\t\tif(this.table.destroyed){\n\t\t\treturn Promise.resolve();\n\t\t}\n\t\t\n\t\tthis.dispatchExternal(\"dataLoading\", data);\n\t\t\n\t\t//parse json data to array\n\t\tif (data && (data.indexOf(\"{\") == 0 || data.indexOf(\"[\") == 0)){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\tif(this.confirm(\"data-loading\", [data, params, config, silent])){\n\t\t\tthis.loading = true;\n\t\t\t\n\t\t\tif(!silent){\n\t\t\t\tthis.alertLoader();\n\t\t\t}\n\t\t\t\n\t\t\t//get params for request\n\t\t\tparams = this.chain(\"data-params\", [data, config, silent], params || {}, params || {});\n\t\t\t\n\t\t\tparams = this.mapParams(params, this.table.options.dataSendParams);\n\t\t\t\n\t\t\tvar result = this.chain(\"data-load\", [data, params, config, silent], false, Promise.resolve([]));\n\t\t\t\n\t\t\treturn result.then((response) => {\n\t\t\t\tif(!this.table.destroyed){\n\t\t\t\t\tif(!Array.isArray(response) && typeof response == \"object\"){\n\t\t\t\t\t\tresponse = this.mapParams(response, this.objectInvert(this.table.options.dataReceiveParams));\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar rowData = this.chain(\"data-loaded\", [response], null, response);\n\t\t\t\t\t\n\t\t\t\t\tif(requestNo == this.requestOrder){\n\t\t\t\t\t\tthis.clearAlert();\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(rowData !== false){\n\t\t\t\t\t\t\tthis.dispatchExternal(\"dataLoaded\", rowData);\n\t\t\t\t\t\t\tthis.table.rowManager.setData(rowData,  replace, typeof columnsChanged === \"undefined\" ? !replace : columnsChanged);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made\");\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Data Load Response Blocked - Table has been destroyed\");\n\t\t\t\t}\n\t\t\t}).catch((error) => {\n\t\t\t\tconsole.error(\"Data Load Error: \", error);\n\t\t\t\tthis.dispatchExternal(\"dataLoadError\", error);\n\t\t\t\t\n\t\t\t\tif(!silent){\n\t\t\t\t\tthis.alertError();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.clearAlert();\n\t\t\t\t}, this.table.options.dataLoaderErrorTimeout);\n\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\tthis.loading = false;\n\t\t\t\t});\n\t\t}else{\n\t\t\tthis.dispatchExternal(\"dataLoaded\", data);\n\t\t\t\n\t\t\tif(!data){\n\t\t\t\tdata = [];\n\t\t\t}\n\t\t\t\n\t\t\tthis.table.rowManager.setData(data, replace, typeof columnsChanged === \"undefined\" ? !replace : columnsChanged);\n\t\t\treturn Promise.resolve();\n\t\t}\n\t}\n\t\n\tmapParams(params, map){\n\t\tvar output = {};\n\t\t\n\t\tfor(let key in params){\n\t\t\toutput[map.hasOwnProperty(key) ? map[key] : key] = params[key];\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tobjectInvert(obj){\n\t\tvar output = {};\n\t\t\n\t\tfor(let key in obj){\n\t\t\toutput[obj[key]] = key;\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tblockActiveLoad(){\n\t\tthis.requestOrder++;\n\t}\n\t\n\talertLoader(){\n\t\tvar shouldLoad = typeof this.table.options.dataLoader === \"function\" ? this.table.options.dataLoader() : this.table.options.dataLoader;\n\t\t\n\t\tif(shouldLoad){\n\t\t\tthis.table.alertManager.alert(this.table.options.dataLoaderLoading || this.langText(\"data|loading\"));\n\t\t}\n\t}\n\t\n\talertError(){\n\t\tthis.table.alertManager.alert(this.table.options.dataLoaderError || this.langText(\"data|error\"), \"error\");\n\t}\n\t\n\tclearAlert(){\n\t\tthis.table.alertManager.clear();\n\t}\n}","export default class ExternalEventBus {\n\n\tconstructor(table, optionsList, debug){\n\t\tthis.table = table;\n\t\tthis.events = {};\n\t\tthis.optionsList = optionsList || {};\n\t\tthis.subscriptionNotifiers = {};\n\n\t\tthis.dispatch = debug ? this._debugDispatch.bind(this) : this._dispatch.bind(this);\n\t\tthis.debug = debug;\n\t}\n\n\tsubscriptionChange(key, callback){\n\t\tif(!this.subscriptionNotifiers[key]){\n\t\t\tthis.subscriptionNotifiers[key] = [];\n\t\t}\n\n\t\tthis.subscriptionNotifiers[key].push(callback);\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis._notifySubscriptionChange(key, true);\n\t\t}\n\t}\n\n\tsubscribe(key, callback){\n\t\tif(!this.events[key]){\n\t\t\tthis.events[key] = [];\n\t\t}\n\n\t\tthis.events[key].push(callback);\n\n\t\tthis._notifySubscriptionChange(key, true);\n\t}\n\n\tunsubscribe(key, callback){\n\t\tvar index;\n\n\t\tif(this.events[key]){\n\t\t\tif(callback){\n\t\t\t\tindex = this.events[key].findIndex((item) => {\n\t\t\t\t\treturn item === callback;\n\t\t\t\t});\n\n\t\t\t\tif(index > -1){\n\t\t\t\t\tthis.events[key].splice(index, 1);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Cannot remove event, no matching event found:\", key, callback);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tdelete this.events[key];\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Cannot remove event, no events set on:\", key);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._notifySubscriptionChange(key, false);\n\t}\n\n\tsubscribed(key){\n\t\treturn this.events[key] && this.events[key].length;\n\t}\n\n\t_notifySubscriptionChange(key, subscribed){\n\t\tvar notifiers = this.subscriptionNotifiers[key];\n\n\t\tif(notifiers){\n\t\t\tnotifiers.forEach((callback)=>{\n\t\t\t\tcallback(subscribed);\n\t\t\t});\n\t\t}\n\t}\n\n\t_dispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args.shift(),\n\t\tresult;\n\n\t\tif(this.events[key]){\n\t\t\tthis.events[key].forEach((callback, i) => {\n\t\t\t\tlet callResult = callback.apply(this.table, args);\n\n\t\t\t\tif(!i){\n\t\t\t\t\tresult = callResult;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t_debugDispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"ExternalEvent:\" + args[0];\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._dispatch(...arguments);\n\t}\n}","export default class InternalEventBus {\n\n\tconstructor(debug){\n\t\tthis.events = {};\n\t\tthis.subscriptionNotifiers = {};\n\n\t\tthis.dispatch = debug ? this._debugDispatch.bind(this) : this._dispatch.bind(this);\n\t\tthis.chain = debug ? this._debugChain.bind(this) : this._chain.bind(this);\n\t\tthis.confirm = debug ? this._debugConfirm.bind(this) : this._confirm.bind(this);\n\t\tthis.debug = debug;\n\t}\n\n\tsubscriptionChange(key, callback){\n\t\tif(!this.subscriptionNotifiers[key]){\n\t\t\tthis.subscriptionNotifiers[key] = [];\n\t\t}\n\n\t\tthis.subscriptionNotifiers[key].push(callback);\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis._notifySubscriptionChange(key, true);\n\t\t}\n\t}\n\n\tsubscribe(key, callback, priority = 10000){\n\t\tif(!this.events[key]){\n\t\t\tthis.events[key] = [];\n\t\t}\n\n\t\tthis.events[key].push({callback, priority});\n\n\t\tthis.events[key].sort((a, b) => {\n\t\t\treturn a.priority - b.priority;\n\t\t});\n\n\t\tthis._notifySubscriptionChange(key, true);\n\t}\n\n\tunsubscribe(key, callback){\n\t\tvar index;\n\n\t\tif(this.events[key]){\n\t\t\tif(callback){\n\t\t\t\tindex = this.events[key].findIndex((item) => {\n\t\t\t\t\treturn item.callback === callback;\n\t\t\t\t});\n\n\t\t\t\tif(index > -1){\n\t\t\t\t\tthis.events[key].splice(index, 1);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Cannot remove event, no matching event found:\", key, callback);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Cannot remove event, no events set on:\", key);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._notifySubscriptionChange(key, false);\n\t}\n\n\tsubscribed(key){\n\t\treturn this.events[key] && this.events[key].length;\n\t}\n\n\t_chain(key, args, initialValue, fallback){\n\t\tvar value = initialValue;\n\n\t\tif(!Array.isArray(args)){\n\t\t\targs = [args];\n\t\t}\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis.events[key].forEach((subscriber, i) => {\n\t\t\t\tvalue = subscriber.callback.apply(this, args.concat([value]));\n\t\t\t});\n\n\t\t\treturn value;\n\t\t}else{\n\t\t\treturn typeof fallback === \"function\" ? fallback() : fallback;\n\t\t}\n\t}\n\n\t_confirm(key, args){\n\t\tvar confirmed = false;\n\n\t\tif(!Array.isArray(args)){\n\t\t\targs = [args];\n\t\t}\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis.events[key].forEach((subscriber, i) => {\n\t\t\t\tif(subscriber.callback.apply(this, args)){\n\t\t\t\t\tconfirmed = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn confirmed;\n\t}\n\n\t_notifySubscriptionChange(key, subscribed){\n\t\tvar notifiers = this.subscriptionNotifiers[key];\n\n\t\tif(notifiers){\n\t\t\tnotifiers.forEach((callback)=>{\n\t\t\t\tcallback(subscribed);\n\t\t\t});\n\t\t}\n\t}\n\n\t_dispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args.shift();\n\n\t\tif(this.events[key]){\n\t\t\tthis.events[key].forEach((subscriber) => {\n\t\t\t\tsubscriber.callback.apply(this, args);\n\t\t\t});\n\t\t}\n\t}\n\n\t_debugDispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"InternalEvent:\" + key;\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._dispatch(...arguments);\n\t}\n\n\t_debugChain(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"InternalEvent:\" + key;\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._chain(...arguments);\n\t}\n\n\t_debugConfirm(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"InternalEvent:\" + key;\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._confirm(...arguments);\n\t}\n}","import CoreFeature from '../CoreFeature.js';\n\nexport default class DeprecationAdvisor extends CoreFeature{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t}\n\t\n\t_warnUser(){\n\t\tif(this.options(\"debugDeprecation\")){\n\t\t\tconsole.warn(...arguments);\n\t\t}\n\t}\n\t\n\tcheck(oldOption, newOption, convert){\n\t\tvar msg = \"\";\n\t\t\n\t\tif(typeof this.options(oldOption) !== \"undefined\"){\n\t\t\tmsg = \"Deprecated Setup Option - Use of the %c\" + oldOption + \"%c option is now deprecated\";\n\t\t\t\n\t\t\tif(newOption){\n\t\t\t\tmsg = msg + \", Please use the %c\" + newOption + \"%c option instead\";\n\t\t\t\tthis._warnUser(msg, 'font-weight: bold;', 'font-weight: normal;', 'font-weight: bold;', 'font-weight: normal;');\n\n\t\t\t\tif(convert){\n\t\t\t\t\tthis.table.options[newOption] = this.table.options[oldOption];\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis._warnUser(msg, 'font-weight: bold;', 'font-weight: normal;');\n\t\t\t}\n\t\t\t\n\t\t\treturn false;\n\t\t}else{\n\t\t\treturn true;\n\t\t}\n\t}\n\t\n\tcheckMsg(oldOption, msg){\n\t\tif(typeof this.options(oldOption) !== \"undefined\"){\n\t\t\tthis._warnUser(\"%cDeprecated Setup Option - Use of the %c\" + oldOption + \" %c option is now deprecated, \" + msg, 'font-weight: normal;', 'font-weight: bold;', 'font-weight: normal;');\n\t\t\t\n\t\t\treturn false;\n\t\t}else{\n\t\t\treturn true;\n\t\t}\n\t}\n\t\n\tmsg(msg){\n\t\tthis._warnUser(msg);\n\t}\n}","//resize columns to fit data they contain\nexport default function(columns, forced){\n\tif(forced){\n\t\tthis.table.columnManager.renderer.reinitializeColumnWidths(columns);\n\t}\n\t\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\tthis.table.modules.responsiveLayout.update();\n\t}\n}","//resize columns to fit data they contain and stretch row to fill table, also used for fitDataTable\nexport default function(columns, forced){\n\tcolumns.forEach(function(column){\n\t\tcolumn.reinitializeWidth();\n\t});\n\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\tthis.table.modules.responsiveLayout.update();\n\t}\n}","//resize columns to fit data the contain and stretch last column to fill table\nexport default function(columns, forced){\n\tvar colsWidth = 0,\n\ttableWidth = this.table.rowManager.element.clientWidth,\n\tgap = 0,\n\tlastCol = false;\n\n\tcolumns.forEach((column, i) => {\n\t\tif(!column.widthFixed){\n\t\t\tcolumn.reinitializeWidth();\n\t\t}\n\n\t\tif(this.table.options.responsiveLayout ? column.modules.responsive.visible : column.visible){\n\t\t\tlastCol = column;\n\t\t}\n\n\t\tif(column.visible){\n\t\t\tcolsWidth += column.getWidth();\n\t\t}\n\t});\n\n\tif(lastCol){\n\t\tgap = tableWidth - colsWidth + lastCol.getWidth();\n\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\t\tlastCol.setWidth(0);\n\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t}\n\n\t\tif(gap > 0){\n\t\t\tlastCol.setWidth(gap);\n\t\t}else{\n\t\t\tlastCol.reinitializeWidth();\n\t\t}\n\t}else{\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t}\n\t}\n}","//resize columns to fit\nexport default function(columns, forced){\n\tvar totalWidth = this.table.rowManager.element.getBoundingClientRect().width; //table element width\n\tvar fixedWidth = 0; //total width of columns with a defined width\n\tvar flexWidth = 0; //total width available to flexible columns\n\tvar flexGrowUnits = 0; //total number of widthGrow blocks across all columns\n\tvar flexColWidth = 0; //desired width of flexible columns\n\tvar flexColumns = []; //array of flexible width columns\n\tvar fixedShrinkColumns = []; //array of fixed width columns that can shrink\n\tvar flexShrinkUnits = 0; //total number of widthShrink blocks across all columns\n\tvar overflowWidth = 0; //horizontal overflow width\n\tvar gapFill = 0; //number of pixels to be added to final column to close and half pixel gaps\n\n\tfunction calcWidth(width){\n\t\tvar colWidth;\n\n\t\tif(typeof(width) == \"string\"){\n\t\t\tif(width.indexOf(\"%\") > -1){\n\t\t\t\tcolWidth = (totalWidth / 100) * parseInt(width);\n\t\t\t}else{\n\t\t\t\tcolWidth = parseInt(width);\n\t\t\t}\n\t\t}else{\n\t\t\tcolWidth = width;\n\t\t}\n\n\t\treturn colWidth;\n\t}\n\n\t//ensure columns resize to take up the correct amount of space\n\tfunction scaleColumns(columns, freeSpace, colWidth, shrinkCols){\n\t\tvar oversizeCols = [],\n\t\toversizeSpace = 0,\n\t\tremainingSpace = 0,\n\t\tnextColWidth = 0,\n\t\tremainingFlexGrowUnits = flexGrowUnits,\n\t\tgap = 0,\n\t\tchangeUnits = 0,\n\t\tundersizeCols = [];\n\n\t\tfunction calcGrow(col){\n\t\t\treturn (colWidth * (col.column.definition.widthGrow || 1));\n\t\t}\n\n\t\tfunction calcShrink(col){\n\t\t\treturn  (calcWidth(col.width) - (colWidth * (col.column.definition.widthShrink || 0)));\n\t\t}\n\n\t\tcolumns.forEach(function(col, i){\n\t\t\tvar width = shrinkCols ? calcShrink(col) : calcGrow(col);\n\t\t\tif(col.column.minWidth >= width){\n\t\t\t\toversizeCols.push(col);\n\t\t\t}else{\n\t\t\t\tif(col.column.maxWidth && col.column.maxWidth < width){\n\t\t\t\t\tcol.width = col.column.maxWidth;\n\t\t\t\t\tfreeSpace -= col.column.maxWidth;\n\n\t\t\t\t\tremainingFlexGrowUnits -= shrinkCols ? (col.column.definition.widthShrink || 1) : (col.column.definition.widthGrow || 1);\n\n\t\t\t\t\tif(remainingFlexGrowUnits){\n\t\t\t\t\t\tcolWidth = Math.floor(freeSpace/remainingFlexGrowUnits);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tundersizeCols.push(col);\n\t\t\t\t\tchangeUnits += shrinkCols ? (col.column.definition.widthShrink || 1) : (col.column.definition.widthGrow || 1);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(oversizeCols.length){\n\t\t\toversizeCols.forEach(function(col){\n\t\t\t\toversizeSpace += shrinkCols ?  col.width - col.column.minWidth : col.column.minWidth;\n\t\t\t\tcol.width = col.column.minWidth;\n\t\t\t});\n\n\t\t\tremainingSpace = freeSpace - oversizeSpace;\n\n\t\t\tnextColWidth = changeUnits ? Math.floor(remainingSpace/changeUnits) : remainingSpace;\n\n\t\t\tgap = scaleColumns(undersizeCols, remainingSpace, nextColWidth, shrinkCols);\n\t\t}else{\n\t\t\tgap = changeUnits ? freeSpace - (Math.floor(freeSpace/changeUnits) * changeUnits) : freeSpace;\n\n\t\t\tundersizeCols.forEach(function(column){\n\t\t\t\tcolumn.width = shrinkCols ? calcShrink(column) : calcGrow(column);\n\t\t\t});\n\t\t}\n\n\t\treturn gap;\n\t}\n\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\tthis.table.modules.responsiveLayout.update();\n\t}\n\n\t//adjust for vertical scrollbar if present\n\tif(this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight){\n\t\ttotalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\n\t}\n\n\tcolumns.forEach(function(column){\n\t\tvar width, minWidth, colWidth;\n\n\t\tif(column.visible){\n\n\t\t\twidth = column.definition.width;\n\t\t\tminWidth =  parseInt(column.minWidth);\n\n\t\t\tif(width){\n\n\t\t\t\tcolWidth = calcWidth(width);\n\n\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\n\n\t\t\t\tif(column.definition.widthShrink){\n\t\t\t\t\tfixedShrinkColumns.push({\n\t\t\t\t\t\tcolumn:column,\n\t\t\t\t\t\twidth:colWidth > minWidth ? colWidth : minWidth\n\t\t\t\t\t});\n\t\t\t\t\tflexShrinkUnits += column.definition.widthShrink;\n\t\t\t\t}\n\n\t\t\t}else{\n\t\t\t\tflexColumns.push({\n\t\t\t\t\tcolumn:column,\n\t\t\t\t\twidth:0,\n\t\t\t\t});\n\t\t\t\tflexGrowUnits += column.definition.widthGrow || 1;\n\t\t\t}\n\t\t}\n\t});\n\n\t//calculate available space\n\tflexWidth = totalWidth - fixedWidth;\n\n\t//calculate correct column size\n\tflexColWidth = Math.floor(flexWidth / flexGrowUnits);\n\n\t//generate column widths\n\tgapFill = scaleColumns(flexColumns, flexWidth, flexColWidth, false);\n\n\t//increase width of last column to account for rounding errors\n\tif(flexColumns.length && gapFill > 0){\n\t\tflexColumns[flexColumns.length-1].width += gapFill;\n\t}\n\n\t//calculate space for columns to be shrunk into\n\tflexColumns.forEach(function(col){\n\t\tflexWidth -= col.width;\n\t});\n\n\toverflowWidth = Math.abs(gapFill) + flexWidth;\n\n\t//shrink oversize columns if there is no available space\n\tif(overflowWidth > 0 && flexShrinkUnits){\n\t\tgapFill = scaleColumns(fixedShrinkColumns, overflowWidth, Math.floor(overflowWidth / flexShrinkUnits), true);\n\t}\n\n\t//decrease width of last column to account for rounding errors\n\tif(gapFill && fixedShrinkColumns.length){\n\t\tfixedShrinkColumns[fixedShrinkColumns.length-1].width -= gapFill;\n\t}\n\n\tflexColumns.forEach(function(col){\n\t\tcol.column.setWidth(col.width);\n\t});\n\n\tfixedShrinkColumns.forEach(function(col){\n\t\tcol.column.setWidth(col.width);\n\t});\n}\n","import fitData from './modes/fitData.js';\nimport fitDataGeneral from './modes/fitDataGeneral.js';\nimport fitDataStretch from './modes/fitDataStretch.js';\nimport fitColumns from './modes/fitColumns.js';\n\nexport default {\n\tfitData:fitData,\n\tfitDataFill:fitDataGeneral,\n\tfitDataTable:fitDataGeneral,\n\tfitDataStretch:fitDataStretch,\n\tfitColumns:fitColumns ,\n};","import Module from '../../core/Module.js';\n\nimport defaultModes from './defaults/modes.js';\n\nexport default class Layout extends Module{\n\n\tstatic moduleName = \"layout\";\n\n\t//load defaults\n\tstatic modes = defaultModes;\n\n\tconstructor(table){\n\t\tsuper(table, \"layout\");\n\n\t\tthis.mode = null;\n\n\t\tthis.registerTableOption(\"layout\", \"fitData\"); //layout type\n\t\tthis.registerTableOption(\"layoutColumnsOnNewData\", false); //update column widths on setData\n\n\t\tthis.registerColumnOption(\"widthGrow\");\n\t\tthis.registerColumnOption(\"widthShrink\");\n\t}\n\n\t//initialize layout system\n\tinitialize(){\n\t\tvar layout = this.table.options.layout;\n\n\t\tif(Layout.modes[layout]){\n\t\t\tthis.mode = layout;\n\t\t}else{\n\t\t\tconsole.warn(\"Layout Error - invalid mode set, defaulting to 'fitData' : \" + layout);\n\t\t\tthis.mode = 'fitData';\n\t\t}\n\n\t\tthis.table.element.setAttribute(\"tabulator-layout\", this.mode);\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\n\tinitializeColumn(column){\n\t\tif(column.definition.widthGrow){\n\t\t\tcolumn.definition.widthGrow = Number(column.definition.widthGrow);\n\t\t}\n\t\tif(column.definition.widthShrink){\n\t\t\tcolumn.definition.widthShrink = Number(column.definition.widthShrink);\n\t\t}\n\t}\n\n\tgetMode(){\n\t\treturn this.mode;\n\t}\n\n\t//trigger table layout\n\tlayout(dataChanged){\n\t\tthis.dispatch(\"layout-refreshing\");\n\t\tLayout.modes[this.mode].call(this, this.table.columnManager.columnsByIndex, dataChanged);\n\t\tthis.dispatch(\"layout-refreshed\");\n\t}\n}","export default {\n\t\"default\":{ //hold default locale text\n\t\t\"groups\":{\n\t\t\t\"item\":\"item\",\n\t\t\t\"items\":\"items\",\n\t\t},\n\t\t\"columns\":{\n\t\t},\n\t\t\"data\":{\n\t\t\t\"loading\":\"Loading\",\n\t\t\t\"error\":\"Error\",\n\t\t},\n\t\t\"pagination\":{\n\t\t\t\"page_size\":\"Page Size\",\n\t\t\t\"page_title\":\"Show Page\",\n\t\t\t\"first\":\"First\",\n\t\t\t\"first_title\":\"First Page\",\n\t\t\t\"last\":\"Last\",\n\t\t\t\"last_title\":\"Last Page\",\n\t\t\t\"prev\":\"Prev\",\n\t\t\t\"prev_title\":\"Prev Page\",\n\t\t\t\"next\":\"Next\",\n\t\t\t\"next_title\":\"Next Page\",\n\t\t\t\"all\":\"All\",\n\t\t\t\"counter\":{\n\t\t\t\t\"showing\": \"Showing\",\n\t\t\t\t\"of\": \"of\",\n\t\t\t\t\"rows\": \"rows\",\n\t\t\t\t\"pages\": \"pages\",\n\t\t\t}\n\t\t},\n\t\t\"headerFilters\":{\n\t\t\t\"default\":\"filter column...\",\n\t\t\t\"columns\":{}\n\t\t}\n\t},\n};","import Module from '../../core/Module.js';\n\nimport Helpers from '../../core/tools/Helpers.js';\n\nimport defaultLangs from './defaults/langs.js';\n\nexport default class Localize extends Module{\n\n\tstatic moduleName = \"localize\";\n\n\t//load defaults\n\tstatic langs = defaultLangs;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.locale = \"default\"; //current locale\n\t\tthis.lang = false; //current language\n\t\tthis.bindings = {}; //update events to call when locale is changed\n\t\tthis.langList = {};\n\n\t\tthis.registerTableOption(\"locale\", false); //current system language\n\t\tthis.registerTableOption(\"langs\", {});\n\t}\n\n\tinitialize(){\n\t\tthis.langList = Helpers.deepClone(Localize.langs);\n\n\t\tif(this.table.options.columnDefaults.headerFilterPlaceholder !== false){\n\t\t\tthis.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);\n\t\t}\n\n\t\tfor(let locale in this.table.options.langs){\n\t\t\tthis.installLang(locale, this.table.options.langs[locale]);\n\t\t}\n\n\t\tthis.setLocale(this.table.options.locale);\n\n\t\tthis.registerTableFunction(\"setLocale\", this.setLocale.bind(this));\n\t\tthis.registerTableFunction(\"getLocale\", this.getLocale.bind(this));\n\t\tthis.registerTableFunction(\"getLang\", this.getLang.bind(this));\n\t}\n\n\t//set header placeholder\n\tsetHeaderFilterPlaceholder(placeholder){\n\t\tthis.langList.default.headerFilters.default = placeholder;\n\t}\n\n\t//setup a lang description object\n\tinstallLang(locale, lang){\n\t\tif(this.langList[locale]){\n\t\t\tthis._setLangProp(this.langList[locale], lang);\n\t\t}else{\n\t\t\tthis.langList[locale] = lang;\n\t\t}\n\t}\n\n\t_setLangProp(lang, values){\n\t\tfor(let key in values){\n\t\t\tif(lang[key] && typeof lang[key] == \"object\"){\n\t\t\t\tthis._setLangProp(lang[key], values[key]);\n\t\t\t}else{\n\t\t\t\tlang[key] = values[key];\n\t\t\t}\n\t\t}\n\t}\n\n\t//set current locale\n\tsetLocale(desiredLocale){\n\t\tdesiredLocale = desiredLocale || \"default\";\n\n\t\t//fill in any matching language values\n\t\tfunction traverseLang(trans, path){\n\t\t\tfor(var prop in trans){\n\t\t\t\tif(typeof trans[prop] == \"object\"){\n\t\t\t\t\tif(!path[prop]){\n\t\t\t\t\t\tpath[prop] = {};\n\t\t\t\t\t}\n\t\t\t\t\ttraverseLang(trans[prop], path[prop]);\n\t\t\t\t}else{\n\t\t\t\t\tpath[prop] = trans[prop];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//determining correct locale to load\n\t\tif(desiredLocale === true && navigator.language){\n\t\t\t//get local from system\n\t\t\tdesiredLocale = navigator.language.toLowerCase();\n\t\t}\n\n\t\tif(desiredLocale){\n\t\t\t//if locale is not set, check for matching top level locale else use default\n\t\t\tif(!this.langList[desiredLocale]){\n\t\t\t\tlet prefix = desiredLocale.split(\"-\")[0];\n\n\t\t\t\tif(this.langList[prefix]){\n\t\t\t\t\tconsole.warn(\"Localization Error - Exact matching locale not found, using closest match: \", desiredLocale, prefix);\n\t\t\t\t\tdesiredLocale = prefix;\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Localization Error - Matching locale not found, using default: \", desiredLocale);\n\t\t\t\t\tdesiredLocale = \"default\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.locale = desiredLocale;\n\n\t\t//load default lang template\n\t\tthis.lang = Helpers.deepClone(this.langList.default || {});\n\n\t\tif(desiredLocale != \"default\"){\n\t\t\ttraverseLang(this.langList[desiredLocale], this.lang);\n\t\t}\n\n\t\tthis.dispatchExternal(\"localized\", this.locale, this.lang);\n\n\t\tthis._executeBindings();\n\t}\n\n\t//get current locale\n\tgetLocale(locale){\n\t\treturn this.locale;\n\t}\n\n\t//get lang object for given local or current if none provided\n\tgetLang(locale){\n\t\treturn locale ? this.langList[locale] : this.lang;\n\t}\n\n\t//get text for current locale\n\tgetText(path, value){\n\t\tvar fillPath = value ? path + \"|\" + value : path,\n\t\tpathArray = fillPath.split(\"|\"),\n\t\ttext = this._getLangElement(pathArray, this.locale);\n\n\t\t// if(text === false){\n\t\t// \tconsole.warn(\"Localization Error - Matching localized text not found for given path: \", path);\n\t\t// }\n\n\t\treturn text || \"\";\n\t}\n\n\t//traverse langs object and find localized copy\n\t_getLangElement(path, locale){\n\t\tvar root = this.lang;\n\n\t\tpath.forEach(function(level){\n\t\t\tvar rootPath;\n\n\t\t\tif(root){\n\t\t\t\trootPath = root[level];\n\n\t\t\t\tif(typeof rootPath != \"undefined\"){\n\t\t\t\t\troot = rootPath;\n\t\t\t\t}else{\n\t\t\t\t\troot = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn root;\n\t}\n\n\t//set update binding\n\tbind(path, callback){\n\t\tif(!this.bindings[path]){\n\t\t\tthis.bindings[path] = [];\n\t\t}\n\n\t\tthis.bindings[path].push(callback);\n\n\t\tcallback(this.getText(path), this.lang);\n\t}\n\n\t//iterate through bindings and trigger updates\n\t_executeBindings(){\n\t\tfor(let path in this.bindings){\n\t\t\tthis.bindings[path].forEach((binding) => {\n\t\t\t\tbinding(this.getText(path), this.lang);\n\t\t\t});\n\t\t}\n\t}\n}","import Module from '../../core/Module.js';\n\nexport default class Comms extends Module{\n\n\tstatic moduleName = \"comms\";\n\n\tconstructor(table){\n\t\tsuper(table);\n\t}\n\n\tinitialize(){\n\t\tthis.registerTableFunction(\"tableComms\", this.receive.bind(this));\n\t}\n\n\tgetConnections(selectors){\n\t\tvar connections = [],\n\t\tconnection;\n\n\t\tconnection = this.table.constructor.registry.lookupTable(selectors);\n\n\t\tconnection.forEach((con) =>{\n\t\t\tif(this.table !== con){\n\t\t\t\tconnections.push(con);\n\t\t\t}\n\t\t});\n\n\t\treturn connections;\n\t}\n\n\tsend(selectors, module, action, data){\n\t\tvar connections = this.getConnections(selectors);\n\n\t\tconnections.forEach((connection) => {\n\t\t\tconnection.tableComms(this.table.element, module, action, data);\n\t\t});\n\n\t\tif(!connections.length && selectors){\n\t\t\tconsole.warn(\"Table Connection Error - No tables matching selector found\", selectors);\n\t\t}\n\t}\n\n\treceive(table, module, action, data){\n\t\tif(this.table.modExists(module)){\n\t\t\treturn this.table.modules[module].commsReceived(table, action, data);\n\t\t}else{\n\t\t\tconsole.warn(\"Inter-table Comms Error - no such module:\", module);\n\t\t}\n\t}\n}","export default class TableRegistry {\n\tstatic registry = {\n\t\ttables:[],\n\t\t\n\t\tregister(table){\n\t\t\tTableRegistry.registry.tables.push(table);\n\t\t},\n\t\t\n\t\tderegister(table){\n\t\t\tvar index = TableRegistry.registry.tables.indexOf(table);\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\tTableRegistry.registry.tables.splice(index, 1);\n\t\t\t}\n\t\t},\n\t\t\n\t\tlookupTable(query, silent){\n\t\t\tvar results = [],\n\t\t\tmatches, match;\n\t\t\t\n\t\t\tif(typeof query === \"string\"){\n\t\t\t\tmatches = document.querySelectorAll(query);\n\t\t\t\t\n\t\t\t\tif(matches.length){\n\t\t\t\t\tfor(var i = 0; i < matches.length; i++){\n\t\t\t\t\t\tmatch = TableRegistry.registry.matchElement(matches[i]);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(match){\n\t\t\t\t\t\t\tresults.push(match);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}else if((typeof HTMLElement !== \"undefined\" && query instanceof HTMLElement) || query instanceof TableRegistry){\n\t\t\t\tmatch = TableRegistry.registry.matchElement(query);\n\t\t\t\t\n\t\t\t\tif(match){\n\t\t\t\t\tresults.push(match);\n\t\t\t\t}\n\t\t\t}else if(Array.isArray(query)){\n\t\t\t\tquery.forEach(function(item){\n\t\t\t\t\tresults = results.concat(TableRegistry.registry.lookupTable(item));\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tif(!silent){\n\t\t\t\t\tconsole.warn(\"Table Connection Error - Invalid Selector\", query);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn results;\n\t\t},\n\t\t\n\t\tmatchElement(element){\n\t\t\treturn TableRegistry.registry.tables.find(function(table){\n\t\t\t\treturn element instanceof TableRegistry ? table === element : table.element === element;\n\t\t\t});\n\t\t}\n\t};\n\n\t\t\n\tstatic findTable(query){\n\t\tvar results = TableRegistry.registry.lookupTable(query, true);\n\t\treturn Array.isArray(results) && !results.length ? false : results;\n\t}\n}","import * as coreModules from '../modules/core.js';\nimport TableRegistry from './TableRegistry.js';\n\nexport default class ModuleBinder extends TableRegistry {\n\t\n\tstatic moduleBindings = {};\n\tstatic moduleExtensions = {};\n\tstatic modulesRegistered = false;\n\t\n\tstatic defaultModules = false;\n\t\n\tconstructor(){\n\t\tsuper();\n\t}\n\t\n\tstatic initializeModuleBinder(defaultModules){\n\t\tif(!ModuleBinder.modulesRegistered){\n\t\t\tModuleBinder.modulesRegistered = true;\n\t\t\tModuleBinder._registerModules(coreModules, true);\n\t\t\t\n\t\t\tif(defaultModules){\n\t\t\t\tModuleBinder._registerModules(defaultModules);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tstatic _extendModule(name, property, values){\n\t\tif(ModuleBinder.moduleBindings[name]){\n\t\t\tvar source = ModuleBinder.moduleBindings[name][property];\n\t\t\t\n\t\t\tif(source){\n\t\t\t\tif(typeof values == \"object\"){\n\t\t\t\t\tfor(let key in values){\n\t\t\t\t\t\tsource[key] = values[key];\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Module Error - Invalid value type, it must be an object\");\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Module Error - property does not exist:\", property);\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Module Error - module does not exist:\", name);\n\t\t}\n\t}\n\t\n\tstatic _registerModules(modules, core){\n\t\tvar mods = Object.values(modules);\n\t\t\n\t\tif(core){\n\t\t\tmods.forEach((mod) => {\n\t\t\t\tmod.prototype.moduleCore = true;\n\t\t\t});\n\t\t}\n\t\t\n\t\tModuleBinder._registerModule(mods);\n\t}\n\t\n\tstatic _registerModule(modules){\n\t\tif(!Array.isArray(modules)){\n\t\t\tmodules = [modules];\n\t\t}\n\t\t\n\t\tmodules.forEach((mod) => {\n\t\t\tModuleBinder._registerModuleBinding(mod);\n\t\t\tModuleBinder._registerModuleExtensions(mod);\n\t\t});\n\t}\n\t\n\tstatic _registerModuleBinding(mod){\n\t\tif(mod.moduleName){\n\t\t\tModuleBinder.moduleBindings[mod.moduleName] = mod;\n\t\t}else{\n\t\t\tconsole.error(\"Unable to bind module, no moduleName defined\", mod.moduleName);\n\t\t}\n\t}\n\t\n\tstatic _registerModuleExtensions(mod){\n\t\tvar extensions = mod.moduleExtensions;\n\t\t\n\t\tif(mod.moduleExtensions){\n\t\t\tfor (let modKey in extensions) {\n\t\t\t\tlet ext = extensions[modKey];\n\t\t\t\t\n\t\t\t\tif(ModuleBinder.moduleBindings[modKey]){\n\t\t\t\t\tfor (let propKey in ext) {\n\t\t\t\t\t\tModuleBinder._extendModule(modKey, propKey, ext[propKey]);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif(!ModuleBinder.moduleExtensions[modKey]){\n\t\t\t\t\t\tModuleBinder.moduleExtensions[modKey] = {};\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tfor (let propKey in ext) {\n\t\t\t\t\t\tif(!ModuleBinder.moduleExtensions[modKey][propKey]){\n\t\t\t\t\t\t\tModuleBinder.moduleExtensions[modKey][propKey] = {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tObject.assign(ModuleBinder.moduleExtensions[modKey][propKey], ext[propKey]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tModuleBinder._extendModuleFromQueue(mod);\n\t}\n\t\n\tstatic _extendModuleFromQueue(mod){\n\t\tvar extensions = ModuleBinder.moduleExtensions[mod.moduleName];\n\t\t\n\t\tif(extensions){\n\t\t\tfor (let propKey in extensions) {\n\t\t\t\tModuleBinder._extendModule(mod.moduleName, propKey, extensions[propKey]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//ensure that module are bound to instantiated function\n\t_bindModules(){\n\t\tvar orderedStartMods = [],\n\t\torderedEndMods = [],\n\t\tunOrderedMods = [];\n\t\t\n\t\tthis.modules = {};\n\t\t\n\t\tfor(var name in ModuleBinder.moduleBindings){\n\t\t\tlet mod = ModuleBinder.moduleBindings[name];\n\t\t\tlet module = new mod(this);\n\t\t\t\n\t\t\tthis.modules[name] = module;\n\t\t\t\n\t\t\tif(mod.prototype.moduleCore){\n\t\t\t\tthis.modulesCore.push(module);\n\t\t\t}else{\n\t\t\t\tif(mod.moduleInitOrder){\n\t\t\t\t\tif(mod.moduleInitOrder < 0){\n\t\t\t\t\t\torderedStartMods.push(module);\n\t\t\t\t\t}else{\n\t\t\t\t\t\torderedEndMods.push(module);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\tunOrderedMods.push(module);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\torderedStartMods.sort((a, b) => a.moduleInitOrder > b.moduleInitOrder ? 1 : -1);\n\t\torderedEndMods.sort((a, b) => a.moduleInitOrder > b.moduleInitOrder ? 1 : -1);\n\t\t\n\t\tthis.modulesRegular = orderedStartMods.concat(unOrderedMods.concat(orderedEndMods));\n\t}\n}","import CoreFeature from '../CoreFeature.js';\n\nexport default class Alert extends CoreFeature{\n\tconstructor(table){\n\t\tsuper(table);\n        \n\t\tthis.element = this._createAlertElement();\n\t\tthis.msgElement = this._createMsgElement();\n\t\tthis.type = null;\n        \n\t\tthis.element.appendChild(this.msgElement);\n\t}\n    \n\t_createAlertElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-alert\");\n\t\treturn el;\n\t}\n    \n\t_createMsgElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-alert-msg\");\n\t\tel.setAttribute(\"role\", \"alert\");\n\t\treturn el;\n\t}\n    \n\t_typeClass(){\n\t\treturn \"tabulator-alert-state-\" + this.type;\n\t}\n    \n\talert(content, type = \"msg\"){\n\t\tif(content){\n\t\t\tthis.clear();\n\n\t\t\tthis.dispatch(\"alert-show\", type);\n            \n\t\t\tthis.type = type;\n            \n\t\t\twhile(this.msgElement.firstChild) this.msgElement.removeChild(this.msgElement.firstChild);\n            \n\t\t\tthis.msgElement.classList.add(this._typeClass());\n            \n\t\t\tif(typeof content === \"function\"){\n\t\t\t\tcontent = content();\n\t\t\t}\n            \n\t\t\tif(content instanceof HTMLElement){\n\t\t\t\tthis.msgElement.appendChild(content);\n\t\t\t}else{\n\t\t\t\tthis.msgElement.innerHTML = content;\n\t\t\t}\n            \n\t\t\tthis.table.element.appendChild(this.element);\n\t\t}\n\t}\n    \n\tclear(){\n\t\tthis.dispatch(\"alert-hide\", this.type);\n\n\t\tif(this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n        \n\t\tthis.msgElement.classList.remove(this._typeClass());\n\t}\n}","'use strict';\n\nimport defaultOptions from './defaults/options.js';\n\nimport ColumnManager from './ColumnManager.js';\nimport RowManager from './RowManager.js';\nimport FooterManager from './FooterManager.js';\n\nimport InteractionMonitor from './tools/InteractionMonitor.js';\nimport ComponentFunctionBinder from './tools/ComponentFunctionBinder.js';\nimport DataLoader from './tools/DataLoader.js';\n\nimport ExternalEventBus from './tools/ExternalEventBus.js';\nimport InternalEventBus from './tools/InternalEventBus.js';\n\nimport DeprecationAdvisor from './tools/DeprecationAdvisor.js';\n\nimport ModuleBinder from './tools/ModuleBinder.js';\n\nimport OptionsList from './tools/OptionsList.js';\n\nimport Alert from './tools/Alert.js';\n\nclass Tabulator extends ModuleBinder{\n\n\t//default setup options\n\tstatic defaultOptions = defaultOptions;\n\n\tstatic extendModule(){\n\t\tTabulator.initializeModuleBinder();\n\t\tTabulator._extendModule(...arguments);\n\t}\n\n\tstatic registerModule(){\n\t\tTabulator.initializeModuleBinder();\n\t\tTabulator._registerModule(...arguments);\n\t}\n\n\tconstructor(element, options, modules){\n\t\tsuper();\n\n\t\tTabulator.initializeModuleBinder(modules);\n\n\t\tthis.options = {};\n\t\t\n\t\tthis.columnManager = null; // hold Column Manager\n\t\tthis.rowManager = null; //hold Row Manager\n\t\tthis.footerManager = null; //holder Footer Manager\n\t\tthis.alertManager = null; //hold Alert Manager\n\t\tthis.vdomHoz  = null; //holder horizontal virtual dom\n\t\tthis.externalEvents = null; //handle external event messaging\n\t\tthis.eventBus = null; //handle internal event messaging\n\t\tthis.interactionMonitor = false; //track user interaction\n\t\tthis.browser = \"\"; //hold current browser type\n\t\tthis.browserSlow = false; //handle reduced functionality for slower browsers\n\t\tthis.browserMobile = false; //check if running on mobile, prevent resize cancelling edit on keyboard appearance\n\t\tthis.rtl = false; //check if the table is in RTL mode\n\t\tthis.originalElement = null; //hold original table element if it has been replaced\n\t\t\n\t\tthis.componentFunctionBinder = new ComponentFunctionBinder(this); //bind component functions\n\t\tthis.dataLoader = false; //bind component functions\n\t\t\n\t\tthis.modules = {}; //hold all modules bound to this table\n\t\tthis.modulesCore = []; //hold core modules bound to this table (for initialization purposes)\n\t\tthis.modulesRegular = []; //hold regular modules bound to this table (for initialization purposes)\n\t\t\n\t\tthis.deprecationAdvisor = new DeprecationAdvisor(this);\n\t\tthis.optionsList = new OptionsList(this, \"table constructor\");\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.destroyed = false;\n\t\t\n\t\tif(this.initializeElement(element)){\n\t\t\t\n\t\t\tthis.initializeCoreSystems(options);\n\t\t\t\n\t\t\t//delay table creation to allow event bindings immediately after the constructor\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis._create();\n\t\t\t});\n\t\t}\n\t\t\n\t\tthis.constructor.registry.register(this); //register table for inter-device communication\n\t}\n\t\n\tinitializeElement(element){\n\t\tif(typeof HTMLElement !== \"undefined\" && element instanceof HTMLElement){\n\t\t\tthis.element = element;\n\t\t\treturn true;\n\t\t}else if(typeof element === \"string\"){\n\t\t\tthis.element = document.querySelector(element);\n\t\t\t\n\t\t\tif(this.element){\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\tconsole.error(\"Tabulator Creation Error - no element found matching selector: \", element);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.error(\"Tabulator Creation Error - Invalid element provided:\", element);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tinitializeCoreSystems(options){\n\t\tthis.columnManager = new ColumnManager(this);\n\t\tthis.rowManager = new RowManager(this);\n\t\tthis.footerManager = new FooterManager(this);\n\t\tthis.dataLoader = new DataLoader(this);\n\t\tthis.alertManager = new Alert(this);\n\t\t\n\t\tthis._bindModules();\n\t\t\n\t\tthis.options = this.optionsList.generate(Tabulator.defaultOptions, options);\n\t\t\n\t\tthis._clearObjectPointers();\n\t\t\n\t\tthis._mapDeprecatedFunctionality();\n\t\t\n\t\tthis.externalEvents = new ExternalEventBus(this, this.options, this.options.debugEventsExternal);\n\t\tthis.eventBus = new InternalEventBus(this.options.debugEventsInternal);\n\t\t\n\t\tthis.interactionMonitor = new InteractionMonitor(this);\n\t\t\n\t\tthis.dataLoader.initialize();\n\t\t// this.columnManager.initialize();\n\t\t// this.rowManager.initialize();\n\t\tthis.footerManager.initialize();\n\t}\n\t\n\t//convert deprecated functionality to new functions\n\t_mapDeprecatedFunctionality(){\n\t\t//all previously deprecated functionality removed in the 6.0 release\n\t}\n\t\n\t_clearSelection(){\n\t\t\n\t\tthis.element.classList.add(\"tabulator-block-select\");\n\t\t\n\t\tif (window.getSelection) {\n\t\t\tif (window.getSelection().empty) {  // Chrome\n\t\t\t\twindow.getSelection().empty();\n\t\t\t} else if (window.getSelection().removeAllRanges) {  // Firefox\n\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t}\n\t\t} else if (document.selection) {  // IE?\n\t\t\tdocument.selection.empty();\n\t\t}\n\t\t\n\t\tthis.element.classList.remove(\"tabulator-block-select\");\n\t}\n\t\n\t//create table\n\t_create(){\n\t\tthis.externalEvents.dispatch(\"tableBuilding\");\n\t\tthis.eventBus.dispatch(\"table-building\");\n\t\t\n\t\tthis._rtlCheck();\n\t\t\n\t\tthis._buildElement();\n\t\t\n\t\tthis._initializeTable();\n\n\t\tthis.initialized = true;\n\t\t\n\t\tthis._loadInitialData()\n\t\t\t.finally(() => {\n\t\t\t\tthis.eventBus.dispatch(\"table-initialized\");\n\t\t\t\tthis.externalEvents.dispatch(\"tableBuilt\");\n\t\t\t});\t\n\t}\n\t\n\t_rtlCheck(){\n\t\tvar style = window.getComputedStyle(this.element);\n\t\t\n\t\tswitch(this.options.textDirection){\n\t\t\tcase\"auto\":\n\t\t\t\tif(style.direction !== \"rtl\"){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\n\t\t\tcase \"rtl\":\n\t\t\t\tthis.element.classList.add(\"tabulator-rtl\");\n\t\t\t\tthis.rtl = true;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"ltr\":\n\t\t\t\tthis.element.classList.add(\"tabulator-ltr\");\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tthis.rtl = false;\n\t\t}\n\t}\n\t\n\t//clear pointers to objects in default config object\n\t_clearObjectPointers(){\n\t\tthis.options.columns = this.options.columns.slice(0);\n\t\t\n\t\tif(Array.isArray(this.options.data) && !this.options.reactiveData){\n\t\t\tthis.options.data = this.options.data.slice(0);\n\t\t}\n\t}\n\t\n\t//build tabulator element\n\t_buildElement(){\n\t\tvar element = this.element,\n\t\toptions = this.options,\n\t\tnewElement;\n\t\t\n\t\tif(element.tagName === \"TABLE\"){\n\t\t\tthis.originalElement = this.element;\n\t\t\tnewElement = document.createElement(\"div\");\n\t\t\t\n\t\t\t//transfer attributes to new element\n\t\t\tvar attributes = element.attributes;\n\t\t\t\n\t\t\t// loop through attributes and apply them on div\n\t\t\tfor(var i in attributes){\n\t\t\t\tif(typeof attributes[i] == \"object\"){\n\t\t\t\t\tnewElement.setAttribute(attributes[i].name, attributes[i].value);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// replace table with div element\n\t\t\telement.parentNode.replaceChild(newElement, element);\n\t\t\t\n\t\t\tthis.element = element = newElement;\n\t\t}\n\t\t\n\t\telement.classList.add(\"tabulator\");\n\t\telement.setAttribute(\"role\", \"grid\");\n\t\t\n\t\t//empty element\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\t\n\t\t//set table height\n\t\tif(options.height){\n\t\t\toptions.height = isNaN(options.height) ? options.height : options.height + \"px\";\n\t\t\telement.style.height = options.height;\n\t\t}\n\t\t\n\t\t//set table min height\n\t\tif(options.minHeight !== false){\n\t\t\toptions.minHeight = isNaN(options.minHeight) ? options.minHeight : options.minHeight + \"px\";\n\t\t\telement.style.minHeight = options.minHeight;\n\t\t}\n\t\t\n\t\t//set table maxHeight\n\t\tif(options.maxHeight !== false){\n\t\t\toptions.maxHeight = isNaN(options.maxHeight) ? options.maxHeight : options.maxHeight + \"px\";\n\t\t\telement.style.maxHeight = options.maxHeight;\n\t\t}\n\t}\n\t\n\t//initialize core systems and modules\n\t_initializeTable(){\n\t\tvar element = this.element,\n\t\toptions = this.options;\n\t\t\n\t\tthis.interactionMonitor.initialize();\n\t\t\n\t\tthis.columnManager.initialize();\n\t\tthis.rowManager.initialize();\n\t\t\n\t\tthis._detectBrowser();\n\t\t\n\t\t//initialize core modules\n\t\tthis.modulesCore.forEach((mod) => {\n\t\t\tmod.initialize();\n\t\t});\n\t\t\n\t\t//build table elements\n\t\telement.appendChild(this.columnManager.getElement());\n\t\telement.appendChild(this.rowManager.getElement());\n\t\t\n\t\tif(options.footerElement){\n\t\t\tthis.footerManager.activate();\n\t\t}\n\t\t\n\t\tif(options.autoColumns && options.data){\n\t\t\t\n\t\t\tthis.columnManager.generateColumnsFromRowData(this.options.data);\n\t\t}\n\t\t\n\t\t//initialize regular modules\n\t\tthis.modulesRegular.forEach((mod) => {\n\t\t\tmod.initialize();\n\t\t});\n\t\t\n\t\tthis.columnManager.setColumns(options.columns);\n\t\t\n\t\tthis.eventBus.dispatch(\"table-built\");\n\t}\n\t\n\t_loadInitialData(){\n\t\treturn this.dataLoader.load(this.options.data)\n\t\t\t.finally(() => {\n\t\t\t\tthis.columnManager.verticalAlignHeaders();\n\t\t\t});\t\t\n\t}\n\t\n\t//deconstructor\n\tdestroy(){\n\t\tvar element = this.element;\n\t\t\n\t\tthis.destroyed = true;\n\t\t\n\t\tthis.constructor.registry.deregister(this); //deregister table from inter-device communication\n\t\t\n\t\tthis.eventBus.dispatch(\"table-destroy\");\n\t\t\n\t\t//clear row data\n\t\tthis.rowManager.destroy();\n\t\t\n\t\t//clear DOM\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\telement.classList.remove(\"tabulator\");\n\n\t\tthis.externalEvents.dispatch(\"tableDestroyed\");\n\t}\n\t\n\t_detectBrowser(){\n\t\tvar ua = navigator.userAgent||navigator.vendor||window.opera;\n\t\t\n\t\tif(ua.indexOf(\"Trident\") > -1){\n\t\t\tthis.browser = \"ie\";\n\t\t\tthis.browserSlow = true;\n\t\t}else if(ua.indexOf(\"Edge\") > -1){\n\t\t\tthis.browser = \"edge\";\n\t\t\tthis.browserSlow = true;\n\t\t}else if(ua.indexOf(\"Firefox\") > -1){\n\t\t\tthis.browser = \"firefox\";\n\t\t\tthis.browserSlow = false;\n\t\t}else if(ua.indexOf(\"Mac OS\") > -1){\n\t\t\tthis.browser = \"safari\";\n\t\t\tthis.browserSlow = false;\n\t\t}else{\n\t\t\tthis.browser = \"other\";\n\t\t\tthis.browserSlow = false;\n\t\t}\n\t\t\n\t\tthis.browserMobile = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(ua)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(ua.slice(0,4));\n\t}\n\t\n\tinitGuard(func, msg){\n\t\tvar stack, line;\n\t\t\n\t\tif(this.options.debugInitialization && !this.initialized){\n\t\t\tif(!func){\n\t\t\t\tstack = new Error().stack.split(\"\\n\");\n\t\t\t\t\n\t\t\t\tline = stack[0] == \"Error\" ? stack[2] : stack[1];\n\t\t\t\t\n\t\t\t\tif(line[0] == \" \"){\n\t\t\t\t\tfunc = line.trim().split(\" \")[1].split(\".\")[1];\n\t\t\t\t}else{\n\t\t\t\t\tfunc = line.trim().split(\"@\")[0];\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tconsole.warn(\"Table Not Initialized - Calling the \" + func + \" function before the table is initialized may result in inconsistent behavior, Please wait for the `tableBuilt` event before calling this function.\" + (msg ? \" \" + msg : \"\"));\n\t\t}\n\t\t\n\t\treturn this.initialized;\n\t}\n\t\n\t////////////////// Data Handling //////////////////\n\t//block table redrawing\n\tblockRedraw(){\n\t\tthis.initGuard();\n\n\t\tthis.eventBus.dispatch(\"redraw-blocking\");\n\t\t\n\t\tthis.rowManager.blockRedraw();\n\t\tthis.columnManager.blockRedraw();\n\n\t\tthis.eventBus.dispatch(\"redraw-blocked\");\n\t}\n\t\n\t//restore table redrawing\n\trestoreRedraw(){\n\t\tthis.initGuard();\n\n\t\tthis.eventBus.dispatch(\"redraw-restoring\");\n\n\t\tthis.rowManager.restoreRedraw();\n\t\tthis.columnManager.restoreRedraw();\n\n\t\tthis.eventBus.dispatch(\"redraw-restored\");\n\t}\n\t\n\t//load data\n\tsetData(data, params, config){\n\t\tthis.initGuard(false, \"To set initial data please use the 'data' property in the table constructor.\");\n\t\t\n\t\treturn this.dataLoader.load(data, params, config, false);\n\t}\n\t\n\t//clear data\n\tclearData(){\n\t\tthis.initGuard();\n\t\t\n\t\tthis.dataLoader.blockActiveLoad();\n\t\tthis.rowManager.clearData();\n\t}\n\t\n\t//get table data array\n\tgetData(active){\n\t\treturn this.rowManager.getData(active);\n\t}\n\t\n\t//get table data array count\n\tgetDataCount(active){\n\t\treturn this.rowManager.getDataCount(active);\n\t}\n\t\n\t//replace data, keeping table in position with same sort\n\treplaceData(data, params, config){\n\t\tthis.initGuard();\n\t\t\n\t\treturn this.dataLoader.load(data, params, config, true, true);\n\t}\n\t\n\t//update table data\n\tupdateData(data){\n\t\tvar responses = 0;\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.dataLoader.blockActiveLoad();\n\t\t\t\n\t\t\tif(typeof data === \"string\"){\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\t\t\t\n\t\t\tif(data && data.length > 0){\n\t\t\t\tdata.forEach((item) => {\n\t\t\t\t\tvar row = this.rowManager.findRow(item[this.options.index]);\n\t\t\t\t\t\n\t\t\t\t\tif(row){\n\t\t\t\t\t\tresponses++;\n\t\t\t\t\t\t\n\t\t\t\t\t\trow.updateData(item)\n\t\t\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\t\t\tresponses--;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(!responses){\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch((e) => {\n\t\t\t\t\t\t\t\treject(\"Update Error - Unable to update row\", item, e);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\treject(\"Update Error - Unable to find row\", item);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\taddData(data, pos, index){\n\t\tthis.initGuard();\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.dataLoader.blockActiveLoad();\n\t\t\t\n\t\t\tif(typeof data === \"string\"){\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\t\t\t\n\t\t\tif(data){\n\t\t\t\tthis.rowManager.addRows(data, pos, index)\n\t\t\t\t\t.then((rows) => {\n\t\t\t\t\t\tvar output = [];\n\t\t\t\t\t\n\t\t\t\t\t\trows.forEach(function(row){\n\t\t\t\t\t\t\toutput.push(row.getComponent());\n\t\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t\tresolve(output);\n\t\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//update table data\n\tupdateOrAddData(data){\n\t\tvar rows = [],\n\t\tresponses = 0;\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.dataLoader.blockActiveLoad();\n\t\t\t\n\t\t\tif(typeof data === \"string\"){\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\t\t\t\n\t\t\tif(data && data.length > 0){\n\t\t\t\tdata.forEach((item) => {\n\t\t\t\t\tvar row = this.rowManager.findRow(item[this.options.index]);\n\t\t\t\t\t\n\t\t\t\t\tresponses++;\n\t\t\t\t\t\n\t\t\t\t\tif(row){\n\t\t\t\t\t\trow.updateData(item)\n\t\t\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\t\t\tresponses--;\n\t\t\t\t\t\t\t\trows.push(row.getComponent());\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(!responses){\n\t\t\t\t\t\t\t\t\tresolve(rows);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.rowManager.addRows(item)\n\t\t\t\t\t\t\t.then((newRows)=>{\n\t\t\t\t\t\t\t\tresponses--;\n\t\t\t\t\t\t\t\trows.push(newRows[0].getComponent());\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(!responses){\n\t\t\t\t\t\t\t\t\tresolve(rows);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//get row object\n\tgetRow(index){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tif(row){\n\t\t\treturn row.getComponent();\n\t\t}else{\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", index);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\t//get row object\n\tgetRowFromPosition(position){\n\t\tvar row = this.rowManager.getRowFromPosition(position);\n\t\t\n\t\tif(row){\n\t\t\treturn row.getComponent();\n\t\t}else{\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", position);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\t//delete row from table\n\tdeleteRow(index){\n\t\tvar foundRows = [];\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(!Array.isArray(index)){\n\t\t\tindex = [index];\n\t\t}\n\t\t\n\t\t//find matching rows\n\t\tfor(let item of index){\n\t\t\tlet row = this.rowManager.findRow(item, true);\n\t\t\t\n\t\t\tif(row){\n\t\t\t\tfoundRows.push(row);\n\t\t\t}else{\n\t\t\t\tconsole.error(\"Delete Error - No matching row found:\", item);\n\t\t\t\treturn Promise.reject(\"Delete Error - No matching row found\");\n\t\t\t}\n\t\t}\n\t\t\n\t\t//sort rows into correct order to ensure smooth delete from table\n\t\tfoundRows.sort((a, b) => {\n\t\t\treturn this.rowManager.rows.indexOf(a) > this.rowManager.rows.indexOf(b) ? 1 : -1;\n\t\t});\n\t\t\n\t\t//delete rows\n\t\tfoundRows.forEach((row) =>{\n\t\t\trow.delete();\n\t\t});\n\t\t\n\t\tthis.rowManager.reRenderInPosition();\n\t\t\n\t\treturn Promise.resolve();\n\t}\n\t\n\t//add row to table\n\taddRow(data, pos, index){\n\t\tthis.initGuard();\n\t\t\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\treturn this.rowManager.addRows(data, pos, index, true)\n\t\t\t.then((rows)=>{\n\t\t\t\treturn rows[0].getComponent();\n\t\t\t});\n\t}\n\t\n\t//update a row if it exists otherwise create it\n\tupdateOrAddRow(index, data){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\tif(row){\n\t\t\treturn row.updateData(data)\n\t\t\t\t.then(()=>{\n\t\t\t\t\treturn row.getComponent();\n\t\t\t\t});\n\t\t}else{\n\t\t\treturn this.rowManager.addRows(data)\n\t\t\t\t.then((rows)=>{\n\t\t\t\t\treturn rows[0].getComponent();\n\t\t\t\t});\n\t\t}\n\t}\n\t\n\t//update row data\n\tupdateRow(index, data){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\tif(row){\n\t\t\treturn row.updateData(data)\n\t\t\t\t.then(()=>{\n\t\t\t\t\treturn Promise.resolve(row.getComponent());\n\t\t\t\t});\n\t\t}else{\n\t\t\tconsole.warn(\"Update Error - No matching row found:\", index);\n\t\t\treturn Promise.reject(\"Update Error - No matching row found\");\n\t\t}\n\t}\n\t\n\t//scroll to row in DOM\n\tscrollToRow(index, position, ifVisible){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tif(row){\n\t\t\treturn this.rowManager.scrollToRow(row, position, ifVisible);\n\t\t}else{\n\t\t\tconsole.warn(\"Scroll Error - No matching row found:\", index);\n\t\t\treturn Promise.reject(\"Scroll Error - No matching row found\");\n\t\t}\n\t}\n\t\n\tmoveRow(from, to, after){\n\t\tvar fromRow = this.rowManager.findRow(from);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(fromRow){\n\t\t\tfromRow.moveToRow(to, after);\n\t\t}else{\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", from);\n\t\t}\n\t}\n\t\n\tgetRows(active){\n\t\treturn this.rowManager.getComponents(active);\t\n\t}\n\t\n\t//get position of row in table\n\tgetRowPosition(index){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tif(row){\n\t\t\treturn row.getPosition();\n\t\t}else{\n\t\t\tconsole.warn(\"Position Error - No matching row found:\", index);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\t/////////////// Column Functions  ///////////////\n\tsetColumns(definition){\n\t\tthis.initGuard(false, \"To set initial columns please use the 'columns' property in the table constructor\");\n\t\t\n\t\tthis.columnManager.setColumns(definition);\n\t}\n\t\n\tgetColumns(structured){\n\t\treturn this.columnManager.getComponents(structured);\n\t}\n\t\n\tgetColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tif(column){\n\t\t\treturn column.getComponent();\n\t\t}else{\n\t\t\tconsole.warn(\"Find Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tgetColumnDefinitions(){\n\t\treturn this.columnManager.getDefinitionTree();\n\t}\n\t\n\tshowColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\tcolumn.show();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Show Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\thideColumn(field){\n\t\tvar column = this.columnManager.findColumn(field); \n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\tcolumn.hide();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Hide Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\ttoggleColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\tif(column.visible){\n\t\t\t\tcolumn.hide();\n\t\t\t}else{\n\t\t\t\tcolumn.show();\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Column Visibility Toggle Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\taddColumn(definition, before, field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\treturn this.columnManager.addColumn(definition, before, column)\n\t\t\t.then((column) => {\n\t\t\t\treturn column.getComponent();\n\t\t\t});\n\t}\n\t\n\tdeleteColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\treturn column.delete();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Delete Error - No matching column found:\", field);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tupdateColumnDefinition(field, definition){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\treturn column.updateDefinition(definition);\n\t\t}else{\n\t\t\tconsole.warn(\"Column Update Error - No matching column found:\", field);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tmoveColumn(from, to, after){\n\t\tvar fromColumn = this.columnManager.findColumn(from),\n\t\ttoColumn = this.columnManager.findColumn(to);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(fromColumn){\n\t\t\tif(toColumn){\n\t\t\t\tthis.columnManager.moveColumn(fromColumn, toColumn, after);\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", from);\n\t\t}\n\t}\n\t\n\t//scroll to column in DOM\n\tscrollToColumn(field, position, ifVisible){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar column = this.columnManager.findColumn(field);\n\t\t\t\n\t\t\tif(column){\n\t\t\t\treturn this.columnManager.scrollToColumn(column, position, ifVisible);\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Scroll Error - No matching column found:\", field);\n\t\t\t\treturn Promise.reject(\"Scroll Error - No matching column found\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//////////// General Public Functions ////////////\n\t//redraw list without updating data\n\tredraw(force){\n\t\tthis.initGuard();\n\n\t\tthis.columnManager.redraw(force);\n\t\tthis.rowManager.redraw(force);\n\t}\n\t\n\tsetHeight(height){\n\t\tthis.options.height = isNaN(height) ? height : height + \"px\";\n\t\tthis.element.style.height = this.options.height;\n\t\tthis.rowManager.initializeRenderer();\n\t\tthis.rowManager.redraw(true);\n\t}\n\t\n\t//////////////////// Event Bus ///////////////////\n\t\n\ton(key, callback){\n\t\tthis.externalEvents.subscribe(key, callback);\n\t}\n\t\n\toff(key, callback){\n\t\tthis.externalEvents.unsubscribe(key, callback);\n\t}\n\t\n\tdispatchEvent(){\n\t\tvar args = Array.from(arguments);\n\t\targs.shift();\n\t\t\n\t\tthis.externalEvents.dispatch(...arguments);\n\t}\n\n\t//////////////////// Alerts ///////////////////\n\n\talert(contents, type){\n\t\tthis.initGuard();\n\n\t\tthis.alertManager.alert(contents, type);\n\t}\n\n\tclearAlert(){\n\t\tthis.initGuard();\n\n\t\tthis.alertManager.clear();\n\t}\n\t\n\t////////////// Extension Management //////////////\n\tmodExists(plugin, required){\n\t\tif(this.modules[plugin]){\n\t\t\treturn true;\n\t\t}else{\n\t\t\tif(required){\n\t\t\t\tconsole.error(\"Tabulator Module Not Installed: \" + plugin);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tmodule(key){\n\t\tvar mod = this.modules[key];\n\t\t\n\t\tif(!mod){\n\t\t\tconsole.error(\"Tabulator module not installed: \" + key);\n\t\t}\n\t\t\n\t\treturn mod;\n\t}\n}\n\nexport default Tabulator;\n","//tabulator with all modules installed\nimport {default as Tabulator} from './Tabulator.js';\nimport * as allModules from '../core/modules/optional.js';\n\nclass TabulatorFull extends Tabulator {\n\tstatic extendModule(){\n\t\tTabulator.initializeModuleBinder(allModules);\n\t\tTabulator._extendModule(...arguments);\n\t}\n\n\tstatic registerModule(){\n\t\tTabulator.initializeModuleBinder(allModules);\n\t\tTabulator._registerModule(...arguments);\n\t}\n\n\tconstructor(element, options, modules){\n\t\tsuper(element, options, allModules);\n\t}\n}\n\nexport default TabulatorFull;\n","export default class PseudoRow {\n\n\tconstructor (type){\n\t\tthis.type = type;\n\t\tthis.element = this._createElement();\n\t}\n\n\t_createElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-row\");\n\t\treturn el;\n\t}\n\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\n\tgetComponent(){\n\t\treturn false;\n\t}\n\n\tgetData(){\n\t\treturn {};\n\t}\n\n\tgetHeight(){\n\t\treturn this.element.outerHeight;\n\t}\n\n\tinitialize(){}\n\n\treinitialize(){}\n\n\tnormalizeHeight(){}\n\n\tgenerateCells(){}\n\n\treinitializeHeight(){}\n\n\tcalcHeight(){}\n\n\tsetCellHeight(){}\n\n\tclearCellHeight(){}\n\n\trendered(){}\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}